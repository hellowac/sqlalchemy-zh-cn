<!doctype html>
<html class="no-js" lang="zh-CN" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="索引" href="../genindex.html" /><link rel="search" title="搜索" href="../search.html" /><link rel="copyright" title="版权所有" href="../copyright.html" /><link rel="next" title="自定义 DDL" href="ddl.html" /><link rel="prev" title="列 INSERT/UPDATE 默认值" href="defaults.html" />

    <!-- Generated with Sphinx 7.2.6 and Furo 2024.08.06 -->
        <title>定义约束和索引 - SQLAlchemy 2.1 Documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/changelog.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx_paramlinks.css" />
    <link rel="stylesheet" type="text/css" href="../_static/docs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">SQLAlchemy 2.1 Documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">SQLAlchemy 2.1 Documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="搜索" name="q" aria-label="搜索">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">概述</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorial/index.html">SQLAlchemy 统一教程</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of SQLAlchemy 统一教程</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/engine.html">建立连接 - Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/dbapi_transactions.html">使用事务和DBAPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/metadata.html">使用数据库元数据</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../tutorial/data.html">处理数据</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of 处理数据</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/data_insert.html">使用 INSERT 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/data_select.html">使用 SELECT 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/data_update.html">使用 UPDATE 和 DELETE 语句</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/orm_data_manipulation.html">使用 ORM 进行数据操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/orm_related_objects.html">使用 ORM 相关对象</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/further_reading.html">进一步阅读</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../orm/index.html">SQLAlchemy ORM</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of SQLAlchemy ORM</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../orm/quickstart.html">ORM 快速入门</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../orm/mapper_config.html">ORM 映射类配置</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of ORM 映射类配置</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../orm/mapping_styles.html">ORM 映射类概述</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../orm/declarative_mapping.html">使用声明式映射类</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of 使用声明式映射类</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../orm/declarative_styles.html">声明式映射风格</a></li>
<li class="toctree-l4"><a class="reference internal" href="../orm/declarative_tables.html">声明式的表配置</a></li>
<li class="toctree-l4"><a class="reference internal" href="../orm/declarative_config.html">使用声明式映射器配置</a></li>
<li class="toctree-l4"><a class="reference internal" href="../orm/declarative_mixins.html">使用 Mixins 组合映射层次结构</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../orm/dataclasses.html">与dataclass和attrs的集成</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/mapped_sql_expr.html">SQL 表达式作为映射属性</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/mapped_attributes.html">更改Attribute的行为</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/composites.html">复合列类型</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/inheritance.html">映射类继承层次结构</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/nonstandard_mappings.html">非传统映射</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/versioning.html">配置版本计数器</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/mapping_api.html">类映射 API</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../orm/scalar_mapping.html">映射 SQL 表达式</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of 映射 SQL 表达式</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../orm/mapping_columns.html">映射表格列</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../orm/relationships.html">关系配置</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of 关系配置</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../orm/basic_relationships.html">基本关系模式</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/self_referential.html">邻接表关系</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/join_conditions.html">配置关系连接方式</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/large_collections.html">使用大型集合</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/collection_api.html">集合自定义和 API 详细信息</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/relationship_persistence.html">特殊关系的持久化模式</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/backref.html">使用旧版“backref”关系参数</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/relationship_api.html">关系 API</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../orm/queryguide/index.html">ORM 查询指南</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of ORM 查询指南</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/select.html">为 ORM 映射类编写 SELECT 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/inheritance.html">为继承映射编写 SELECT 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/dml.html">启用 ORM 的 INSERT、UPDATE 和 DELETE 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/columns.html">列加载选项</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/relationships.html">关系加载技术</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/api.html">用于查询的 ORM API 功能</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/query.html">旧式查询 API</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../orm/session.html">使用会话</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of 使用会话</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../orm/session_basics.html">会话基础知识</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/session_state_management.html">状态管理</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/cascades.html">级联</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/session_transaction.html">事务和连接管理</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/persistence_techniques.html">附加持久性技术</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/contextual.html">上下文/线程本地会话</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/session_events.html">使用事件跟踪查询、对象和会话更改</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/session_api.html">会话 API</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../orm/extending.html">事件和内部</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of 事件和内部</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../orm/events.html">ORM 事件</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/internals.html">ORM 内部</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/exceptions.html">ORM 异常</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../orm/extensions/index.html">ORM 扩展</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of ORM 扩展</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/asyncio.html">异步 I/O (asyncio)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/associationproxy.html">关联代理</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/automap.html">自动映射</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/baked.html">烘焙查询</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/declarative/index.html">声明式扩展</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/mutable.html">突变追踪</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/orderinglist.html">排序列表</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/horizontal_shard.html">水平分片</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/hybrid.html">混合属性</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/indexable.html">Indexable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/instrumentation.html">替代类检测</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../orm/examples.html">核心和 ORM 示例</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">SQLAlchemy Core</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of SQLAlchemy Core</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="expression_api.html">SQL 语句和表达式 API</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of SQL 语句和表达式 API</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="sqlelement.html">列元素和表达式</a></li>
<li class="toctree-l3"><a class="reference internal" href="operators.html">操作符参考</a></li>
<li class="toctree-l3"><a class="reference internal" href="selectable.html">SELECT 和相关构造</a></li>
<li class="toctree-l3"><a class="reference internal" href="dml.html">插入,更新,删除</a></li>
<li class="toctree-l3"><a class="reference internal" href="functions.html">SQL 和 范型函数</a></li>
<li class="toctree-l3"><a class="reference internal" href="compiler.html">自定义 SQL 构造和编译扩展</a></li>
<li class="toctree-l3"><a class="reference internal" href="serializer.html">表达式序列化器扩展</a></li>
<li class="toctree-l3"><a class="reference internal" href="foundation.html">SQL 表达式语言基础构造</a></li>
<li class="toctree-l3"><a class="reference internal" href="visitors.html">访问者和遍历实用程序</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="schema.html">Schema 定义语言</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of Schema 定义语言</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="metadata.html">使用元数据描述数据库</a></li>
<li class="toctree-l3"><a class="reference internal" href="reflection.html">反映数据库对象</a></li>
<li class="toctree-l3"><a class="reference internal" href="defaults.html">列 INSERT/UPDATE 默认值</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">定义约束和索引</a></li>
<li class="toctree-l3"><a class="reference internal" href="ddl.html">自定义 DDL</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="types.html">SQL 数据类型对象</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of SQL 数据类型对象</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="type_basics.html">类型层次结构</a></li>
<li class="toctree-l3"><a class="reference internal" href="custom_types.html">自定义类型</a></li>
<li class="toctree-l3"><a class="reference internal" href="type_api.html">基本类型 API</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="engines_connections.html">Engine和Connection的使用</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle navigation of Engine和Connection的使用</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="engines.html">Engine 配置</a></li>
<li class="toctree-l3"><a class="reference internal" href="connections.html">使用Engines和Connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="pooling.html">连接池</a></li>
<li class="toctree-l3"><a class="reference internal" href="events.html">核心事件</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="api_basics.html">Core API 基础</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle navigation of Core API 基础</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="event.html">事件</a></li>
<li class="toctree-l3"><a class="reference internal" href="inspection.html">运行时审查 API</a></li>
<li class="toctree-l3"><a class="reference internal" href="exceptions.html">Core 异常</a></li>
<li class="toctree-l3"><a class="reference internal" href="internals.html">Core 内部</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../dialects/index.html">Dialects</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle navigation of Dialects</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../dialects/postgresql.html">PostgreSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dialects/mysql.html">MySQL 和 MariaDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dialects/sqlite.html">SQLite</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dialects/oracle.html">Oracle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dialects/mssql.html">Microsoft SQL Server</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../faq/index.html">常见问题</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle navigation of 常见问题</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../faq/installation.html">安装</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/connections.html">连接 / 引擎</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/metadata_schema.html">元数据 / Schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/sqlexpressions.html">SQL 表达式</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/ormconfiguration.html">ORM 配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/performance.html">性能</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/sessions.html">会话 / 查询</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/thirdparty.html">第三方包集成问题</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../errors.html">错误消息</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../changelog/index.html">变更和迁移</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle navigation of 变更和迁移</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_21.html">SQLAlchemy 2.1 有什么新功能？</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_21.html">2.1 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_20.html">2.0 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_14.html">1.4 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_13.html">1.3 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_12.html">1.2 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_11.html">1.1 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_10.html">1.0 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_09.html">0.9 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_08.html">0.8 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_07.html">0.7 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_06.html">0.6 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_05.html">0.5 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_04.html">0.4 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_03.html">0.3 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_02.html">0.2 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_01.html">0.1 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_20.html">SQLAlchemy 2.0 - Major Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/whatsnew_20.html">What’s New in SQLAlchemy 2.0?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_14.html">What’s New in SQLAlchemy 1.4?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_13.html">What’s New in SQLAlchemy 1.3?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_12.html">What’s New in SQLAlchemy 1.2?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_11.html">What’s New in SQLAlchemy 1.1?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_10.html">What’s New in SQLAlchemy 1.0?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_09.html">What’s New in SQLAlchemy 0.9?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_08.html">What’s New in SQLAlchemy 0.8?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_07.html">What’s New in SQLAlchemy 0.7?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_06.html">What’s New in SQLAlchemy 0.6?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_05.html">What’s new in SQLAlchemy 0.5?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_04.html">What’s new in SQLAlchemy 0.4?</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          

<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="metadata-constraints">
<span id="metadata-constraints-toplevel"></span><span id="id1"></span><h1>定义约束和索引<a class="headerlink" href="#metadata-constraints" title="Link to this heading">¶</a></h1>
<p>Defining Constraints and Indexes</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--1">中文</label><div class="tab-content docutils container">
<p>本节将讨论SQL <em>约束</em> (<a class="reference internal" href="../glossary.html#term-constraints"><span class="xref std std-term">constraints</span></a>) 和索引。在SQLAlchemy中，关键类包括 <a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a> 和 <a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>。</p>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--2">英文</label><div class="tab-content docutils container">
<p>This section will discuss SQL <a class="reference internal" href="../glossary.html#term-constraints"><span class="xref std std-term">constraints</span></a> and indexes.  In SQLAlchemy the key classes include <a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a> and <a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>.</p>
</div>
</div>
<section id="metadata-foreignkeys">
<span id="id2"></span><h2>定义外键<a class="headerlink" href="#metadata-foreignkeys" title="Link to this heading">¶</a></h2>
<p>Defining Foreign Keys</p>
<p>A <em>foreign key</em> in SQL is a table-level construct that constrains one or more
columns in that table to only allow values that are present in a different set
of columns, typically but not always located on a different table. We call the
columns which are constrained the <em>foreign key</em> columns and the columns which
they are constrained towards the <em>referenced</em> columns. The referenced columns
almost always define the primary key for their owning table, though there are
exceptions to this. The foreign key is the “joint” that connects together
pairs of rows which have a relationship with each other, and SQLAlchemy
assigns very deep importance to this concept in virtually every area of its
operation.</p>
<p>In SQLAlchemy as well as in DDL, foreign key constraints can be defined as
additional attributes within the table clause, or for single-column foreign
keys they may optionally be specified within the definition of a single
column. The single column foreign key is more common, and at the column level
is specified by constructing a <a class="reference internal" href="#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> object
as an argument to a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> object:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">user_preference</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;user_preference&quot;</span><span class="p">,</span>
    <span class="n">metadata_obj</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;pref_id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;user_id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;user.user_id&quot;</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;pref_name&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;pref_value&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">100</span><span class="p">)),</span>
<span class="p">)</span></pre></div>
</div>
<p>Above, we define a new table <code class="docutils literal notranslate"><span class="pre">user_preference</span></code> for which each row must
contain a value in the <code class="docutils literal notranslate"><span class="pre">user_id</span></code> column that also exists in the <code class="docutils literal notranslate"><span class="pre">user</span></code>
table’s <code class="docutils literal notranslate"><span class="pre">user_id</span></code> column.</p>
<p>The argument to <a class="reference internal" href="#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> is most commonly a
string of the form <em>&lt;tablename&gt;.&lt;columnname&gt;</em>, or for a table in a remote
schema or “owner” of the form <em>&lt;schemaname&gt;.&lt;tablename&gt;.&lt;columnname&gt;</em>. It may
also be an actual <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> object, which as we’ll
see later is accessed from an existing <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
object via its <code class="docutils literal notranslate"><span class="pre">c</span></code> collection:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">user_id</span><span class="p">)</span></pre></div>
</div>
<p>The advantage to using a string is that the in-python linkage between <code class="docutils literal notranslate"><span class="pre">user</span></code>
and <code class="docutils literal notranslate"><span class="pre">user_preference</span></code> is resolved only when first needed, so that table
objects can be easily spread across multiple modules and defined in any order.</p>
<p>Foreign keys may also be defined at the table level, using the
<a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a> object. This object can
describe a single- or multi-column foreign key. A multi-column foreign key is
known as a <em>composite</em> foreign key, and almost always references a table that
has a composite primary key. Below we define a table <code class="docutils literal notranslate"><span class="pre">invoice</span></code> which has a
composite primary key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">invoice</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;invoice&quot;</span><span class="p">,</span>
    <span class="n">metadata_obj</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;invoice_id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;ref_num&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">60</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
<p>And then a table <code class="docutils literal notranslate"><span class="pre">invoice_item</span></code> with a composite foreign key referencing
<code class="docutils literal notranslate"><span class="pre">invoice</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">invoice_item</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;invoice_item&quot;</span><span class="p">,</span>
    <span class="n">metadata_obj</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;item_id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;item_name&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">60</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;invoice_id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;ref_num&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
    <span class="n">ForeignKeyConstraint</span><span class="p">(</span>
        <span class="p">[</span><span class="s2">&quot;invoice_id&quot;</span><span class="p">,</span> <span class="s2">&quot;ref_num&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;invoice.invoice_id&quot;</span><span class="p">,</span> <span class="s2">&quot;invoice.ref_num&quot;</span><span class="p">]</span>
    <span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
<p>It’s important to note that the
<a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a> is the only way to define a
composite foreign key. While we could also have placed individual
<a class="reference internal" href="#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> objects on both the
<code class="docutils literal notranslate"><span class="pre">invoice_item.invoice_id</span></code> and <code class="docutils literal notranslate"><span class="pre">invoice_item.ref_num</span></code> columns, SQLAlchemy
would not be aware that these two values should be paired together - it would
be two individual foreign key constraints instead of a single composite
foreign key referencing two columns.</p>
<section id="alter">
<span id="use-alter"></span><h3>通过 ALTER 创建/删除外键约束<a class="headerlink" href="#alter" title="Link to this heading">¶</a></h3>
<p>Creating/Dropping Foreign Key Constraints via ALTER</p>
<p>The behavior we’ve seen in tutorials and elsewhere involving
foreign keys with DDL illustrates that the constraints are typically
rendered “inline” within the CREATE TABLE statement, such as:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">addresses</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="n">user_id</span><span class="w"> </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="n">email_address</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">),</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">user_id_fk</span><span class="w"> </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="p">)</span></pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">CONSTRAINT</span> <span class="pre">..</span> <span class="pre">FOREIGN</span> <span class="pre">KEY</span></code> directive is used to create the constraint
in an “inline” fashion within the CREATE TABLE definition.   The
<a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.create_all" title="sqlalchemy.schema.MetaData.create_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.create_all()</span></code></a> and <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.drop_all" title="sqlalchemy.schema.MetaData.drop_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.drop_all()</span></code></a> methods do
this by default, using a topological sort of all the <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects
involved such that tables are created and dropped in order of their foreign
key dependency (this sort is also available via the
<a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.sorted_tables" title="sqlalchemy.schema.MetaData.sorted_tables"><code class="xref py py-attr docutils literal notranslate"><span class="pre">MetaData.sorted_tables</span></code></a> accessor).</p>
<p>This approach can’t work when two or more foreign key constraints are
involved in a “dependency cycle”, where a set of tables
are mutually dependent on each other, assuming the backend enforces foreign
keys (always the case except on SQLite, MySQL/MyISAM).   The methods will
therefore break out constraints in such a cycle into separate ALTER
statements, on all backends other than SQLite which does not support
most forms of ALTER.  Given a schema like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">node</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;node&quot;</span><span class="p">,</span>
    <span class="n">metadata_obj</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;node_id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;primary_element&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;element.element_id&quot;</span><span class="p">)),</span>
<span class="p">)</span>

<span class="n">element</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;element&quot;</span><span class="p">,</span>
    <span class="n">metadata_obj</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;element_id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;parent_node_id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">ForeignKeyConstraint</span><span class="p">(</span>
        <span class="p">[</span><span class="s2">&quot;parent_node_id&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;node.node_id&quot;</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;fk_element_parent_node_id&quot;</span>
    <span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
<p>When we call upon <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.create_all" title="sqlalchemy.schema.MetaData.create_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.create_all()</span></code></a> on a backend such as the
PostgreSQL backend, the cycle between these two tables is resolved and the
constraints are created separately:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
<span class="go">...     metadata_obj.create_all(conn, checkfirst=False)</span>
<div class='show_sql'><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">element_id</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="n">parent_node_id</span><span class="w"> </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">element_id</span><span class="p">)</span>
<span class="p">)</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">node_id</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="n">primary_element</span><span class="w"> </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>
<span class="p">)</span>

<span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">fk_element_parent_node_id</span>
<span class="w">    </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="p">(</span><span class="n">parent_node_id</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="p">(</span><span class="n">primary_element</span><span class="p">)</span>
<span class="w">    </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="p">(</span><span class="n">element_id</span><span class="p">)</span>
</div></pre></div>
</div>
<p>In order to emit DROP for these tables, the same logic applies, however
note here that in SQL, to emit DROP CONSTRAINT requires that the constraint
has a name.  In the case of the <code class="docutils literal notranslate"><span class="pre">'node'</span></code> table above, we haven’t named
this constraint; the system will therefore attempt to emit DROP for only
those constraints that are named:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
<span class="go">...     metadata_obj.drop_all(conn, checkfirst=False)</span>
<div class='show_sql'><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="k">DROP</span><span class="w"> </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">fk_element_parent_node_id</span>
<span class="k">DROP</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">node</span>
<span class="k">DROP</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">element</span>
</div></pre></div>
</div>
<p>In the case where the cycle cannot be resolved, such as if we hadn’t applied
a name to either constraint here, we will receive the following error:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sqlalchemy.exc.CircularDependencyError: Can&#39;t sort tables for DROP;
an unresolvable foreign key dependency exists between tables:
element, node.  Please ensure that the ForeignKey and ForeignKeyConstraint
objects involved in the cycle have names so that they can be dropped
using DROP CONSTRAINT.</pre></div>
</div>
<p>This error only applies to the DROP case as we can emit “ADD CONSTRAINT”
in the CREATE case without a name; the database typically assigns one
automatically.</p>
<p>The <a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.params.use_alter" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">ForeignKeyConstraint.use_alter</span></code></a> and
<a class="reference internal" href="#sqlalchemy.schema.ForeignKey.params.use_alter" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">ForeignKey.use_alter</span></code></a> keyword arguments can be used
to manually resolve dependency cycles.  We can add this flag only to
the <code class="docutils literal notranslate"><span class="pre">'element'</span></code> table as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">element</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;element&quot;</span><span class="p">,</span>
    <span class="n">metadata_obj</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;element_id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;parent_node_id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">ForeignKeyConstraint</span><span class="p">(</span>
        <span class="p">[</span><span class="s2">&quot;parent_node_id&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;node.node_id&quot;</span><span class="p">],</span>
        <span class="n">use_alter</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;fk_element_parent_node_id&quot;</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
<p>in our CREATE DDL we will see the ALTER statement only for this constraint,
and not the other one:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
<span class="go">...     metadata_obj.create_all(conn, checkfirst=False)</span>
<div class='show_sql'><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">element_id</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="n">parent_node_id</span><span class="w"> </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">element_id</span><span class="p">)</span>
<span class="p">)</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">node_id</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="n">primary_element</span><span class="w"> </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">node_id</span><span class="p">),</span>
<span class="w">    </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="p">(</span><span class="n">primary_element</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="p">(</span><span class="n">element_id</span><span class="p">)</span>
<span class="p">)</span>

<span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">fk_element_parent_node_id</span>
<span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="p">(</span><span class="n">parent_node_id</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>
</div></pre></div>
</div>
<p><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.params.use_alter" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">ForeignKeyConstraint.use_alter</span></code></a> and
<a class="reference internal" href="#sqlalchemy.schema.ForeignKey.params.use_alter" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">ForeignKey.use_alter</span></code></a>, when used in conjunction with a drop
operation, will require that the constraint is named, else an error
like the following is generated:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sqlalchemy.exc.CompileError: Can&#39;t emit DROP CONSTRAINT for constraint
ForeignKeyConstraint(...); it has no name</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#constraint-naming-conventions"><span class="std std-ref">配置约束命名约定</span></a></p>
<p><a class="reference internal" href="ddl.html#sqlalchemy.schema.sort_tables_and_constraints" title="sqlalchemy.schema.sort_tables_and_constraints"><code class="xref py py-func docutils literal notranslate"><span class="pre">sort_tables_and_constraints()</span></code></a></p>
</div>
</section>
<section id="on-update-on-delete">
<span id="id3"></span><h3>ON UPDATE 和 ON DELETE<a class="headerlink" href="#on-update-on-delete" title="Link to this heading">¶</a></h3>
<p>ON UPDATE and ON DELETE</p>
<p>Most databases support <em>cascading</em> of foreign key values, that is the when a
parent row is updated the new value is placed in child rows, or when the
parent row is deleted all corresponding child rows are set to null or deleted.
In data definition language these are specified using phrases like “ON UPDATE
CASCADE”, “ON DELETE CASCADE”, and “ON DELETE SET NULL”, corresponding to
foreign key constraints. The phrase after “ON UPDATE” or “ON DELETE” may also
allow other phrases that are specific to the database in use. The
<a class="reference internal" href="#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> and
<a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a> objects support the
generation of this clause via the <code class="docutils literal notranslate"><span class="pre">onupdate</span></code> and <code class="docutils literal notranslate"><span class="pre">ondelete</span></code> keyword
arguments. The value is any string which will be output after the appropriate
“ON UPDATE” or “ON DELETE” phrase:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">child</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;child&quot;</span><span class="p">,</span>
    <span class="n">metadata_obj</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span>
        <span class="s2">&quot;id&quot;</span><span class="p">,</span>
        <span class="n">Integer</span><span class="p">,</span>
        <span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;parent.id&quot;</span><span class="p">,</span> <span class="n">onupdate</span><span class="o">=</span><span class="s2">&quot;CASCADE&quot;</span><span class="p">,</span> <span class="n">ondelete</span><span class="o">=</span><span class="s2">&quot;CASCADE&quot;</span><span class="p">),</span>
        <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span>

<span class="n">composite</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;composite&quot;</span><span class="p">,</span>
    <span class="n">metadata_obj</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;rev_id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;note_id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">ForeignKeyConstraint</span><span class="p">(</span>
        <span class="p">[</span><span class="s2">&quot;rev_id&quot;</span><span class="p">,</span> <span class="s2">&quot;note_id&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;revisions.id&quot;</span><span class="p">,</span> <span class="s2">&quot;revisions.note_id&quot;</span><span class="p">],</span>
        <span class="n">onupdate</span><span class="o">=</span><span class="s2">&quot;CASCADE&quot;</span><span class="p">,</span>
        <span class="n">ondelete</span><span class="o">=</span><span class="s2">&quot;SET NULL&quot;</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
<p>Note that some backends have special requirements for cascades to function:</p>
<ul class="simple">
<li><p>MySQL / MariaDB - the <code class="docutils literal notranslate"><span class="pre">InnoDB</span></code> storage engine should be used (this is
typically the default in modern databases)</p></li>
<li><p>SQLite - constraints are not enabled by default.
See <a class="reference internal" href="../dialects/sqlite.html#sqlite-foreign-keys"><span class="std std-ref">Foreign Key Support</span></a></p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p>For background on integration of <code class="docutils literal notranslate"><span class="pre">ON</span> <span class="pre">DELETE</span> <span class="pre">CASCADE</span></code> with
ORM <a class="reference internal" href="../orm/relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> constructs, see the following sections:</p>
<p><a class="reference internal" href="../orm/cascades.html#passive-deletes"><span class="std std-ref">使用具有 ORM 关系的外键 ON DELETE 级联</span></a></p>
<p><a class="reference internal" href="../orm/cascades.html#passive-deletes-many-to-many"><span class="std std-ref">使用具有多对多关系的外键 ON DELETE</span></a></p>
<p><a class="reference internal" href="../dialects/postgresql.html#postgresql-constraint-options"><span class="std std-ref">PostgreSQL Constraint Options</span></a> - indicates additional options
available for foreign key cascades such as column lists</p>
<p><a class="reference internal" href="../dialects/sqlite.html#sqlite-foreign-keys"><span class="std std-ref">Foreign Key Support</span></a> - background on enabling foreign key support
with SQLite</p>
</div>
</section>
</section>
<section id="unique">
<span id="schema-unique-constraint"></span><h2>UNIQUE 约束<a class="headerlink" href="#unique" title="Link to this heading">¶</a></h2>
<p>UNIQUE Constraint</p>
<p>Unique constraints can be created anonymously on a single column using the
<code class="docutils literal notranslate"><span class="pre">unique</span></code> keyword on <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>. Explicitly named
unique constraints and/or those with multiple columns are created via the
<a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniqueConstraint</span></code></a> table-level construct.</p>
<div class="highlight-python+sql notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">UniqueConstraint</span>

<span class="n">metadata_obj</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span>
<span class="n">mytable</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;mytable&quot;</span><span class="p">,</span>
    <span class="n">metadata_obj</span><span class="p">,</span>
    <span class="c1"># per-column anonymous unique constraint</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;col1&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;col2&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;col3&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="c1"># explicit/composite unique constraint.  &#39;name&#39; is optional.</span>
    <span class="n">UniqueConstraint</span><span class="p">(</span><span class="s2">&quot;col2&quot;</span><span class="p">,</span> <span class="s2">&quot;col3&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;uix_1&quot;</span><span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
</section>
<section id="check">
<h2>CHECK 约束<a class="headerlink" href="#check" title="Link to this heading">¶</a></h2>
<p>CHECK Constraint</p>
<p>Check constraints can be named or unnamed and can be created at the Column or
Table level, using the <a class="reference internal" href="#sqlalchemy.schema.CheckConstraint" title="sqlalchemy.schema.CheckConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckConstraint</span></code></a> construct.
The text of the check constraint is passed directly through to the database,
so there is limited “database independent” behavior. Column level check
constraints generally should only refer to the column to which they are
placed, while table level constraints can refer to any columns in the table.</p>
<p>Note that some databases do not actively support check constraints such as
older versions of MySQL (prior to 8.0.16).</p>
<div class="highlight-python+sql notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">CheckConstraint</span>

<span class="n">metadata_obj</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span>
<span class="n">mytable</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;mytable&quot;</span><span class="p">,</span>
    <span class="n">metadata_obj</span><span class="p">,</span>
    <span class="c1"># per-column CHECK constraint</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;col1&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">CheckConstraint</span><span class="p">(</span><span class="s2">&quot;col1&gt;5&quot;</span><span class="p">)),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;col2&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;col3&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="c1"># table level CHECK constraint.  &#39;name&#39; is optional.</span>
    <span class="n">CheckConstraint</span><span class="p">(</span><span class="s2">&quot;col2 &gt; col3 + 5&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;check1&quot;</span><span class="p">),</span>
<span class="p">)</span>

<span class="n">mytable</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>
<div class='show_sql'><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">mytable</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">col1</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w">  </span><span class="k">CHECK</span><span class="w"> </span><span class="p">(</span><span class="n">col1</span><span class="o">&gt;</span><span class="mi">5</span><span class="p">),</span>
<span class="w">    </span><span class="n">col2</span><span class="w"> </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="n">col3</span><span class="w"> </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">check1</span><span class="w">  </span><span class="k">CHECK</span><span class="w"> </span><span class="p">(</span><span class="n">col2</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">col3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span>
<span class="p">)</span>
</div></pre></div>
</div>
</section>
<section id="primary-key">
<h2>PRIMARY KEY 约束<a class="headerlink" href="#primary-key" title="Link to this heading">¶</a></h2>
<p>PRIMARY KEY Constraint</p>
<p>The primary key constraint of any <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> object is implicitly
present, based on the <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects that are marked with the
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.primary_key" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.primary_key</span></code></a> flag.   The <a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">PrimaryKeyConstraint</span></code></a>
object provides explicit access to this constraint, which includes the
option of being configured directly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">PrimaryKeyConstraint</span>

<span class="n">my_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;mytable&quot;</span><span class="p">,</span>
    <span class="n">metadata_obj</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;version_id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">)),</span>
    <span class="n">PrimaryKeyConstraint</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;version_id&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;mytable_pk&quot;</span><span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">PrimaryKeyConstraint</span></code></a> - detailed API documentation.</p>
</div>
</section>
<section id="orm">
<h2>使用声明性 ORM 扩展时设置约束<a class="headerlink" href="#orm" title="Link to this heading">¶</a></h2>
<p>Setting up Constraints when using the Declarative ORM Extension</p>
<p>The <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> is the SQLAlchemy Core construct that allows one to define
table metadata, which among other things can be used by the SQLAlchemy ORM
as a target to map a class.  The <a class="reference internal" href="../orm/extensions/declarative/index.html#declarative-toplevel"><span class="std std-ref">Declarative</span></a>
extension allows the <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> object to be created automatically, given
the contents of the table primarily as a mapping of <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects.</p>
<p>To apply table-level constraint objects such as <a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a>
to a table defined using Declarative, use the <code class="docutils literal notranslate"><span class="pre">__table_args__</span></code> attribute,
described at <a class="reference internal" href="../orm/extensions/declarative/table_config.html#declarative-table-args"><span class="std std-ref">Table Configuration</span></a>.</p>
</section>
<section id="constraint-naming-conventions">
<span id="id4"></span><h2>配置约束命名约定<a class="headerlink" href="#constraint-naming-conventions" title="Link to this heading">¶</a></h2>
<p>Configuring Constraint Naming Conventions</p>
<p>Relational databases typically assign explicit names to all constraints and
indexes.  In the common case that a table is created using <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code>
where constraints such as CHECK, UNIQUE, and PRIMARY KEY constraints are
produced inline with the table definition, the database usually has a system
in place in which names are automatically assigned to these constraints, if
a name is not otherwise specified.  When an existing database table is altered
in a database using a command such as <code class="docutils literal notranslate"><span class="pre">ALTER</span> <span class="pre">TABLE</span></code>, this command typically
needs to specify explicit names for new constraints as well as be able to
specify the name of an existing constraint that is to be dropped or modified.</p>
<p>Constraints can be named explicitly using the <a class="reference internal" href="#sqlalchemy.schema.Constraint.params.name" title="sqlalchemy.schema.Constraint"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Constraint.name</span></code></a> parameter,
and for indexes the <a class="reference internal" href="#sqlalchemy.schema.Index.params.name" title="sqlalchemy.schema.Index"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Index.name</span></code></a> parameter.  However, in the
case of constraints this parameter is optional.  There are also the use
cases of using the <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.unique" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.unique</span></code></a> and <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.index" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.index</span></code></a>
parameters which create <a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniqueConstraint</span></code></a> and <a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> objects
without an explicit name being specified.</p>
<p>The use case of alteration of existing tables and constraints can be handled
by schema migration tools such as <a class="reference external" href="https://alembic.sqlalchemy.org/">Alembic</a>.
However, neither Alembic nor SQLAlchemy currently create names for constraint
objects where the name is otherwise unspecified, leading to the case where
being able to alter existing constraints means that one must reverse-engineer
the naming system used by the relational database to auto-assign names,
or that care must be taken to ensure that all constraints are named.</p>
<p>In contrast to having to assign explicit names to all <a class="reference internal" href="#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a>
and <a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> objects, automated naming schemes can be constructed
using events.  This approach has the advantage that constraints will get
a consistent naming scheme without the need for explicit name parameters
throughout the code, and also that the convention takes place just as well
for those constraints and indexes produced by the <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.unique" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.unique</span></code></a>
and <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.index" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.index</span></code></a> parameters.  As of SQLAlchemy 0.9.2 this
event-based approach is included, and can be configured using the argument
<a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.params.naming_convention" title="sqlalchemy.schema.MetaData"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">MetaData.naming_convention</span></code></a>.</p>
<section id="id5">
<h3>为元数据集合配置命名约定<a class="headerlink" href="#id5" title="Link to this heading">¶</a></h3>
<p>Configuring a Naming Convention for a MetaData Collection</p>
<p><a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.params.naming_convention" title="sqlalchemy.schema.MetaData"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">MetaData.naming_convention</span></code></a> refers to a dictionary which accepts
the <a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> class or individual <a class="reference internal" href="#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a> classes as keys,
and Python string templates as values.   It also accepts a series of
string-codes as alternative keys, <code class="docutils literal notranslate"><span class="pre">&quot;fk&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;pk&quot;</span></code>,
<code class="docutils literal notranslate"><span class="pre">&quot;ix&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;ck&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;uq&quot;</span></code> for foreign key, primary key, index,
check, and unique constraint, respectively.  The string templates in this
dictionary are used whenever a constraint or index is associated with this
<a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> object that does not have an existing name given (including
one exception case where an existing name can be further embellished).</p>
<p>An example naming convention that suits basic cases is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">convention</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;ix&quot;</span><span class="p">:</span> <span class="s2">&quot;ix_</span><span class="si">%(column_0_label)s</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="s2">&quot;uq&quot;</span><span class="p">:</span> <span class="s2">&quot;uq_</span><span class="si">%(table_name)s</span><span class="s2">_</span><span class="si">%(column_0_name)s</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ck&quot;</span><span class="p">:</span> <span class="s2">&quot;ck_</span><span class="si">%(table_name)s</span><span class="s2">_</span><span class="si">%(constraint_name)s</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="s2">&quot;fk&quot;</span><span class="p">:</span> <span class="s2">&quot;fk_</span><span class="si">%(table_name)s</span><span class="s2">_</span><span class="si">%(column_0_name)s</span><span class="s2">_</span><span class="si">%(referred_table_name)s</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="s2">&quot;pk&quot;</span><span class="p">:</span> <span class="s2">&quot;pk_</span><span class="si">%(table_name)s</span><span class="s2">&quot;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">metadata_obj</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">(</span><span class="n">naming_convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span></pre></div>
</div>
<p>The above convention will establish names for all constraints within
the target <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> collection.
For example, we can observe the name produced when we create an unnamed
<a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniqueConstraint</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">user_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;user&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">metadata_obj</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">UniqueConstraint</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">list</span><span class="p">(</span><span class="n">user_table</span><span class="o">.</span><span class="n">constraints</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;uq_user_name&#39;</span></pre></div>
</div>
<p>This same feature takes effect even if we just use the <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.unique" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.unique</span></code></a>
flag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">user_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;user&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">metadata_obj</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">list</span><span class="p">(</span><span class="n">user_table</span><span class="o">.</span><span class="n">constraints</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;uq_user_name&#39;</span></pre></div>
</div>
<p>A key advantage to the naming convention approach is that the names are established
at Python construction time, rather than at DDL emit time.  The effect this has
when using Alembic’s <code class="docutils literal notranslate"><span class="pre">--autogenerate</span></code> feature is that the naming convention
will be explicit when a new migration script is generated:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">upgrade</span><span class="p">():</span>
    <span class="n">op</span><span class="o">.</span><span class="n">create_unique_constraint</span><span class="p">(</span><span class="s2">&quot;uq_user_name&quot;</span><span class="p">,</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span></pre></div>
</div>
<p>The above <code class="docutils literal notranslate"><span class="pre">&quot;uq_user_name&quot;</span></code> string was copied from the <a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniqueConstraint</span></code></a>
object that <code class="docutils literal notranslate"><span class="pre">--autogenerate</span></code> located in our metadata.</p>
<p>The tokens available include <code class="docutils literal notranslate"><span class="pre">%(table_name)s</span></code>, <code class="docutils literal notranslate"><span class="pre">%(referred_table_name)s</span></code>,
<code class="docutils literal notranslate"><span class="pre">%(column_0_name)s</span></code>, <code class="docutils literal notranslate"><span class="pre">%(column_0_label)s</span></code>, <code class="docutils literal notranslate"><span class="pre">%(column_0_key)s</span></code>,
<code class="docutils literal notranslate"><span class="pre">%(referred_column_0_name)s</span></code>, and  <code class="docutils literal notranslate"><span class="pre">%(constraint_name)s</span></code>, as well as
multiple-column versions of each including <code class="docutils literal notranslate"><span class="pre">%(column_0N_name)s</span></code>,
<code class="docutils literal notranslate"><span class="pre">%(column_0_N_name)s</span></code>,  <code class="docutils literal notranslate"><span class="pre">%(referred_column_0_N_name)s</span></code> which render all
column names separated with or without an underscore.  The documentation for
<a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.params.naming_convention" title="sqlalchemy.schema.MetaData"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">MetaData.naming_convention</span></code></a> has further detail on each  of these
conventions.</p>
</section>
<section id="constraint-default-naming-convention">
<span id="id6"></span><h3>默认命名约定<a class="headerlink" href="#constraint-default-naming-convention" title="Link to this heading">¶</a></h3>
<p>The Default Naming Convention</p>
<p>The default value for <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.params.naming_convention" title="sqlalchemy.schema.MetaData"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">MetaData.naming_convention</span></code></a> handles
the long-standing SQLAlchemy behavior of assigning a name to a <a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>
object that is created using the <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.index" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.index</span></code></a> parameter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.sql.schema</span><span class="w"> </span><span class="kn">import</span> <span class="n">DEFAULT_NAMING_CONVENTION</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">DEFAULT_NAMING_CONVENTION</span>
<span class="go">immutabledict({&#39;ix&#39;: &#39;ix_%(column_0_label)s&#39;})</span></pre></div>
</div>
</section>
<section id="id7">
<h3>长名称截断<a class="headerlink" href="#id7" title="Link to this heading">¶</a></h3>
<p>Truncation of Long Names</p>
<p>When a generated name, particularly those that use the multiple-column tokens,
is too long for the identifier length limit of the target database
(for example, PostgreSQL has a limit of 63 characters), the name will be
deterministically truncated using a 4-character suffix based on the md5
hash of the long name.  For example, the naming convention below will
generate very long names given the column names in use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">metadata_obj</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">(</span>
    <span class="n">naming_convention</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;uq&quot;</span><span class="p">:</span> <span class="s2">&quot;uq_</span><span class="si">%(table_name)s</span><span class="s2">_</span><span class="si">%(column_0_N_name)s</span><span class="s2">&quot;</span><span class="p">}</span>
<span class="p">)</span>

<span class="n">long_names</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;long_names&quot;</span><span class="p">,</span>
    <span class="n">metadata_obj</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;information_channel_code&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;a&quot;</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;billing_convention_name&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;b&quot;</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;product_identifier&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;c&quot;</span><span class="p">),</span>
    <span class="n">UniqueConstraint</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
<p>On the PostgreSQL dialect, names longer than 63 characters will be truncated
as in the following example:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">long_names</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">information_channel_code</span><span class="w"> </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="n">billing_convention_name</span><span class="w"> </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="n">product_identifier</span><span class="w"> </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">uq_long_names_information_channel_code_billing_conventi_a79e</span>
<span class="w">    </span><span class="k">UNIQUE</span><span class="w"> </span><span class="p">(</span><span class="n">information_channel_code</span><span class="p">,</span><span class="w"> </span><span class="n">billing_convention_name</span><span class="p">,</span><span class="w"> </span><span class="n">product_identifier</span><span class="p">)</span>
<span class="p">)</span></pre></div>
</div>
<p>The above suffix <code class="docutils literal notranslate"><span class="pre">a79e</span></code> is based on the md5 hash of the long name and will
generate the same value every time to produce consistent names for a given
schema.</p>
</section>
<section id="id8">
<h3>为命名约定创建自定义标记<a class="headerlink" href="#id8" title="Link to this heading">¶</a></h3>
<p>Creating Custom Tokens for Naming Conventions</p>
<p>New tokens can also be added, by specifying an additional token
and a callable within the naming_convention dictionary.  For example, if we
wanted to name our foreign key constraints using a GUID scheme, we could do
that as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">uuid</span>


<span class="k">def</span><span class="w"> </span><span class="nf">fk_guid</span><span class="p">(</span><span class="n">constraint</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
    <span class="n">str_tokens</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">[</span>
            <span class="n">table</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="o">+</span> <span class="p">[</span><span class="n">element</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">constraint</span><span class="o">.</span><span class="n">elements</span><span class="p">]</span>
        <span class="o">+</span> <span class="p">[</span><span class="n">element</span><span class="o">.</span><span class="n">target_fullname</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">constraint</span><span class="o">.</span><span class="n">elements</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="n">guid</span> <span class="o">=</span> <span class="n">uuid</span><span class="o">.</span><span class="n">uuid5</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">NAMESPACE_OID</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">str_tokens</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">str</span><span class="p">(</span><span class="n">guid</span><span class="p">)</span>


<span class="n">convention</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;fk_guid&quot;</span><span class="p">:</span> <span class="n">fk_guid</span><span class="p">,</span>
    <span class="s2">&quot;ix&quot;</span><span class="p">:</span> <span class="s2">&quot;ix_</span><span class="si">%(column_0_label)s</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="s2">&quot;fk&quot;</span><span class="p">:</span> <span class="s2">&quot;fk_</span><span class="si">%(fk_guid)s</span><span class="s2">&quot;</span><span class="p">,</span>
<span class="p">}</span></pre></div>
</div>
<p>Above, when we create a new <a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a>, we will get a
name as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">metadata_obj</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">(</span><span class="n">naming_convention</span><span class="o">=</span><span class="n">convention</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">user_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;user&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">metadata_obj</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;version&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">30</span><span class="p">)),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">address_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;address&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">metadata_obj</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;user_id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;user_version_id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fk</span> <span class="o">=</span> <span class="n">ForeignKeyConstraint</span><span class="p">([</span><span class="s2">&quot;user_id&quot;</span><span class="p">,</span> <span class="s2">&quot;user_version_id&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;user.id&quot;</span><span class="p">,</span> <span class="s2">&quot;user.version&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">address_table</span><span class="o">.</span><span class="n">append_constraint</span><span class="p">(</span><span class="n">fk</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fk</span><span class="o">.</span><span class="n">name</span>
<span class="go">fk_0cd51ab5-8d70-56e8-a83c-86661737766d</span></pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.params.naming_convention" title="sqlalchemy.schema.MetaData"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">MetaData.naming_convention</span></code></a> - for additional usage details
as well as a listing of all available naming components.</p>
<p><a class="reference external" href="https://alembic.sqlalchemy.org/en/latest/naming.html">The Importance of Naming Constraints</a> - in the Alembic documentation.</p>
</div>
</section>
<section id="naming-check-constraints">
<span id="id9"></span><h3>命名 CHECK 约束<a class="headerlink" href="#naming-check-constraints" title="Link to this heading">¶</a></h3>
<p>Naming CHECK Constraints</p>
<p>The <a class="reference internal" href="#sqlalchemy.schema.CheckConstraint" title="sqlalchemy.schema.CheckConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckConstraint</span></code></a> object is configured against an arbitrary
SQL expression, which can have any number of columns present, and additionally
is often configured using a raw SQL string.  Therefore a common convention
to use with <a class="reference internal" href="#sqlalchemy.schema.CheckConstraint" title="sqlalchemy.schema.CheckConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckConstraint</span></code></a> is one where we expect the object
to have a name already, and we then enhance it with other convention elements.
A typical convention is <code class="docutils literal notranslate"><span class="pre">&quot;ck_%(table_name)s_%(constraint_name)s&quot;</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">metadata_obj</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">(</span>
    <span class="n">naming_convention</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;ck&quot;</span><span class="p">:</span> <span class="s2">&quot;ck_</span><span class="si">%(table_name)s</span><span class="s2">_</span><span class="si">%(constraint_name)s</span><span class="s2">&quot;</span><span class="p">}</span>
<span class="p">)</span>

<span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;foo&quot;</span><span class="p">,</span>
    <span class="n">metadata_obj</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">CheckConstraint</span><span class="p">(</span><span class="s2">&quot;value &gt; 5&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;value_gt_5&quot;</span><span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
<p>The above table will produce the name <code class="docutils literal notranslate"><span class="pre">ck_foo_value_gt_5</span></code>:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">value</span><span class="w"> </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">ck_foo_value_gt_5</span><span class="w"> </span><span class="k">CHECK</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span>
<span class="p">)</span></pre></div>
</div>
<p><a class="reference internal" href="#sqlalchemy.schema.CheckConstraint" title="sqlalchemy.schema.CheckConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckConstraint</span></code></a> also supports the <code class="docutils literal notranslate"><span class="pre">%(columns_0_name)s</span></code>
token; we can make use of this by ensuring we use a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> or
<a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.column" title="sqlalchemy.sql.expression.column"><code class="xref py py-func docutils literal notranslate"><span class="pre">column()</span></code></a> element within the constraint’s expression,
either by declaring the constraint separate from the table:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">metadata_obj</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">(</span><span class="n">naming_convention</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;ck&quot;</span><span class="p">:</span> <span class="s2">&quot;ck_</span><span class="si">%(table_name)s</span><span class="s2">_</span><span class="si">%(column_0_name)s</span><span class="s2">&quot;</span><span class="p">})</span>

<span class="n">foo</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="n">metadata_obj</span><span class="p">,</span> <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">))</span>

<span class="n">CheckConstraint</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span></pre></div>
</div>
<p>or by using a <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.column" title="sqlalchemy.sql.expression.column"><code class="xref py py-func docutils literal notranslate"><span class="pre">column()</span></code></a> inline:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">column</span>

<span class="n">metadata_obj</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">(</span><span class="n">naming_convention</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;ck&quot;</span><span class="p">:</span> <span class="s2">&quot;ck_</span><span class="si">%(table_name)s</span><span class="s2">_</span><span class="si">%(column_0_name)s</span><span class="s2">&quot;</span><span class="p">})</span>

<span class="n">foo</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="n">metadata_obj</span><span class="p">,</span> <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span> <span class="n">CheckConstraint</span><span class="p">(</span><span class="n">column</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span>
<span class="p">)</span></pre></div>
</div>
<p>Both will produce the name <code class="docutils literal notranslate"><span class="pre">ck_foo_value</span></code>:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">value</span><span class="w"> </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">ck_foo_value</span><span class="w"> </span><span class="k">CHECK</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span>
<span class="p">)</span></pre></div>
</div>
<p>The determination of the name of “column zero” is performed by scanning
the given expression for column objects.  If the expression has more than
one column present, the scan does use a deterministic search, however the
structure of the expression will determine which column is noted as
“column zero”.</p>
</section>
<section id="naming-schematypes">
<span id="id10"></span><h3>为布尔、枚举和其他架构类型配置命名<a class="headerlink" href="#naming-schematypes" title="Link to this heading">¶</a></h3>
<p>Configuring Naming for Boolean, Enum, and other schema types</p>
<p>The <a class="reference internal" href="type_basics.html#sqlalchemy.types.SchemaType" title="sqlalchemy.types.SchemaType"><code class="xref py py-class docutils literal notranslate"><span class="pre">SchemaType</span></code></a> class refers to type objects such as <a class="reference internal" href="type_basics.html#sqlalchemy.types.Boolean" title="sqlalchemy.types.Boolean"><code class="xref py py-class docutils literal notranslate"><span class="pre">Boolean</span></code></a>
and <a class="reference internal" href="type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code></a> which generate a CHECK constraint accompanying the type.
The name for the constraint here is most directly set up by sending
the “name” parameter, e.g. <a class="reference internal" href="type_basics.html#sqlalchemy.types.Boolean.params.name" title="sqlalchemy.types.Boolean"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Boolean.name</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Table</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="n">metadata_obj</span><span class="p">,</span> <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;flag&quot;</span><span class="p">,</span> <span class="n">Boolean</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ck_foo_flag&quot;</span><span class="p">)))</span></pre></div>
</div>
<p>The naming convention feature may be combined with these types as well,
normally by using a convention which includes <code class="docutils literal notranslate"><span class="pre">%(constraint_name)s</span></code>
and then applying a name to the type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">metadata_obj</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">(</span>
    <span class="n">naming_convention</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;ck&quot;</span><span class="p">:</span> <span class="s2">&quot;ck_</span><span class="si">%(table_name)s</span><span class="s2">_</span><span class="si">%(constraint_name)s</span><span class="s2">&quot;</span><span class="p">}</span>
<span class="p">)</span>

<span class="n">Table</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="n">metadata_obj</span><span class="p">,</span> <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;flag&quot;</span><span class="p">,</span> <span class="n">Boolean</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;flag_bool&quot;</span><span class="p">)))</span></pre></div>
</div>
<p>The above table will produce the constraint name <code class="docutils literal notranslate"><span class="pre">ck_foo_flag_bool</span></code>:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">flag</span><span class="w"> </span><span class="n">BOOL</span><span class="p">,</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">ck_foo_flag_bool</span><span class="w"> </span><span class="k">CHECK</span><span class="w"> </span><span class="p">(</span><span class="n">flag</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span>
<span class="p">)</span></pre></div>
</div>
<p>The <a class="reference internal" href="type_basics.html#sqlalchemy.types.SchemaType" title="sqlalchemy.types.SchemaType"><code class="xref py py-class docutils literal notranslate"><span class="pre">SchemaType</span></code></a> classes use special internal symbols so that
the naming convention is only determined at DDL compile time.  On PostgreSQL,
there’s a native BOOLEAN type, so the CHECK constraint of <a class="reference internal" href="type_basics.html#sqlalchemy.types.Boolean" title="sqlalchemy.types.Boolean"><code class="xref py py-class docutils literal notranslate"><span class="pre">Boolean</span></code></a>
is not needed; we are safe to set up a <a class="reference internal" href="type_basics.html#sqlalchemy.types.Boolean" title="sqlalchemy.types.Boolean"><code class="xref py py-class docutils literal notranslate"><span class="pre">Boolean</span></code></a> type without a
name, even though a naming convention is in place for check constraints.
This convention will only be consulted for the CHECK constraint if we
run against a database without a native BOOLEAN type like SQLite or
MySQL.</p>
<p>The CHECK constraint may also make use of the <code class="docutils literal notranslate"><span class="pre">column_0_name</span></code> token,
which works nicely with <a class="reference internal" href="type_basics.html#sqlalchemy.types.SchemaType" title="sqlalchemy.types.SchemaType"><code class="xref py py-class docutils literal notranslate"><span class="pre">SchemaType</span></code></a> since these constraints have
only one column:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">metadata_obj</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">(</span><span class="n">naming_convention</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;ck&quot;</span><span class="p">:</span> <span class="s2">&quot;ck_</span><span class="si">%(table_name)s</span><span class="s2">_</span><span class="si">%(column_0_name)s</span><span class="s2">&quot;</span><span class="p">})</span>

<span class="n">Table</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="n">metadata_obj</span><span class="p">,</span> <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;flag&quot;</span><span class="p">,</span> <span class="n">Boolean</span><span class="p">()))</span></pre></div>
</div>
<p>The above schema will produce:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">flag</span><span class="w"> </span><span class="n">BOOL</span><span class="p">,</span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">ck_foo_flag</span><span class="w"> </span><span class="k">CHECK</span><span class="w"> </span><span class="p">(</span><span class="n">flag</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span>
<span class="p">)</span></pre></div>
</div>
</section>
<section id="id11">
<h3>将命名约定与 ORM 声明性混合使用<a class="headerlink" href="#id11" title="Link to this heading">¶</a></h3>
<p>Using Naming Conventions with ORM Declarative Mixins</p>
<p>When using the naming convention feature with <a class="reference internal" href="../orm/declarative_mixins.html#orm-mixins-toplevel"><span class="std std-ref">ORM Declarative Mixins</span></a>, individual constraint objects must exist for each
actual table-mapped subclass.  See the section
<a class="reference internal" href="../orm/declarative_mixins.html#orm-mixins-named-constraints"><span class="std std-ref">使用 Mixins 上的命名约定创建索引和约束</span></a> for background and examples.</p>
</section>
</section>
<section id="constraints-api">
<h2>Constraints API<a class="headerlink" href="#constraints-api" title="Link to this heading">¶</a></h2>
<div class="table-wrapper longtable docutils container">
<table class="longtable docutils align-default">
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.CheckConstraint"><span class="sig-name descname">CheckConstraint</span></a></p></td>
<td><p>A table- or column-level CHECK constraint.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint"><span class="sig-name descname">ColumnCollectionConstraint</span></a></p></td>
<td><p>A constraint that proxies a ColumnCollection.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionMixin"><span class="sig-name descname">ColumnCollectionMixin</span></a></p></td>
<td><p>A <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnCollection" title="sqlalchemy.sql.expression.ColumnCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnCollection</span></code></a> of <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
objects.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.Constraint"><span class="sig-name descname">Constraint</span></a></p></td>
<td><p>A table-level SQL constraint.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.conv"><span class="sig-name descname">conv</span></a></p></td>
<td><p>Mark a string indicating that a name has already been converted
by a naming convention.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.ForeignKey"><span class="sig-name descname">ForeignKey</span></a></p></td>
<td><p>Defines a dependency between two columns.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint"><span class="sig-name descname">ForeignKeyConstraint</span></a></p></td>
<td><p>A table-level FOREIGN KEY constraint.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL"><span class="sig-name descname">HasConditionalDDL</span></a></p></td>
<td><p>define a class that includes the <a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL.ddl_if" title="sqlalchemy.schema.HasConditionalDDL.ddl_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HasConditionalDDL.ddl_if()</span></code></a>
method, allowing for conditional rendering of DDL.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint"><span class="sig-name descname">PrimaryKeyConstraint</span></a></p></td>
<td><p>A table-level PRIMARY KEY constraint.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint"><span class="sig-name descname">UniqueConstraint</span></a></p></td>
<td><p>A table-level UNIQUE constraint.</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.Constraint">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">Constraint</span></span><a class="headerlink" href="#sqlalchemy.schema.Constraint" title="Link to this definition">¶</a></dt>
<dd><p>A table-level SQL constraint.</p>
<p><a class="reference internal" href="#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a> serves as the base class for the series of
constraint objects that can be associated with <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
objects, including <a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">PrimaryKeyConstraint</span></code></a>,
<a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a>
<a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniqueConstraint</span></code></a>, and
<a class="reference internal" href="#sqlalchemy.schema.CheckConstraint" title="sqlalchemy.schema.CheckConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckConstraint</span></code></a>.</p>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.schema.Constraint.__init__"><span class="sig-name descname">__init__()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.Constraint.argument_for"><span class="sig-name descname">argument_for()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.Constraint.copy"><span class="sig-name descname">copy()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.Constraint.ddl_if"><span class="sig-name descname">ddl_if()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.Constraint.dialect_kwargs"><span class="sig-name descname">dialect_kwargs</span></a>, <a class="reference internal" href="#sqlalchemy.schema.Constraint.dialect_options"><span class="sig-name descname">dialect_options</span></a>, <a class="reference internal" href="#sqlalchemy.schema.Constraint.info"><span class="sig-name descname">info</span></a>, <a class="reference internal" href="#sqlalchemy.schema.Constraint.kwargs"><span class="sig-name descname">kwargs</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.Constraint</span></code></a> (<a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.base.DialectKWArgs</span></code></a>, <a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL" title="sqlalchemy.schema.HasConditionalDDL"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.HasConditionalDDL</span></code></a>, <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.SchemaItem</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.Constraint.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.Constraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.Constraint.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_ConstraintNameArgument</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deferrable</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initially</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_InfoType</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comment</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_create_rule</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_type_bound</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">dialect_kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.schema.Constraint.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Create a SQL constraint.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.Constraint.params.name"></span><strong>name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Constraint.params.name">¶</a> – Optional, the in-database name of this <code class="docutils literal notranslate"><span class="pre">Constraint</span></code>.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Constraint.params.deferrable"></span><strong>deferrable</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Constraint.params.deferrable">¶</a> – Optional bool.  If set, emit DEFERRABLE or NOT DEFERRABLE when
issuing DDL for this constraint.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Constraint.params.initially"></span><strong>initially</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Constraint.params.initially">¶</a> – Optional string.  If set, emit INITIALLY &lt;value&gt; when issuing DDL
for this constraint.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Constraint.params.info"></span><strong>info</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Constraint.params.info">¶</a> – Optional data dictionary which will be populated into the
<a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem.info" title="sqlalchemy.schema.SchemaItem.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SchemaItem.info</span></code></a> attribute of this object.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Constraint.params.comment"></span><strong>comment</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Constraint.params.comment">¶</a> – <p>Optional string that will render an SQL comment on
foreign key constraint creation.</p>
<blockquote>
<div><div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
</div></blockquote>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Constraint.params.**dialect_kw"></span><strong>**dialect_kw</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Constraint.params.**dialect_kw">¶</a> – Additional keyword arguments are dialect
specific, and passed in the form <code class="docutils literal notranslate"><span class="pre">&lt;dialectname&gt;_&lt;argname&gt;</span></code>.  See
the documentation regarding an individual dialect at
<a class="reference internal" href="../dialects/index.html#dialect-toplevel"><span class="std std-ref">Dialects</span></a> for detail on documented arguments.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Constraint.params._create_rule"></span><strong>_create_rule</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Constraint.params._create_rule">¶</a> – used internally by some datatypes that also create constraints.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Constraint.params._type_bound"></span><strong>_type_bound</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Constraint.params._type_bound">¶</a> – used internally to indicate that this constraint is associated with
a specific datatype.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.Constraint.argument_for">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><a class="reference internal" href="#sqlalchemy.schema.Constraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.Constraint.</span></code></a><span class="sig-name descname"><span class="pre">argument_for</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dialect_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">argument_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.schema.Constraint.argument_for" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.argument_for" title="sqlalchemy.sql.base.DialectKWArgs.argument_for"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectKWArgs.argument_for()</span></code></a> <em>method of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>Add a new kind of dialect-specific keyword argument for this class.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Index</span><span class="o">.</span><span class="n">argument_for</span><span class="p">(</span><span class="s2">&quot;mydialect&quot;</span><span class="p">,</span> <span class="s2">&quot;length&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<span class="n">some_index</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">mydialect_length</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span></pre></div>
</div>
<p>The <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.argument_for" title="sqlalchemy.sql.base.DialectKWArgs.argument_for"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectKWArgs.argument_for()</span></code></a> method is a per-argument
way adding extra arguments to the
<a class="reference internal" href="internals.html#sqlalchemy.engine.default.DefaultDialect.construct_arguments" title="sqlalchemy.engine.default.DefaultDialect.construct_arguments"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DefaultDialect.construct_arguments</span></code></a> dictionary. This
dictionary provides a list of argument names accepted by various
schema-level constructs on behalf of a dialect.</p>
<p>New dialects should typically specify this dictionary all at once as a
data member of the dialect class.  The use case for ad-hoc addition of
argument names is typically for end-user code that is also using
a custom compilation scheme which consumes the additional arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.Constraint.argument_for.params.dialect_name"></span><strong>dialect_name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Constraint.argument_for.params.dialect_name">¶</a> – name of a dialect.  The dialect must be
locatable, else a <a class="reference internal" href="exceptions.html#sqlalchemy.exc.NoSuchModuleError" title="sqlalchemy.exc.NoSuchModuleError"><code class="xref py py-class docutils literal notranslate"><span class="pre">NoSuchModuleError</span></code></a> is raised.   The
dialect must also include an existing
<a class="reference internal" href="internals.html#sqlalchemy.engine.default.DefaultDialect.construct_arguments" title="sqlalchemy.engine.default.DefaultDialect.construct_arguments"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DefaultDialect.construct_arguments</span></code></a> collection, indicating
that it participates in the keyword-argument validation and default
system, else <a class="reference internal" href="exceptions.html#sqlalchemy.exc.ArgumentError" title="sqlalchemy.exc.ArgumentError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArgumentError</span></code></a> is raised.  If the dialect does
not include this collection, then any keyword argument can be
specified on behalf of this dialect already.  All dialects packaged
within SQLAlchemy include this collection, however for third party
dialects, support may vary.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Constraint.argument_for.params.argument_name"></span><strong>argument_name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Constraint.argument_for.params.argument_name">¶</a> – name of the parameter.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Constraint.argument_for.params.default"></span><strong>default</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Constraint.argument_for.params.default">¶</a> – default value of the parameter.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.Constraint.copy">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.Constraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.Constraint.</span></code></a><span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.schema.Constraint.copy" title="Link to this definition">¶</a></dt>
<dd><div class="deprecated">
<p><span class="versionmodified deprecated">自 1.4 版本弃用: </span>The <a class="reference internal" href="#sqlalchemy.schema.Constraint.copy" title="sqlalchemy.schema.Constraint.copy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Constraint.copy()</span></code></a> method is deprecated and will be removed in a future release.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.Constraint.ddl_if">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.Constraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.Constraint.</span></code></a><span class="sig-name descname"><span class="pre">ddl_if</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dialect</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callable_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DDLIfCallable</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.schema.Constraint.ddl_if" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL.ddl_if" title="sqlalchemy.schema.HasConditionalDDL.ddl_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HasConditionalDDL.ddl_if()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL" title="sqlalchemy.schema.HasConditionalDDL"><code class="xref py py-class docutils literal notranslate"><span class="pre">HasConditionalDDL</span></code></a></p>
</div>
<p>apply a conditional DDL rule to this schema item.</p>
<p>These rules work in a similar manner to the
<a class="reference internal" href="ddl.html#sqlalchemy.schema.ExecutableDDLElement.execute_if" title="sqlalchemy.schema.ExecutableDDLElement.execute_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExecutableDDLElement.execute_if()</span></code></a> callable, with the added
feature that the criteria may be checked within the DDL compilation
phase for a construct such as <a class="reference internal" href="ddl.html#sqlalchemy.schema.CreateTable" title="sqlalchemy.schema.CreateTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateTable</span></code></a>.
<a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL.ddl_if" title="sqlalchemy.schema.HasConditionalDDL.ddl_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HasConditionalDDL.ddl_if()</span></code></a> currently applies towards the
<a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> construct as well as all <a class="reference internal" href="#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a>
constructs.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.Constraint.ddl_if.params.dialect"></span><strong>dialect</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Constraint.ddl_if.params.dialect">¶</a> – string name of a dialect, or a tuple of string names
to indicate multiple dialect types.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Constraint.ddl_if.params.callable_"></span><strong>callable_</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Constraint.ddl_if.params.callable_">¶</a> – a callable that is constructed using the same form
as that described in
<a class="reference internal" href="ddl.html#sqlalchemy.schema.ExecutableDDLElement.execute_if.params.callable_" title="sqlalchemy.schema.ExecutableDDLElement.execute_if"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">ExecutableDDLElement.execute_if.callable_</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Constraint.ddl_if.params.state"></span><strong>state</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Constraint.ddl_if.params.state">¶</a> – any arbitrary object that will be passed to the
callable, if present.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="ddl.html#schema-ddl-ddl-if"><span class="std std-ref">控制 DDL 约束和索引的生成</span></a> - background and usage examples</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.Constraint.dialect_kwargs">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.Constraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.Constraint.</span></code></a><span class="sig-name descname"><span class="pre">dialect_kwargs</span></span><a class="headerlink" href="#sqlalchemy.schema.Constraint.dialect_kwargs" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs" title="sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_kwargs</span></code></a> <em>attribute of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>A collection of keyword arguments specified as dialect-specific
options to this construct.</p>
<p>The arguments are present here in their original <code class="docutils literal notranslate"><span class="pre">&lt;dialect&gt;_&lt;kwarg&gt;</span></code>
format.  Only arguments that were actually passed are included;
unlike the <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_options" title="sqlalchemy.sql.base.DialectKWArgs.dialect_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_options</span></code></a> collection, which
contains all options known by this dialect including defaults.</p>
<p>The collection is also writable; keys are accepted of the
form <code class="docutils literal notranslate"><span class="pre">&lt;dialect&gt;_&lt;kwarg&gt;</span></code> where the value will be assembled
into the list of options.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_options" title="sqlalchemy.sql.base.DialectKWArgs.dialect_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_options</span></code></a> - nested dictionary form</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.Constraint.dialect_options">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.Constraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.Constraint.</span></code></a><span class="sig-name descname"><span class="pre">dialect_options</span></span><a class="headerlink" href="#sqlalchemy.schema.Constraint.dialect_options" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_options" title="sqlalchemy.sql.base.DialectKWArgs.dialect_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_options</span></code></a> <em>attribute of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>A collection of keyword arguments specified as dialect-specific
options to this construct.</p>
<p>This is a two-level nested registry, keyed to <code class="docutils literal notranslate"><span class="pre">&lt;dialect_name&gt;</span></code>
and <code class="docutils literal notranslate"><span class="pre">&lt;argument_name&gt;</span></code>.  For example, the <code class="docutils literal notranslate"><span class="pre">postgresql_where</span></code>
argument would be locatable as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">arg</span> <span class="o">=</span> <span class="n">my_object</span><span class="o">.</span><span class="n">dialect_options</span><span class="p">[</span><span class="s2">&quot;postgresql&quot;</span><span class="p">][</span><span class="s2">&quot;where&quot;</span><span class="p">]</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 0.9.2 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs" title="sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_kwargs</span></code></a> - flat dictionary form</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.Constraint.info">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.Constraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.Constraint.</span></code></a><span class="sig-name descname"><span class="pre">info</span></span><a class="headerlink" href="#sqlalchemy.schema.Constraint.info" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem.info" title="sqlalchemy.schema.SchemaItem.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SchemaItem.info</span></code></a> <em>attribute of</em> <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">SchemaItem</span></code></a></p>
</div>
<p>Info dictionary associated with the object, allowing user-defined
data to be associated with this <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">SchemaItem</span></code></a>.</p>
<p>The dictionary is automatically generated when first accessed.
It can also be specified in the constructor of some objects,
such as <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> and <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.Constraint.kwargs">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.Constraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.Constraint.</span></code></a><span class="sig-name descname"><span class="pre">kwargs</span></span><a class="headerlink" href="#sqlalchemy.schema.Constraint.kwargs" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.kwargs" title="sqlalchemy.sql.base.DialectKWArgs.kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.kwargs</span></code></a> <em>attribute of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>A synonym for <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs" title="sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_kwargs</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.ColumnCollectionMixin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">ColumnCollectionMixin</span></span><a class="headerlink" href="#sqlalchemy.schema.ColumnCollectionMixin" title="Link to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnCollection" title="sqlalchemy.sql.expression.ColumnCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnCollection</span></code></a> of <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
objects.</p>
<p>This collection represents the columns which are referred to by
this object.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.ColumnCollectionConstraint">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">ColumnCollectionConstraint</span></span><a class="headerlink" href="#sqlalchemy.schema.ColumnCollectionConstraint" title="Link to this definition">¶</a></dt>
<dd><p>A constraint that proxies a ColumnCollection.</p>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.__init__"><span class="sig-name descname">__init__()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.argument_for"><span class="sig-name descname">argument_for()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.columns"><span class="sig-name descname">columns</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.contains_column"><span class="sig-name descname">contains_column()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.copy"><span class="sig-name descname">copy()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.ddl_if"><span class="sig-name descname">ddl_if()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.dialect_kwargs"><span class="sig-name descname">dialect_kwargs</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.dialect_options"><span class="sig-name descname">dialect_options</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.info"><span class="sig-name descname">info</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.kwargs"><span class="sig-name descname">kwargs</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint" title="sqlalchemy.schema.ColumnCollectionConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.ColumnCollectionConstraint</span></code></a> (<a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionMixin" title="sqlalchemy.schema.ColumnCollectionMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.ColumnCollectionMixin</span></code></a>, <a class="reference internal" href="#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.Constraint</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.ColumnCollectionConstraint.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ColumnCollectionConstraint.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_DDLColumnArgument</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_ConstraintNameArgument</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deferrable</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initially</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_InfoType</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_autoattach</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_column_flag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_gather_expressions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">_DDLColumnArgument</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">dialect_kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.schema.ColumnCollectionConstraint.__init__" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.ColumnCollectionConstraint.params.*columns"></span><strong>*columns</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.params.*columns">¶</a> – A sequence of column names or Column objects.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ColumnCollectionConstraint.params.name"></span><strong>name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.params.name">¶</a> – Optional, the in-database name of this constraint.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ColumnCollectionConstraint.params.deferrable"></span><strong>deferrable</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.params.deferrable">¶</a> – Optional bool.  If set, emit DEFERRABLE or NOT DEFERRABLE when
issuing DDL for this constraint.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ColumnCollectionConstraint.params.initially"></span><strong>initially</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.params.initially">¶</a> – Optional string.  If set, emit INITIALLY &lt;value&gt; when issuing DDL
for this constraint.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ColumnCollectionConstraint.params.**dialect_kw"></span><strong>**dialect_kw</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.params.**dialect_kw">¶</a> – other keyword arguments including
dialect-specific arguments are propagated to the <a class="reference internal" href="#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a>
superclass.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.ColumnCollectionConstraint.argument_for">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ColumnCollectionConstraint.</span></code></a><span class="sig-name descname"><span class="pre">argument_for</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dialect_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">argument_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.schema.ColumnCollectionConstraint.argument_for" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.argument_for" title="sqlalchemy.sql.base.DialectKWArgs.argument_for"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectKWArgs.argument_for()</span></code></a> <em>method of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>Add a new kind of dialect-specific keyword argument for this class.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Index</span><span class="o">.</span><span class="n">argument_for</span><span class="p">(</span><span class="s2">&quot;mydialect&quot;</span><span class="p">,</span> <span class="s2">&quot;length&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<span class="n">some_index</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">mydialect_length</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span></pre></div>
</div>
<p>The <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.argument_for" title="sqlalchemy.sql.base.DialectKWArgs.argument_for"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectKWArgs.argument_for()</span></code></a> method is a per-argument
way adding extra arguments to the
<a class="reference internal" href="internals.html#sqlalchemy.engine.default.DefaultDialect.construct_arguments" title="sqlalchemy.engine.default.DefaultDialect.construct_arguments"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DefaultDialect.construct_arguments</span></code></a> dictionary. This
dictionary provides a list of argument names accepted by various
schema-level constructs on behalf of a dialect.</p>
<p>New dialects should typically specify this dictionary all at once as a
data member of the dialect class.  The use case for ad-hoc addition of
argument names is typically for end-user code that is also using
a custom compilation scheme which consumes the additional arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.ColumnCollectionConstraint.argument_for.params.dialect_name"></span><strong>dialect_name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.argument_for.params.dialect_name">¶</a> – name of a dialect.  The dialect must be
locatable, else a <a class="reference internal" href="exceptions.html#sqlalchemy.exc.NoSuchModuleError" title="sqlalchemy.exc.NoSuchModuleError"><code class="xref py py-class docutils literal notranslate"><span class="pre">NoSuchModuleError</span></code></a> is raised.   The
dialect must also include an existing
<a class="reference internal" href="internals.html#sqlalchemy.engine.default.DefaultDialect.construct_arguments" title="sqlalchemy.engine.default.DefaultDialect.construct_arguments"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DefaultDialect.construct_arguments</span></code></a> collection, indicating
that it participates in the keyword-argument validation and default
system, else <a class="reference internal" href="exceptions.html#sqlalchemy.exc.ArgumentError" title="sqlalchemy.exc.ArgumentError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArgumentError</span></code></a> is raised.  If the dialect does
not include this collection, then any keyword argument can be
specified on behalf of this dialect already.  All dialects packaged
within SQLAlchemy include this collection, however for third party
dialects, support may vary.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ColumnCollectionConstraint.argument_for.params.argument_name"></span><strong>argument_name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.argument_for.params.argument_name">¶</a> – name of the parameter.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ColumnCollectionConstraint.argument_for.params.default"></span><strong>default</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.argument_for.params.default">¶</a> – default value of the parameter.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.ColumnCollectionConstraint.columns">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ColumnCollectionConstraint.</span></code></a><span class="sig-name descname"><span class="pre">columns</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ReadOnlyColumnCollection</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><span class="pre">Column</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.schema.ColumnCollectionConstraint.columns" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="xref py py-attr docutils literal notranslate"><span class="pre">ColumnCollectionMixin.columns</span></code> <em>attribute of</em> <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionMixin" title="sqlalchemy.schema.ColumnCollectionMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnCollectionMixin</span></code></a></p>
</div>
<p>A <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnCollection" title="sqlalchemy.sql.expression.ColumnCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnCollection</span></code></a> representing the set of columns
for this constraint.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.ColumnCollectionConstraint.contains_column">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ColumnCollectionConstraint.</span></code></a><span class="sig-name descname"><span class="pre">contains_column</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.sql.schema.Column"><span class="pre">Column</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.schema.ColumnCollectionConstraint.contains_column" title="Link to this definition">¶</a></dt>
<dd><p>Return True if this constraint contains the given column.</p>
<p>Note that this object also contains an attribute <code class="docutils literal notranslate"><span class="pre">.columns</span></code>
which is a <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnCollection" title="sqlalchemy.sql.expression.ColumnCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnCollection</span></code></a> of
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.ColumnCollectionConstraint.copy">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ColumnCollectionConstraint.</span></code></a><span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.sql.schema.Table"><span class="pre">Table</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint" title="sqlalchemy.sql.schema.ColumnCollectionConstraint"><span class="pre">ColumnCollectionConstraint</span></a></span></span><a class="headerlink" href="#sqlalchemy.schema.ColumnCollectionConstraint.copy" title="Link to this definition">¶</a></dt>
<dd><div class="deprecated">
<p><span class="versionmodified deprecated">自 1.4 版本弃用: </span>The <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.copy" title="sqlalchemy.schema.ColumnCollectionConstraint.copy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ColumnCollectionConstraint.copy()</span></code></a> method is deprecated and will be removed in a future release.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.ColumnCollectionConstraint.ddl_if">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ColumnCollectionConstraint.</span></code></a><span class="sig-name descname"><span class="pre">ddl_if</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dialect</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callable_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DDLIfCallable</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.schema.ColumnCollectionConstraint.ddl_if" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL.ddl_if" title="sqlalchemy.schema.HasConditionalDDL.ddl_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HasConditionalDDL.ddl_if()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL" title="sqlalchemy.schema.HasConditionalDDL"><code class="xref py py-class docutils literal notranslate"><span class="pre">HasConditionalDDL</span></code></a></p>
</div>
<p>apply a conditional DDL rule to this schema item.</p>
<p>These rules work in a similar manner to the
<a class="reference internal" href="ddl.html#sqlalchemy.schema.ExecutableDDLElement.execute_if" title="sqlalchemy.schema.ExecutableDDLElement.execute_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExecutableDDLElement.execute_if()</span></code></a> callable, with the added
feature that the criteria may be checked within the DDL compilation
phase for a construct such as <a class="reference internal" href="ddl.html#sqlalchemy.schema.CreateTable" title="sqlalchemy.schema.CreateTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateTable</span></code></a>.
<a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL.ddl_if" title="sqlalchemy.schema.HasConditionalDDL.ddl_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HasConditionalDDL.ddl_if()</span></code></a> currently applies towards the
<a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> construct as well as all <a class="reference internal" href="#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a>
constructs.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.ColumnCollectionConstraint.ddl_if.params.dialect"></span><strong>dialect</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.ddl_if.params.dialect">¶</a> – string name of a dialect, or a tuple of string names
to indicate multiple dialect types.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ColumnCollectionConstraint.ddl_if.params.callable_"></span><strong>callable_</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.ddl_if.params.callable_">¶</a> – a callable that is constructed using the same form
as that described in
<a class="reference internal" href="ddl.html#sqlalchemy.schema.ExecutableDDLElement.execute_if.params.callable_" title="sqlalchemy.schema.ExecutableDDLElement.execute_if"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">ExecutableDDLElement.execute_if.callable_</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ColumnCollectionConstraint.ddl_if.params.state"></span><strong>state</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.ddl_if.params.state">¶</a> – any arbitrary object that will be passed to the
callable, if present.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="ddl.html#schema-ddl-ddl-if"><span class="std std-ref">控制 DDL 约束和索引的生成</span></a> - background and usage examples</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.ColumnCollectionConstraint.dialect_kwargs">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ColumnCollectionConstraint.</span></code></a><span class="sig-name descname"><span class="pre">dialect_kwargs</span></span><a class="headerlink" href="#sqlalchemy.schema.ColumnCollectionConstraint.dialect_kwargs" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs" title="sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_kwargs</span></code></a> <em>attribute of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>A collection of keyword arguments specified as dialect-specific
options to this construct.</p>
<p>The arguments are present here in their original <code class="docutils literal notranslate"><span class="pre">&lt;dialect&gt;_&lt;kwarg&gt;</span></code>
format.  Only arguments that were actually passed are included;
unlike the <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_options" title="sqlalchemy.sql.base.DialectKWArgs.dialect_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_options</span></code></a> collection, which
contains all options known by this dialect including defaults.</p>
<p>The collection is also writable; keys are accepted of the
form <code class="docutils literal notranslate"><span class="pre">&lt;dialect&gt;_&lt;kwarg&gt;</span></code> where the value will be assembled
into the list of options.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_options" title="sqlalchemy.sql.base.DialectKWArgs.dialect_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_options</span></code></a> - nested dictionary form</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.ColumnCollectionConstraint.dialect_options">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ColumnCollectionConstraint.</span></code></a><span class="sig-name descname"><span class="pre">dialect_options</span></span><a class="headerlink" href="#sqlalchemy.schema.ColumnCollectionConstraint.dialect_options" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_options" title="sqlalchemy.sql.base.DialectKWArgs.dialect_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_options</span></code></a> <em>attribute of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>A collection of keyword arguments specified as dialect-specific
options to this construct.</p>
<p>This is a two-level nested registry, keyed to <code class="docutils literal notranslate"><span class="pre">&lt;dialect_name&gt;</span></code>
and <code class="docutils literal notranslate"><span class="pre">&lt;argument_name&gt;</span></code>.  For example, the <code class="docutils literal notranslate"><span class="pre">postgresql_where</span></code>
argument would be locatable as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">arg</span> <span class="o">=</span> <span class="n">my_object</span><span class="o">.</span><span class="n">dialect_options</span><span class="p">[</span><span class="s2">&quot;postgresql&quot;</span><span class="p">][</span><span class="s2">&quot;where&quot;</span><span class="p">]</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 0.9.2 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs" title="sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_kwargs</span></code></a> - flat dictionary form</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.ColumnCollectionConstraint.info">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ColumnCollectionConstraint.</span></code></a><span class="sig-name descname"><span class="pre">info</span></span><a class="headerlink" href="#sqlalchemy.schema.ColumnCollectionConstraint.info" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem.info" title="sqlalchemy.schema.SchemaItem.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SchemaItem.info</span></code></a> <em>attribute of</em> <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">SchemaItem</span></code></a></p>
</div>
<p>Info dictionary associated with the object, allowing user-defined
data to be associated with this <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">SchemaItem</span></code></a>.</p>
<p>The dictionary is automatically generated when first accessed.
It can also be specified in the constructor of some objects,
such as <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> and <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.ColumnCollectionConstraint.kwargs">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ColumnCollectionConstraint.</span></code></a><span class="sig-name descname"><span class="pre">kwargs</span></span><a class="headerlink" href="#sqlalchemy.schema.ColumnCollectionConstraint.kwargs" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.kwargs" title="sqlalchemy.sql.base.DialectKWArgs.kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.kwargs</span></code></a> <em>attribute of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>A synonym for <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs" title="sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_kwargs</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.CheckConstraint">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">CheckConstraint</span></span><a class="headerlink" href="#sqlalchemy.schema.CheckConstraint" title="Link to this definition">¶</a></dt>
<dd><p>A table- or column-level CHECK constraint.</p>
<p>Can be included in the definition of a Table or Column.</p>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.schema.CheckConstraint.__init__"><span class="sig-name descname">__init__()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.CheckConstraint.argument_for"><span class="sig-name descname">argument_for()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.CheckConstraint.columns"><span class="sig-name descname">columns</span></a>, <a class="reference internal" href="#sqlalchemy.schema.CheckConstraint.contains_column"><span class="sig-name descname">contains_column()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.CheckConstraint.copy"><span class="sig-name descname">copy()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.CheckConstraint.ddl_if"><span class="sig-name descname">ddl_if()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.CheckConstraint.dialect_kwargs"><span class="sig-name descname">dialect_kwargs</span></a>, <a class="reference internal" href="#sqlalchemy.schema.CheckConstraint.dialect_options"><span class="sig-name descname">dialect_options</span></a>, <a class="reference internal" href="#sqlalchemy.schema.CheckConstraint.info"><span class="sig-name descname">info</span></a>, <a class="reference internal" href="#sqlalchemy.schema.CheckConstraint.kwargs"><span class="sig-name descname">kwargs</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.schema.CheckConstraint" title="sqlalchemy.schema.CheckConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.CheckConstraint</span></code></a> (<a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint" title="sqlalchemy.schema.ColumnCollectionConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.ColumnCollectionConstraint</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.CheckConstraint.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.CheckConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.CheckConstraint.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sqltext</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_TextCoercedExpressionArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_ConstraintNameArgument</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deferrable</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initially</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><span class="pre">Table</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_InfoType</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_create_rule</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_autoattach</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_type_bound</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">dialect_kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.schema.CheckConstraint.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Construct a CHECK constraint.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.CheckConstraint.params.sqltext"></span><strong>sqltext</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.CheckConstraint.params.sqltext">¶</a> – <p>A string containing the constraint definition, which will be used
verbatim, or a SQL expression construct.   If given as a string,
the object is converted to a <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a> object.
If the textual
string includes a colon character, escape this using a backslash:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CheckConstraint</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;foo ~ E&#39;a(?\:b|c)d&quot;</span><span class="p">)</span></pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>The <a class="reference internal" href="#sqlalchemy.schema.CheckConstraint.params.sqltext" title="sqlalchemy.schema.CheckConstraint"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">CheckConstraint.sqltext</span></code></a> argument to <a class="reference internal" href="#sqlalchemy.schema.CheckConstraint" title="sqlalchemy.schema.CheckConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckConstraint</span></code></a> can be passed as a Python string argument, which will be treated as <strong>trusted SQL text</strong> and rendered as given.  <strong>DO NOT PASS UNTRUSTED INPUT TO THIS PARAMETER</strong>.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.CheckConstraint.params.name"></span><strong>name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.CheckConstraint.params.name">¶</a> – Optional, the in-database name of the constraint.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.CheckConstraint.params.deferrable"></span><strong>deferrable</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.CheckConstraint.params.deferrable">¶</a> – Optional bool.  If set, emit DEFERRABLE or NOT DEFERRABLE when
issuing DDL for this constraint.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.CheckConstraint.params.initially"></span><strong>initially</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.CheckConstraint.params.initially">¶</a> – Optional string.  If set, emit INITIALLY &lt;value&gt; when issuing DDL
for this constraint.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.CheckConstraint.params.info"></span><strong>info</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.CheckConstraint.params.info">¶</a> – Optional data dictionary which will be populated into the
<a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem.info" title="sqlalchemy.schema.SchemaItem.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SchemaItem.info</span></code></a> attribute of this object.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.CheckConstraint.argument_for">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><a class="reference internal" href="#sqlalchemy.schema.CheckConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.CheckConstraint.</span></code></a><span class="sig-name descname"><span class="pre">argument_for</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dialect_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">argument_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.schema.CheckConstraint.argument_for" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.argument_for" title="sqlalchemy.sql.base.DialectKWArgs.argument_for"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectKWArgs.argument_for()</span></code></a> <em>method of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>Add a new kind of dialect-specific keyword argument for this class.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Index</span><span class="o">.</span><span class="n">argument_for</span><span class="p">(</span><span class="s2">&quot;mydialect&quot;</span><span class="p">,</span> <span class="s2">&quot;length&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<span class="n">some_index</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">mydialect_length</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span></pre></div>
</div>
<p>The <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.argument_for" title="sqlalchemy.sql.base.DialectKWArgs.argument_for"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectKWArgs.argument_for()</span></code></a> method is a per-argument
way adding extra arguments to the
<a class="reference internal" href="internals.html#sqlalchemy.engine.default.DefaultDialect.construct_arguments" title="sqlalchemy.engine.default.DefaultDialect.construct_arguments"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DefaultDialect.construct_arguments</span></code></a> dictionary. This
dictionary provides a list of argument names accepted by various
schema-level constructs on behalf of a dialect.</p>
<p>New dialects should typically specify this dictionary all at once as a
data member of the dialect class.  The use case for ad-hoc addition of
argument names is typically for end-user code that is also using
a custom compilation scheme which consumes the additional arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.CheckConstraint.argument_for.params.dialect_name"></span><strong>dialect_name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.CheckConstraint.argument_for.params.dialect_name">¶</a> – name of a dialect.  The dialect must be
locatable, else a <a class="reference internal" href="exceptions.html#sqlalchemy.exc.NoSuchModuleError" title="sqlalchemy.exc.NoSuchModuleError"><code class="xref py py-class docutils literal notranslate"><span class="pre">NoSuchModuleError</span></code></a> is raised.   The
dialect must also include an existing
<a class="reference internal" href="internals.html#sqlalchemy.engine.default.DefaultDialect.construct_arguments" title="sqlalchemy.engine.default.DefaultDialect.construct_arguments"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DefaultDialect.construct_arguments</span></code></a> collection, indicating
that it participates in the keyword-argument validation and default
system, else <a class="reference internal" href="exceptions.html#sqlalchemy.exc.ArgumentError" title="sqlalchemy.exc.ArgumentError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArgumentError</span></code></a> is raised.  If the dialect does
not include this collection, then any keyword argument can be
specified on behalf of this dialect already.  All dialects packaged
within SQLAlchemy include this collection, however for third party
dialects, support may vary.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.CheckConstraint.argument_for.params.argument_name"></span><strong>argument_name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.CheckConstraint.argument_for.params.argument_name">¶</a> – name of the parameter.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.CheckConstraint.argument_for.params.default"></span><strong>default</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.CheckConstraint.argument_for.params.default">¶</a> – default value of the parameter.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.CheckConstraint.columns">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.CheckConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.CheckConstraint.</span></code></a><span class="sig-name descname"><span class="pre">columns</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ReadOnlyColumnCollection</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><span class="pre">Column</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.schema.CheckConstraint.columns" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="xref py py-attr docutils literal notranslate"><span class="pre">ColumnCollectionMixin.columns</span></code> <em>attribute of</em> <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionMixin" title="sqlalchemy.schema.ColumnCollectionMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnCollectionMixin</span></code></a></p>
</div>
<p>A <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnCollection" title="sqlalchemy.sql.expression.ColumnCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnCollection</span></code></a> representing the set of columns
for this constraint.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.CheckConstraint.contains_column">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.CheckConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.CheckConstraint.</span></code></a><span class="sig-name descname"><span class="pre">contains_column</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.sql.schema.Column"><span class="pre">Column</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.schema.CheckConstraint.contains_column" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.contains_column" title="sqlalchemy.schema.ColumnCollectionConstraint.contains_column"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ColumnCollectionConstraint.contains_column()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint" title="sqlalchemy.schema.ColumnCollectionConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnCollectionConstraint</span></code></a></p>
</div>
<p>Return True if this constraint contains the given column.</p>
<p>Note that this object also contains an attribute <code class="docutils literal notranslate"><span class="pre">.columns</span></code>
which is a <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnCollection" title="sqlalchemy.sql.expression.ColumnCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnCollection</span></code></a> of
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.CheckConstraint.copy">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.CheckConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.CheckConstraint.</span></code></a><span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.sql.schema.Table"><span class="pre">Table</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.schema.CheckConstraint" title="sqlalchemy.sql.schema.CheckConstraint"><span class="pre">CheckConstraint</span></a></span></span><a class="headerlink" href="#sqlalchemy.schema.CheckConstraint.copy" title="Link to this definition">¶</a></dt>
<dd><div class="deprecated">
<p><span class="versionmodified deprecated">自 1.4 版本弃用: </span>The <a class="reference internal" href="#sqlalchemy.schema.CheckConstraint.copy" title="sqlalchemy.schema.CheckConstraint.copy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CheckConstraint.copy()</span></code></a> method is deprecated and will be removed in a future release.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.CheckConstraint.ddl_if">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.CheckConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.CheckConstraint.</span></code></a><span class="sig-name descname"><span class="pre">ddl_if</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dialect</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callable_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DDLIfCallable</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.schema.CheckConstraint.ddl_if" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL.ddl_if" title="sqlalchemy.schema.HasConditionalDDL.ddl_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HasConditionalDDL.ddl_if()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL" title="sqlalchemy.schema.HasConditionalDDL"><code class="xref py py-class docutils literal notranslate"><span class="pre">HasConditionalDDL</span></code></a></p>
</div>
<p>apply a conditional DDL rule to this schema item.</p>
<p>These rules work in a similar manner to the
<a class="reference internal" href="ddl.html#sqlalchemy.schema.ExecutableDDLElement.execute_if" title="sqlalchemy.schema.ExecutableDDLElement.execute_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExecutableDDLElement.execute_if()</span></code></a> callable, with the added
feature that the criteria may be checked within the DDL compilation
phase for a construct such as <a class="reference internal" href="ddl.html#sqlalchemy.schema.CreateTable" title="sqlalchemy.schema.CreateTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateTable</span></code></a>.
<a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL.ddl_if" title="sqlalchemy.schema.HasConditionalDDL.ddl_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HasConditionalDDL.ddl_if()</span></code></a> currently applies towards the
<a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> construct as well as all <a class="reference internal" href="#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a>
constructs.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.CheckConstraint.ddl_if.params.dialect"></span><strong>dialect</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.CheckConstraint.ddl_if.params.dialect">¶</a> – string name of a dialect, or a tuple of string names
to indicate multiple dialect types.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.CheckConstraint.ddl_if.params.callable_"></span><strong>callable_</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.CheckConstraint.ddl_if.params.callable_">¶</a> – a callable that is constructed using the same form
as that described in
<a class="reference internal" href="ddl.html#sqlalchemy.schema.ExecutableDDLElement.execute_if.params.callable_" title="sqlalchemy.schema.ExecutableDDLElement.execute_if"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">ExecutableDDLElement.execute_if.callable_</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.CheckConstraint.ddl_if.params.state"></span><strong>state</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.CheckConstraint.ddl_if.params.state">¶</a> – any arbitrary object that will be passed to the
callable, if present.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="ddl.html#schema-ddl-ddl-if"><span class="std std-ref">控制 DDL 约束和索引的生成</span></a> - background and usage examples</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.CheckConstraint.dialect_kwargs">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.CheckConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.CheckConstraint.</span></code></a><span class="sig-name descname"><span class="pre">dialect_kwargs</span></span><a class="headerlink" href="#sqlalchemy.schema.CheckConstraint.dialect_kwargs" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs" title="sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_kwargs</span></code></a> <em>attribute of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>A collection of keyword arguments specified as dialect-specific
options to this construct.</p>
<p>The arguments are present here in their original <code class="docutils literal notranslate"><span class="pre">&lt;dialect&gt;_&lt;kwarg&gt;</span></code>
format.  Only arguments that were actually passed are included;
unlike the <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_options" title="sqlalchemy.sql.base.DialectKWArgs.dialect_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_options</span></code></a> collection, which
contains all options known by this dialect including defaults.</p>
<p>The collection is also writable; keys are accepted of the
form <code class="docutils literal notranslate"><span class="pre">&lt;dialect&gt;_&lt;kwarg&gt;</span></code> where the value will be assembled
into the list of options.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_options" title="sqlalchemy.sql.base.DialectKWArgs.dialect_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_options</span></code></a> - nested dictionary form</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.CheckConstraint.dialect_options">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.CheckConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.CheckConstraint.</span></code></a><span class="sig-name descname"><span class="pre">dialect_options</span></span><a class="headerlink" href="#sqlalchemy.schema.CheckConstraint.dialect_options" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_options" title="sqlalchemy.sql.base.DialectKWArgs.dialect_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_options</span></code></a> <em>attribute of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>A collection of keyword arguments specified as dialect-specific
options to this construct.</p>
<p>This is a two-level nested registry, keyed to <code class="docutils literal notranslate"><span class="pre">&lt;dialect_name&gt;</span></code>
and <code class="docutils literal notranslate"><span class="pre">&lt;argument_name&gt;</span></code>.  For example, the <code class="docutils literal notranslate"><span class="pre">postgresql_where</span></code>
argument would be locatable as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">arg</span> <span class="o">=</span> <span class="n">my_object</span><span class="o">.</span><span class="n">dialect_options</span><span class="p">[</span><span class="s2">&quot;postgresql&quot;</span><span class="p">][</span><span class="s2">&quot;where&quot;</span><span class="p">]</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 0.9.2 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs" title="sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_kwargs</span></code></a> - flat dictionary form</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.CheckConstraint.info">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.CheckConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.CheckConstraint.</span></code></a><span class="sig-name descname"><span class="pre">info</span></span><a class="headerlink" href="#sqlalchemy.schema.CheckConstraint.info" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem.info" title="sqlalchemy.schema.SchemaItem.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SchemaItem.info</span></code></a> <em>attribute of</em> <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">SchemaItem</span></code></a></p>
</div>
<p>Info dictionary associated with the object, allowing user-defined
data to be associated with this <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">SchemaItem</span></code></a>.</p>
<p>The dictionary is automatically generated when first accessed.
It can also be specified in the constructor of some objects,
such as <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> and <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.CheckConstraint.kwargs">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.CheckConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.CheckConstraint.</span></code></a><span class="sig-name descname"><span class="pre">kwargs</span></span><a class="headerlink" href="#sqlalchemy.schema.CheckConstraint.kwargs" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.kwargs" title="sqlalchemy.sql.base.DialectKWArgs.kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.kwargs</span></code></a> <em>attribute of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>A synonym for <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs" title="sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_kwargs</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.ForeignKey">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">ForeignKey</span></span><a class="headerlink" href="#sqlalchemy.schema.ForeignKey" title="Link to this definition">¶</a></dt>
<dd><p>Defines a dependency between two columns.</p>
<p><code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> is specified as an argument to a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
object,
e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;remote_table&quot;</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;remote_id&quot;</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;main_table.id&quot;</span><span class="p">)),</span>
<span class="p">)</span></pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> is only a marker object that defines
a dependency between two columns.   The actual constraint
is in all cases represented by the <a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a>
object.   This object will be generated automatically when
a <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> is associated with a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> which
in turn is associated with a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>.   Conversely,
when <a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a> is applied to a
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>,
<code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> markers are automatically generated to be
present on each associated <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>, which are also
associated with the constraint object.</p>
<p>Note that you cannot define a “composite” foreign key constraint,
that is a constraint between a grouping of multiple parent/child
columns, using <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> objects.   To define this grouping,
the <a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a> object must be used, and applied
to the <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>.   The associated <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> objects
are created automatically.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> objects associated with an individual
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
object are available in the <cite>foreign_keys</cite> collection
of that column.</p>
<p>Further examples of foreign key configuration are in
<a class="reference internal" href="#metadata-foreignkeys"><span class="std std-ref">定义外键</span></a>.</p>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.schema.ForeignKey.__init__"><span class="sig-name descname">__init__()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ForeignKey.argument_for"><span class="sig-name descname">argument_for()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ForeignKey.column"><span class="sig-name descname">column</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ForeignKey.copy"><span class="sig-name descname">copy()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ForeignKey.dialect_kwargs"><span class="sig-name descname">dialect_kwargs</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ForeignKey.dialect_options"><span class="sig-name descname">dialect_options</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ForeignKey.get_referent"><span class="sig-name descname">get_referent()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ForeignKey.info"><span class="sig-name descname">info</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ForeignKey.kwargs"><span class="sig-name descname">kwargs</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ForeignKey.references"><span class="sig-name descname">references()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ForeignKey.target_fullname"><span class="sig-name descname">target_fullname</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.ForeignKey</span></code></a> (<a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.base.DialectKWArgs</span></code></a>, <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.SchemaItem</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.ForeignKey.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.ForeignKey"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ForeignKey.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_DDLColumnReferenceArgument</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_constraint</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><span class="pre">ForeignKeyConstraint</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_alter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_ConstraintNameArgument</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onupdate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ondelete</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deferrable</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initially</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">link_to_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">match</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_InfoType</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comment</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_unresolvable</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">dialect_kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.schema.ForeignKey.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Construct a column-level FOREIGN KEY.</p>
<p>The <a class="reference internal" href="#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> object when constructed generates a
<a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a>
which is associated with the parent
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> object’s collection of constraints.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.ForeignKey.params.column"></span><strong>column</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKey.params.column">¶</a> – A single target column for the key relationship. A
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> object or a column name as a string:
<code class="docutils literal notranslate"><span class="pre">tablename.columnkey</span></code> or <code class="docutils literal notranslate"><span class="pre">schema.tablename.columnkey</span></code>.
<code class="docutils literal notranslate"><span class="pre">columnkey</span></code> is the <code class="docutils literal notranslate"><span class="pre">key</span></code> which has been assigned to the column
(defaults to the column name itself), unless <code class="docutils literal notranslate"><span class="pre">link_to_name</span></code> is
<code class="docutils literal notranslate"><span class="pre">True</span></code> in which case the rendered name of the column is used.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKey.params.name"></span><strong>name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKey.params.name">¶</a> – Optional string. An in-database name for the key if
<cite>constraint</cite> is not provided.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKey.params.onupdate"></span><strong>onupdate</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKey.params.onupdate">¶</a> – <p>Optional string. If set, emit ON UPDATE &lt;value&gt; when
issuing DDL for this constraint. Typical values include CASCADE,
DELETE and RESTRICT.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#on-update-on-delete"><span class="std std-ref">ON UPDATE 和 ON DELETE</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKey.params.ondelete"></span><strong>ondelete</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKey.params.ondelete">¶</a> – <p>Optional string. If set, emit ON DELETE &lt;value&gt; when
issuing DDL for this constraint. Typical values include CASCADE,
SET NULL and RESTRICT.  Some dialects may allow for additional
syntaxes.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#on-update-on-delete"><span class="std std-ref">ON UPDATE 和 ON DELETE</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKey.params.deferrable"></span><strong>deferrable</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKey.params.deferrable">¶</a> – Optional bool. If set, emit DEFERRABLE or NOT
DEFERRABLE when issuing DDL for this constraint.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKey.params.initially"></span><strong>initially</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKey.params.initially">¶</a> – Optional string. If set, emit INITIALLY &lt;value&gt; when
issuing DDL for this constraint.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKey.params.link_to_name"></span><strong>link_to_name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKey.params.link_to_name">¶</a> – if True, the string name given in <code class="docutils literal notranslate"><span class="pre">column</span></code> is
the rendered name of the referenced column, not its locally
assigned <code class="docutils literal notranslate"><span class="pre">key</span></code>.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKey.params.use_alter"></span><strong>use_alter</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKey.params.use_alter">¶</a> – <p>passed to the underlying
<a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a>
to indicate the constraint should
be generated/dropped externally from the CREATE TABLE/ DROP TABLE
statement.  See <a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.params.use_alter" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">ForeignKeyConstraint.use_alter</span></code></a>
for further description.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.params.use_alter" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">ForeignKeyConstraint.use_alter</span></code></a></p>
<p><a class="reference internal" href="#use-alter"><span class="std std-ref">通过 ALTER 创建/删除外键约束</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKey.params.match"></span><strong>match</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKey.params.match">¶</a> – Optional string. If set, emit MATCH &lt;value&gt; when issuing
DDL for this constraint. Typical values include SIMPLE, PARTIAL
and FULL.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKey.params.info"></span><strong>info</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKey.params.info">¶</a> – Optional data dictionary which will be populated into the
<a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem.info" title="sqlalchemy.schema.SchemaItem.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SchemaItem.info</span></code></a> attribute of this object.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKey.params.comment"></span><strong>comment</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKey.params.comment">¶</a> – <p>Optional string that will render an SQL comment on
foreign key constraint creation.</p>
<blockquote>
<div><div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
</div></blockquote>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKey.params.**dialect_kw"></span><strong>**dialect_kw</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKey.params.**dialect_kw">¶</a> – Additional keyword arguments are dialect
specific, and passed in the form <code class="docutils literal notranslate"><span class="pre">&lt;dialectname&gt;_&lt;argname&gt;</span></code>.  The
arguments are ultimately handled by a corresponding
<a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a>.
See the documentation regarding
an individual dialect at <a class="reference internal" href="../dialects/index.html#dialect-toplevel"><span class="std std-ref">Dialects</span></a> for detail on
documented arguments.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.ForeignKey.argument_for">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><a class="reference internal" href="#sqlalchemy.schema.ForeignKey"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ForeignKey.</span></code></a><span class="sig-name descname"><span class="pre">argument_for</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dialect_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">argument_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.schema.ForeignKey.argument_for" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.argument_for" title="sqlalchemy.sql.base.DialectKWArgs.argument_for"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectKWArgs.argument_for()</span></code></a> <em>method of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>Add a new kind of dialect-specific keyword argument for this class.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Index</span><span class="o">.</span><span class="n">argument_for</span><span class="p">(</span><span class="s2">&quot;mydialect&quot;</span><span class="p">,</span> <span class="s2">&quot;length&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<span class="n">some_index</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">mydialect_length</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span></pre></div>
</div>
<p>The <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.argument_for" title="sqlalchemy.sql.base.DialectKWArgs.argument_for"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectKWArgs.argument_for()</span></code></a> method is a per-argument
way adding extra arguments to the
<a class="reference internal" href="internals.html#sqlalchemy.engine.default.DefaultDialect.construct_arguments" title="sqlalchemy.engine.default.DefaultDialect.construct_arguments"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DefaultDialect.construct_arguments</span></code></a> dictionary. This
dictionary provides a list of argument names accepted by various
schema-level constructs on behalf of a dialect.</p>
<p>New dialects should typically specify this dictionary all at once as a
data member of the dialect class.  The use case for ad-hoc addition of
argument names is typically for end-user code that is also using
a custom compilation scheme which consumes the additional arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.ForeignKey.argument_for.params.dialect_name"></span><strong>dialect_name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKey.argument_for.params.dialect_name">¶</a> – name of a dialect.  The dialect must be
locatable, else a <a class="reference internal" href="exceptions.html#sqlalchemy.exc.NoSuchModuleError" title="sqlalchemy.exc.NoSuchModuleError"><code class="xref py py-class docutils literal notranslate"><span class="pre">NoSuchModuleError</span></code></a> is raised.   The
dialect must also include an existing
<a class="reference internal" href="internals.html#sqlalchemy.engine.default.DefaultDialect.construct_arguments" title="sqlalchemy.engine.default.DefaultDialect.construct_arguments"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DefaultDialect.construct_arguments</span></code></a> collection, indicating
that it participates in the keyword-argument validation and default
system, else <a class="reference internal" href="exceptions.html#sqlalchemy.exc.ArgumentError" title="sqlalchemy.exc.ArgumentError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArgumentError</span></code></a> is raised.  If the dialect does
not include this collection, then any keyword argument can be
specified on behalf of this dialect already.  All dialects packaged
within SQLAlchemy include this collection, however for third party
dialects, support may vary.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKey.argument_for.params.argument_name"></span><strong>argument_name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKey.argument_for.params.argument_name">¶</a> – name of the parameter.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKey.argument_for.params.default"></span><strong>default</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKey.argument_for.params.default">¶</a> – default value of the parameter.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.ForeignKey.column">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.ForeignKey"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ForeignKey.</span></code></a><span class="sig-name descname"><span class="pre">column</span></span><a class="headerlink" href="#sqlalchemy.schema.ForeignKey.column" title="Link to this definition">¶</a></dt>
<dd><p>Return the target <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> referenced by this
<a class="reference internal" href="#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a>.</p>
<p>If no target column has been established, an exception
is raised.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.ForeignKey.copy">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.ForeignKey"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ForeignKey.</span></code></a><span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.schema.ForeignKey" title="sqlalchemy.sql.schema.ForeignKey"><span class="pre">ForeignKey</span></a></span></span><a class="headerlink" href="#sqlalchemy.schema.ForeignKey.copy" title="Link to this definition">¶</a></dt>
<dd><div class="deprecated">
<p><span class="versionmodified deprecated">自 1.4 版本弃用: </span>The <a class="reference internal" href="#sqlalchemy.schema.ForeignKey.copy" title="sqlalchemy.schema.ForeignKey.copy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ForeignKey.copy()</span></code></a> method is deprecated and will be removed in a future release.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.ForeignKey.dialect_kwargs">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.ForeignKey"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ForeignKey.</span></code></a><span class="sig-name descname"><span class="pre">dialect_kwargs</span></span><a class="headerlink" href="#sqlalchemy.schema.ForeignKey.dialect_kwargs" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs" title="sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_kwargs</span></code></a> <em>attribute of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>A collection of keyword arguments specified as dialect-specific
options to this construct.</p>
<p>The arguments are present here in their original <code class="docutils literal notranslate"><span class="pre">&lt;dialect&gt;_&lt;kwarg&gt;</span></code>
format.  Only arguments that were actually passed are included;
unlike the <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_options" title="sqlalchemy.sql.base.DialectKWArgs.dialect_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_options</span></code></a> collection, which
contains all options known by this dialect including defaults.</p>
<p>The collection is also writable; keys are accepted of the
form <code class="docutils literal notranslate"><span class="pre">&lt;dialect&gt;_&lt;kwarg&gt;</span></code> where the value will be assembled
into the list of options.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_options" title="sqlalchemy.sql.base.DialectKWArgs.dialect_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_options</span></code></a> - nested dictionary form</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.ForeignKey.dialect_options">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.ForeignKey"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ForeignKey.</span></code></a><span class="sig-name descname"><span class="pre">dialect_options</span></span><a class="headerlink" href="#sqlalchemy.schema.ForeignKey.dialect_options" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_options" title="sqlalchemy.sql.base.DialectKWArgs.dialect_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_options</span></code></a> <em>attribute of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>A collection of keyword arguments specified as dialect-specific
options to this construct.</p>
<p>This is a two-level nested registry, keyed to <code class="docutils literal notranslate"><span class="pre">&lt;dialect_name&gt;</span></code>
and <code class="docutils literal notranslate"><span class="pre">&lt;argument_name&gt;</span></code>.  For example, the <code class="docutils literal notranslate"><span class="pre">postgresql_where</span></code>
argument would be locatable as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">arg</span> <span class="o">=</span> <span class="n">my_object</span><span class="o">.</span><span class="n">dialect_options</span><span class="p">[</span><span class="s2">&quot;postgresql&quot;</span><span class="p">][</span><span class="s2">&quot;where&quot;</span><span class="p">]</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 0.9.2 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs" title="sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_kwargs</span></code></a> - flat dictionary form</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.ForeignKey.get_referent">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.ForeignKey"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ForeignKey.</span></code></a><span class="sig-name descname"><span class="pre">get_referent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.FromClause" title="sqlalchemy.sql.expression.FromClause"><span class="pre">FromClause</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><span class="pre">Column</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.schema.ForeignKey.get_referent" title="Link to this definition">¶</a></dt>
<dd><p>Return the <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> in the given
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> (or any <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.FromClause" title="sqlalchemy.sql.expression.FromClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">FromClause</span></code></a>)
referenced by this <a class="reference internal" href="#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a>.</p>
<p>Returns None if this <a class="reference internal" href="#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a>
does not reference the given
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.ForeignKey.info">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.ForeignKey"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ForeignKey.</span></code></a><span class="sig-name descname"><span class="pre">info</span></span><a class="headerlink" href="#sqlalchemy.schema.ForeignKey.info" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem.info" title="sqlalchemy.schema.SchemaItem.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SchemaItem.info</span></code></a> <em>attribute of</em> <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">SchemaItem</span></code></a></p>
</div>
<p>Info dictionary associated with the object, allowing user-defined
data to be associated with this <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">SchemaItem</span></code></a>.</p>
<p>The dictionary is automatically generated when first accessed.
It can also be specified in the constructor of some objects,
such as <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> and <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.ForeignKey.kwargs">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.ForeignKey"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ForeignKey.</span></code></a><span class="sig-name descname"><span class="pre">kwargs</span></span><a class="headerlink" href="#sqlalchemy.schema.ForeignKey.kwargs" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.kwargs" title="sqlalchemy.sql.base.DialectKWArgs.kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.kwargs</span></code></a> <em>attribute of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>A synonym for <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs" title="sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_kwargs</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.ForeignKey.references">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.ForeignKey"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ForeignKey.</span></code></a><span class="sig-name descname"><span class="pre">references</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.sql.schema.Table"><span class="pre">Table</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.schema.ForeignKey.references" title="Link to this definition">¶</a></dt>
<dd><p>Return True if the given <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
is referenced by this
<a class="reference internal" href="#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.ForeignKey.target_fullname">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.ForeignKey"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ForeignKey.</span></code></a><span class="sig-name descname"><span class="pre">target_fullname</span></span><a class="headerlink" href="#sqlalchemy.schema.ForeignKey.target_fullname" title="Link to this definition">¶</a></dt>
<dd><p>Return a string based ‘column specification’ for this
<a class="reference internal" href="#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a>.</p>
<p>This is usually the equivalent of the string-based “tablename.colname”
argument first passed to the object’s constructor.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.ForeignKeyConstraint">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">ForeignKeyConstraint</span></span><a class="headerlink" href="#sqlalchemy.schema.ForeignKeyConstraint" title="Link to this definition">¶</a></dt>
<dd><p>A table-level FOREIGN KEY constraint.</p>
<p>Defines a single column or composite FOREIGN KEY … REFERENCES
constraint. For a no-frills, single column foreign key, adding a
<a class="reference internal" href="#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> to the definition of a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
is a
shorthand equivalent for an unnamed, single column
<a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a>.</p>
<p>Examples of foreign key configuration are in <a class="reference internal" href="#metadata-foreignkeys"><span class="std std-ref">定义外键</span></a>.</p>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.__init__"><span class="sig-name descname">__init__()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.argument_for"><span class="sig-name descname">argument_for()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.column_keys"><span class="sig-name descname">column_keys</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.columns"><span class="sig-name descname">columns</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.contains_column"><span class="sig-name descname">contains_column()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.copy"><span class="sig-name descname">copy()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.ddl_if"><span class="sig-name descname">ddl_if()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.dialect_kwargs"><span class="sig-name descname">dialect_kwargs</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.dialect_options"><span class="sig-name descname">dialect_options</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.elements"><span class="sig-name descname">elements</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.info"><span class="sig-name descname">info</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.kwargs"><span class="sig-name descname">kwargs</span></a>, <a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.referred_table"><span class="sig-name descname">referred_table</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.ForeignKeyConstraint</span></code></a> (<a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint" title="sqlalchemy.schema.ColumnCollectionConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.ColumnCollectionConstraint</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.ForeignKeyConstraint.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ForeignKeyConstraint.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_typing_Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">_DDLColumnArgument</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refcolumns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_typing_Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">_DDLColumnReferenceArgument</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_ConstraintNameArgument</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onupdate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ondelete</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deferrable</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initially</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_alter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">link_to_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">match</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><span class="pre">Table</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_InfoType</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comment</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">dialect_kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.schema.ForeignKeyConstraint.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Construct a composite-capable FOREIGN KEY.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.ForeignKeyConstraint.params.columns"></span><strong>columns</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.params.columns">¶</a> – A sequence of local column names. The named columns
must be defined and present in the parent Table. The names should
match the <code class="docutils literal notranslate"><span class="pre">key</span></code> given to each column (defaults to the name) unless
<code class="docutils literal notranslate"><span class="pre">link_to_name</span></code> is True.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKeyConstraint.params.refcolumns"></span><strong>refcolumns</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.params.refcolumns">¶</a> – A sequence of foreign column names or Column
objects. The columns must all be located within the same Table.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKeyConstraint.params.name"></span><strong>name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.params.name">¶</a> – Optional, the in-database name of the key.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKeyConstraint.params.onupdate"></span><strong>onupdate</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.params.onupdate">¶</a> – <p>Optional string. If set, emit ON UPDATE &lt;value&gt; when
issuing DDL for this constraint. Typical values include CASCADE,
DELETE and RESTRICT.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#on-update-on-delete"><span class="std std-ref">ON UPDATE 和 ON DELETE</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKeyConstraint.params.ondelete"></span><strong>ondelete</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.params.ondelete">¶</a> – <p>Optional string. If set, emit ON DELETE &lt;value&gt; when
issuing DDL for this constraint. Typical values include CASCADE,
SET NULL and RESTRICT.  Some dialects may allow for additional
syntaxes.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#on-update-on-delete"><span class="std std-ref">ON UPDATE 和 ON DELETE</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKeyConstraint.params.deferrable"></span><strong>deferrable</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.params.deferrable">¶</a> – Optional bool. If set, emit DEFERRABLE or NOT
DEFERRABLE when issuing DDL for this constraint.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKeyConstraint.params.initially"></span><strong>initially</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.params.initially">¶</a> – Optional string. If set, emit INITIALLY &lt;value&gt; when
issuing DDL for this constraint.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKeyConstraint.params.link_to_name"></span><strong>link_to_name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.params.link_to_name">¶</a> – if True, the string name given in <code class="docutils literal notranslate"><span class="pre">column</span></code> is
the rendered name of the referenced column, not its locally assigned
<code class="docutils literal notranslate"><span class="pre">key</span></code>.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKeyConstraint.params.use_alter"></span><strong>use_alter</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.params.use_alter">¶</a> – <p>If True, do not emit the DDL for this constraint as
part of the CREATE TABLE definition. Instead, generate it via an
ALTER TABLE statement issued after the full collection of tables
have been created, and drop it via an ALTER TABLE statement before
the full collection of tables are dropped.</p>
<p>The use of <a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.params.use_alter" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">ForeignKeyConstraint.use_alter</span></code></a> is
particularly geared towards the case where two or more tables
are established within a mutually-dependent foreign key constraint
relationship; however, the <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.create_all" title="sqlalchemy.schema.MetaData.create_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.create_all()</span></code></a> and
<a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.drop_all" title="sqlalchemy.schema.MetaData.drop_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.drop_all()</span></code></a>
methods will perform this resolution
automatically, so the flag is normally not needed.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#use-alter"><span class="std std-ref">通过 ALTER 创建/删除外键约束</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKeyConstraint.params.match"></span><strong>match</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.params.match">¶</a> – Optional string. If set, emit MATCH &lt;value&gt; when issuing
DDL for this constraint. Typical values include SIMPLE, PARTIAL
and FULL.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKeyConstraint.params.info"></span><strong>info</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.params.info">¶</a> – Optional data dictionary which will be populated into the
<a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem.info" title="sqlalchemy.schema.SchemaItem.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SchemaItem.info</span></code></a> attribute of this object.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKeyConstraint.params.comment"></span><strong>comment</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.params.comment">¶</a> – <p>Optional string that will render an SQL comment on
foreign key constraint creation.</p>
<blockquote>
<div><div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
</div></blockquote>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKeyConstraint.params.**dialect_kw"></span><strong>**dialect_kw</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.params.**dialect_kw">¶</a> – Additional keyword arguments are dialect
specific, and passed in the form <code class="docutils literal notranslate"><span class="pre">&lt;dialectname&gt;_&lt;argname&gt;</span></code>.  See
the documentation regarding an individual dialect at
<a class="reference internal" href="../dialects/index.html#dialect-toplevel"><span class="std std-ref">Dialects</span></a> for detail on documented arguments.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.ForeignKeyConstraint.argument_for">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ForeignKeyConstraint.</span></code></a><span class="sig-name descname"><span class="pre">argument_for</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dialect_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">argument_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.schema.ForeignKeyConstraint.argument_for" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.argument_for" title="sqlalchemy.sql.base.DialectKWArgs.argument_for"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectKWArgs.argument_for()</span></code></a> <em>method of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>Add a new kind of dialect-specific keyword argument for this class.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Index</span><span class="o">.</span><span class="n">argument_for</span><span class="p">(</span><span class="s2">&quot;mydialect&quot;</span><span class="p">,</span> <span class="s2">&quot;length&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<span class="n">some_index</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">mydialect_length</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span></pre></div>
</div>
<p>The <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.argument_for" title="sqlalchemy.sql.base.DialectKWArgs.argument_for"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectKWArgs.argument_for()</span></code></a> method is a per-argument
way adding extra arguments to the
<a class="reference internal" href="internals.html#sqlalchemy.engine.default.DefaultDialect.construct_arguments" title="sqlalchemy.engine.default.DefaultDialect.construct_arguments"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DefaultDialect.construct_arguments</span></code></a> dictionary. This
dictionary provides a list of argument names accepted by various
schema-level constructs on behalf of a dialect.</p>
<p>New dialects should typically specify this dictionary all at once as a
data member of the dialect class.  The use case for ad-hoc addition of
argument names is typically for end-user code that is also using
a custom compilation scheme which consumes the additional arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.ForeignKeyConstraint.argument_for.params.dialect_name"></span><strong>dialect_name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.argument_for.params.dialect_name">¶</a> – name of a dialect.  The dialect must be
locatable, else a <a class="reference internal" href="exceptions.html#sqlalchemy.exc.NoSuchModuleError" title="sqlalchemy.exc.NoSuchModuleError"><code class="xref py py-class docutils literal notranslate"><span class="pre">NoSuchModuleError</span></code></a> is raised.   The
dialect must also include an existing
<a class="reference internal" href="internals.html#sqlalchemy.engine.default.DefaultDialect.construct_arguments" title="sqlalchemy.engine.default.DefaultDialect.construct_arguments"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DefaultDialect.construct_arguments</span></code></a> collection, indicating
that it participates in the keyword-argument validation and default
system, else <a class="reference internal" href="exceptions.html#sqlalchemy.exc.ArgumentError" title="sqlalchemy.exc.ArgumentError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArgumentError</span></code></a> is raised.  If the dialect does
not include this collection, then any keyword argument can be
specified on behalf of this dialect already.  All dialects packaged
within SQLAlchemy include this collection, however for third party
dialects, support may vary.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKeyConstraint.argument_for.params.argument_name"></span><strong>argument_name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.argument_for.params.argument_name">¶</a> – name of the parameter.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKeyConstraint.argument_for.params.default"></span><strong>default</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.argument_for.params.default">¶</a> – default value of the parameter.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.ForeignKeyConstraint.column_keys">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ForeignKeyConstraint.</span></code></a><span class="sig-name descname"><span class="pre">column_keys</span></span><a class="headerlink" href="#sqlalchemy.schema.ForeignKeyConstraint.column_keys" title="Link to this definition">¶</a></dt>
<dd><p>Return a list of string keys representing the local
columns in this <a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a>.</p>
<p>This list is either the original string arguments sent
to the constructor of the <a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a>,
or if the constraint has been initialized with <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
objects, is the string <code class="docutils literal notranslate"><span class="pre">.key</span></code> of each element.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.ForeignKeyConstraint.columns">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ForeignKeyConstraint.</span></code></a><span class="sig-name descname"><span class="pre">columns</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ReadOnlyColumnCollection</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><span class="pre">Column</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.schema.ForeignKeyConstraint.columns" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="xref py py-attr docutils literal notranslate"><span class="pre">ColumnCollectionMixin.columns</span></code> <em>attribute of</em> <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionMixin" title="sqlalchemy.schema.ColumnCollectionMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnCollectionMixin</span></code></a></p>
</div>
<p>A <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnCollection" title="sqlalchemy.sql.expression.ColumnCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnCollection</span></code></a> representing the set of columns
for this constraint.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.ForeignKeyConstraint.contains_column">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ForeignKeyConstraint.</span></code></a><span class="sig-name descname"><span class="pre">contains_column</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.sql.schema.Column"><span class="pre">Column</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.schema.ForeignKeyConstraint.contains_column" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.contains_column" title="sqlalchemy.schema.ColumnCollectionConstraint.contains_column"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ColumnCollectionConstraint.contains_column()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint" title="sqlalchemy.schema.ColumnCollectionConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnCollectionConstraint</span></code></a></p>
</div>
<p>Return True if this constraint contains the given column.</p>
<p>Note that this object also contains an attribute <code class="docutils literal notranslate"><span class="pre">.columns</span></code>
which is a <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnCollection" title="sqlalchemy.sql.expression.ColumnCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnCollection</span></code></a> of
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.ForeignKeyConstraint.copy">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ForeignKeyConstraint.</span></code></a><span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.sql.schema.Table"><span class="pre">Table</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.sql.schema.ForeignKeyConstraint"><span class="pre">ForeignKeyConstraint</span></a></span></span><a class="headerlink" href="#sqlalchemy.schema.ForeignKeyConstraint.copy" title="Link to this definition">¶</a></dt>
<dd><div class="deprecated">
<p><span class="versionmodified deprecated">自 1.4 版本弃用: </span>The <a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.copy" title="sqlalchemy.schema.ForeignKeyConstraint.copy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ForeignKeyConstraint.copy()</span></code></a> method is deprecated and will be removed in a future release.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.ForeignKeyConstraint.ddl_if">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ForeignKeyConstraint.</span></code></a><span class="sig-name descname"><span class="pre">ddl_if</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dialect</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callable_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DDLIfCallable</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.schema.ForeignKeyConstraint.ddl_if" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL.ddl_if" title="sqlalchemy.schema.HasConditionalDDL.ddl_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HasConditionalDDL.ddl_if()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL" title="sqlalchemy.schema.HasConditionalDDL"><code class="xref py py-class docutils literal notranslate"><span class="pre">HasConditionalDDL</span></code></a></p>
</div>
<p>apply a conditional DDL rule to this schema item.</p>
<p>These rules work in a similar manner to the
<a class="reference internal" href="ddl.html#sqlalchemy.schema.ExecutableDDLElement.execute_if" title="sqlalchemy.schema.ExecutableDDLElement.execute_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExecutableDDLElement.execute_if()</span></code></a> callable, with the added
feature that the criteria may be checked within the DDL compilation
phase for a construct such as <a class="reference internal" href="ddl.html#sqlalchemy.schema.CreateTable" title="sqlalchemy.schema.CreateTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateTable</span></code></a>.
<a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL.ddl_if" title="sqlalchemy.schema.HasConditionalDDL.ddl_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HasConditionalDDL.ddl_if()</span></code></a> currently applies towards the
<a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> construct as well as all <a class="reference internal" href="#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a>
constructs.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.ForeignKeyConstraint.ddl_if.params.dialect"></span><strong>dialect</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.ddl_if.params.dialect">¶</a> – string name of a dialect, or a tuple of string names
to indicate multiple dialect types.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKeyConstraint.ddl_if.params.callable_"></span><strong>callable_</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.ddl_if.params.callable_">¶</a> – a callable that is constructed using the same form
as that described in
<a class="reference internal" href="ddl.html#sqlalchemy.schema.ExecutableDDLElement.execute_if.params.callable_" title="sqlalchemy.schema.ExecutableDDLElement.execute_if"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">ExecutableDDLElement.execute_if.callable_</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ForeignKeyConstraint.ddl_if.params.state"></span><strong>state</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.ddl_if.params.state">¶</a> – any arbitrary object that will be passed to the
callable, if present.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="ddl.html#schema-ddl-ddl-if"><span class="std std-ref">控制 DDL 约束和索引的生成</span></a> - background and usage examples</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.ForeignKeyConstraint.dialect_kwargs">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ForeignKeyConstraint.</span></code></a><span class="sig-name descname"><span class="pre">dialect_kwargs</span></span><a class="headerlink" href="#sqlalchemy.schema.ForeignKeyConstraint.dialect_kwargs" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs" title="sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_kwargs</span></code></a> <em>attribute of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>A collection of keyword arguments specified as dialect-specific
options to this construct.</p>
<p>The arguments are present here in their original <code class="docutils literal notranslate"><span class="pre">&lt;dialect&gt;_&lt;kwarg&gt;</span></code>
format.  Only arguments that were actually passed are included;
unlike the <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_options" title="sqlalchemy.sql.base.DialectKWArgs.dialect_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_options</span></code></a> collection, which
contains all options known by this dialect including defaults.</p>
<p>The collection is also writable; keys are accepted of the
form <code class="docutils literal notranslate"><span class="pre">&lt;dialect&gt;_&lt;kwarg&gt;</span></code> where the value will be assembled
into the list of options.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_options" title="sqlalchemy.sql.base.DialectKWArgs.dialect_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_options</span></code></a> - nested dictionary form</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.ForeignKeyConstraint.dialect_options">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ForeignKeyConstraint.</span></code></a><span class="sig-name descname"><span class="pre">dialect_options</span></span><a class="headerlink" href="#sqlalchemy.schema.ForeignKeyConstraint.dialect_options" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_options" title="sqlalchemy.sql.base.DialectKWArgs.dialect_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_options</span></code></a> <em>attribute of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>A collection of keyword arguments specified as dialect-specific
options to this construct.</p>
<p>This is a two-level nested registry, keyed to <code class="docutils literal notranslate"><span class="pre">&lt;dialect_name&gt;</span></code>
and <code class="docutils literal notranslate"><span class="pre">&lt;argument_name&gt;</span></code>.  For example, the <code class="docutils literal notranslate"><span class="pre">postgresql_where</span></code>
argument would be locatable as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">arg</span> <span class="o">=</span> <span class="n">my_object</span><span class="o">.</span><span class="n">dialect_options</span><span class="p">[</span><span class="s2">&quot;postgresql&quot;</span><span class="p">][</span><span class="s2">&quot;where&quot;</span><span class="p">]</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 0.9.2 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs" title="sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_kwargs</span></code></a> - flat dictionary form</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.ForeignKeyConstraint.elements">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ForeignKeyConstraint.</span></code></a><span class="sig-name descname"><span class="pre">elements</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><span class="pre">ForeignKey</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.schema.ForeignKeyConstraint.elements" title="Link to this definition">¶</a></dt>
<dd><p>A sequence of <a class="reference internal" href="#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> objects.</p>
<p>Each <a class="reference internal" href="#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a>
represents a single referring column/referred
column pair.</p>
<p>This collection is intended to be read-only.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.ForeignKeyConstraint.info">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ForeignKeyConstraint.</span></code></a><span class="sig-name descname"><span class="pre">info</span></span><a class="headerlink" href="#sqlalchemy.schema.ForeignKeyConstraint.info" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem.info" title="sqlalchemy.schema.SchemaItem.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SchemaItem.info</span></code></a> <em>attribute of</em> <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">SchemaItem</span></code></a></p>
</div>
<p>Info dictionary associated with the object, allowing user-defined
data to be associated with this <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">SchemaItem</span></code></a>.</p>
<p>The dictionary is automatically generated when first accessed.
It can also be specified in the constructor of some objects,
such as <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> and <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.ForeignKeyConstraint.kwargs">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ForeignKeyConstraint.</span></code></a><span class="sig-name descname"><span class="pre">kwargs</span></span><a class="headerlink" href="#sqlalchemy.schema.ForeignKeyConstraint.kwargs" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.kwargs" title="sqlalchemy.sql.base.DialectKWArgs.kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.kwargs</span></code></a> <em>attribute of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>A synonym for <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs" title="sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_kwargs</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.ForeignKeyConstraint.referred_table">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ForeignKeyConstraint.</span></code></a><span class="sig-name descname"><span class="pre">referred_table</span></span><a class="headerlink" href="#sqlalchemy.schema.ForeignKeyConstraint.referred_table" title="Link to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> object to which this
<a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a> references.</p>
<p>This is a dynamically calculated attribute which may not be available
if the constraint and/or parent table is not yet associated with
a metadata collection that contains the referred table.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.HasConditionalDDL">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">HasConditionalDDL</span></span><a class="headerlink" href="#sqlalchemy.schema.HasConditionalDDL" title="Link to this definition">¶</a></dt>
<dd><p>define a class that includes the <a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL.ddl_if" title="sqlalchemy.schema.HasConditionalDDL.ddl_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HasConditionalDDL.ddl_if()</span></code></a>
method, allowing for conditional rendering of DDL.</p>
<p>Currently applies to constraints and indexes.</p>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL.ddl_if"><span class="sig-name descname">ddl_if()</span></a></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.HasConditionalDDL.ddl_if">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.HasConditionalDDL.</span></code></a><span class="sig-name descname"><span class="pre">ddl_if</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dialect</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callable_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DDLIfCallable</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.schema.HasConditionalDDL.ddl_if" title="Link to this definition">¶</a></dt>
<dd><p>apply a conditional DDL rule to this schema item.</p>
<p>These rules work in a similar manner to the
<a class="reference internal" href="ddl.html#sqlalchemy.schema.ExecutableDDLElement.execute_if" title="sqlalchemy.schema.ExecutableDDLElement.execute_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExecutableDDLElement.execute_if()</span></code></a> callable, with the added
feature that the criteria may be checked within the DDL compilation
phase for a construct such as <a class="reference internal" href="ddl.html#sqlalchemy.schema.CreateTable" title="sqlalchemy.schema.CreateTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateTable</span></code></a>.
<a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL.ddl_if" title="sqlalchemy.schema.HasConditionalDDL.ddl_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HasConditionalDDL.ddl_if()</span></code></a> currently applies towards the
<a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> construct as well as all <a class="reference internal" href="#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a>
constructs.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.HasConditionalDDL.ddl_if.params.dialect"></span><strong>dialect</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.HasConditionalDDL.ddl_if.params.dialect">¶</a> – string name of a dialect, or a tuple of string names
to indicate multiple dialect types.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.HasConditionalDDL.ddl_if.params.callable_"></span><strong>callable_</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.HasConditionalDDL.ddl_if.params.callable_">¶</a> – a callable that is constructed using the same form
as that described in
<a class="reference internal" href="ddl.html#sqlalchemy.schema.ExecutableDDLElement.execute_if.params.callable_" title="sqlalchemy.schema.ExecutableDDLElement.execute_if"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">ExecutableDDLElement.execute_if.callable_</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.HasConditionalDDL.ddl_if.params.state"></span><strong>state</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.HasConditionalDDL.ddl_if.params.state">¶</a> – any arbitrary object that will be passed to the
callable, if present.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="ddl.html#schema-ddl-ddl-if"><span class="std std-ref">控制 DDL 约束和索引的生成</span></a> - background and usage examples</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.PrimaryKeyConstraint">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">PrimaryKeyConstraint</span></span><a class="headerlink" href="#sqlalchemy.schema.PrimaryKeyConstraint" title="Link to this definition">¶</a></dt>
<dd><p>A table-level PRIMARY KEY constraint.</p>
<p>The <a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">PrimaryKeyConstraint</span></code></a> object is present automatically
on any <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> object; it is assigned a set of
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects corresponding to those marked with
the <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.primary_key" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.primary_key</span></code></a> flag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;mytable&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">metadata</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;version_id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">)),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_table</span><span class="o">.</span><span class="n">primary_key</span>
<span class="go">PrimaryKeyConstraint(</span>
<span class="go">    Column(&#39;id&#39;, Integer(), table=&lt;mytable&gt;,</span>
<span class="go">           primary_key=True, nullable=False),</span>
<span class="go">    Column(&#39;version_id&#39;, Integer(), table=&lt;mytable&gt;,</span>
<span class="go">           primary_key=True, nullable=False)</span>
<span class="go">)</span></pre></div>
</div>
<p>The primary key of a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> can also be specified by using
a <a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">PrimaryKeyConstraint</span></code></a> object explicitly; in this mode of usage,
the “name” of the constraint can also be specified, as well as other
options which may be recognized by dialects:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;mytable&quot;</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;version_id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">)),</span>
    <span class="n">PrimaryKeyConstraint</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;version_id&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;mytable_pk&quot;</span><span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
<p>The two styles of column-specification should generally not be mixed.
An warning is emitted if the columns present in the
<a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">PrimaryKeyConstraint</span></code></a>
don’t match the columns that were marked as <code class="docutils literal notranslate"><span class="pre">primary_key=True</span></code>, if both
are present; in this case, the columns are taken strictly from the
<a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">PrimaryKeyConstraint</span></code></a> declaration, and those columns otherwise
marked as <code class="docutils literal notranslate"><span class="pre">primary_key=True</span></code> are ignored.  This behavior is intended to
be backwards compatible with previous behavior.</p>
<p>For the use case where specific options are to be specified on the
<a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">PrimaryKeyConstraint</span></code></a>, but the usual style of using
<code class="docutils literal notranslate"><span class="pre">primary_key=True</span></code> flags is still desirable, an empty
<a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">PrimaryKeyConstraint</span></code></a> may be specified, which will take on the
primary key column collection from the <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> based on the
flags:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;mytable&quot;</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;version_id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">)),</span>
    <span class="n">PrimaryKeyConstraint</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;mytable_pk&quot;</span><span class="p">,</span> <span class="n">mssql_clustered</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint.argument_for"><span class="sig-name descname">argument_for()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint.columns"><span class="sig-name descname">columns</span></a>, <a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint.contains_column"><span class="sig-name descname">contains_column()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint.copy"><span class="sig-name descname">copy()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint.ddl_if"><span class="sig-name descname">ddl_if()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint.dialect_kwargs"><span class="sig-name descname">dialect_kwargs</span></a>, <a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint.dialect_options"><span class="sig-name descname">dialect_options</span></a>, <a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint.info"><span class="sig-name descname">info</span></a>, <a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint.kwargs"><span class="sig-name descname">kwargs</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.PrimaryKeyConstraint</span></code></a> (<a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint" title="sqlalchemy.schema.ColumnCollectionConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.ColumnCollectionConstraint</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.PrimaryKeyConstraint.argument_for">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.PrimaryKeyConstraint.</span></code></a><span class="sig-name descname"><span class="pre">argument_for</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dialect_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">argument_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.schema.PrimaryKeyConstraint.argument_for" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.argument_for" title="sqlalchemy.sql.base.DialectKWArgs.argument_for"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectKWArgs.argument_for()</span></code></a> <em>method of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>Add a new kind of dialect-specific keyword argument for this class.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Index</span><span class="o">.</span><span class="n">argument_for</span><span class="p">(</span><span class="s2">&quot;mydialect&quot;</span><span class="p">,</span> <span class="s2">&quot;length&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<span class="n">some_index</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">mydialect_length</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span></pre></div>
</div>
<p>The <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.argument_for" title="sqlalchemy.sql.base.DialectKWArgs.argument_for"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectKWArgs.argument_for()</span></code></a> method is a per-argument
way adding extra arguments to the
<a class="reference internal" href="internals.html#sqlalchemy.engine.default.DefaultDialect.construct_arguments" title="sqlalchemy.engine.default.DefaultDialect.construct_arguments"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DefaultDialect.construct_arguments</span></code></a> dictionary. This
dictionary provides a list of argument names accepted by various
schema-level constructs on behalf of a dialect.</p>
<p>New dialects should typically specify this dictionary all at once as a
data member of the dialect class.  The use case for ad-hoc addition of
argument names is typically for end-user code that is also using
a custom compilation scheme which consumes the additional arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.PrimaryKeyConstraint.argument_for.params.dialect_name"></span><strong>dialect_name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint.argument_for.params.dialect_name">¶</a> – name of a dialect.  The dialect must be
locatable, else a <a class="reference internal" href="exceptions.html#sqlalchemy.exc.NoSuchModuleError" title="sqlalchemy.exc.NoSuchModuleError"><code class="xref py py-class docutils literal notranslate"><span class="pre">NoSuchModuleError</span></code></a> is raised.   The
dialect must also include an existing
<a class="reference internal" href="internals.html#sqlalchemy.engine.default.DefaultDialect.construct_arguments" title="sqlalchemy.engine.default.DefaultDialect.construct_arguments"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DefaultDialect.construct_arguments</span></code></a> collection, indicating
that it participates in the keyword-argument validation and default
system, else <a class="reference internal" href="exceptions.html#sqlalchemy.exc.ArgumentError" title="sqlalchemy.exc.ArgumentError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArgumentError</span></code></a> is raised.  If the dialect does
not include this collection, then any keyword argument can be
specified on behalf of this dialect already.  All dialects packaged
within SQLAlchemy include this collection, however for third party
dialects, support may vary.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.PrimaryKeyConstraint.argument_for.params.argument_name"></span><strong>argument_name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint.argument_for.params.argument_name">¶</a> – name of the parameter.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.PrimaryKeyConstraint.argument_for.params.default"></span><strong>default</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint.argument_for.params.default">¶</a> – default value of the parameter.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.PrimaryKeyConstraint.columns">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.PrimaryKeyConstraint.</span></code></a><span class="sig-name descname"><span class="pre">columns</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ReadOnlyColumnCollection</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><span class="pre">Column</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.schema.PrimaryKeyConstraint.columns" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="xref py py-attr docutils literal notranslate"><span class="pre">ColumnCollectionMixin.columns</span></code> <em>attribute of</em> <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionMixin" title="sqlalchemy.schema.ColumnCollectionMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnCollectionMixin</span></code></a></p>
</div>
<p>A <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnCollection" title="sqlalchemy.sql.expression.ColumnCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnCollection</span></code></a> representing the set of columns
for this constraint.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.PrimaryKeyConstraint.contains_column">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.PrimaryKeyConstraint.</span></code></a><span class="sig-name descname"><span class="pre">contains_column</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.sql.schema.Column"><span class="pre">Column</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.schema.PrimaryKeyConstraint.contains_column" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.contains_column" title="sqlalchemy.schema.ColumnCollectionConstraint.contains_column"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ColumnCollectionConstraint.contains_column()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint" title="sqlalchemy.schema.ColumnCollectionConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnCollectionConstraint</span></code></a></p>
</div>
<p>Return True if this constraint contains the given column.</p>
<p>Note that this object also contains an attribute <code class="docutils literal notranslate"><span class="pre">.columns</span></code>
which is a <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnCollection" title="sqlalchemy.sql.expression.ColumnCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnCollection</span></code></a> of
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.PrimaryKeyConstraint.copy">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.PrimaryKeyConstraint.</span></code></a><span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.sql.schema.Table"><span class="pre">Table</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint" title="sqlalchemy.sql.schema.ColumnCollectionConstraint"><span class="pre">ColumnCollectionConstraint</span></a></span></span><a class="headerlink" href="#sqlalchemy.schema.PrimaryKeyConstraint.copy" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.copy" title="sqlalchemy.schema.ColumnCollectionConstraint.copy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ColumnCollectionConstraint.copy()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint" title="sqlalchemy.schema.ColumnCollectionConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnCollectionConstraint</span></code></a></p>
</div>
<div class="deprecated">
<p><span class="versionmodified deprecated">自 1.4 版本弃用: </span>The <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.copy" title="sqlalchemy.schema.ColumnCollectionConstraint.copy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ColumnCollectionConstraint.copy()</span></code></a> method is deprecated and will be removed in a future release.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.PrimaryKeyConstraint.ddl_if">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.PrimaryKeyConstraint.</span></code></a><span class="sig-name descname"><span class="pre">ddl_if</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dialect</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callable_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DDLIfCallable</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.schema.PrimaryKeyConstraint.ddl_if" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL.ddl_if" title="sqlalchemy.schema.HasConditionalDDL.ddl_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HasConditionalDDL.ddl_if()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL" title="sqlalchemy.schema.HasConditionalDDL"><code class="xref py py-class docutils literal notranslate"><span class="pre">HasConditionalDDL</span></code></a></p>
</div>
<p>apply a conditional DDL rule to this schema item.</p>
<p>These rules work in a similar manner to the
<a class="reference internal" href="ddl.html#sqlalchemy.schema.ExecutableDDLElement.execute_if" title="sqlalchemy.schema.ExecutableDDLElement.execute_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExecutableDDLElement.execute_if()</span></code></a> callable, with the added
feature that the criteria may be checked within the DDL compilation
phase for a construct such as <a class="reference internal" href="ddl.html#sqlalchemy.schema.CreateTable" title="sqlalchemy.schema.CreateTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateTable</span></code></a>.
<a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL.ddl_if" title="sqlalchemy.schema.HasConditionalDDL.ddl_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HasConditionalDDL.ddl_if()</span></code></a> currently applies towards the
<a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> construct as well as all <a class="reference internal" href="#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a>
constructs.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.PrimaryKeyConstraint.ddl_if.params.dialect"></span><strong>dialect</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint.ddl_if.params.dialect">¶</a> – string name of a dialect, or a tuple of string names
to indicate multiple dialect types.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.PrimaryKeyConstraint.ddl_if.params.callable_"></span><strong>callable_</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint.ddl_if.params.callable_">¶</a> – a callable that is constructed using the same form
as that described in
<a class="reference internal" href="ddl.html#sqlalchemy.schema.ExecutableDDLElement.execute_if.params.callable_" title="sqlalchemy.schema.ExecutableDDLElement.execute_if"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">ExecutableDDLElement.execute_if.callable_</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.PrimaryKeyConstraint.ddl_if.params.state"></span><strong>state</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint.ddl_if.params.state">¶</a> – any arbitrary object that will be passed to the
callable, if present.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="ddl.html#schema-ddl-ddl-if"><span class="std std-ref">控制 DDL 约束和索引的生成</span></a> - background and usage examples</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.PrimaryKeyConstraint.dialect_kwargs">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.PrimaryKeyConstraint.</span></code></a><span class="sig-name descname"><span class="pre">dialect_kwargs</span></span><a class="headerlink" href="#sqlalchemy.schema.PrimaryKeyConstraint.dialect_kwargs" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs" title="sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_kwargs</span></code></a> <em>attribute of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>A collection of keyword arguments specified as dialect-specific
options to this construct.</p>
<p>The arguments are present here in their original <code class="docutils literal notranslate"><span class="pre">&lt;dialect&gt;_&lt;kwarg&gt;</span></code>
format.  Only arguments that were actually passed are included;
unlike the <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_options" title="sqlalchemy.sql.base.DialectKWArgs.dialect_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_options</span></code></a> collection, which
contains all options known by this dialect including defaults.</p>
<p>The collection is also writable; keys are accepted of the
form <code class="docutils literal notranslate"><span class="pre">&lt;dialect&gt;_&lt;kwarg&gt;</span></code> where the value will be assembled
into the list of options.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_options" title="sqlalchemy.sql.base.DialectKWArgs.dialect_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_options</span></code></a> - nested dictionary form</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.PrimaryKeyConstraint.dialect_options">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.PrimaryKeyConstraint.</span></code></a><span class="sig-name descname"><span class="pre">dialect_options</span></span><a class="headerlink" href="#sqlalchemy.schema.PrimaryKeyConstraint.dialect_options" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_options" title="sqlalchemy.sql.base.DialectKWArgs.dialect_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_options</span></code></a> <em>attribute of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>A collection of keyword arguments specified as dialect-specific
options to this construct.</p>
<p>This is a two-level nested registry, keyed to <code class="docutils literal notranslate"><span class="pre">&lt;dialect_name&gt;</span></code>
and <code class="docutils literal notranslate"><span class="pre">&lt;argument_name&gt;</span></code>.  For example, the <code class="docutils literal notranslate"><span class="pre">postgresql_where</span></code>
argument would be locatable as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">arg</span> <span class="o">=</span> <span class="n">my_object</span><span class="o">.</span><span class="n">dialect_options</span><span class="p">[</span><span class="s2">&quot;postgresql&quot;</span><span class="p">][</span><span class="s2">&quot;where&quot;</span><span class="p">]</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 0.9.2 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs" title="sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_kwargs</span></code></a> - flat dictionary form</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.PrimaryKeyConstraint.info">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.PrimaryKeyConstraint.</span></code></a><span class="sig-name descname"><span class="pre">info</span></span><a class="headerlink" href="#sqlalchemy.schema.PrimaryKeyConstraint.info" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem.info" title="sqlalchemy.schema.SchemaItem.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SchemaItem.info</span></code></a> <em>attribute of</em> <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">SchemaItem</span></code></a></p>
</div>
<p>Info dictionary associated with the object, allowing user-defined
data to be associated with this <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">SchemaItem</span></code></a>.</p>
<p>The dictionary is automatically generated when first accessed.
It can also be specified in the constructor of some objects,
such as <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> and <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.PrimaryKeyConstraint.kwargs">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.PrimaryKeyConstraint.</span></code></a><span class="sig-name descname"><span class="pre">kwargs</span></span><a class="headerlink" href="#sqlalchemy.schema.PrimaryKeyConstraint.kwargs" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.kwargs" title="sqlalchemy.sql.base.DialectKWArgs.kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.kwargs</span></code></a> <em>attribute of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>A synonym for <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs" title="sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_kwargs</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.UniqueConstraint">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">UniqueConstraint</span></span><a class="headerlink" href="#sqlalchemy.schema.UniqueConstraint" title="Link to this definition">¶</a></dt>
<dd><p>A table-level UNIQUE constraint.</p>
<p>Defines a single column or composite UNIQUE constraint. For a no-frills,
single column constraint, adding <code class="docutils literal notranslate"><span class="pre">unique=True</span></code> to the <code class="docutils literal notranslate"><span class="pre">Column</span></code>
definition is a shorthand equivalent for an unnamed, single column
UniqueConstraint.</p>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint.__init__"><span class="sig-name descname">__init__()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint.argument_for"><span class="sig-name descname">argument_for()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint.columns"><span class="sig-name descname">columns</span></a>, <a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint.contains_column"><span class="sig-name descname">contains_column()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint.copy"><span class="sig-name descname">copy()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint.ddl_if"><span class="sig-name descname">ddl_if()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint.dialect_kwargs"><span class="sig-name descname">dialect_kwargs</span></a>, <a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint.dialect_options"><span class="sig-name descname">dialect_options</span></a>, <a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint.info"><span class="sig-name descname">info</span></a>, <a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint.kwargs"><span class="sig-name descname">kwargs</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.UniqueConstraint</span></code></a> (<a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint" title="sqlalchemy.schema.ColumnCollectionConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.ColumnCollectionConstraint</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.UniqueConstraint.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.UniqueConstraint.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_DDLColumnArgument</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_ConstraintNameArgument</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deferrable</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initially</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_InfoType</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_autoattach</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_column_flag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_gather_expressions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">_DDLColumnArgument</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">dialect_kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.schema.UniqueConstraint.__init__" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ColumnCollectionConstraint.__init__</span></code> <em>method of</em> <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint" title="sqlalchemy.schema.ColumnCollectionConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnCollectionConstraint</span></code></a></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.UniqueConstraint.params.*columns"></span><strong>*columns</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.UniqueConstraint.params.*columns">¶</a> – A sequence of column names or Column objects.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.UniqueConstraint.params.name"></span><strong>name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.UniqueConstraint.params.name">¶</a> – Optional, the in-database name of this constraint.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.UniqueConstraint.params.deferrable"></span><strong>deferrable</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.UniqueConstraint.params.deferrable">¶</a> – Optional bool.  If set, emit DEFERRABLE or NOT DEFERRABLE when
issuing DDL for this constraint.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.UniqueConstraint.params.initially"></span><strong>initially</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.UniqueConstraint.params.initially">¶</a> – Optional string.  If set, emit INITIALLY &lt;value&gt; when issuing DDL
for this constraint.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.UniqueConstraint.params.**dialect_kw"></span><strong>**dialect_kw</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.UniqueConstraint.params.**dialect_kw">¶</a> – other keyword arguments including
dialect-specific arguments are propagated to the <a class="reference internal" href="#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a>
superclass.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.UniqueConstraint.argument_for">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.UniqueConstraint.</span></code></a><span class="sig-name descname"><span class="pre">argument_for</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dialect_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">argument_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.schema.UniqueConstraint.argument_for" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.argument_for" title="sqlalchemy.sql.base.DialectKWArgs.argument_for"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectKWArgs.argument_for()</span></code></a> <em>method of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>Add a new kind of dialect-specific keyword argument for this class.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Index</span><span class="o">.</span><span class="n">argument_for</span><span class="p">(</span><span class="s2">&quot;mydialect&quot;</span><span class="p">,</span> <span class="s2">&quot;length&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<span class="n">some_index</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">mydialect_length</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span></pre></div>
</div>
<p>The <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.argument_for" title="sqlalchemy.sql.base.DialectKWArgs.argument_for"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectKWArgs.argument_for()</span></code></a> method is a per-argument
way adding extra arguments to the
<a class="reference internal" href="internals.html#sqlalchemy.engine.default.DefaultDialect.construct_arguments" title="sqlalchemy.engine.default.DefaultDialect.construct_arguments"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DefaultDialect.construct_arguments</span></code></a> dictionary. This
dictionary provides a list of argument names accepted by various
schema-level constructs on behalf of a dialect.</p>
<p>New dialects should typically specify this dictionary all at once as a
data member of the dialect class.  The use case for ad-hoc addition of
argument names is typically for end-user code that is also using
a custom compilation scheme which consumes the additional arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.UniqueConstraint.argument_for.params.dialect_name"></span><strong>dialect_name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.UniqueConstraint.argument_for.params.dialect_name">¶</a> – name of a dialect.  The dialect must be
locatable, else a <a class="reference internal" href="exceptions.html#sqlalchemy.exc.NoSuchModuleError" title="sqlalchemy.exc.NoSuchModuleError"><code class="xref py py-class docutils literal notranslate"><span class="pre">NoSuchModuleError</span></code></a> is raised.   The
dialect must also include an existing
<a class="reference internal" href="internals.html#sqlalchemy.engine.default.DefaultDialect.construct_arguments" title="sqlalchemy.engine.default.DefaultDialect.construct_arguments"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DefaultDialect.construct_arguments</span></code></a> collection, indicating
that it participates in the keyword-argument validation and default
system, else <a class="reference internal" href="exceptions.html#sqlalchemy.exc.ArgumentError" title="sqlalchemy.exc.ArgumentError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArgumentError</span></code></a> is raised.  If the dialect does
not include this collection, then any keyword argument can be
specified on behalf of this dialect already.  All dialects packaged
within SQLAlchemy include this collection, however for third party
dialects, support may vary.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.UniqueConstraint.argument_for.params.argument_name"></span><strong>argument_name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.UniqueConstraint.argument_for.params.argument_name">¶</a> – name of the parameter.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.UniqueConstraint.argument_for.params.default"></span><strong>default</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.UniqueConstraint.argument_for.params.default">¶</a> – default value of the parameter.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.UniqueConstraint.columns">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.UniqueConstraint.</span></code></a><span class="sig-name descname"><span class="pre">columns</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ReadOnlyColumnCollection</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><span class="pre">Column</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.schema.UniqueConstraint.columns" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="xref py py-attr docutils literal notranslate"><span class="pre">ColumnCollectionMixin.columns</span></code> <em>attribute of</em> <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionMixin" title="sqlalchemy.schema.ColumnCollectionMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnCollectionMixin</span></code></a></p>
</div>
<p>A <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnCollection" title="sqlalchemy.sql.expression.ColumnCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnCollection</span></code></a> representing the set of columns
for this constraint.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.UniqueConstraint.contains_column">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.UniqueConstraint.</span></code></a><span class="sig-name descname"><span class="pre">contains_column</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.sql.schema.Column"><span class="pre">Column</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.schema.UniqueConstraint.contains_column" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.contains_column" title="sqlalchemy.schema.ColumnCollectionConstraint.contains_column"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ColumnCollectionConstraint.contains_column()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint" title="sqlalchemy.schema.ColumnCollectionConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnCollectionConstraint</span></code></a></p>
</div>
<p>Return True if this constraint contains the given column.</p>
<p>Note that this object also contains an attribute <code class="docutils literal notranslate"><span class="pre">.columns</span></code>
which is a <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnCollection" title="sqlalchemy.sql.expression.ColumnCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnCollection</span></code></a> of
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.UniqueConstraint.copy">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.UniqueConstraint.</span></code></a><span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.sql.schema.Table"><span class="pre">Table</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint" title="sqlalchemy.sql.schema.ColumnCollectionConstraint"><span class="pre">ColumnCollectionConstraint</span></a></span></span><a class="headerlink" href="#sqlalchemy.schema.UniqueConstraint.copy" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.copy" title="sqlalchemy.schema.ColumnCollectionConstraint.copy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ColumnCollectionConstraint.copy()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint" title="sqlalchemy.schema.ColumnCollectionConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnCollectionConstraint</span></code></a></p>
</div>
<div class="deprecated">
<p><span class="versionmodified deprecated">自 1.4 版本弃用: </span>The <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.copy" title="sqlalchemy.schema.ColumnCollectionConstraint.copy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ColumnCollectionConstraint.copy()</span></code></a> method is deprecated and will be removed in a future release.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.UniqueConstraint.ddl_if">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.UniqueConstraint.</span></code></a><span class="sig-name descname"><span class="pre">ddl_if</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dialect</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callable_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DDLIfCallable</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.schema.UniqueConstraint.ddl_if" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL.ddl_if" title="sqlalchemy.schema.HasConditionalDDL.ddl_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HasConditionalDDL.ddl_if()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL" title="sqlalchemy.schema.HasConditionalDDL"><code class="xref py py-class docutils literal notranslate"><span class="pre">HasConditionalDDL</span></code></a></p>
</div>
<p>apply a conditional DDL rule to this schema item.</p>
<p>These rules work in a similar manner to the
<a class="reference internal" href="ddl.html#sqlalchemy.schema.ExecutableDDLElement.execute_if" title="sqlalchemy.schema.ExecutableDDLElement.execute_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExecutableDDLElement.execute_if()</span></code></a> callable, with the added
feature that the criteria may be checked within the DDL compilation
phase for a construct such as <a class="reference internal" href="ddl.html#sqlalchemy.schema.CreateTable" title="sqlalchemy.schema.CreateTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateTable</span></code></a>.
<a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL.ddl_if" title="sqlalchemy.schema.HasConditionalDDL.ddl_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HasConditionalDDL.ddl_if()</span></code></a> currently applies towards the
<a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> construct as well as all <a class="reference internal" href="#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a>
constructs.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.UniqueConstraint.ddl_if.params.dialect"></span><strong>dialect</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.UniqueConstraint.ddl_if.params.dialect">¶</a> – string name of a dialect, or a tuple of string names
to indicate multiple dialect types.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.UniqueConstraint.ddl_if.params.callable_"></span><strong>callable_</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.UniqueConstraint.ddl_if.params.callable_">¶</a> – a callable that is constructed using the same form
as that described in
<a class="reference internal" href="ddl.html#sqlalchemy.schema.ExecutableDDLElement.execute_if.params.callable_" title="sqlalchemy.schema.ExecutableDDLElement.execute_if"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">ExecutableDDLElement.execute_if.callable_</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.UniqueConstraint.ddl_if.params.state"></span><strong>state</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.UniqueConstraint.ddl_if.params.state">¶</a> – any arbitrary object that will be passed to the
callable, if present.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="ddl.html#schema-ddl-ddl-if"><span class="std std-ref">控制 DDL 约束和索引的生成</span></a> - background and usage examples</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.UniqueConstraint.dialect_kwargs">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.UniqueConstraint.</span></code></a><span class="sig-name descname"><span class="pre">dialect_kwargs</span></span><a class="headerlink" href="#sqlalchemy.schema.UniqueConstraint.dialect_kwargs" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs" title="sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_kwargs</span></code></a> <em>attribute of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>A collection of keyword arguments specified as dialect-specific
options to this construct.</p>
<p>The arguments are present here in their original <code class="docutils literal notranslate"><span class="pre">&lt;dialect&gt;_&lt;kwarg&gt;</span></code>
format.  Only arguments that were actually passed are included;
unlike the <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_options" title="sqlalchemy.sql.base.DialectKWArgs.dialect_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_options</span></code></a> collection, which
contains all options known by this dialect including defaults.</p>
<p>The collection is also writable; keys are accepted of the
form <code class="docutils literal notranslate"><span class="pre">&lt;dialect&gt;_&lt;kwarg&gt;</span></code> where the value will be assembled
into the list of options.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_options" title="sqlalchemy.sql.base.DialectKWArgs.dialect_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_options</span></code></a> - nested dictionary form</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.UniqueConstraint.dialect_options">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.UniqueConstraint.</span></code></a><span class="sig-name descname"><span class="pre">dialect_options</span></span><a class="headerlink" href="#sqlalchemy.schema.UniqueConstraint.dialect_options" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_options" title="sqlalchemy.sql.base.DialectKWArgs.dialect_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_options</span></code></a> <em>attribute of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>A collection of keyword arguments specified as dialect-specific
options to this construct.</p>
<p>This is a two-level nested registry, keyed to <code class="docutils literal notranslate"><span class="pre">&lt;dialect_name&gt;</span></code>
and <code class="docutils literal notranslate"><span class="pre">&lt;argument_name&gt;</span></code>.  For example, the <code class="docutils literal notranslate"><span class="pre">postgresql_where</span></code>
argument would be locatable as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">arg</span> <span class="o">=</span> <span class="n">my_object</span><span class="o">.</span><span class="n">dialect_options</span><span class="p">[</span><span class="s2">&quot;postgresql&quot;</span><span class="p">][</span><span class="s2">&quot;where&quot;</span><span class="p">]</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 0.9.2 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs" title="sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_kwargs</span></code></a> - flat dictionary form</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.UniqueConstraint.info">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.UniqueConstraint.</span></code></a><span class="sig-name descname"><span class="pre">info</span></span><a class="headerlink" href="#sqlalchemy.schema.UniqueConstraint.info" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem.info" title="sqlalchemy.schema.SchemaItem.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SchemaItem.info</span></code></a> <em>attribute of</em> <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">SchemaItem</span></code></a></p>
</div>
<p>Info dictionary associated with the object, allowing user-defined
data to be associated with this <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">SchemaItem</span></code></a>.</p>
<p>The dictionary is automatically generated when first accessed.
It can also be specified in the constructor of some objects,
such as <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> and <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.UniqueConstraint.kwargs">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.UniqueConstraint.</span></code></a><span class="sig-name descname"><span class="pre">kwargs</span></span><a class="headerlink" href="#sqlalchemy.schema.UniqueConstraint.kwargs" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.kwargs" title="sqlalchemy.sql.base.DialectKWArgs.kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.kwargs</span></code></a> <em>attribute of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>A synonym for <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs" title="sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_kwargs</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.schema.conv">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">conv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quote</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#sqlalchemy.schema.conv" title="Link to this definition">¶</a></dt>
<dd><p>Mark a string indicating that a name has already been converted
by a naming convention.</p>
<p>This is a string subclass that indicates a name that should not be
subject to any further naming conventions.</p>
<p>E.g. when we create a <a class="reference internal" href="#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a> using a naming convention
as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">m</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">(</span>
    <span class="n">naming_convention</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;ck&quot;</span><span class="p">:</span> <span class="s2">&quot;ck_</span><span class="si">%(table_name)s</span><span class="s2">_</span><span class="si">%(constraint_name)s</span><span class="s2">&quot;</span><span class="p">}</span>
<span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;t&quot;</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span> <span class="n">CheckConstraint</span><span class="p">(</span><span class="s2">&quot;x &gt; 5&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;x5&quot;</span><span class="p">)</span>
<span class="p">)</span></pre></div>
</div>
<p>The name of the above constraint will be rendered as <code class="docutils literal notranslate"><span class="pre">&quot;ck_t_x5&quot;</span></code>.
That is, the existing name <code class="docutils literal notranslate"><span class="pre">x5</span></code> is used in the naming convention as the
<code class="docutils literal notranslate"><span class="pre">constraint_name</span></code> token.</p>
<p>In some situations, such as in migration scripts, we may be rendering
the above <a class="reference internal" href="#sqlalchemy.schema.CheckConstraint" title="sqlalchemy.schema.CheckConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckConstraint</span></code></a> with a name that’s already been
converted.  In order to make sure the name isn’t double-modified, the
new name is applied using the <a class="reference internal" href="#sqlalchemy.schema.conv" title="sqlalchemy.schema.conv"><code class="xref py py-func docutils literal notranslate"><span class="pre">conv()</span></code></a> marker.  We can
use this explicitly as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">m</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">(</span>
    <span class="n">naming_convention</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;ck&quot;</span><span class="p">:</span> <span class="s2">&quot;ck_</span><span class="si">%(table_name)s</span><span class="s2">_</span><span class="si">%(constraint_name)s</span><span class="s2">&quot;</span><span class="p">}</span>
<span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;t&quot;</span><span class="p">,</span>
    <span class="n">m</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">CheckConstraint</span><span class="p">(</span><span class="s2">&quot;x &gt; 5&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">conv</span><span class="p">(</span><span class="s2">&quot;ck_t_x5&quot;</span><span class="p">)),</span>
<span class="p">)</span></pre></div>
</div>
<p>Where above, the <a class="reference internal" href="#sqlalchemy.schema.conv" title="sqlalchemy.schema.conv"><code class="xref py py-func docutils literal notranslate"><span class="pre">conv()</span></code></a> marker indicates that the constraint
name here is final, and the name will render as <code class="docutils literal notranslate"><span class="pre">&quot;ck_t_x5&quot;</span></code> and not
<code class="docutils literal notranslate"><span class="pre">&quot;ck_t_ck_t_x5&quot;</span></code></p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#constraint-naming-conventions"><span class="std std-ref">配置约束命名约定</span></a></p>
</div>
</dd></dl>

</section>
<section id="schema-indexes">
<span id="id12"></span><h2>索引<a class="headerlink" href="#schema-indexes" title="Link to this heading">¶</a></h2>
<p>Indexes</p>
<p>Indexes can be created anonymously (using an auto-generated name <code class="docutils literal notranslate"><span class="pre">ix_&lt;column</span>
<span class="pre">label&gt;</span></code>) for a single column using the inline <code class="docutils literal notranslate"><span class="pre">index</span></code> keyword on
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>, which also modifies the usage of
<code class="docutils literal notranslate"><span class="pre">unique</span></code> to apply the uniqueness to the index itself, instead of adding a
separate UNIQUE constraint. For indexes with specific names or which encompass
more than one column, use the <a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> construct,
which requires a name.</p>
<p>Below we illustrate a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> with several
<a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> objects associated. The DDL for “CREATE
INDEX” is issued right after the create statements for the table:</p>
<div class="highlight-python+sql notranslate"><div class="highlight"><pre><span></span><span class="n">metadata_obj</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span>
<span class="n">mytable</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;mytable&quot;</span><span class="p">,</span>
    <span class="n">metadata_obj</span><span class="p">,</span>
    <span class="c1"># an indexed column, with index &quot;ix_mytable_col1&quot;</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;col1&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="c1"># a uniquely indexed column with index &quot;ix_mytable_col2&quot;</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;col2&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;col3&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;col4&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;col5&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;col6&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
<span class="p">)</span>

<span class="c1"># place an index on col3, col4</span>
<span class="n">Index</span><span class="p">(</span><span class="s2">&quot;idx_col34&quot;</span><span class="p">,</span> <span class="n">mytable</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col3</span><span class="p">,</span> <span class="n">mytable</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col4</span><span class="p">)</span>

<span class="c1"># place a unique index on col5, col6</span>
<span class="n">Index</span><span class="p">(</span><span class="s2">&quot;myindex&quot;</span><span class="p">,</span> <span class="n">mytable</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col5</span><span class="p">,</span> <span class="n">mytable</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col6</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">mytable</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>
<div class='show_sql'><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">mytable</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">col1</span><span class="w"> </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="n">col2</span><span class="w"> </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="n">col3</span><span class="w"> </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="n">col4</span><span class="w"> </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="n">col5</span><span class="w"> </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="n">col6</span><span class="w"> </span><span class="nb">INTEGER</span>
<span class="p">)</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">ix_mytable_col1</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">mytable</span><span class="w"> </span><span class="p">(</span><span class="n">col1</span><span class="p">)</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">ix_mytable_col2</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">mytable</span><span class="w"> </span><span class="p">(</span><span class="n">col2</span><span class="p">)</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">myindex</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">mytable</span><span class="w"> </span><span class="p">(</span><span class="n">col5</span><span class="p">,</span><span class="w"> </span><span class="n">col6</span><span class="p">)</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">idx_col34</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">mytable</span><span class="w"> </span><span class="p">(</span><span class="n">col3</span><span class="p">,</span><span class="w"> </span><span class="n">col4</span><span class="p">)</span>
</div></pre></div>
</div>
<p>Note in the example above, the <a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> construct is created
externally to the table which it corresponds, using <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
objects directly.  <a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> also supports
“inline” definition inside the <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>, using string names to
identify columns:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">metadata_obj</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span>
<span class="n">mytable</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;mytable&quot;</span><span class="p">,</span>
    <span class="n">metadata_obj</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;col1&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;col2&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;col3&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;col4&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="c1"># place an index on col1, col2</span>
    <span class="n">Index</span><span class="p">(</span><span class="s2">&quot;idx_col12&quot;</span><span class="p">,</span> <span class="s2">&quot;col1&quot;</span><span class="p">,</span> <span class="s2">&quot;col2&quot;</span><span class="p">),</span>
    <span class="c1"># place a unique index on col3, col4</span>
    <span class="n">Index</span><span class="p">(</span><span class="s2">&quot;idx_col34&quot;</span><span class="p">,</span> <span class="s2">&quot;col3&quot;</span><span class="p">,</span> <span class="s2">&quot;col4&quot;</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> object also supports its own <code class="docutils literal notranslate"><span class="pre">create()</span></code> method:</p>
<div class="highlight-python+sql notranslate"><div class="highlight"><pre><span></span><span class="n">i</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="s2">&quot;someindex&quot;</span><span class="p">,</span> <span class="n">mytable</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col5</span><span class="p">)</span>
<span class="n">i</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>
<div class='show_sql'><span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">someindex</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">mytable</span><span class="w"> </span><span class="p">(</span><span class="n">col5</span><span class="p">)</span>
</div></pre></div>
</div>
<section id="schema-indexes-functional">
<span id="id13"></span><h3>功能索引<a class="headerlink" href="#schema-indexes-functional" title="Link to this heading">¶</a></h3>
<p>Functional Indexes</p>
<p><a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> supports SQL and function expressions, as supported by the
target backend.  To create an index against a column using a descending
value, the <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnElement.desc" title="sqlalchemy.sql.expression.ColumnElement.desc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ColumnElement.desc()</span></code></a> modifier may be used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">Index</span>

<span class="n">Index</span><span class="p">(</span><span class="s2">&quot;someindex&quot;</span><span class="p">,</span> <span class="n">mytable</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">somecol</span><span class="o">.</span><span class="n">desc</span><span class="p">())</span></pre></div>
</div>
<p>Or with a backend that supports functional indexes such as PostgreSQL,
a “case insensitive” index can be created using the <code class="docutils literal notranslate"><span class="pre">lower()</span></code> function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">func</span><span class="p">,</span> <span class="n">Index</span>

<span class="n">Index</span><span class="p">(</span><span class="s2">&quot;someindex&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">.</span><span class="n">lower</span><span class="p">(</span><span class="n">mytable</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">somecol</span><span class="p">))</span></pre></div>
</div>
</section>
</section>
<section id="api">
<h2>索引 API<a class="headerlink" href="#api" title="Link to this heading">¶</a></h2>
<p>Index API</p>
<div class="table-wrapper longtable docutils container">
<table class="longtable docutils align-default">
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.Index"><span class="sig-name descname">Index</span></a></p></td>
<td><p>A table-level INDEX.</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.Index">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">Index</span></span><a class="headerlink" href="#sqlalchemy.schema.Index" title="Link to this definition">¶</a></dt>
<dd><p>A table-level INDEX.</p>
<p>Defines a composite (one or more column) INDEX.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sometable</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;sometable&quot;</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">)),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;address&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">100</span><span class="p">)),</span>
<span class="p">)</span>

<span class="n">Index</span><span class="p">(</span><span class="s2">&quot;some_index&quot;</span><span class="p">,</span> <span class="n">sometable</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></pre></div>
</div>
<p>For a no-frills, single column index, adding
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> also supports <code class="docutils literal notranslate"><span class="pre">index=True</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sometable</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;sometable&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="p">)</span></pre></div>
</div>
<p>For a composite index, multiple columns can be specified:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Index</span><span class="p">(</span><span class="s2">&quot;some_index&quot;</span><span class="p">,</span> <span class="n">sometable</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">sometable</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">address</span><span class="p">)</span></pre></div>
</div>
<p>Functional indexes are supported as well, typically by using the
<a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.func" title="sqlalchemy.sql.expression.func"><code class="xref py py-data docutils literal notranslate"><span class="pre">func</span></code></a> construct in conjunction with table-bound
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Index</span><span class="p">(</span><span class="s2">&quot;some_index&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">.</span><span class="n">lower</span><span class="p">(</span><span class="n">sometable</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">))</span></pre></div>
</div>
<p>An <a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> can also be manually associated with a
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>,
either through inline declaration or using
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.append_constraint" title="sqlalchemy.schema.Table.append_constraint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Table.append_constraint()</span></code></a>.  When this approach is used,
the names
of the indexed columns can be specified as strings:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;sometable&quot;</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">)),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;address&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">100</span><span class="p">)),</span>
    <span class="n">Index</span><span class="p">(</span><span class="s2">&quot;some_index&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;address&quot;</span><span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
<p>To support functional or expression-based indexes in this form, the
<a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a> construct may be used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">text</span>

<span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;sometable&quot;</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">)),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;address&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">100</span><span class="p">)),</span>
    <span class="n">Index</span><span class="p">(</span><span class="s2">&quot;some_index&quot;</span><span class="p">,</span> <span class="n">text</span><span class="p">(</span><span class="s2">&quot;lower(name)&quot;</span><span class="p">)),</span>
<span class="p">)</span></pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#schema-indexes"><span class="std std-ref">索引</span></a> - General information on <a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>.</p>
<p><a class="reference internal" href="../dialects/postgresql.html#postgresql-indexes"><span class="std std-ref">PostgreSQL-Specific Index Options</span></a> - PostgreSQL-specific options available for
the <a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> construct.</p>
<p><a class="reference internal" href="../dialects/mysql.html#mysql-indexes"><span class="std std-ref">MySQL / MariaDB- Specific Index Options</span></a> - MySQL-specific options available for the
<a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> construct.</p>
<p><a class="reference internal" href="../dialects/mssql.html#mssql-indexes"><span class="std std-ref">Clustered Index Support</span></a> - MSSQL-specific options available for the
<a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> construct.</p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.schema.Index.__init__"><span class="sig-name descname">__init__()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.Index.argument_for"><span class="sig-name descname">argument_for()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.Index.create"><span class="sig-name descname">create()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.Index.ddl_if"><span class="sig-name descname">ddl_if()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.Index.dialect_kwargs"><span class="sig-name descname">dialect_kwargs</span></a>, <a class="reference internal" href="#sqlalchemy.schema.Index.dialect_options"><span class="sig-name descname">dialect_options</span></a>, <a class="reference internal" href="#sqlalchemy.schema.Index.drop"><span class="sig-name descname">drop()</span></a>, <a class="reference internal" href="#sqlalchemy.schema.Index.info"><span class="sig-name descname">info</span></a>, <a class="reference internal" href="#sqlalchemy.schema.Index.kwargs"><span class="sig-name descname">kwargs</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.Index</span></code></a> (<a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.base.DialectKWArgs</span></code></a>, <a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionMixin" title="sqlalchemy.schema.ColumnCollectionMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.ColumnCollectionMixin</span></code></a>, <a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL" title="sqlalchemy.schema.HasConditionalDDL"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.HasConditionalDDL</span></code></a>, <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.SchemaItem</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.Index.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.Index"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.Index.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">expressions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_DDLColumnArgument</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unique</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quote</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_InfoType</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><span class="pre">Table</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_column_flag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">dialect_kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.schema.Index.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Construct an index object.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.Index.params.name"></span><strong>name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Index.params.name">¶</a> – The name of the index</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Index.params.*expressions"></span><strong>*expressions</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Index.params.*expressions">¶</a> – Column expressions to include in the index.   The expressions
are normally instances of <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>, but may also
be arbitrary SQL expressions which ultimately refer to a
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Index.params.unique"></span><strong>unique=False</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Index.params.unique">¶</a> – Keyword only argument; if True, create a unique index.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Index.params.quote"></span><strong>quote=None</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Index.params.quote">¶</a> – Keyword only argument; whether to apply quoting to the name of
the index.  Works in the same manner as that of
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.quote" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.quote</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Index.params.info"></span><strong>info=None</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Index.params.info">¶</a> – Optional data dictionary which will be populated
into the <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem.info" title="sqlalchemy.schema.SchemaItem.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SchemaItem.info</span></code></a> attribute of this object.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Index.params.**dialect_kw"></span><strong>**dialect_kw</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Index.params.**dialect_kw">¶</a> – Additional keyword arguments not mentioned above
are dialect specific, and passed in the form
<code class="docutils literal notranslate"><span class="pre">&lt;dialectname&gt;_&lt;argname&gt;</span></code>. See the documentation regarding an
individual dialect at <a class="reference internal" href="../dialects/index.html#dialect-toplevel"><span class="std std-ref">Dialects</span></a> for detail on
documented arguments.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.Index.argument_for">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><a class="reference internal" href="#sqlalchemy.schema.Index"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.Index.</span></code></a><span class="sig-name descname"><span class="pre">argument_for</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dialect_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">argument_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.schema.Index.argument_for" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.argument_for" title="sqlalchemy.sql.base.DialectKWArgs.argument_for"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectKWArgs.argument_for()</span></code></a> <em>method of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>Add a new kind of dialect-specific keyword argument for this class.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Index</span><span class="o">.</span><span class="n">argument_for</span><span class="p">(</span><span class="s2">&quot;mydialect&quot;</span><span class="p">,</span> <span class="s2">&quot;length&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<span class="n">some_index</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">mydialect_length</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span></pre></div>
</div>
<p>The <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.argument_for" title="sqlalchemy.sql.base.DialectKWArgs.argument_for"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectKWArgs.argument_for()</span></code></a> method is a per-argument
way adding extra arguments to the
<a class="reference internal" href="internals.html#sqlalchemy.engine.default.DefaultDialect.construct_arguments" title="sqlalchemy.engine.default.DefaultDialect.construct_arguments"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DefaultDialect.construct_arguments</span></code></a> dictionary. This
dictionary provides a list of argument names accepted by various
schema-level constructs on behalf of a dialect.</p>
<p>New dialects should typically specify this dictionary all at once as a
data member of the dialect class.  The use case for ad-hoc addition of
argument names is typically for end-user code that is also using
a custom compilation scheme which consumes the additional arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.Index.argument_for.params.dialect_name"></span><strong>dialect_name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Index.argument_for.params.dialect_name">¶</a> – name of a dialect.  The dialect must be
locatable, else a <a class="reference internal" href="exceptions.html#sqlalchemy.exc.NoSuchModuleError" title="sqlalchemy.exc.NoSuchModuleError"><code class="xref py py-class docutils literal notranslate"><span class="pre">NoSuchModuleError</span></code></a> is raised.   The
dialect must also include an existing
<a class="reference internal" href="internals.html#sqlalchemy.engine.default.DefaultDialect.construct_arguments" title="sqlalchemy.engine.default.DefaultDialect.construct_arguments"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DefaultDialect.construct_arguments</span></code></a> collection, indicating
that it participates in the keyword-argument validation and default
system, else <a class="reference internal" href="exceptions.html#sqlalchemy.exc.ArgumentError" title="sqlalchemy.exc.ArgumentError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArgumentError</span></code></a> is raised.  If the dialect does
not include this collection, then any keyword argument can be
specified on behalf of this dialect already.  All dialects packaged
within SQLAlchemy include this collection, however for third party
dialects, support may vary.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Index.argument_for.params.argument_name"></span><strong>argument_name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Index.argument_for.params.argument_name">¶</a> – name of the parameter.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Index.argument_for.params.default"></span><strong>default</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Index.argument_for.params.default">¶</a> – default value of the parameter.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.Index.create">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.Index"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.Index.</span></code></a><span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bind</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CreateDropBind</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkfirst</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.schema.Index.create" title="Link to this definition">¶</a></dt>
<dd><p>Issue a <code class="docutils literal notranslate"><span class="pre">CREATE</span></code> statement for this
<a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>, using the given
<a class="reference internal" href="connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">Engine`</span></code> for connectivity.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.create_all" title="sqlalchemy.schema.MetaData.create_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.create_all()</span></code></a>.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.Index.ddl_if">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.Index"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.Index.</span></code></a><span class="sig-name descname"><span class="pre">ddl_if</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dialect</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callable_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DDLIfCallable</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.schema.Index.ddl_if" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL.ddl_if" title="sqlalchemy.schema.HasConditionalDDL.ddl_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HasConditionalDDL.ddl_if()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL" title="sqlalchemy.schema.HasConditionalDDL"><code class="xref py py-class docutils literal notranslate"><span class="pre">HasConditionalDDL</span></code></a></p>
</div>
<p>apply a conditional DDL rule to this schema item.</p>
<p>These rules work in a similar manner to the
<a class="reference internal" href="ddl.html#sqlalchemy.schema.ExecutableDDLElement.execute_if" title="sqlalchemy.schema.ExecutableDDLElement.execute_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExecutableDDLElement.execute_if()</span></code></a> callable, with the added
feature that the criteria may be checked within the DDL compilation
phase for a construct such as <a class="reference internal" href="ddl.html#sqlalchemy.schema.CreateTable" title="sqlalchemy.schema.CreateTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateTable</span></code></a>.
<a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL.ddl_if" title="sqlalchemy.schema.HasConditionalDDL.ddl_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HasConditionalDDL.ddl_if()</span></code></a> currently applies towards the
<a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> construct as well as all <a class="reference internal" href="#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a>
constructs.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.Index.ddl_if.params.dialect"></span><strong>dialect</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Index.ddl_if.params.dialect">¶</a> – string name of a dialect, or a tuple of string names
to indicate multiple dialect types.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Index.ddl_if.params.callable_"></span><strong>callable_</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Index.ddl_if.params.callable_">¶</a> – a callable that is constructed using the same form
as that described in
<a class="reference internal" href="ddl.html#sqlalchemy.schema.ExecutableDDLElement.execute_if.params.callable_" title="sqlalchemy.schema.ExecutableDDLElement.execute_if"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">ExecutableDDLElement.execute_if.callable_</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.Index.ddl_if.params.state"></span><strong>state</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.Index.ddl_if.params.state">¶</a> – any arbitrary object that will be passed to the
callable, if present.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="ddl.html#schema-ddl-ddl-if"><span class="std std-ref">控制 DDL 约束和索引的生成</span></a> - background and usage examples</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.Index.dialect_kwargs">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.Index"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.Index.</span></code></a><span class="sig-name descname"><span class="pre">dialect_kwargs</span></span><a class="headerlink" href="#sqlalchemy.schema.Index.dialect_kwargs" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs" title="sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_kwargs</span></code></a> <em>attribute of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>A collection of keyword arguments specified as dialect-specific
options to this construct.</p>
<p>The arguments are present here in their original <code class="docutils literal notranslate"><span class="pre">&lt;dialect&gt;_&lt;kwarg&gt;</span></code>
format.  Only arguments that were actually passed are included;
unlike the <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_options" title="sqlalchemy.sql.base.DialectKWArgs.dialect_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_options</span></code></a> collection, which
contains all options known by this dialect including defaults.</p>
<p>The collection is also writable; keys are accepted of the
form <code class="docutils literal notranslate"><span class="pre">&lt;dialect&gt;_&lt;kwarg&gt;</span></code> where the value will be assembled
into the list of options.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_options" title="sqlalchemy.sql.base.DialectKWArgs.dialect_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_options</span></code></a> - nested dictionary form</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.Index.dialect_options">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.Index"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.Index.</span></code></a><span class="sig-name descname"><span class="pre">dialect_options</span></span><a class="headerlink" href="#sqlalchemy.schema.Index.dialect_options" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_options" title="sqlalchemy.sql.base.DialectKWArgs.dialect_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_options</span></code></a> <em>attribute of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>A collection of keyword arguments specified as dialect-specific
options to this construct.</p>
<p>This is a two-level nested registry, keyed to <code class="docutils literal notranslate"><span class="pre">&lt;dialect_name&gt;</span></code>
and <code class="docutils literal notranslate"><span class="pre">&lt;argument_name&gt;</span></code>.  For example, the <code class="docutils literal notranslate"><span class="pre">postgresql_where</span></code>
argument would be locatable as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">arg</span> <span class="o">=</span> <span class="n">my_object</span><span class="o">.</span><span class="n">dialect_options</span><span class="p">[</span><span class="s2">&quot;postgresql&quot;</span><span class="p">][</span><span class="s2">&quot;where&quot;</span><span class="p">]</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 0.9.2 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs" title="sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_kwargs</span></code></a> - flat dictionary form</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.Index.drop">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.schema.Index"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.Index.</span></code></a><span class="sig-name descname"><span class="pre">drop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bind</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CreateDropBind</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkfirst</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.schema.Index.drop" title="Link to this definition">¶</a></dt>
<dd><p>Issue a <code class="docutils literal notranslate"><span class="pre">DROP</span></code> statement for this
<a class="reference internal" href="#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>, using the given
<a class="reference internal" href="connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> or <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> for connectivity.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.drop_all" title="sqlalchemy.schema.MetaData.drop_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.drop_all()</span></code></a>.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.Index.info">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.Index"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.Index.</span></code></a><span class="sig-name descname"><span class="pre">info</span></span><a class="headerlink" href="#sqlalchemy.schema.Index.info" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem.info" title="sqlalchemy.schema.SchemaItem.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SchemaItem.info</span></code></a> <em>attribute of</em> <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">SchemaItem</span></code></a></p>
</div>
<p>Info dictionary associated with the object, allowing user-defined
data to be associated with this <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">SchemaItem</span></code></a>.</p>
<p>The dictionary is automatically generated when first accessed.
It can also be specified in the constructor of some objects,
such as <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> and <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.Index.kwargs">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.schema.Index"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.Index.</span></code></a><span class="sig-name descname"><span class="pre">kwargs</span></span><a class="headerlink" href="#sqlalchemy.schema.Index.kwargs" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.kwargs" title="sqlalchemy.sql.base.DialectKWArgs.kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.kwargs</span></code></a> <em>attribute of</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">DialectKWArgs</span></code></a></p>
</div>
<p>A synonym for <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs" title="sqlalchemy.sql.base.DialectKWArgs.dialect_kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DialectKWArgs.dialect_kwargs</span></code></a>.</p>
</dd></dl>

</dd></dl>

</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="ddl.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">自定义 DDL</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="defaults.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">列 INSERT/UPDATE 默认值</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                <a href="../copyright.html">Copyright</a> &#169; 2007-2025, the SQLAlchemy authors and contributors
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on 04/05/2025 04:00:26</div>
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">定义约束和索引</a><ul>
<li><a class="reference internal" href="#metadata-foreignkeys">定义外键</a><ul>
<li><a class="reference internal" href="#alter">通过 ALTER 创建/删除外键约束</a></li>
<li><a class="reference internal" href="#on-update-on-delete">ON UPDATE 和 ON DELETE</a></li>
</ul>
</li>
<li><a class="reference internal" href="#unique">UNIQUE 约束</a></li>
<li><a class="reference internal" href="#check">CHECK 约束</a></li>
<li><a class="reference internal" href="#primary-key">PRIMARY KEY 约束</a></li>
<li><a class="reference internal" href="#orm">使用声明性 ORM 扩展时设置约束</a></li>
<li><a class="reference internal" href="#constraint-naming-conventions">配置约束命名约定</a><ul>
<li><a class="reference internal" href="#id5">为元数据集合配置命名约定</a></li>
<li><a class="reference internal" href="#constraint-default-naming-convention">默认命名约定</a></li>
<li><a class="reference internal" href="#id7">长名称截断</a></li>
<li><a class="reference internal" href="#id8">为命名约定创建自定义标记</a></li>
<li><a class="reference internal" href="#naming-check-constraints">命名 CHECK 约束</a></li>
<li><a class="reference internal" href="#naming-schematypes">为布尔、枚举和其他架构类型配置命名</a></li>
<li><a class="reference internal" href="#id11">将命名约定与 ORM 声明性混合使用</a></li>
</ul>
</li>
<li><a class="reference internal" href="#constraints-api">Constraints API</a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.Constraint"><code class="docutils literal notranslate"><span class="pre">Constraint</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.Constraint.__init__"><code class="docutils literal notranslate"><span class="pre">Constraint.__init__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.Constraint.argument_for"><code class="docutils literal notranslate"><span class="pre">Constraint.argument_for()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.Constraint.copy"><code class="docutils literal notranslate"><span class="pre">Constraint.copy()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.Constraint.ddl_if"><code class="docutils literal notranslate"><span class="pre">Constraint.ddl_if()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.Constraint.dialect_kwargs"><code class="docutils literal notranslate"><span class="pre">Constraint.dialect_kwargs</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.Constraint.dialect_options"><code class="docutils literal notranslate"><span class="pre">Constraint.dialect_options</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.Constraint.info"><code class="docutils literal notranslate"><span class="pre">Constraint.info</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.Constraint.kwargs"><code class="docutils literal notranslate"><span class="pre">Constraint.kwargs</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionMixin"><code class="docutils literal notranslate"><span class="pre">ColumnCollectionMixin</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint"><code class="docutils literal notranslate"><span class="pre">ColumnCollectionConstraint</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.__init__"><code class="docutils literal notranslate"><span class="pre">ColumnCollectionConstraint.__init__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.argument_for"><code class="docutils literal notranslate"><span class="pre">ColumnCollectionConstraint.argument_for()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.columns"><code class="docutils literal notranslate"><span class="pre">ColumnCollectionConstraint.columns</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.contains_column"><code class="docutils literal notranslate"><span class="pre">ColumnCollectionConstraint.contains_column()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.copy"><code class="docutils literal notranslate"><span class="pre">ColumnCollectionConstraint.copy()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.ddl_if"><code class="docutils literal notranslate"><span class="pre">ColumnCollectionConstraint.ddl_if()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.dialect_kwargs"><code class="docutils literal notranslate"><span class="pre">ColumnCollectionConstraint.dialect_kwargs</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.dialect_options"><code class="docutils literal notranslate"><span class="pre">ColumnCollectionConstraint.dialect_options</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.info"><code class="docutils literal notranslate"><span class="pre">ColumnCollectionConstraint.info</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ColumnCollectionConstraint.kwargs"><code class="docutils literal notranslate"><span class="pre">ColumnCollectionConstraint.kwargs</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.schema.CheckConstraint"><code class="docutils literal notranslate"><span class="pre">CheckConstraint</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.CheckConstraint.__init__"><code class="docutils literal notranslate"><span class="pre">CheckConstraint.__init__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.CheckConstraint.argument_for"><code class="docutils literal notranslate"><span class="pre">CheckConstraint.argument_for()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.CheckConstraint.columns"><code class="docutils literal notranslate"><span class="pre">CheckConstraint.columns</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.CheckConstraint.contains_column"><code class="docutils literal notranslate"><span class="pre">CheckConstraint.contains_column()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.CheckConstraint.copy"><code class="docutils literal notranslate"><span class="pre">CheckConstraint.copy()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.CheckConstraint.ddl_if"><code class="docutils literal notranslate"><span class="pre">CheckConstraint.ddl_if()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.CheckConstraint.dialect_kwargs"><code class="docutils literal notranslate"><span class="pre">CheckConstraint.dialect_kwargs</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.CheckConstraint.dialect_options"><code class="docutils literal notranslate"><span class="pre">CheckConstraint.dialect_options</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.CheckConstraint.info"><code class="docutils literal notranslate"><span class="pre">CheckConstraint.info</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.CheckConstraint.kwargs"><code class="docutils literal notranslate"><span class="pre">CheckConstraint.kwargs</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.schema.ForeignKey"><code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.ForeignKey.__init__"><code class="docutils literal notranslate"><span class="pre">ForeignKey.__init__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ForeignKey.argument_for"><code class="docutils literal notranslate"><span class="pre">ForeignKey.argument_for()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ForeignKey.column"><code class="docutils literal notranslate"><span class="pre">ForeignKey.column</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ForeignKey.copy"><code class="docutils literal notranslate"><span class="pre">ForeignKey.copy()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ForeignKey.dialect_kwargs"><code class="docutils literal notranslate"><span class="pre">ForeignKey.dialect_kwargs</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ForeignKey.dialect_options"><code class="docutils literal notranslate"><span class="pre">ForeignKey.dialect_options</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ForeignKey.get_referent"><code class="docutils literal notranslate"><span class="pre">ForeignKey.get_referent()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ForeignKey.info"><code class="docutils literal notranslate"><span class="pre">ForeignKey.info</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ForeignKey.kwargs"><code class="docutils literal notranslate"><span class="pre">ForeignKey.kwargs</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ForeignKey.references"><code class="docutils literal notranslate"><span class="pre">ForeignKey.references()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ForeignKey.target_fullname"><code class="docutils literal notranslate"><span class="pre">ForeignKey.target_fullname</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint"><code class="docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.__init__"><code class="docutils literal notranslate"><span class="pre">ForeignKeyConstraint.__init__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.argument_for"><code class="docutils literal notranslate"><span class="pre">ForeignKeyConstraint.argument_for()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.column_keys"><code class="docutils literal notranslate"><span class="pre">ForeignKeyConstraint.column_keys</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.columns"><code class="docutils literal notranslate"><span class="pre">ForeignKeyConstraint.columns</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.contains_column"><code class="docutils literal notranslate"><span class="pre">ForeignKeyConstraint.contains_column()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.copy"><code class="docutils literal notranslate"><span class="pre">ForeignKeyConstraint.copy()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.ddl_if"><code class="docutils literal notranslate"><span class="pre">ForeignKeyConstraint.ddl_if()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.dialect_kwargs"><code class="docutils literal notranslate"><span class="pre">ForeignKeyConstraint.dialect_kwargs</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.dialect_options"><code class="docutils literal notranslate"><span class="pre">ForeignKeyConstraint.dialect_options</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.elements"><code class="docutils literal notranslate"><span class="pre">ForeignKeyConstraint.elements</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.info"><code class="docutils literal notranslate"><span class="pre">ForeignKeyConstraint.info</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.kwargs"><code class="docutils literal notranslate"><span class="pre">ForeignKeyConstraint.kwargs</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ForeignKeyConstraint.referred_table"><code class="docutils literal notranslate"><span class="pre">ForeignKeyConstraint.referred_table</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL"><code class="docutils literal notranslate"><span class="pre">HasConditionalDDL</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.HasConditionalDDL.ddl_if"><code class="docutils literal notranslate"><span class="pre">HasConditionalDDL.ddl_if()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint"><code class="docutils literal notranslate"><span class="pre">PrimaryKeyConstraint</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint.argument_for"><code class="docutils literal notranslate"><span class="pre">PrimaryKeyConstraint.argument_for()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint.columns"><code class="docutils literal notranslate"><span class="pre">PrimaryKeyConstraint.columns</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint.contains_column"><code class="docutils literal notranslate"><span class="pre">PrimaryKeyConstraint.contains_column()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint.copy"><code class="docutils literal notranslate"><span class="pre">PrimaryKeyConstraint.copy()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint.ddl_if"><code class="docutils literal notranslate"><span class="pre">PrimaryKeyConstraint.ddl_if()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint.dialect_kwargs"><code class="docutils literal notranslate"><span class="pre">PrimaryKeyConstraint.dialect_kwargs</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint.dialect_options"><code class="docutils literal notranslate"><span class="pre">PrimaryKeyConstraint.dialect_options</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint.info"><code class="docutils literal notranslate"><span class="pre">PrimaryKeyConstraint.info</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.PrimaryKeyConstraint.kwargs"><code class="docutils literal notranslate"><span class="pre">PrimaryKeyConstraint.kwargs</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint"><code class="docutils literal notranslate"><span class="pre">UniqueConstraint</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint.__init__"><code class="docutils literal notranslate"><span class="pre">UniqueConstraint.__init__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint.argument_for"><code class="docutils literal notranslate"><span class="pre">UniqueConstraint.argument_for()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint.columns"><code class="docutils literal notranslate"><span class="pre">UniqueConstraint.columns</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint.contains_column"><code class="docutils literal notranslate"><span class="pre">UniqueConstraint.contains_column()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint.copy"><code class="docutils literal notranslate"><span class="pre">UniqueConstraint.copy()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint.ddl_if"><code class="docutils literal notranslate"><span class="pre">UniqueConstraint.ddl_if()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint.dialect_kwargs"><code class="docutils literal notranslate"><span class="pre">UniqueConstraint.dialect_kwargs</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint.dialect_options"><code class="docutils literal notranslate"><span class="pre">UniqueConstraint.dialect_options</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint.info"><code class="docutils literal notranslate"><span class="pre">UniqueConstraint.info</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.UniqueConstraint.kwargs"><code class="docutils literal notranslate"><span class="pre">UniqueConstraint.kwargs</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.schema.conv"><code class="docutils literal notranslate"><span class="pre">conv()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#schema-indexes">索引</a><ul>
<li><a class="reference internal" href="#schema-indexes-functional">功能索引</a></li>
</ul>
</li>
<li><a class="reference internal" href="#api">索引 API</a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.Index"><code class="docutils literal notranslate"><span class="pre">Index</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.Index.__init__"><code class="docutils literal notranslate"><span class="pre">Index.__init__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.Index.argument_for"><code class="docutils literal notranslate"><span class="pre">Index.argument_for()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.Index.create"><code class="docutils literal notranslate"><span class="pre">Index.create()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.Index.ddl_if"><code class="docutils literal notranslate"><span class="pre">Index.ddl_if()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.Index.dialect_kwargs"><code class="docutils literal notranslate"><span class="pre">Index.dialect_kwargs</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.Index.dialect_options"><code class="docutils literal notranslate"><span class="pre">Index.dialect_options</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.Index.drop"><code class="docutils literal notranslate"><span class="pre">Index.drop()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.Index.info"><code class="docutils literal notranslate"><span class="pre">Index.info</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.Index.kwargs"><code class="docutils literal notranslate"><span class="pre">Index.kwargs</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=2d0eb83f"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../_static/tabs.js?v=3ee01567"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=2f3e6152"></script>
    <script src="../_static/translations.js?v=beaddf03"></script>
    </body>
</html>