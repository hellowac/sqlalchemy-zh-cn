<!doctype html>
<html class="no-js" lang="zh-CN" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="索引" href="../genindex.html" /><link rel="search" title="搜索" href="../search.html" /><link rel="copyright" title="版权所有" href="../copyright.html" /><link rel="next" title="使用Engines和Connection" href="connections.html" /><link rel="prev" title="Engine和Connection的使用" href="engines_connections.html" />

    <!-- Generated with Sphinx 7.2.6 and Furo 2024.08.06 -->
        <title>Engine 配置 - SQLAlchemy 2.1 Documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/changelog.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx_paramlinks.css" />
    <link rel="stylesheet" type="text/css" href="../_static/docs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">SQLAlchemy 2.1 Documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">SQLAlchemy 2.1 Documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="搜索" name="q" aria-label="搜索">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">概述</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorial/index.html">SQLAlchemy 统一教程</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of SQLAlchemy 统一教程</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/engine.html">建立连接 - Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/dbapi_transactions.html">使用事务和DBAPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/metadata.html">使用数据库元数据</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../tutorial/data.html">处理数据</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of 处理数据</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/data_insert.html">使用 INSERT 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/data_select.html">使用 SELECT 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/data_update.html">使用 UPDATE 和 DELETE 语句</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/orm_data_manipulation.html">使用 ORM 进行数据操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/orm_related_objects.html">使用 ORM 相关对象</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/further_reading.html">进一步阅读</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../orm/index.html">SQLAlchemy ORM</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of SQLAlchemy ORM</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../orm/quickstart.html">ORM 快速入门</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../orm/mapper_config.html">ORM 映射类配置</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of ORM 映射类配置</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../orm/mapping_styles.html">ORM 映射类概述</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../orm/declarative_mapping.html">使用声明式映射类</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of 使用声明式映射类</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../orm/declarative_styles.html">声明式映射风格</a></li>
<li class="toctree-l4"><a class="reference internal" href="../orm/declarative_tables.html">声明式的表配置</a></li>
<li class="toctree-l4"><a class="reference internal" href="../orm/declarative_config.html">使用声明式映射器配置</a></li>
<li class="toctree-l4"><a class="reference internal" href="../orm/declarative_mixins.html">使用 Mixins 组合映射层次结构</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../orm/dataclasses.html">与dataclass和attrs的集成</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/mapped_sql_expr.html">SQL 表达式作为映射属性</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/mapped_attributes.html">更改Attribute的行为</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/composites.html">复合列类型</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/inheritance.html">映射类继承层次结构</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/nonstandard_mappings.html">非传统映射</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/versioning.html">配置版本计数器</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/mapping_api.html">类映射 API</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../orm/scalar_mapping.html">映射 SQL 表达式</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of 映射 SQL 表达式</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../orm/mapping_columns.html">映射表格列</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../orm/relationships.html">关系配置</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of 关系配置</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../orm/basic_relationships.html">基本关系模式</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/self_referential.html">邻接表关系</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/join_conditions.html">配置关系连接方式</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/large_collections.html">使用大型集合</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/collection_api.html">集合自定义和 API 详细信息</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/relationship_persistence.html">特殊关系的持久化模式</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/backref.html">使用旧版“backref”关系参数</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/relationship_api.html">关系 API</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../orm/queryguide/index.html">ORM 查询指南</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of ORM 查询指南</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/select.html">为 ORM 映射类编写 SELECT 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/inheritance.html">为继承映射编写 SELECT 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/dml.html">启用 ORM 的 INSERT、UPDATE 和 DELETE 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/columns.html">列加载选项</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/relationships.html">关系加载技术</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/api.html">用于查询的 ORM API 功能</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/query.html">旧式查询 API</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../orm/session.html">使用会话</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of 使用会话</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../orm/session_basics.html">会话基础知识</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/session_state_management.html">状态管理</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/cascades.html">级联</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/session_transaction.html">事务和连接管理</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/persistence_techniques.html">附加持久性技术</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/contextual.html">上下文/线程本地会话</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/session_events.html">使用事件跟踪查询、对象和会话更改</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/session_api.html">会话 API</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../orm/extending.html">事件和内部</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of 事件和内部</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../orm/events.html">ORM 事件</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/internals.html">ORM 内部</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/exceptions.html">ORM 异常</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../orm/extensions/index.html">ORM 扩展</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of ORM 扩展</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/asyncio.html">异步 I/O (asyncio)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/associationproxy.html">关联代理</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/automap.html">自动映射</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/baked.html">烘焙查询</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/declarative/index.html">声明式扩展</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/mutable.html">突变追踪</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/orderinglist.html">排序列表</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/horizontal_shard.html">水平分片</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/hybrid.html">混合属性</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/indexable.html">Indexable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/instrumentation.html">替代类检测</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../orm/examples.html">核心和 ORM 示例</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">SQLAlchemy Core</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of SQLAlchemy Core</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="expression_api.html">SQL 语句和表达式 API</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of SQL 语句和表达式 API</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="sqlelement.html">列元素和表达式</a></li>
<li class="toctree-l3"><a class="reference internal" href="operators.html">操作符参考</a></li>
<li class="toctree-l3"><a class="reference internal" href="selectable.html">SELECT 和相关构造</a></li>
<li class="toctree-l3"><a class="reference internal" href="dml.html">插入,更新,删除</a></li>
<li class="toctree-l3"><a class="reference internal" href="functions.html">SQL 和 范型函数</a></li>
<li class="toctree-l3"><a class="reference internal" href="compiler.html">自定义 SQL 构造和编译扩展</a></li>
<li class="toctree-l3"><a class="reference internal" href="serializer.html">表达式序列化器扩展</a></li>
<li class="toctree-l3"><a class="reference internal" href="foundation.html">SQL 表达式语言基础构造</a></li>
<li class="toctree-l3"><a class="reference internal" href="visitors.html">访问者和遍历实用程序</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="schema.html">Schema 定义语言</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of Schema 定义语言</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="metadata.html">使用元数据描述数据库</a></li>
<li class="toctree-l3"><a class="reference internal" href="reflection.html">反映数据库对象</a></li>
<li class="toctree-l3"><a class="reference internal" href="defaults.html">列 INSERT/UPDATE 默认值</a></li>
<li class="toctree-l3"><a class="reference internal" href="constraints.html">定义约束和索引</a></li>
<li class="toctree-l3"><a class="reference internal" href="ddl.html">自定义 DDL</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="types.html">SQL 数据类型对象</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of SQL 数据类型对象</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="type_basics.html">类型层次结构</a></li>
<li class="toctree-l3"><a class="reference internal" href="custom_types.html">自定义类型</a></li>
<li class="toctree-l3"><a class="reference internal" href="type_api.html">基本类型 API</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="engines_connections.html">Engine和Connection的使用</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle navigation of Engine和Connection的使用</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Engine 配置</a></li>
<li class="toctree-l3"><a class="reference internal" href="connections.html">使用Engines和Connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="pooling.html">连接池</a></li>
<li class="toctree-l3"><a class="reference internal" href="events.html">核心事件</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="api_basics.html">Core API 基础</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle navigation of Core API 基础</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="event.html">事件</a></li>
<li class="toctree-l3"><a class="reference internal" href="inspection.html">运行时审查 API</a></li>
<li class="toctree-l3"><a class="reference internal" href="exceptions.html">Core 异常</a></li>
<li class="toctree-l3"><a class="reference internal" href="internals.html">Core 内部</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../dialects/index.html">Dialects</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle navigation of Dialects</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../dialects/postgresql.html">PostgreSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dialects/mysql.html">MySQL 和 MariaDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dialects/sqlite.html">SQLite</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dialects/oracle.html">Oracle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dialects/mssql.html">Microsoft SQL Server</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../faq/index.html">常见问题</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle navigation of 常见问题</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../faq/installation.html">安装</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/connections.html">连接 / 引擎</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/metadata_schema.html">元数据 / Schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/sqlexpressions.html">SQL 表达式</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/ormconfiguration.html">ORM 配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/performance.html">性能</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/sessions.html">会话 / 查询</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/thirdparty.html">第三方包集成问题</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../errors.html">错误消息</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../changelog/index.html">变更和迁移</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle navigation of 变更和迁移</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_21.html">SQLAlchemy 2.1 有什么新功能？</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_21.html">2.1 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_20.html">2.0 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_14.html">1.4 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_13.html">1.3 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_12.html">1.2 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_11.html">1.1 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_10.html">1.0 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_09.html">0.9 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_08.html">0.8 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_07.html">0.7 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_06.html">0.6 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_05.html">0.5 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_04.html">0.4 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_03.html">0.3 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_02.html">0.2 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_01.html">0.1 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_20.html">SQLAlchemy 2.0 - Major Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/whatsnew_20.html">What’s New in SQLAlchemy 2.0?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_14.html">What’s New in SQLAlchemy 1.4?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_13.html">What’s New in SQLAlchemy 1.3?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_12.html">What’s New in SQLAlchemy 1.2?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_11.html">What’s New in SQLAlchemy 1.1?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_10.html">What’s New in SQLAlchemy 1.0?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_09.html">What’s New in SQLAlchemy 0.9?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_08.html">What’s New in SQLAlchemy 0.8?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_07.html">What’s New in SQLAlchemy 0.7?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_06.html">What’s New in SQLAlchemy 0.6?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_05.html">What’s new in SQLAlchemy 0.5?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_04.html">What’s new in SQLAlchemy 0.4?</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          

<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="engine">
<span id="engines-toplevel"></span><h1>Engine 配置<a class="headerlink" href="#engine" title="Link to this heading">¶</a></h1>
<p>Engine Configuration</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--1">中文</label><div class="tab-content docutils container">
<p><a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> 是任何SQLAlchemy应用程序的起点。它是实际数据库及其 <a class="reference internal" href="../glossary.html#term-DBAPI"><span class="xref std std-term">DBAPI</span></a> 的“基地”，通过连接池和描述如何与特定类型的数据库/DBAPI组合通信的 <a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a> 提供给SQLAlchemy应用程序。</p>
<p>一般结构可以如下图所示：</p>
<img alt="../_images/sqla_engine_arch.png" src="../_images/sqla_engine_arch.png" />
<p>在上图中，<a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> 引用 <a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a> 和 <a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a>，它们共同解释DBAPI的模块函数以及数据库的行为。</p>
<p>创建引擎只需发出一个简单的调用 <a class="reference internal" href="#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_engine</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql+psycopg2://scott:tiger@localhost:5432/mydatabase&quot;</span><span class="p">)</span></pre></div>
</div>
<p>上述引擎创建了一个针对PostgreSQL定制的 <a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a> 对象，以及一个在首次收到连接请求时将在 <code class="docutils literal notranslate"><span class="pre">localhost:5432</span></code> 建立DBAPI连接的 <a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> 对象。注意 <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> 及其底层的 <a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> 在调用 <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine.connect" title="sqlalchemy.engine.Engine.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.connect()</span></code></a> 或 <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine.begin" title="sqlalchemy.engine.Engine.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.begin()</span></code></a> 方法之前不会建立第一个实际的DBAPI连接。这些方法中的任意一个也可能被其他首次需要数据库连接的SQLAlchemy <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> 依赖对象（如ORM的 <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> 对象）调用。通过这种方式，可以说 <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> 和 <a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> 具有 <em>延迟初始化</em> 行为。</p>
<p>创建后，可以直接使用 <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> 与数据库交互，或将其传递给 <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> 对象以使用ORM。本节介绍了配置 <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> 的详细信息。下一节 <a class="reference internal" href="connections.html#connections-toplevel"><span class="std std-ref">使用Engines和Connection</span></a> 将详细介绍 <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> 及类似对象的使用API，通常用于非ORM应用程序。</p>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--2">英文</label><div class="tab-content docutils container">
<p>The <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> is the starting point for any SQLAlchemy application. It’s
“home base” for the actual database and its <a class="reference internal" href="../glossary.html#term-DBAPI"><span class="xref std std-term">DBAPI</span></a>, delivered to the SQLAlchemy
application through a connection pool and a <a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a>, which describes how
to talk to a specific kind of database/DBAPI combination.</p>
<p>The general structure can be illustrated as follows:</p>
<img alt="../_images/sqla_engine_arch.png" src="../_images/sqla_engine_arch.png" />
<p>Where above, an <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> references both a
<a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a> and a <a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a>,
which together interpret the DBAPI’s module functions as well as the behavior
of the database.</p>
<p>Creating an engine is just a matter of issuing a single call,
<a class="reference internal" href="#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_engine</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql+psycopg2://scott:tiger@localhost:5432/mydatabase&quot;</span><span class="p">)</span></pre></div>
</div>
<p>The above engine creates a <a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a> object tailored towards
PostgreSQL, as well as a <a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> object which will establish a
DBAPI connection at <code class="docutils literal notranslate"><span class="pre">localhost:5432</span></code> when a connection request is first
received. Note that the <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> and its underlying
<a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> do <strong>not</strong> establish the first actual DBAPI connection
until the <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine.connect" title="sqlalchemy.engine.Engine.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.connect()</span></code></a> or <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine.begin" title="sqlalchemy.engine.Engine.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.begin()</span></code></a>
methods are called.  Either of these methods may also be invoked by other
SQLAlchemy <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> dependent objects such as the ORM
<a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object when they first require database connectivity.
In this way, <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> and <a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> can be said to
have a <em>lazy initialization</em> behavior.</p>
<p>The <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>, once created, can either be used directly to interact with the database,
or can be passed to a <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object to work with the ORM.   This section
covers the details of configuring an <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.   The next section, <a class="reference internal" href="connections.html#connections-toplevel"><span class="std std-ref">使用Engines和Connection</span></a>,
will detail the usage API of the <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> and similar, typically for non-ORM
applications.</p>
</div>
</div>
<section id="supported-dbapis">
<span id="id1"></span><h2>支持的数据库<a class="headerlink" href="#supported-dbapis" title="Link to this heading">¶</a></h2>
<p>Supported Databases</p>
<p>SQLAlchemy includes many <a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a> implementations for various
backends.   Dialects for the most common databases are included with SQLAlchemy; a handful
of others require an additional install of a separate dialect.</p>
<p>See the section <a class="reference internal" href="../dialects/index.html#dialect-toplevel"><span class="std std-ref">Dialects</span></a> for information on the various backends available.</p>
</section>
<section id="url">
<span id="database-urls"></span><h2>数据库 URL<a class="headerlink" href="#url" title="Link to this heading">¶</a></h2>
<p>Database URLs</p>
<p>The <a class="reference internal" href="#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> function produces an <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>
object based on a URL. The format of the URL generally follows <a class="reference external" href="https://www.ietf.org/rfc/rfc1738.txt">RFC-1738</a>, with some exceptions, including that
underscores, not dashes or periods, are accepted within the “scheme” portion.
URLs typically include username, password, hostname, database name fields, as
well as optional keyword arguments for additional configuration. In some cases
a file path is accepted, and in others a “data source name” replaces the “host”
and “database” portions. The typical form of a database URL is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>dialect+driver://username:password@host:port/database</pre></div>
</div>
<p>Dialect names include the identifying name of the SQLAlchemy dialect,
a name such as <code class="docutils literal notranslate"><span class="pre">sqlite</span></code>, <code class="docutils literal notranslate"><span class="pre">mysql</span></code>, <code class="docutils literal notranslate"><span class="pre">postgresql</span></code>, <code class="docutils literal notranslate"><span class="pre">oracle</span></code>, or <code class="docutils literal notranslate"><span class="pre">mssql</span></code>.
The drivername is the name of the DBAPI to be used to connect to
the database using all lowercase letters. If not specified, a “default” DBAPI
will be imported if available - this default is typically the most widely
known driver available for that backend.</p>
<section id="id2">
<h3>转义密码中的特殊字符，例如 &#64; 符号<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<p>Escaping Special Characters such as &#64; signs in Passwords</p>
<p>When constructing a fully formed URL string to pass to
<a class="reference internal" href="#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>, <strong>special characters such as those that may
be used in the user and password need to be URL encoded to be parsed correctly.</strong>.
<strong>This includes the &#64; sign</strong>.</p>
<p>Below is an example of a URL that includes the password <code class="docutils literal notranslate"><span class="pre">&quot;kx&#64;jj5/g&quot;</span></code>, where the
“at” sign and slash characters are represented as <code class="docutils literal notranslate"><span class="pre">%40</span></code> and <code class="docutils literal notranslate"><span class="pre">%2F</span></code>,
respectively:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>postgresql+pg8000://dbuser:kx%40jj5%2Fg@pghost10/appdb</pre></div>
</div>
<p>The encoding for the above password can be generated using
<a class="reference external" href="https://docs.python.org/3/library/urllib.parse.html">urllib.parse</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">urllib.parse</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">quote_plus</span><span class="p">(</span><span class="s2">&quot;kx@jj5/g&quot;</span><span class="p">)</span>
<span class="go">&#39;kx%40jj5%2Fg&#39;</span></pre></div>
</div>
<p>The URL may then be passed as a string to <a class="reference internal" href="#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_engine</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql+pg8000://dbuser:kx%40jj5</span><span class="si">%2F</span><span class="s2">g@pghost10/appdb&quot;</span><span class="p">)</span></pre></div>
</div>
<p>As an alternative to escaping special characters in order to create a complete
URL string, the object passed to <a class="reference internal" href="#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> may instead be an
instance of the <a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object, which bypasses the parsing
phase and can accommodate for unescaped strings directly.  See the next
section for an example.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.4 版本发生变更: </span>Support for <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> signs in hostnames and database names has been
fixed.   As a side effect of this fix, <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> signs in passwords must be
escaped.</p>
</div>
</section>
<section id="id3">
<h3>以编程方式创建 URL<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<p>Creating URLs Programmatically</p>
<p>The value passed to <a class="reference internal" href="#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> may be an instance of
<a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a>, instead of a plain string, which bypasses the need for string
parsing to be used, and therefore does not need an escaped URL string to be
provided.</p>
<p>The <a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object is created using the <a class="reference internal" href="#sqlalchemy.engine.URL.create" title="sqlalchemy.engine.URL.create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">URL.create()</span></code></a>
constructor method, passing all fields individually.   Special characters
such as those within passwords may be passed without any modification:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">URL</span>

<span class="n">url_object</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="s2">&quot;postgresql+pg8000&quot;</span><span class="p">,</span>
    <span class="n">username</span><span class="o">=</span><span class="s2">&quot;dbuser&quot;</span><span class="p">,</span>
    <span class="n">password</span><span class="o">=</span><span class="s2">&quot;kx@jj5/g&quot;</span><span class="p">,</span>  <span class="c1"># plain (unescaped) text</span>
    <span class="n">host</span><span class="o">=</span><span class="s2">&quot;pghost10&quot;</span><span class="p">,</span>
    <span class="n">database</span><span class="o">=</span><span class="s2">&quot;appdb&quot;</span><span class="p">,</span>
<span class="p">)</span></pre></div>
</div>
<p>The constructed <a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object may then be passed directly to
<a class="reference internal" href="#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> in place of a string argument:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_engine</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">url_object</span><span class="p">)</span></pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.URL.create" title="sqlalchemy.engine.URL.create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">URL.create()</span></code></a></p>
</div>
</section>
<section id="id4">
<h3>后端特定的 URL<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h3>
<p>Backend-Specific URLs</p>
<p>Examples for common connection styles follow below.  For a full index of
detailed information on all included dialects as well as links to third-party
dialects, see <a class="reference internal" href="../dialects/index.html#dialect-toplevel"><span class="std std-ref">Dialects</span></a>.</p>
<section id="postgresql">
<h4>PostgreSQL<a class="headerlink" href="#postgresql" title="Link to this heading">¶</a></h4>
<p>PostgreSQL</p>
<p>The PostgreSQL dialect uses psycopg2 as the default DBAPI.  Other
PostgreSQL DBAPIs include pg8000 and asyncpg:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># default</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql://scott:tiger@localhost/mydatabase&quot;</span><span class="p">)</span>

<span class="c1"># psycopg2</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql+psycopg2://scott:tiger@localhost/mydatabase&quot;</span><span class="p">)</span>

<span class="c1"># pg8000</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql+pg8000://scott:tiger@localhost/mydatabase&quot;</span><span class="p">)</span></pre></div>
</div>
<p>More notes on connecting to PostgreSQL at <a class="reference internal" href="../dialects/postgresql.html#postgresql-toplevel"><span class="std std-ref">PostgreSQL</span></a>.</p>
</section>
<section id="mysql">
<h4>MySQL<a class="headerlink" href="#mysql" title="Link to this heading">¶</a></h4>
<p>MySQL</p>
<p>The MySQL dialect uses mysqlclient as the default DBAPI.  There are other
MySQL DBAPIs available, including PyMySQL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># default</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;mysql://scott:tiger@localhost/foo&quot;</span><span class="p">)</span>

<span class="c1"># mysqlclient (a maintained fork of MySQL-Python)</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;mysql+mysqldb://scott:tiger@localhost/foo&quot;</span><span class="p">)</span>

<span class="c1"># PyMySQL</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;mysql+pymysql://scott:tiger@localhost/foo&quot;</span><span class="p">)</span></pre></div>
</div>
<p>More notes on connecting to MySQL at <a class="reference internal" href="../dialects/mysql.html#mysql-toplevel"><span class="std std-ref">MySQL 和 MariaDB</span></a>.</p>
</section>
<section id="oracle">
<h4>Oracle<a class="headerlink" href="#oracle" title="Link to this heading">¶</a></h4>
<p>Oracle</p>
<p>The preferred Oracle Database dialect uses the python-oracledb driver as the
DBAPI:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+oracledb://scott:tiger@127.0.0.1:1521/?service_name=freepdb1&quot;</span>
<span class="p">)</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;oracle+oracledb://scott:tiger@tnsalias&quot;</span><span class="p">)</span></pre></div>
</div>
<p>For historical reasons, the Oracle dialect uses the obsolete cx_Oracle driver
as the default DBAPI:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;oracle://scott:tiger@127.0.0.1:1521/?service_name=freepdb1&quot;</span><span class="p">)</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;oracle+cx_oracle://scott:tiger@tnsalias&quot;</span><span class="p">)</span></pre></div>
</div>
<p>More notes on connecting to Oracle Database at <a class="reference internal" href="../dialects/oracle.html#oracle-toplevel"><span class="std std-ref">Oracle</span></a>.</p>
</section>
<section id="microsoft-sql-server">
<h4>Microsoft SQL Server<a class="headerlink" href="#microsoft-sql-server" title="Link to this heading">¶</a></h4>
<p>Microsoft SQL Server</p>
<p>The SQL Server dialect uses pyodbc as the default DBAPI.  pymssql is
also available:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># pyodbc</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;mssql+pyodbc://scott:tiger@mydsn&quot;</span><span class="p">)</span>

<span class="c1"># pymssql</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;mssql+pymssql://scott:tiger@hostname:port/dbname&quot;</span><span class="p">)</span></pre></div>
</div>
<p>More notes on connecting to SQL Server at <a class="reference internal" href="../dialects/mssql.html#mssql-toplevel"><span class="std std-ref">Microsoft SQL Server</span></a>.</p>
</section>
<section id="sqlite">
<h4>SQLite<a class="headerlink" href="#sqlite" title="Link to this heading">¶</a></h4>
<p>SQLite</p>
<p>SQLite connects to file-based databases, using the Python built-in
module <code class="docutils literal notranslate"><span class="pre">sqlite3</span></code> by default.</p>
<p>As SQLite connects to local files, the URL format is slightly different.
The “file” portion of the URL is the filename of the database.
For a relative file path, this requires three slashes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># sqlite://&lt;nohostname&gt;/&lt;path&gt;</span>
<span class="c1"># where &lt;path&gt; is relative:</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;sqlite:///foo.db&quot;</span><span class="p">)</span></pre></div>
</div>
<p>And for an absolute file path, the three slashes are followed by the absolute path:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Unix/Mac - 4 initial slashes in total</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;sqlite:////absolute/path/to/foo.db&quot;</span><span class="p">)</span>

<span class="c1"># Windows</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;sqlite:///C:</span><span class="se">\\</span><span class="s2">path</span><span class="se">\\</span><span class="s2">to</span><span class="se">\\</span><span class="s2">foo.db&quot;</span><span class="p">)</span>

<span class="c1"># Windows alternative using raw string</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;sqlite:///C:\path\to\foo.db&quot;</span><span class="p">)</span></pre></div>
</div>
<p>To use a SQLite <code class="docutils literal notranslate"><span class="pre">:memory:</span></code> database, specify an empty URL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;sqlite://&quot;</span><span class="p">)</span></pre></div>
</div>
<p>More notes on connecting to SQLite at <a class="reference internal" href="../dialects/sqlite.html#sqlite-toplevel"><span class="std std-ref">SQLite</span></a>.</p>
</section>
<section id="id5">
<h4>其他<a class="headerlink" href="#id5" title="Link to this heading">¶</a></h4>
<p>Others</p>
<p>See <a class="reference internal" href="../dialects/index.html#dialect-toplevel"><span class="std std-ref">Dialects</span></a>, the top-level page for all additional dialect
documentation.</p>
</section>
</section>
</section>
<section id="api">
<span id="create-engine-args"></span><h2>引擎创建 API<a class="headerlink" href="#api" title="Link to this heading">¶</a></h2>
<p>Engine Creation API</p>
<div class="table-wrapper longtable docutils container">
<table class="longtable docutils align-default">
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.create_engine"><span class="sig-name descname">create_engine</span></a>(url, **kwargs)</p></td>
<td><p>Create a new <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> instance.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.create_mock_engine"><span class="sig-name descname">create_mock_engine</span></a>(url, executor, **kw)</p></td>
<td><p>Create a “mock” engine used for echoing DDL.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.create_pool_from_url"><span class="sig-name descname">create_pool_from_url</span></a>(url, **kwargs)</p></td>
<td><p>Create a pool instance from the given url.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.engine_from_config"><span class="sig-name descname">engine_from_config</span></a>(configuration[, prefix], **kwargs)</p></td>
<td><p>Create a new Engine instance using a configuration dictionary.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.engine.make_url"><span class="sig-name descname">make_url</span></a>(name_or_url)</p></td>
<td><p>Given a string, produce a new URL instance.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.engine.URL"><span class="sig-name descname">URL</span></a></p></td>
<td><p>Represent the components of a URL used to connect to a database.</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.create_engine">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.</span></span><span class="sig-name descname"><span class="pre">create_engine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">_url.URL</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><span class="pre">Engine</span></a></span></span><a class="headerlink" href="#sqlalchemy.create_engine" title="Link to this definition">¶</a></dt>
<dd><p>Create a new <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> instance.</p>
<p>The standard calling form is to send the <a class="reference internal" href="#database-urls"><span class="std std-ref">URL</span></a> as the
first positional argument, usually a string
that indicates database dialect and connection arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql+psycopg2://scott:tiger@localhost/test&quot;</span><span class="p">)</span></pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>Please review <a class="reference internal" href="#database-urls"><span class="std std-ref">数据库 URL</span></a> for general guidelines in composing
URL strings.  In particular, special characters, such as those often
part of passwords, must be URL encoded to be properly parsed.</p>
</div>
<p>Additional keyword arguments may then follow it which
establish various options on the resulting <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>
and its underlying <a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a> and <a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a>
constructs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;mysql+mysqldb://scott:tiger@hostname/dbname&quot;</span><span class="p">,</span>
    <span class="n">pool_recycle</span><span class="o">=</span><span class="mi">3600</span><span class="p">,</span>
    <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span></pre></div>
</div>
<p>The string form of the URL is
<code class="docutils literal notranslate"><span class="pre">dialect[+driver]://user:password&#64;host/dbname[?key=value..]</span></code>, where
<code class="docutils literal notranslate"><span class="pre">dialect</span></code> is a database name such as <code class="docutils literal notranslate"><span class="pre">mysql</span></code>, <code class="docutils literal notranslate"><span class="pre">oracle</span></code>,
<code class="docutils literal notranslate"><span class="pre">postgresql</span></code>, etc., and <code class="docutils literal notranslate"><span class="pre">driver</span></code> the name of a DBAPI, such as
<code class="docutils literal notranslate"><span class="pre">psycopg2</span></code>, <code class="docutils literal notranslate"><span class="pre">pyodbc</span></code>, <code class="docutils literal notranslate"><span class="pre">cx_oracle</span></code>, etc.  Alternatively,
the URL can be an instance of <a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.url.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">**kwargs</span></code> takes a wide variety of options which are routed
towards their appropriate components.  Arguments may be specific to
the <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>, the underlying <a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a>,
as well as the
<a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a>.  Specific dialects also accept keyword arguments that
are unique to that dialect.   Here, we describe the parameters
that are common to most <a class="reference internal" href="#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> usage.</p>
<p>Once established, the newly resulting <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> will
request a connection from the underlying <a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> once
<a class="reference internal" href="connections.html#sqlalchemy.engine.Engine.connect" title="sqlalchemy.engine.Engine.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.connect()</span></code></a> is called, or a method which depends on it
such as <code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execute()</span></code> is invoked.   The
<a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> in turn
will establish the first actual DBAPI connection when this request
is received.   The <a class="reference internal" href="#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> call itself does <strong>not</strong>
establish any actual DBAPI connections directly.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#"><span class="doc">Engine 配置</span></a></p>
<p><a class="reference internal" href="../dialects/index.html"><span class="doc">Dialects</span></a></p>
<p><a class="reference internal" href="connections.html#connections-toplevel"><span class="std std-ref">使用Engines和Connection</span></a></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.create_engine.params.connect_args"></span><strong>connect_args</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.connect_args">¶</a> – a dictionary of options which will be
passed directly to the DBAPI’s <code class="docutils literal notranslate"><span class="pre">connect()</span></code> method as
additional keyword arguments.  See the example
at <a class="reference internal" href="#custom-dbapi-args"><span class="std std-ref">自定义 DBAPI connect() 参数/连接例程</span></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.creator"></span><strong>creator</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.creator">¶</a> – <p>a callable which returns a DBAPI connection.
This creation function will be passed to the underlying
connection pool and will be used to create all new database
connections. Usage of this function causes connection
parameters specified in the URL argument to be bypassed.</p>
<p>This hook is not as flexible as the newer
<a class="reference internal" href="events.html#sqlalchemy.events.DialectEvents.do_connect" title="sqlalchemy.events.DialectEvents.do_connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectEvents.do_connect()</span></code></a> hook which allows complete
control over how a connection is made to the database, given the full
set of URL arguments and state beforehand.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="events.html#sqlalchemy.events.DialectEvents.do_connect" title="sqlalchemy.events.DialectEvents.do_connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectEvents.do_connect()</span></code></a> - event hook that allows
full control over DBAPI connection mechanics.</p>
<p><a class="reference internal" href="#custom-dbapi-args"><span class="std std-ref">自定义 DBAPI connect() 参数/连接例程</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.echo"></span><strong>echo=False</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.echo">¶</a> – <p>if True, the Engine will log all statements
as well as a <code class="docutils literal notranslate"><span class="pre">repr()</span></code> of their parameter lists to the default log
handler, which defaults to <code class="docutils literal notranslate"><span class="pre">sys.stdout</span></code> for output.   If set to the
string <code class="docutils literal notranslate"><span class="pre">&quot;debug&quot;</span></code>, result rows will be printed to the standard output
as well. The <code class="docutils literal notranslate"><span class="pre">echo</span></code> attribute of <code class="docutils literal notranslate"><span class="pre">Engine</span></code> can be modified at any
time to turn logging on and off; direct control of logging is also
available using the standard Python <code class="docutils literal notranslate"><span class="pre">logging</span></code> module.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#dbengine-logging"><span class="std std-ref">配置日志记录</span></a> - further detail on how to configure
logging.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.echo_pool"></span><strong>echo_pool=False</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.echo_pool">¶</a> – <p>if True, the connection pool will log
informational output such as when connections are invalidated
as well as when connections are recycled to the default log handler,
which defaults to <code class="docutils literal notranslate"><span class="pre">sys.stdout</span></code> for output.   If set to the string
<code class="docutils literal notranslate"><span class="pre">&quot;debug&quot;</span></code>, the logging will include pool checkouts and checkins.
Direct control of logging is also available using the standard Python
<code class="docutils literal notranslate"><span class="pre">logging</span></code> module.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#dbengine-logging"><span class="std std-ref">配置日志记录</span></a> - further detail on how to configure
logging.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.empty_in_strategy"></span><strong>empty_in_strategy</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.empty_in_strategy">¶</a> – <p>No longer used; SQLAlchemy now uses
“empty set” behavior for IN in all cases.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">自 1.4 版本弃用: </span>The <a class="reference internal" href="#sqlalchemy.create_engine.params.empty_in_strategy" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.empty_in_strategy</span></code></a> keyword is deprecated, and no longer has any effect.  All IN expressions are now rendered using the “expanding parameter” strategy which renders a set of boundexpressions, or an “empty set” SELECT, at statement executiontime.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.enable_from_linting"></span><strong>enable_from_linting</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.enable_from_linting">¶</a> – <p>defaults to True.  Will emit a warning
if a given SELECT statement is found to have un-linked FROM elements
which would cause a cartesian product.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="../changelog/migration_14.html#change-4737"><span class="std std-ref">Built-in FROM linting will warn for any potential cartesian products in a SELECT statement</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.execution_options"></span><strong>execution_options</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.execution_options">¶</a> – Dictionary execution options which will
be applied to all connections.  See
<a class="reference internal" href="connections.html#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a></p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.future"></span><strong>future</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.future">¶</a> – <p>Use the 2.0 style <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> and
<a class="reference internal" href="connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> API.</p>
<p>As of SQLAlchemy 2.0, this parameter is present for backwards
compatibility only and must remain at its default value of <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>The <a class="reference internal" href="#sqlalchemy.create_engine.params.future" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.future</span></code></a> parameter will be
deprecated in a subsequent 2.x release and eventually removed.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 2.0 版本发生变更: </span>All <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> objects are
“future” style engines and there is no longer a <code class="docutils literal notranslate"><span class="pre">future=False</span></code>
mode of operation.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="../changelog/migration_20.html#migration-20-toplevel"><span class="std std-ref">SQLAlchemy 2.0 - Major Migration Guide</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.hide_parameters"></span><strong>hide_parameters</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.hide_parameters">¶</a> – <p>Boolean, when set to True, SQL statement parameters
will not be displayed in INFO logging nor will they be formatted into
the string representation of <a class="reference internal" href="exceptions.html#sqlalchemy.exc.StatementError" title="sqlalchemy.exc.StatementError"><code class="xref py py-class docutils literal notranslate"><span class="pre">StatementError</span></code></a> objects.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#dbengine-logging"><span class="std std-ref">配置日志记录</span></a> - further detail on how to configure
logging.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.implicit_returning"></span><strong>implicit_returning=True</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.implicit_returning">¶</a> – Legacy parameter that may only be set
to True. In SQLAlchemy 2.0, this parameter does nothing. In order to
disable “implicit returning” for statements invoked by the ORM,
configure this on a per-table basis using the
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.params.implicit_returning" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.implicit_returning</span></code></a> parameter.</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.insertmanyvalues_page_size"></span><strong>insertmanyvalues_page_size</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.insertmanyvalues_page_size">¶</a> – <p>number of rows to format into an
INSERT statement when the statement uses “insertmanyvalues” mode, which is
a paged form of bulk insert that is used for many backends when using
<a class="reference internal" href="../glossary.html#term-executemany"><span class="xref std std-term">executemany</span></a> execution typically in conjunction with RETURNING.
Defaults to 1000, but may also be subject to dialect-specific limiting
factors which may override this value on a per-statement basis.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="connections.html#engine-insertmanyvalues"><span class="std std-ref">INSERT 语句的“插入多个值”行为</span></a></p>
<p><a class="reference internal" href="connections.html#engine-insertmanyvalues-page-size"><span class="std std-ref">控制批处理大小</span></a></p>
<p><a class="reference internal" href="connections.html#sqlalchemy.engine.Connection.execution_options.params.insertmanyvalues_page_size" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.insertmanyvalues_page_size</span></code></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.isolation_level"></span><strong>isolation_level</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.isolation_level">¶</a> – <p>optional string name of an isolation level
which will be set on all new connections unconditionally.
Isolation levels are typically some subset of the string names
<code class="docutils literal notranslate"><span class="pre">&quot;SERIALIZABLE&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;REPEATABLE</span> <span class="pre">READ&quot;</span></code>,
<code class="docutils literal notranslate"><span class="pre">&quot;READ</span> <span class="pre">COMMITTED&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;READ</span> <span class="pre">UNCOMMITTED&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;AUTOCOMMIT&quot;</span></code>
based on backend.</p>
<p>The <a class="reference internal" href="#sqlalchemy.create_engine.params.isolation_level" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.isolation_level</span></code></a> parameter is
in contrast to the
<a class="reference internal" href="connections.html#sqlalchemy.engine.Connection.execution_options.params.isolation_level" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.isolation_level</span></code></a>
execution option, which may be set on an individual
<a class="reference internal" href="connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>, as well as the same parameter passed to
<a class="reference internal" href="connections.html#sqlalchemy.engine.Engine.execution_options" title="sqlalchemy.engine.Engine.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execution_options()</span></code></a>, where it may be used to create
multiple engines with different isolation levels that share a common
connection pool and dialect.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 2.0 版本发生变更: </span>The
<a class="reference internal" href="#sqlalchemy.create_engine.params.isolation_level" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.isolation_level</span></code></a>
parameter has been generalized to work on all dialects which support
the concept of isolation level, and is provided as a more succinct,
up front configuration switch in contrast to the execution option
which is more of an ad-hoc programmatic option.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="connections.html#dbapi-autocommit"><span class="std std-ref">设置事务隔离级别（包括 DBAPI 自动提交）</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.json_deserializer"></span><strong>json_deserializer</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.json_deserializer">¶</a> – for dialects that support the
<a class="reference internal" href="type_basics.html#sqlalchemy.types.JSON" title="sqlalchemy.types.JSON"><code class="xref py py-class docutils literal notranslate"><span class="pre">JSON</span></code></a>
datatype, this is a Python callable that will convert a JSON string
to a Python object.  By default, the Python <code class="docutils literal notranslate"><span class="pre">json.loads</span></code> function is
used.</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.json_serializer"></span><strong>json_serializer</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.json_serializer">¶</a> – for dialects that support the <a class="reference internal" href="type_basics.html#sqlalchemy.types.JSON" title="sqlalchemy.types.JSON"><code class="xref py py-class docutils literal notranslate"><span class="pre">JSON</span></code></a>
datatype, this is a Python callable that will render a given object
as JSON.   By default, the Python <code class="docutils literal notranslate"><span class="pre">json.dumps</span></code> function is used.</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.label_length"></span><strong>label_length=None</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.label_length">¶</a> – <p>optional integer value which limits
the size of dynamically generated column labels to that many
characters. If less than 6, labels are generated as
“_(counter)”. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, the value of
<code class="docutils literal notranslate"><span class="pre">dialect.max_identifier_length</span></code>, which may be affected via the
<a class="reference internal" href="#sqlalchemy.create_engine.params.max_identifier_length" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.max_identifier_length</span></code></a> parameter,
is used instead.   The value of
<a class="reference internal" href="#sqlalchemy.create_engine.params.label_length" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.label_length</span></code></a>
may not be larger than that of
<a class="reference internal" href="#sqlalchemy.create_engine.params.max_identfier_length" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.max_identfier_length</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.create_engine.params.max_identifier_length" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.max_identifier_length</span></code></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.logging_name"></span><strong>logging_name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.logging_name">¶</a> – <p>String identifier which will be used within
the “name” field of logging records generated within the
“sqlalchemy.engine” logger. Defaults to a hexstring of the
object’s id.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#dbengine-logging"><span class="std std-ref">配置日志记录</span></a> - further detail on how to configure
logging.</p>
<p><a class="reference internal" href="connections.html#sqlalchemy.engine.Connection.execution_options.params.logging_token" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.logging_token</span></code></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.max_identifier_length"></span><strong>max_identifier_length</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.max_identifier_length">¶</a> – <p>integer; override the max_identifier_length
determined by the dialect.  if <code class="docutils literal notranslate"><span class="pre">None</span></code> or zero, has no effect.  This
is the database’s configured maximum number of characters that may be
used in a SQL identifier such as a table name, column name, or label
name. All dialects determine this value automatically, however in the
case of a new database version for which this value has changed but
SQLAlchemy’s dialect has not been adjusted, the value may be passed
here.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.create_engine.params.label_length" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.label_length</span></code></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.max_overflow"></span><strong>max_overflow=10</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.max_overflow">¶</a> – the number of connections to allow in
connection pool “overflow”, that is connections that can be
opened above and beyond the pool_size setting, which defaults
to five. this is only used with <a class="reference internal" href="pooling.html#sqlalchemy.pool.QueuePool" title="sqlalchemy.pool.QueuePool"><code class="xref py py-class docutils literal notranslate"><span class="pre">QueuePool</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.module"></span><strong>module=None</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.module">¶</a> – reference to a Python module object (the module
itself, not its string name).  Specifies an alternate DBAPI module to
be used by the engine’s dialect.  Each sub-dialect references a
specific DBAPI which will be imported before first connect.  This
parameter causes the import to be bypassed, and the given module to
be used instead. Can be used for testing of DBAPIs as well as to
inject “mock” DBAPI implementations into the <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.paramstyle"></span><strong>paramstyle=None</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.paramstyle">¶</a> – The <a class="reference external" href="https://legacy.python.org/dev/peps/pep-0249/#paramstyle">paramstyle</a>
to use when rendering bound parameters.  This style defaults to the
one recommended by the DBAPI itself, which is retrieved from the
<code class="docutils literal notranslate"><span class="pre">.paramstyle</span></code> attribute of the DBAPI.  However, most DBAPIs accept
more than one paramstyle, and in particular it may be desirable
to change a “named” paramstyle into a “positional” one, or vice versa.
When this attribute is passed, it should be one of the values
<code class="docutils literal notranslate"><span class="pre">&quot;qmark&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;numeric&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;named&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;format&quot;</span></code> or
<code class="docutils literal notranslate"><span class="pre">&quot;pyformat&quot;</span></code>, and should correspond to a parameter style known
to be supported by the DBAPI in use.</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.pool"></span><strong>pool=None</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.pool">¶</a> – an already-constructed instance of
<a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a>, such as a
<a class="reference internal" href="pooling.html#sqlalchemy.pool.QueuePool" title="sqlalchemy.pool.QueuePool"><code class="xref py py-class docutils literal notranslate"><span class="pre">QueuePool</span></code></a> instance. If non-None, this
pool will be used directly as the underlying connection pool
for the engine, bypassing whatever connection parameters are
present in the URL argument. For information on constructing
connection pools manually, see <a class="reference internal" href="pooling.html#pooling-toplevel"><span class="std std-ref">连接池</span></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.poolclass"></span><strong>poolclass=None</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.poolclass">¶</a> – a <a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a>
subclass, which will be used to create a connection pool
instance using the connection parameters given in the URL. Note
this differs from <code class="docutils literal notranslate"><span class="pre">pool</span></code> in that you don’t actually
instantiate the pool in this case, you just indicate what type
of pool to be used.</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.pool_logging_name"></span><strong>pool_logging_name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.pool_logging_name">¶</a> – <p>String identifier which will be used within
the “name” field of logging records generated within the
“sqlalchemy.pool” logger. Defaults to a hexstring of the object’s
id.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#dbengine-logging"><span class="std std-ref">配置日志记录</span></a> - further detail on how to configure
logging.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.pool_pre_ping"></span><strong>pool_pre_ping</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.pool_pre_ping">¶</a> – <p>boolean, if True will enable the connection pool
“pre-ping” feature that tests connections for liveness upon
each checkout.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="pooling.html#pool-disconnects-pessimistic"><span class="std std-ref">断开连接处理 - 悲观</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.pool_size"></span><strong>pool_size=5</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.pool_size">¶</a> – the number of connections to keep open
inside the connection pool. This used with
<a class="reference internal" href="pooling.html#sqlalchemy.pool.QueuePool" title="sqlalchemy.pool.QueuePool"><code class="xref py py-class docutils literal notranslate"><span class="pre">QueuePool</span></code></a> as
well as <a class="reference internal" href="pooling.html#sqlalchemy.pool.SingletonThreadPool" title="sqlalchemy.pool.SingletonThreadPool"><code class="xref py py-class docutils literal notranslate"><span class="pre">SingletonThreadPool</span></code></a>.  With
<a class="reference internal" href="pooling.html#sqlalchemy.pool.QueuePool" title="sqlalchemy.pool.QueuePool"><code class="xref py py-class docutils literal notranslate"><span class="pre">QueuePool</span></code></a>, a <code class="docutils literal notranslate"><span class="pre">pool_size</span></code> setting
of 0 indicates no limit; to disable pooling, set <code class="docutils literal notranslate"><span class="pre">poolclass</span></code> to
<a class="reference internal" href="pooling.html#sqlalchemy.pool.NullPool" title="sqlalchemy.pool.NullPool"><code class="xref py py-class docutils literal notranslate"><span class="pre">NullPool</span></code></a> instead.</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.pool_recycle"></span><strong>pool_recycle=-1</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.pool_recycle">¶</a> – <p>this setting causes the pool to recycle
connections after the given number of seconds has passed. It
defaults to -1, or no timeout. For example, setting to 3600
means connections will be recycled after one hour. Note that
MySQL in particular will disconnect automatically if no
activity is detected on a connection for eight hours (although
this is configurable with the MySQLDB connection itself and the
server configuration as well).</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="pooling.html#pool-setting-recycle"><span class="std std-ref">设置池回收</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.pool_reset_on_return"></span><strong>pool_reset_on_return='rollback'</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.pool_reset_on_return">¶</a> – <p>set the
<a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool.params.reset_on_return" title="sqlalchemy.pool.Pool"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Pool.reset_on_return</span></code></a> parameter of the underlying
<a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> object, which can be set to the values
<code class="docutils literal notranslate"><span class="pre">&quot;rollback&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;commit&quot;</span></code>, or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="pooling.html#pool-reset-on-return"><span class="std std-ref">返回时重置</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.pool_timeout"></span><strong>pool_timeout=30</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.pool_timeout">¶</a> – <p>number of seconds to wait before giving
up on getting a connection from the pool. This is only used
with <a class="reference internal" href="pooling.html#sqlalchemy.pool.QueuePool" title="sqlalchemy.pool.QueuePool"><code class="xref py py-class docutils literal notranslate"><span class="pre">QueuePool</span></code></a>. This can be a float but is
subject to the limitations of Python time functions which may not be
reliable in the tens of milliseconds.</p>
</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.pool_use_lifo"></span><strong>pool_use_lifo=False</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.pool_use_lifo">¶</a> – <p>use LIFO (last-in-first-out) when retrieving
connections from <a class="reference internal" href="pooling.html#sqlalchemy.pool.QueuePool" title="sqlalchemy.pool.QueuePool"><code class="xref py py-class docutils literal notranslate"><span class="pre">QueuePool</span></code></a> instead of FIFO
(first-in-first-out). Using LIFO, a server-side timeout scheme can
reduce the number of connections used during non- peak   periods of
use.   When planning for server-side timeouts, ensure that a recycle or
pre-ping strategy is in use to gracefully   handle stale connections.</p>
<blockquote>
<div><div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="pooling.html#pool-use-lifo"><span class="std std-ref">使用 FIFO 与 LIFO</span></a></p>
<p><a class="reference internal" href="pooling.html#pool-disconnects"><span class="std std-ref">处理断开连接</span></a></p>
</div>
</div></blockquote>
</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.plugins"></span><strong>plugins</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.plugins">¶</a> – string list of plugin names to load.  See
<a class="reference internal" href="connections.html#sqlalchemy.engine.CreateEnginePlugin" title="sqlalchemy.engine.CreateEnginePlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateEnginePlugin</span></code></a> for background.</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.query_cache_size"></span><strong>query_cache_size</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.query_cache_size">¶</a> – <p>size of the cache used to cache the SQL string
form of queries.  Set to zero to disable caching.</p>
<p>The cache is pruned of its least recently used items when its size reaches
N * 1.5.  Defaults to 500, meaning the cache will always store at least
500 SQL statements when filled, and will grow up to 750 items at which
point it is pruned back down to 500 by removing the 250 least recently
used items.</p>
<p>Caching is accomplished on a per-statement basis by generating a
cache key that represents the statement’s structure, then generating
string SQL for the current dialect only if that key is not present
in the cache.   All statements support caching, however some features
such as an INSERT with a large set of parameters will intentionally
bypass the cache.   SQL logging will indicate statistics for each
statement whether or not it were pull from the cache.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>some ORM functions related to unit-of-work persistence as well
as some attribute loading strategies will make use of individual
per-mapper caches outside of the main cache.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="connections.html#sql-caching"><span class="std std-ref">SQL 编译缓存</span></a></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入.</span></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.create_engine.params.use_insertmanyvalues"></span><strong>use_insertmanyvalues</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_engine.params.use_insertmanyvalues">¶</a> – <p>True by default, use the “insertmanyvalues”
execution style for INSERT..RETURNING statements by default.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="connections.html#engine-insertmanyvalues"><span class="std std-ref">INSERT 语句的“插入多个值”行为</span></a></p>
</div>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.engine_from_config">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.</span></span><span class="sig-name descname"><span class="pre">engine_from_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'sqlalchemy.'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><span class="pre">Engine</span></a></span></span><a class="headerlink" href="#sqlalchemy.engine_from_config" title="Link to this definition">¶</a></dt>
<dd><p>Create a new Engine instance using a configuration dictionary.</p>
<p>The dictionary is typically produced from a config file.</p>
<p>The keys of interest to <code class="docutils literal notranslate"><span class="pre">engine_from_config()</span></code> should be prefixed, e.g.
<code class="docutils literal notranslate"><span class="pre">sqlalchemy.url</span></code>, <code class="docutils literal notranslate"><span class="pre">sqlalchemy.echo</span></code>, etc.  The ‘prefix’ argument
indicates the prefix to be searched for.  Each matching key (after the
prefix is stripped) is treated as though it were the corresponding keyword
argument to a <a class="reference internal" href="#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> call.</p>
<p>The only required key is (assuming the default prefix) <code class="docutils literal notranslate"><span class="pre">sqlalchemy.url</span></code>,
which provides the <a class="reference internal" href="#database-urls"><span class="std std-ref">database URL</span></a>.</p>
<p>A select set of keyword arguments will be “coerced” to their
expected type based on string values.    The set of arguments
is extensible per-dialect using the <code class="docutils literal notranslate"><span class="pre">engine_config_types</span></code> accessor.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.engine_from_config.params.configuration"></span><strong>configuration</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine_from_config.params.configuration">¶</a> – A dictionary (typically produced from a config file,
but this is not a requirement).  Items whose keys start with the value
of ‘prefix’ will have that prefix stripped, and will then be passed to
<a class="reference internal" href="#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.engine_from_config.params.prefix"></span><strong>prefix</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine_from_config.params.prefix">¶</a> – Prefix to match and then strip from keys
in ‘configuration’.</p></li>
<li><p><span class="target" id="sqlalchemy.engine_from_config.params.kwargs"></span><strong>kwargs</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine_from_config.params.kwargs">¶</a> – Each keyword argument to <code class="docutils literal notranslate"><span class="pre">engine_from_config()</span></code> itself
overrides the corresponding item taken from the ‘configuration’
dictionary.  Keyword arguments should <em>not</em> be prefixed.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.create_mock_engine">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.</span></span><span class="sig-name descname"><span class="pre">create_mock_engine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><span class="pre">URL</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">executor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">MockConnection</span></span></span><a class="headerlink" href="#sqlalchemy.create_mock_engine" title="Link to this definition">¶</a></dt>
<dd><p>Create a “mock” engine used for echoing DDL.</p>
<p>This is a utility function used for debugging or storing the output of DDL
sequences as generated by <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.create_all" title="sqlalchemy.schema.MetaData.create_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.create_all()</span></code></a>
and related methods.</p>
<p>The function accepts a URL which is used only to determine the kind of
dialect to be used, as well as an “executor” callable function which
will receive a SQL expression object and parameters, which can then be
echoed or otherwise printed.   The executor’s return value is not handled,
nor does the engine allow regular string statements to be invoked, and
is therefore only useful for DDL that is sent to the database without
receiving any results.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_mock_engine</span>


<span class="k">def</span><span class="w"> </span><span class="nf">dump</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="o">*</span><span class="n">multiparams</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="n">print</span><span class="p">(</span><span class="n">sql</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">dialect</span><span class="o">=</span><span class="n">engine</span><span class="o">.</span><span class="n">dialect</span><span class="p">))</span>


<span class="n">engine</span> <span class="o">=</span> <span class="n">create_mock_engine</span><span class="p">(</span><span class="s2">&quot;postgresql+psycopg2://&quot;</span><span class="p">,</span> <span class="n">dump</span><span class="p">)</span>
<span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">,</span> <span class="n">checkfirst</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.create_mock_engine.params.url"></span><strong>url</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_mock_engine.params.url">¶</a> – A string URL which typically needs to contain only the
database backend name.</p></li>
<li><p><span class="target" id="sqlalchemy.create_mock_engine.params.executor"></span><strong>executor</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.create_mock_engine.params.executor">¶</a> – a callable which receives the arguments <code class="docutils literal notranslate"><span class="pre">sql</span></code>,
<code class="docutils literal notranslate"><span class="pre">*multiparams</span></code> and <code class="docutils literal notranslate"><span class="pre">**params</span></code>.  The <code class="docutils literal notranslate"><span class="pre">sql</span></code> parameter is typically
an instance of <a class="reference internal" href="ddl.html#sqlalchemy.schema.ExecutableDDLElement" title="sqlalchemy.schema.ExecutableDDLElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutableDDLElement</span></code></a>, which can then be compiled
into a string using <code class="xref py py-meth docutils literal notranslate"><span class="pre">ExecutableDDLElement.compile()</span></code>.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入: </span>- the <a class="reference internal" href="#sqlalchemy.create_mock_engine" title="sqlalchemy.create_mock_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_mock_engine()</span></code></a> function replaces
the previous “mock” engine strategy used with
<a class="reference internal" href="#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="../faq/metadata_schema.html#faq-ddl-as-string"><span class="std std-ref">如何以字符串形式获取 CREATE TABLE/DROP TABLE 输出？</span></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.engine.make_url">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">make_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name_or_url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.url.URL"><span class="pre">URL</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.url.URL"><span class="pre">URL</span></a></span></span><a class="headerlink" href="#sqlalchemy.engine.make_url" title="Link to this definition">¶</a></dt>
<dd><p>Given a string, produce a new URL instance.</p>
<p>The format of the URL generally follows <a class="reference external" href="https://www.ietf.org/rfc/rfc1738.txt">RFC-1738</a>, with some exceptions, including
that underscores, and not dashes or periods, are accepted within the
“scheme” portion.</p>
<p>If a <a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object is passed, it is returned as is.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#database-urls"><span class="std std-ref">数据库 URL</span></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.create_pool_from_url">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.</span></span><span class="sig-name descname"><span class="pre">create_pool_from_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><span class="pre">URL</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><span class="pre">Pool</span></a></span></span><a class="headerlink" href="#sqlalchemy.create_pool_from_url" title="Link to this definition">¶</a></dt>
<dd><p>Create a pool instance from the given url.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">poolclass</span></code> is not provided the pool class used
is selected using the dialect specified in the URL.</p>
<p>The arguments passed to <a class="reference internal" href="#sqlalchemy.create_pool_from_url" title="sqlalchemy.create_pool_from_url"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_pool_from_url()</span></code></a> are
identical to the pool argument passed to the <a class="reference internal" href="#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>
function.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0.10 版本加入.</span></p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.engine.URL">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.engine.</span></span><span class="sig-name descname"><span class="pre">URL</span></span><a class="headerlink" href="#sqlalchemy.engine.URL" title="Link to this definition">¶</a></dt>
<dd><p>Represent the components of a URL used to connect to a database.</p>
<p>URLs are typically constructed from a fully formatted URL string, where the
<a class="reference internal" href="#sqlalchemy.engine.make_url" title="sqlalchemy.engine.make_url"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_url()</span></code></a> function is used internally by the
<a class="reference internal" href="#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> function in order to parse the URL string into
its individual components, which are then used to construct a new
<a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object. When parsing from a formatted URL string, the parsing
format generally follows
<a class="reference external" href="https://www.ietf.org/rfc/rfc1738.txt">RFC-1738</a>, with some exceptions.</p>
<p>A <a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object may also be produced directly, either by
using the <a class="reference internal" href="#sqlalchemy.engine.make_url" title="sqlalchemy.engine.make_url"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_url()</span></code></a> function with a fully formed URL string, or
by using the <a class="reference internal" href="#sqlalchemy.engine.URL.create" title="sqlalchemy.engine.URL.create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">URL.create()</span></code></a> constructor in order
to construct a <a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> programmatically given individual
fields. The resulting <a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object may be passed directly to
<a class="reference internal" href="#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> in place of a string argument, which will bypass
the usage of <a class="reference internal" href="#sqlalchemy.engine.make_url" title="sqlalchemy.engine.make_url"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_url()</span></code></a> within the engine’s creation process.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.4 版本发生变更: </span>The <a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object is now an immutable object.  To
create a URL, use the <a class="reference internal" href="#sqlalchemy.engine.make_url" title="sqlalchemy.engine.make_url"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_url()</span></code></a> or
<a class="reference internal" href="#sqlalchemy.engine.URL.create" title="sqlalchemy.engine.URL.create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">URL.create()</span></code></a> function / method.  To modify
a <a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a>, use methods like
<a class="reference internal" href="#sqlalchemy.engine.URL.set" title="sqlalchemy.engine.URL.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">URL.set()</span></code></a> and
<a class="reference internal" href="#sqlalchemy.engine.URL.update_query_dict" title="sqlalchemy.engine.URL.update_query_dict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">URL.update_query_dict()</span></code></a> to return a new
<a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object with modifications.   See notes for this
change at <a class="reference internal" href="../changelog/migration_14.html#change-5526"><span class="std std-ref">The URL object is now immutable</span></a>.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#database-urls"><span class="std std-ref">数据库 URL</span></a></p>
</div>
<p><a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> contains the following attributes:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#sqlalchemy.engine.URL.drivername" title="sqlalchemy.engine.URL.drivername"><code class="xref py py-attr docutils literal notranslate"><span class="pre">URL.drivername</span></code></a>: database backend and driver name, such as
<code class="docutils literal notranslate"><span class="pre">postgresql+psycopg2</span></code></p></li>
<li><p><a class="reference internal" href="#sqlalchemy.engine.URL.username" title="sqlalchemy.engine.URL.username"><code class="xref py py-attr docutils literal notranslate"><span class="pre">URL.username</span></code></a>: username string</p></li>
<li><p><a class="reference internal" href="#sqlalchemy.engine.URL.password" title="sqlalchemy.engine.URL.password"><code class="xref py py-attr docutils literal notranslate"><span class="pre">URL.password</span></code></a>: password string</p></li>
<li><p><a class="reference internal" href="#sqlalchemy.engine.URL.host" title="sqlalchemy.engine.URL.host"><code class="xref py py-attr docutils literal notranslate"><span class="pre">URL.host</span></code></a>: string hostname</p></li>
<li><p><a class="reference internal" href="#sqlalchemy.engine.URL.port" title="sqlalchemy.engine.URL.port"><code class="xref py py-attr docutils literal notranslate"><span class="pre">URL.port</span></code></a>: integer port number</p></li>
<li><p><a class="reference internal" href="#sqlalchemy.engine.URL.database" title="sqlalchemy.engine.URL.database"><code class="xref py py-attr docutils literal notranslate"><span class="pre">URL.database</span></code></a>: string database name</p></li>
<li><p><a class="reference internal" href="#sqlalchemy.engine.URL.query" title="sqlalchemy.engine.URL.query"><code class="xref py py-attr docutils literal notranslate"><span class="pre">URL.query</span></code></a>: an immutable mapping representing the query
string.  contains strings for keys and either strings or tuples of
strings for values.</p></li>
</ul>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.engine.URL.create"><span class="sig-name descname">create()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.URL.database"><span class="sig-name descname">database</span></a>, <a class="reference internal" href="#sqlalchemy.engine.URL.difference_update_query"><span class="sig-name descname">difference_update_query()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.URL.drivername"><span class="sig-name descname">drivername</span></a>, <a class="reference internal" href="#sqlalchemy.engine.URL.get_backend_name"><span class="sig-name descname">get_backend_name()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.URL.get_dialect"><span class="sig-name descname">get_dialect()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.URL.get_driver_name"><span class="sig-name descname">get_driver_name()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.URL.host"><span class="sig-name descname">host</span></a>, <a class="reference internal" href="#sqlalchemy.engine.URL.normalized_query"><span class="sig-name descname">normalized_query</span></a>, <a class="reference internal" href="#sqlalchemy.engine.URL.password"><span class="sig-name descname">password</span></a>, <a class="reference internal" href="#sqlalchemy.engine.URL.port"><span class="sig-name descname">port</span></a>, <a class="reference internal" href="#sqlalchemy.engine.URL.query"><span class="sig-name descname">query</span></a>, <a class="reference internal" href="#sqlalchemy.engine.URL.render_as_string"><span class="sig-name descname">render_as_string()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.URL.set"><span class="sig-name descname">set()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.URL.translate_connect_args"><span class="sig-name descname">translate_connect_args()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.URL.update_query_dict"><span class="sig-name descname">update_query_dict()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.URL.update_query_pairs"><span class="sig-name descname">update_query_pairs()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.URL.update_query_string"><span class="sig-name descname">update_query_string()</span></a>, <a class="reference internal" href="#sqlalchemy.engine.URL.username"><span class="sig-name descname">username</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.URL</span></code></a> (<code class="docutils literal notranslate"><span class="pre">builtins.tuple</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.URL.create">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><a class="reference internal" href="#sqlalchemy.engine.URL"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.URL.</span></code></a><span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">drivername</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">username</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">database</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.url.URL"><span class="pre">URL</span></a></span></span><a class="headerlink" href="#sqlalchemy.engine.URL.create" title="Link to this definition">¶</a></dt>
<dd><p>Create a new <a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#database-urls"><span class="std std-ref">数据库 URL</span></a></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.engine.URL.create.params.drivername"></span><strong>drivername</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.URL.create.params.drivername">¶</a> – the name of the database backend. This name will
correspond to a module in sqlalchemy/databases or a third party
plug-in.</p></li>
<li><p><span class="target" id="sqlalchemy.engine.URL.create.params.username"></span><strong>username</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.URL.create.params.username">¶</a> – The user name.</p></li>
<li><p><span class="target" id="sqlalchemy.engine.URL.create.params.password"></span><strong>password</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.URL.create.params.password">¶</a> – <p>database password.  Is typically a string, but may
also be an object that can be stringified with <code class="docutils literal notranslate"><span class="pre">str()</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>The password string should <strong>not</strong> be URL encoded when
passed as an argument to <a class="reference internal" href="#sqlalchemy.engine.URL.create" title="sqlalchemy.engine.URL.create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">URL.create()</span></code></a>; the string
should contain the password characters exactly as they would be
typed.</p>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>A password-producing object will be stringified only
<strong>once</strong> per <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> object.  For dynamic password
generation per connect, see <a class="reference internal" href="#engines-dynamic-tokens"><span class="std std-ref">生成动态身份验证令牌</span></a>.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.engine.URL.create.params.host"></span><strong>host</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.URL.create.params.host">¶</a> – The name of the host.</p></li>
<li><p><span class="target" id="sqlalchemy.engine.URL.create.params.port"></span><strong>port</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.URL.create.params.port">¶</a> – The port number.</p></li>
<li><p><span class="target" id="sqlalchemy.engine.URL.create.params.database"></span><strong>database</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.URL.create.params.database">¶</a> – The database name.</p></li>
<li><p><span class="target" id="sqlalchemy.engine.URL.create.params.query"></span><strong>query</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.URL.create.params.query">¶</a> – A dictionary of string keys to string values to be passed
to the dialect and/or the DBAPI upon connect.   To specify non-string
parameters to a Python DBAPI directly, use the
<a class="reference internal" href="#sqlalchemy.create_engine.params.connect_args" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.connect_args</span></code></a> parameter to
<a class="reference internal" href="#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>.   See also
<a class="reference internal" href="#sqlalchemy.engine.URL.normalized_query" title="sqlalchemy.engine.URL.normalized_query"><code class="xref py py-attr docutils literal notranslate"><span class="pre">URL.normalized_query</span></code></a> for a dictionary that is
consistently string-&gt;list of string.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>new <a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入: </span>The <a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object is now an <strong>immutable named
tuple</strong>.  In addition, the <code class="docutils literal notranslate"><span class="pre">query</span></code> dictionary is also immutable.
To create a URL, use the <code class="xref py py-func docutils literal notranslate"><span class="pre">make_url()</span></code> or
<a class="reference internal" href="#sqlalchemy.engine.URL.create" title="sqlalchemy.engine.URL.create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">URL.create()</span></code></a> function/ method.  To modify a
<a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a>, use the <a class="reference internal" href="#sqlalchemy.engine.URL.set" title="sqlalchemy.engine.URL.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">URL.set()</span></code></a> and
<code class="xref py py-meth docutils literal notranslate"><span class="pre">URL.update_query()</span></code> methods.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.URL.database">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.URL"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.URL.</span></code></a><span class="sig-name descname"><span class="pre">database</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.engine.URL.database" title="Link to this definition">¶</a></dt>
<dd><p>database name</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.URL.difference_update_query">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.URL"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.URL.</span></code></a><span class="sig-name descname"><span class="pre">difference_update_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.url.URL"><span class="pre">URL</span></a></span></span><a class="headerlink" href="#sqlalchemy.engine.URL.difference_update_query" title="Link to this definition">¶</a></dt>
<dd><p>Remove the given names from the <a class="reference internal" href="#sqlalchemy.engine.URL.query" title="sqlalchemy.engine.URL.query"><code class="xref py py-attr docutils literal notranslate"><span class="pre">URL.query</span></code></a> dictionary,
returning the new <a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a>.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">difference_update_query</span><span class="p">([</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">])</span></pre></div>
</div>
<p>Equivalent to using <a class="reference internal" href="#sqlalchemy.engine.URL.set" title="sqlalchemy.engine.URL.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">URL.set()</span></code></a> as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
    <span class="n">query</span><span class="o">=</span><span class="p">{</span>
        <span class="n">key</span><span class="p">:</span> <span class="n">url</span><span class="o">.</span><span class="n">query</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">set</span><span class="p">(</span><span class="n">url</span><span class="o">.</span><span class="n">query</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">([</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">])</span>
    <span class="p">}</span>
<span class="p">)</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.engine.URL.query" title="sqlalchemy.engine.URL.query"><code class="xref py py-attr docutils literal notranslate"><span class="pre">URL.query</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.URL.update_query_dict" title="sqlalchemy.engine.URL.update_query_dict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">URL.update_query_dict()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.URL.set" title="sqlalchemy.engine.URL.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">URL.set()</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.URL.drivername">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.URL"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.URL.</span></code></a><span class="sig-name descname"><span class="pre">drivername</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#sqlalchemy.engine.URL.drivername" title="Link to this definition">¶</a></dt>
<dd><p>database backend and driver name, such as
<code class="docutils literal notranslate"><span class="pre">postgresql+psycopg2</span></code></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.URL.get_backend_name">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.URL"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.URL.</span></code></a><span class="sig-name descname"><span class="pre">get_backend_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#sqlalchemy.engine.URL.get_backend_name" title="Link to this definition">¶</a></dt>
<dd><p>Return the backend name.</p>
<p>This is the name that corresponds to the database backend in
use, and is the portion of the <a class="reference internal" href="#sqlalchemy.engine.URL.drivername" title="sqlalchemy.engine.URL.drivername"><code class="xref py py-attr docutils literal notranslate"><span class="pre">URL.drivername</span></code></a>
that is to the left of the plus sign.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.URL.get_dialect">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.URL"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.URL.</span></code></a><span class="sig-name descname"><span class="pre">get_dialect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_is_async</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.interfaces.Dialect"><span class="pre">Dialect</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.URL.get_dialect" title="Link to this definition">¶</a></dt>
<dd><p>Return the SQLAlchemy <a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a> class corresponding
to this URL’s driver name.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.URL.get_driver_name">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.URL"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.URL.</span></code></a><span class="sig-name descname"><span class="pre">get_driver_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#sqlalchemy.engine.URL.get_driver_name" title="Link to this definition">¶</a></dt>
<dd><p>Return the backend name.</p>
<p>This is the name that corresponds to the DBAPI driver in
use, and is the portion of the <a class="reference internal" href="#sqlalchemy.engine.URL.drivername" title="sqlalchemy.engine.URL.drivername"><code class="xref py py-attr docutils literal notranslate"><span class="pre">URL.drivername</span></code></a>
that is to the right of the plus sign.</p>
<p>If the <a class="reference internal" href="#sqlalchemy.engine.URL.drivername" title="sqlalchemy.engine.URL.drivername"><code class="xref py py-attr docutils literal notranslate"><span class="pre">URL.drivername</span></code></a> does not include a plus sign,
then the default <a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a> for this <a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a>
is imported in order to get the driver name.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.URL.host">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.URL"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.URL.</span></code></a><span class="sig-name descname"><span class="pre">host</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.engine.URL.host" title="Link to this definition">¶</a></dt>
<dd><p>hostname or IP number.  May also be a data source name for some
drivers.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.URL.normalized_query">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.URL"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.URL.</span></code></a><span class="sig-name descname"><span class="pre">normalized_query</span></span><a class="headerlink" href="#sqlalchemy.engine.URL.normalized_query" title="Link to this definition">¶</a></dt>
<dd><p>Return the <a class="reference internal" href="#sqlalchemy.engine.URL.query" title="sqlalchemy.engine.URL.query"><code class="xref py py-attr docutils literal notranslate"><span class="pre">URL.query</span></code></a> dictionary with values normalized
into sequences.</p>
<p>As the <a class="reference internal" href="#sqlalchemy.engine.URL.query" title="sqlalchemy.engine.URL.query"><code class="xref py py-attr docutils literal notranslate"><span class="pre">URL.query</span></code></a> dictionary may contain either
string values or sequences of string values to differentiate between
parameters that are specified multiple times in the query string,
code that needs to handle multiple parameters generically will wish
to use this attribute so that all parameters present are presented
as sequences.   Inspiration is from Python’s <code class="docutils literal notranslate"><span class="pre">urllib.parse.parse_qs</span></code>
function.  E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.engine</span><span class="w"> </span><span class="kn">import</span> <span class="n">make_url</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="n">make_url</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;postgresql+psycopg2://user:pass@host/dbname?alt_host=host1&amp;alt_host=host2&amp;ssl_cipher=</span><span class="si">%2F</span><span class="s2">path</span><span class="si">%2F</span><span class="s2">to</span><span class="si">%2F</span><span class="s2">crt&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url</span><span class="o">.</span><span class="n">query</span>
<span class="go">immutabledict({&#39;alt_host&#39;: (&#39;host1&#39;, &#39;host2&#39;), &#39;ssl_cipher&#39;: &#39;/path/to/crt&#39;})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url</span><span class="o">.</span><span class="n">normalized_query</span>
<span class="go">immutabledict({&#39;alt_host&#39;: (&#39;host1&#39;, &#39;host2&#39;), &#39;ssl_cipher&#39;: (&#39;/path/to/crt&#39;,)})</span></pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.URL.password">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.URL"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.URL.</span></code></a><span class="sig-name descname"><span class="pre">password</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.engine.URL.password" title="Link to this definition">¶</a></dt>
<dd><p>password, which is normally a string but may also be any
object that has a <code class="docutils literal notranslate"><span class="pre">__str__()</span></code> method.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.URL.port">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.URL"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.URL.</span></code></a><span class="sig-name descname"><span class="pre">port</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.engine.URL.port" title="Link to this definition">¶</a></dt>
<dd><p>integer port number</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.URL.query">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.URL"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.URL.</span></code></a><span class="sig-name descname"><span class="pre">query</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">immutabledict</span></em><a class="headerlink" href="#sqlalchemy.engine.URL.query" title="Link to this definition">¶</a></dt>
<dd><p>an immutable mapping representing the query string.  contains strings
for keys and either strings or tuples of strings for values, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>   <span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.engine</span><span class="w"> </span><span class="kn">import</span> <span class="n">make_url</span>
   <span class="o">&gt;&gt;&gt;</span> <span class="n">url</span> <span class="o">=</span> <span class="n">make_url</span><span class="p">(</span>
   <span class="o">...</span>     <span class="s2">&quot;postgresql+psycopg2://user:pass@host/dbname?alt_host=host1&amp;alt_host=host2&amp;ssl_cipher=</span><span class="si">%2F</span><span class="s2">path</span><span class="si">%2F</span><span class="s2">to</span><span class="si">%2F</span><span class="s2">crt&quot;</span>
   <span class="o">...</span> <span class="p">)</span>
   <span class="o">&gt;&gt;&gt;</span> <span class="n">url</span><span class="o">.</span><span class="n">query</span>
   <span class="n">immutabledict</span><span class="p">({</span><span class="s1">&#39;alt_host&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;host1&#39;</span><span class="p">,</span> <span class="s1">&#39;host2&#39;</span><span class="p">),</span> <span class="s1">&#39;ssl_cipher&#39;</span><span class="p">:</span> <span class="s1">&#39;/path/to/crt&#39;</span><span class="p">})</span>

<span class="n">To</span> <span class="n">create</span> <span class="n">a</span> <span class="n">mutable</span> <span class="n">copy</span> <span class="n">of</span> <span class="n">this</span> <span class="n">mapping</span><span class="p">,</span> <span class="n">use</span> <span class="n">the</span> <span class="err">``</span><span class="n">dict</span><span class="err">``</span> <span class="n">constructor</span><span class="p">::</span>

   <span class="n">mutable_query_opts</span> <span class="o">=</span> <span class="n">dict</span><span class="p">(</span><span class="n">url</span><span class="o">.</span><span class="n">query</span><span class="p">)</span></pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.engine.URL.normalized_query" title="sqlalchemy.engine.URL.normalized_query"><code class="xref py py-attr docutils literal notranslate"><span class="pre">URL.normalized_query</span></code></a> - normalizes all values into sequences
for consistent processing</p>
<p>Methods for altering the contents of <a class="reference internal" href="#sqlalchemy.engine.URL.query" title="sqlalchemy.engine.URL.query"><code class="xref py py-attr docutils literal notranslate"><span class="pre">URL.query</span></code></a>:</p>
<p><a class="reference internal" href="#sqlalchemy.engine.URL.update_query_dict" title="sqlalchemy.engine.URL.update_query_dict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">URL.update_query_dict()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.URL.update_query_string" title="sqlalchemy.engine.URL.update_query_string"><code class="xref py py-meth docutils literal notranslate"><span class="pre">URL.update_query_string()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.URL.update_query_pairs" title="sqlalchemy.engine.URL.update_query_pairs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">URL.update_query_pairs()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.URL.difference_update_query" title="sqlalchemy.engine.URL.difference_update_query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">URL.difference_update_query()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.URL.render_as_string">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.URL"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.URL.</span></code></a><span class="sig-name descname"><span class="pre">render_as_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hide_password</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#sqlalchemy.engine.URL.render_as_string" title="Link to this definition">¶</a></dt>
<dd><p>Render this <a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object as a string.</p>
<p>This method is used when the <code class="docutils literal notranslate"><span class="pre">__str__()</span></code> or <code class="docutils literal notranslate"><span class="pre">__repr__()</span></code>
methods are used.   The method directly includes additional options.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.engine.URL.render_as_string.params.hide_password"></span><strong>hide_password</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.URL.render_as_string.params.hide_password">¶</a> – Defaults to True.   The password is not shown
in the string unless this is set to False.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.URL.set">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.URL"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.URL.</span></code></a><span class="sig-name descname"><span class="pre">set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">drivername</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">username</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">database</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.url.URL"><span class="pre">URL</span></a></span></span><a class="headerlink" href="#sqlalchemy.engine.URL.set" title="Link to this definition">¶</a></dt>
<dd><p>return a new <a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object with modifications.</p>
<p>Values are used if they are non-None.  To set a value to <code class="docutils literal notranslate"><span class="pre">None</span></code>
explicitly, use the <code class="xref py py-meth docutils literal notranslate"><span class="pre">URL._replace()</span></code> method adapted
from <code class="docutils literal notranslate"><span class="pre">namedtuple</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.engine.URL.set.params.drivername"></span><strong>drivername</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.URL.set.params.drivername">¶</a> – new drivername</p></li>
<li><p><span class="target" id="sqlalchemy.engine.URL.set.params.username"></span><strong>username</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.URL.set.params.username">¶</a> – new username</p></li>
<li><p><span class="target" id="sqlalchemy.engine.URL.set.params.password"></span><strong>password</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.URL.set.params.password">¶</a> – new password</p></li>
<li><p><span class="target" id="sqlalchemy.engine.URL.set.params.host"></span><strong>host</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.URL.set.params.host">¶</a> – new hostname</p></li>
<li><p><span class="target" id="sqlalchemy.engine.URL.set.params.port"></span><strong>port</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.URL.set.params.port">¶</a> – new port</p></li>
<li><p><span class="target" id="sqlalchemy.engine.URL.set.params.query"></span><strong>query</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.URL.set.params.query">¶</a> – new query parameters, passed a dict of string keys
referring to string or sequence of string values.  Fully
replaces the previous list of arguments.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>new <a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.engine.URL.update_query_dict" title="sqlalchemy.engine.URL.update_query_dict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">URL.update_query_dict()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.URL.translate_connect_args">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.URL"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.URL.</span></code></a><span class="sig-name descname"><span class="pre">translate_connect_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.engine.URL.translate_connect_args" title="Link to this definition">¶</a></dt>
<dd><p>Translate url attributes into a dictionary of connection arguments.</p>
<p>Returns attributes of this url (<cite>host</cite>, <cite>database</cite>, <cite>username</cite>,
<cite>password</cite>, <cite>port</cite>) as a plain dictionary.  The attribute names are
used as the keys by default.  Unset or false attributes are omitted
from the final dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.engine.URL.translate_connect_args.params.**kw"></span><strong>**kw</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.URL.translate_connect_args.params.**kw">¶</a> – Optional, alternate key names for url attributes.</p></li>
<li><p><span class="target" id="sqlalchemy.engine.URL.translate_connect_args.params.names"></span><strong>names</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.URL.translate_connect_args.params.names">¶</a> – Deprecated.  Same purpose as the keyword-based alternate
names, but correlates the name to the original positionally.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.URL.update_query_dict">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.URL"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.URL.</span></code></a><span class="sig-name descname"><span class="pre">update_query_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query_parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.url.URL"><span class="pre">URL</span></a></span></span><a class="headerlink" href="#sqlalchemy.engine.URL.update_query_dict" title="Link to this definition">¶</a></dt>
<dd><p>Return a new <a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object with the
<a class="reference internal" href="#sqlalchemy.engine.URL.query" title="sqlalchemy.engine.URL.query"><code class="xref py py-attr docutils literal notranslate"><span class="pre">URL.query</span></code></a> parameter dictionary updated by the given
dictionary.</p>
<p>The dictionary typically contains string keys and string values.
In order to represent a query parameter that is expressed multiple
times, pass a sequence of string values.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.engine</span><span class="w"> </span><span class="kn">import</span> <span class="n">make_url</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="n">make_url</span><span class="p">(</span><span class="s2">&quot;postgresql+psycopg2://user:pass@host/dbname&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">update_query_dict</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s2">&quot;alt_host&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;host1&quot;</span><span class="p">,</span> <span class="s2">&quot;host2&quot;</span><span class="p">],</span> <span class="s2">&quot;ssl_cipher&quot;</span><span class="p">:</span> <span class="s2">&quot;/path/to/crt&quot;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">str</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="go">&#39;postgresql+psycopg2://user:pass@host/dbname?alt_host=host1&amp;alt_host=host2&amp;ssl_cipher=%2Fpath%2Fto%2Fcrt&#39;</span></pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.engine.URL.update_query_dict.params.query_parameters"></span><strong>query_parameters</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.URL.update_query_dict.params.query_parameters">¶</a> – A dictionary with string keys and values
that are either strings, or sequences of strings.</p></li>
<li><p><span class="target" id="sqlalchemy.engine.URL.update_query_dict.params.append"></span><strong>append</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.URL.update_query_dict.params.append">¶</a> – if True, parameters in the existing query string will
not be removed; new parameters will be in addition to those present.
If left at its default of False, keys present in the given query
parameters will replace those of the existing query string.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.engine.URL.query" title="sqlalchemy.engine.URL.query"><code class="xref py py-attr docutils literal notranslate"><span class="pre">URL.query</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.URL.update_query_string" title="sqlalchemy.engine.URL.update_query_string"><code class="xref py py-meth docutils literal notranslate"><span class="pre">URL.update_query_string()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.URL.update_query_pairs" title="sqlalchemy.engine.URL.update_query_pairs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">URL.update_query_pairs()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.URL.difference_update_query" title="sqlalchemy.engine.URL.difference_update_query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">URL.difference_update_query()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.URL.set" title="sqlalchemy.engine.URL.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">URL.set()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.URL.update_query_pairs">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.URL"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.URL.</span></code></a><span class="sig-name descname"><span class="pre">update_query_pairs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key_value_pairs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.url.URL"><span class="pre">URL</span></a></span></span><a class="headerlink" href="#sqlalchemy.engine.URL.update_query_pairs" title="Link to this definition">¶</a></dt>
<dd><p>Return a new <a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object with the
<a class="reference internal" href="#sqlalchemy.engine.URL.query" title="sqlalchemy.engine.URL.query"><code class="xref py py-attr docutils literal notranslate"><span class="pre">URL.query</span></code></a>
parameter dictionary updated by the given sequence of key/value pairs</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.engine</span><span class="w"> </span><span class="kn">import</span> <span class="n">make_url</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="n">make_url</span><span class="p">(</span><span class="s2">&quot;postgresql+psycopg2://user:pass@host/dbname&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">update_query_pairs</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">[</span>
<span class="gp">... </span>        <span class="p">(</span><span class="s2">&quot;alt_host&quot;</span><span class="p">,</span> <span class="s2">&quot;host1&quot;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="p">(</span><span class="s2">&quot;alt_host&quot;</span><span class="p">,</span> <span class="s2">&quot;host2&quot;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="p">(</span><span class="s2">&quot;ssl_cipher&quot;</span><span class="p">,</span> <span class="s2">&quot;/path/to/crt&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">]</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">str</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="go">&#39;postgresql+psycopg2://user:pass@host/dbname?alt_host=host1&amp;alt_host=host2&amp;ssl_cipher=%2Fpath%2Fto%2Fcrt&#39;</span></pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.engine.URL.update_query_pairs.params.key_value_pairs"></span><strong>key_value_pairs</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.URL.update_query_pairs.params.key_value_pairs">¶</a> – A sequence of tuples containing two strings
each.</p></li>
<li><p><span class="target" id="sqlalchemy.engine.URL.update_query_pairs.params.append"></span><strong>append</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.URL.update_query_pairs.params.append">¶</a> – if True, parameters in the existing query string will
not be removed; new parameters will be in addition to those present.
If left at its default of False, keys present in the given query
parameters will replace those of the existing query string.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.engine.URL.query" title="sqlalchemy.engine.URL.query"><code class="xref py py-attr docutils literal notranslate"><span class="pre">URL.query</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.URL.difference_update_query" title="sqlalchemy.engine.URL.difference_update_query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">URL.difference_update_query()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.URL.set" title="sqlalchemy.engine.URL.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">URL.set()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.engine.URL.update_query_string">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.engine.URL"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.URL.</span></code></a><span class="sig-name descname"><span class="pre">update_query_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query_string</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.url.URL"><span class="pre">URL</span></a></span></span><a class="headerlink" href="#sqlalchemy.engine.URL.update_query_string" title="Link to this definition">¶</a></dt>
<dd><p>Return a new <a class="reference internal" href="#sqlalchemy.engine.URL" title="sqlalchemy.engine.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> object with the <a class="reference internal" href="#sqlalchemy.engine.URL.query" title="sqlalchemy.engine.URL.query"><code class="xref py py-attr docutils literal notranslate"><span class="pre">URL.query</span></code></a>
parameter dictionary updated by the given query string.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.engine</span><span class="w"> </span><span class="kn">import</span> <span class="n">make_url</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="n">make_url</span><span class="p">(</span><span class="s2">&quot;postgresql+psycopg2://user:pass@host/dbname&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">update_query_string</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;alt_host=host1&amp;alt_host=host2&amp;ssl_cipher=</span><span class="si">%2F</span><span class="s2">path</span><span class="si">%2F</span><span class="s2">to</span><span class="si">%2F</span><span class="s2">crt&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">str</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="go">&#39;postgresql+psycopg2://user:pass@host/dbname?alt_host=host1&amp;alt_host=host2&amp;ssl_cipher=%2Fpath%2Fto%2Fcrt&#39;</span></pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.engine.URL.update_query_string.params.query_string"></span><strong>query_string</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.URL.update_query_string.params.query_string">¶</a> – a URL escaped query string, not including the
question mark.</p></li>
<li><p><span class="target" id="sqlalchemy.engine.URL.update_query_string.params.append"></span><strong>append</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.engine.URL.update_query_string.params.append">¶</a> – if True, parameters in the existing query string will
not be removed; new parameters will be in addition to those present.
If left at its default of False, keys present in the given query
parameters will replace those of the existing query string.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.engine.URL.query" title="sqlalchemy.engine.URL.query"><code class="xref py py-attr docutils literal notranslate"><span class="pre">URL.query</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.engine.URL.update_query_dict" title="sqlalchemy.engine.URL.update_query_dict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">URL.update_query_dict()</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.engine.URL.username">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.engine.URL"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.URL.</span></code></a><span class="sig-name descname"><span class="pre">username</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.engine.URL.username" title="Link to this definition">¶</a></dt>
<dd><p>username string</p>
</dd></dl>

</dd></dl>

</section>
<section id="id8">
<h2>池化<a class="headerlink" href="#id8" title="Link to this heading">¶</a></h2>
<p>Pooling</p>
<p>The <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> will ask the connection pool for a
connection when the <code class="docutils literal notranslate"><span class="pre">connect()</span></code> or <code class="docutils literal notranslate"><span class="pre">execute()</span></code> methods are called. The
default connection pool, <a class="reference internal" href="pooling.html#sqlalchemy.pool.QueuePool" title="sqlalchemy.pool.QueuePool"><code class="xref py py-class docutils literal notranslate"><span class="pre">QueuePool</span></code></a>, will open connections to the
database on an as-needed basis. As concurrent statements are executed,
<a class="reference internal" href="pooling.html#sqlalchemy.pool.QueuePool" title="sqlalchemy.pool.QueuePool"><code class="xref py py-class docutils literal notranslate"><span class="pre">QueuePool</span></code></a> will grow its pool of connections to a
default size of five, and will allow a default “overflow” of ten. Since the
<a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> is essentially “home base” for the
connection pool, it follows that you should keep a single
<a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> per database established within an
application, rather than creating a new one for each connection.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p><a class="reference internal" href="pooling.html#sqlalchemy.pool.QueuePool" title="sqlalchemy.pool.QueuePool"><code class="xref py py-class docutils literal notranslate"><span class="pre">QueuePool</span></code></a> is not used by default for SQLite engines.  See
<a class="reference internal" href="../dialects/sqlite.html#sqlite-toplevel"><span class="std std-ref">SQLite</span></a> for details on SQLite connection pool usage.</p>
</div>
<p>For more information on connection pooling, see <a class="reference internal" href="pooling.html#pooling-toplevel"><span class="std std-ref">连接池</span></a>.</p>
</section>
<section id="dbapi-connect">
<span id="custom-dbapi-args"></span><h2>自定义 DBAPI connect() 参数/连接例程<a class="headerlink" href="#dbapi-connect" title="Link to this heading">¶</a></h2>
<p>Custom DBAPI connect() arguments / on-connect routines</p>
<p>For cases where special connection methods are needed, in the vast majority
of cases, it is most appropriate to use one of several hooks at the
<a class="reference internal" href="#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> level in order to customize this process. These
are described in the following sub-sections.</p>
<section id="id9">
<h3>传递给 dbapi.connect() 的特殊关键字参数<a class="headerlink" href="#id9" title="Link to this heading">¶</a></h3>
<p>Special Keyword Arguments Passed to dbapi.connect()</p>
<p>All Python DBAPIs accept additional arguments beyond the basics of connecting.
Common parameters include those to specify character set encodings and timeout
values; more complex data includes special DBAPI constants and objects and SSL
sub-parameters. There are two rudimentary means of passing these arguments
without complexity.</p>
<section id="id10">
<h4>将参数添加到 URL 查询字符串<a class="headerlink" href="#id10" title="Link to this heading">¶</a></h4>
<p>Add Parameters to the URL Query string</p>
<p>Simple string values, as well as some numeric values and boolean flags, may be
often specified in the query string of the URL directly. A common example of
this is DBAPIs that accept an argument <code class="docutils literal notranslate"><span class="pre">encoding</span></code> for character encodings,
such as most MySQL DBAPIs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;mysql+pymysql://user:pass@host/test?charset=utf8mb4&quot;</span><span class="p">)</span></pre></div>
</div>
<p>The advantage of using the query string is that additional DBAPI options may be
specified in configuration files in a manner that’s portable to the DBAPI
specified in the URL. The specific parameters passed through at this level vary
by SQLAlchemy dialect. Some dialects pass all arguments through as strings,
while others will parse for specific datatypes and move parameters to different
places, such as into driver-level DSNs and connect strings. As per-dialect
behavior in this area currently varies, the dialect documentation should be
consulted for the specific dialect in use to see if particular parameters are
supported at this level.</p>
<div class="admonition tip">
<p class="admonition-title">小技巧</p>
<p>A general technique to display the exact arguments passed to the DBAPI
for a given URL may be performed using the <a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect.create_connect_args" title="sqlalchemy.engine.Dialect.create_connect_args"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Dialect.create_connect_args()</span></code></a>
method directly as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_engine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;mysql+pymysql://some_user:some_pass@some_host/test?charset=utf8mb4&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">dialect</span><span class="o">.</span><span class="n">create_connect_args</span><span class="p">(</span><span class="n">engine</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span>
<span class="go">([], {&#39;host&#39;: &#39;some_host&#39;, &#39;database&#39;: &#39;test&#39;, &#39;user&#39;: &#39;some_user&#39;, &#39;password&#39;: &#39;some_pass&#39;, &#39;charset&#39;: &#39;utf8mb4&#39;, &#39;client_flag&#39;: 2})</span></pre></div>
</div>
<p>The above <code class="docutils literal notranslate"><span class="pre">args,</span> <span class="pre">kwargs</span></code> pair is normally passed to the DBAPI as
<code class="docutils literal notranslate"><span class="pre">dbapi.connect(*args,</span> <span class="pre">**kwargs)</span></code>.</p>
</div>
</section>
<section id="connect-args">
<h4>使用 connect_args 字典参数<a class="headerlink" href="#connect-args" title="Link to this heading">¶</a></h4>
<p>Use the connect_args dictionary parameter</p>
<p>A more general system of passing any parameter to the <code class="docutils literal notranslate"><span class="pre">dbapi.connect()</span></code>
function that is guaranteed to pass all parameters at all times is the
<a class="reference internal" href="#sqlalchemy.create_engine.params.connect_args" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.connect_args</span></code></a> dictionary parameter. This may be
used for parameters that are otherwise not handled by the dialect when added to
the query string, as well as when special sub-structures or objects must be
passed to the DBAPI. Sometimes it’s just that a particular flag must be sent as
the <code class="docutils literal notranslate"><span class="pre">True</span></code> symbol and the SQLAlchemy dialect is not aware of this keyword
argument to coerce it from its string form as presented in the URL. Below
illustrates the use of a psycopg2 “connection factory” that replaces the
underlying implementation the connection:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;postgresql+psycopg2://user:pass@hostname/dbname&quot;</span><span class="p">,</span>
    <span class="n">connect_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;connection_factory&quot;</span><span class="p">:</span> <span class="n">MyConnectionFactory</span><span class="p">},</span>
<span class="p">)</span></pre></div>
</div>
<p>Another example is the pyodbc “timeout” parameter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;mssql+pyodbc://user:pass@sqlsrvr?driver=ODBC+Driver+13+for+SQL+Server&quot;</span><span class="p">,</span>
    <span class="n">connect_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">},</span>
<span class="p">)</span></pre></div>
</div>
<p>The above example also illustrates that both URL “query string” parameters as
well as <a class="reference internal" href="#sqlalchemy.create_engine.params.connect_args" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.connect_args</span></code></a> may be used at the same
time; in the case of pyodbc, the “driver” keyword has special meaning
within the URL.</p>
</section>
</section>
<section id="id11">
<h3>控制如何将参数传递给 DBAPI connect() 函数<a class="headerlink" href="#id11" title="Link to this heading">¶</a></h3>
<p>Controlling how parameters are passed to the DBAPI connect() function</p>
<p>Beyond manipulating the parameters passed to <code class="docutils literal notranslate"><span class="pre">connect()</span></code>, we can further
customize how the DBAPI <code class="docutils literal notranslate"><span class="pre">connect()</span></code> function itself is called using the
<a class="reference internal" href="events.html#sqlalchemy.events.DialectEvents.do_connect" title="sqlalchemy.events.DialectEvents.do_connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectEvents.do_connect()</span></code></a> event hook. This hook is passed the full
<code class="docutils literal notranslate"><span class="pre">*args,</span> <span class="pre">**kwargs</span></code> that the dialect would send to <code class="docutils literal notranslate"><span class="pre">connect()</span></code>. These
collections can then be modified in place to alter how they are used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">event</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql+psycopg2://user:pass@hostname/dbname&quot;</span><span class="p">)</span>


<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">engine</span><span class="p">,</span> <span class="s2">&quot;do_connect&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">receive_do_connect</span><span class="p">(</span><span class="n">dialect</span><span class="p">,</span> <span class="n">conn_rec</span><span class="p">,</span> <span class="n">cargs</span><span class="p">,</span> <span class="n">cparams</span><span class="p">):</span>
    <span class="n">cparams</span><span class="p">[</span><span class="s2">&quot;connection_factory&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">MyConnectionFactory</span></pre></div>
</div>
<section id="engines-dynamic-tokens">
<span id="id12"></span><h4>生成动态身份验证令牌<a class="headerlink" href="#engines-dynamic-tokens" title="Link to this heading">¶</a></h4>
<p>Generating dynamic authentication tokens</p>
<p><a class="reference internal" href="events.html#sqlalchemy.events.DialectEvents.do_connect" title="sqlalchemy.events.DialectEvents.do_connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectEvents.do_connect()</span></code></a> is also an ideal way to dynamically
insert an authentication token that might change over the lifespan of an
<a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>. For example, if the token gets generated by
<code class="docutils literal notranslate"><span class="pre">get_authentication_token()</span></code> and passed to the DBAPI in  a <code class="docutils literal notranslate"><span class="pre">token</span></code>
parameter, this could be implemented as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">event</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql+psycopg2://user@hostname/dbname&quot;</span><span class="p">)</span>


<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">engine</span><span class="p">,</span> <span class="s2">&quot;do_connect&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">provide_token</span><span class="p">(</span><span class="n">dialect</span><span class="p">,</span> <span class="n">conn_rec</span><span class="p">,</span> <span class="n">cargs</span><span class="p">,</span> <span class="n">cparams</span><span class="p">):</span>
    <span class="n">cparams</span><span class="p">[</span><span class="s2">&quot;token&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_authentication_token</span><span class="p">()</span></pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="../dialects/mssql.html#mssql-pyodbc-access-tokens"><span class="std std-ref">Connecting to databases with access tokens</span></a> - a more concrete example involving
SQL Server</p>
</div>
</section>
</section>
<section id="dbapi">
<h3>在连接后修改 DBAPI 连接，或在连接后运行命令<a class="headerlink" href="#dbapi" title="Link to this heading">¶</a></h3>
<p>Modifying the DBAPI connection after connect, or running commands after connect</p>
<p>For a DBAPI connection that SQLAlchemy creates without issue, but where we
would like to modify the completed connection before it’s actually used, such
as for setting special flags or running certain commands, the
<a class="reference internal" href="events.html#sqlalchemy.events.PoolEvents.connect" title="sqlalchemy.events.PoolEvents.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">PoolEvents.connect()</span></code></a> event hook is the most appropriate hook.  This
hook is called for every new connection created, before it is used by
SQLAlchemy:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">event</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql+psycopg2://user:pass@hostname/dbname&quot;</span><span class="p">)</span>


<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">engine</span><span class="p">,</span> <span class="s2">&quot;connect&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">connect</span><span class="p">(</span><span class="n">dbapi_connection</span><span class="p">,</span> <span class="n">connection_record</span><span class="p">):</span>
    <span class="n">cursor_obj</span> <span class="o">=</span> <span class="n">dbapi_connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor_obj</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SET some session variables&quot;</span><span class="p">)</span>
    <span class="n">cursor_obj</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div>
</div>
</section>
<section id="id13">
<h3>完全替换 DBAPI <code class="docutils literal notranslate"><span class="pre">connect()</span></code> 函数<a class="headerlink" href="#id13" title="Link to this heading">¶</a></h3>
<p>Fully Replacing the DBAPI <code class="docutils literal notranslate"><span class="pre">connect()</span></code> function</p>
<p>Finally, the <a class="reference internal" href="events.html#sqlalchemy.events.DialectEvents.do_connect" title="sqlalchemy.events.DialectEvents.do_connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectEvents.do_connect()</span></code></a> event hook can also allow us to take
over the connection process entirely by establishing the connection
and returning it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">event</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql+psycopg2://user:pass@hostname/dbname&quot;</span><span class="p">)</span>


<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">engine</span><span class="p">,</span> <span class="s2">&quot;do_connect&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">receive_do_connect</span><span class="p">(</span><span class="n">dialect</span><span class="p">,</span> <span class="n">conn_rec</span><span class="p">,</span> <span class="n">cargs</span><span class="p">,</span> <span class="n">cparams</span><span class="p">):</span>
    <span class="c1"># return the new DBAPI connection with whatever we&#39;d like to</span>
    <span class="c1"># do</span>
    <span class="k">return</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">*</span><span class="n">cargs</span><span class="p">,</span> <span class="o">**</span><span class="n">cparams</span><span class="p">)</span></pre></div>
</div>
<p>The <a class="reference internal" href="events.html#sqlalchemy.events.DialectEvents.do_connect" title="sqlalchemy.events.DialectEvents.do_connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectEvents.do_connect()</span></code></a> hook supersedes the previous
<a class="reference internal" href="#sqlalchemy.create_engine.params.creator" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.creator</span></code></a> hook, which remains available.
<a class="reference internal" href="events.html#sqlalchemy.events.DialectEvents.do_connect" title="sqlalchemy.events.DialectEvents.do_connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectEvents.do_connect()</span></code></a> has the distinct advantage that the
complete arguments parsed from the URL are also passed to the user-defined
function which is not the case with <a class="reference internal" href="#sqlalchemy.create_engine.params.creator" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.creator</span></code></a>.</p>
</section>
</section>
<section id="dbengine-logging">
<span id="id14"></span><h2>配置日志记录<a class="headerlink" href="#dbengine-logging" title="Link to this heading">¶</a></h2>
<p>Configuring Logging</p>
<p>Python’s standard <a class="reference external" href="https://docs.python.org/library/logging.html">logging</a> module is used to
implement informational and debug log output with SQLAlchemy. This allows
SQLAlchemy’s logging to integrate in a standard way with other applications
and libraries.   There are also two parameters
<a class="reference internal" href="#sqlalchemy.create_engine.params.echo" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.echo</span></code></a> and <a class="reference internal" href="#sqlalchemy.create_engine.params.echo_pool" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.echo_pool</span></code></a>
present on <a class="reference internal" href="#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> which allow immediate logging to <code class="docutils literal notranslate"><span class="pre">sys.stdout</span></code>
for the purposes of local development; these parameters ultimately interact
with the regular Python loggers described below.</p>
<p>This section assumes familiarity with the above linked logging module. All
logging performed by SQLAlchemy exists underneath the <code class="docutils literal notranslate"><span class="pre">sqlalchemy</span></code>
namespace, as used by <code class="docutils literal notranslate"><span class="pre">logging.getLogger('sqlalchemy')</span></code>. When logging has
been configured (i.e. such as via <code class="docutils literal notranslate"><span class="pre">logging.basicConfig()</span></code>), the general
namespace of SA loggers that can be turned on is as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine</span></code> - controls SQL echoing.  Set to <code class="docutils literal notranslate"><span class="pre">logging.INFO</span></code> for
SQL query output, <code class="docutils literal notranslate"><span class="pre">logging.DEBUG</span></code> for query + result set output.  These
settings are equivalent to <code class="docutils literal notranslate"><span class="pre">echo=True</span></code> and <code class="docutils literal notranslate"><span class="pre">echo=&quot;debug&quot;</span></code> on
<a class="reference internal" href="#sqlalchemy.create_engine.params.echo" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.echo</span></code></a>, respectively.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sqlalchemy.pool</span></code> - controls connection pool logging.  Set to
<code class="docutils literal notranslate"><span class="pre">logging.INFO</span></code> to log connection invalidation and recycle events; set to
<code class="docutils literal notranslate"><span class="pre">logging.DEBUG</span></code> to additionally log all pool checkins and checkouts.
These settings are equivalent to <code class="docutils literal notranslate"><span class="pre">pool_echo=True</span></code> and <code class="docutils literal notranslate"><span class="pre">pool_echo=&quot;debug&quot;</span></code>
on <a class="reference internal" href="#sqlalchemy.create_engine.params.echo_pool" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.echo_pool</span></code></a>, respectively.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sqlalchemy.dialects</span></code> - controls custom logging for SQL dialects, to the
extent that logging is used within specific dialects, which is generally
minimal.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm</span></code> - controls logging of various ORM functions to the extent
that logging is used within the ORM, which is generally minimal.  Set to
<code class="docutils literal notranslate"><span class="pre">logging.INFO</span></code> to log some top-level information on mapper configurations.</p></li>
</ul>
<p>For example, to log SQL queries using Python logging instead of the
<code class="docutils literal notranslate"><span class="pre">echo=True</span></code> flag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>

<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">()</span>
<span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;sqlalchemy.engine&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span></pre></div>
</div>
<p>By default, the log level is set to <code class="docutils literal notranslate"><span class="pre">logging.WARN</span></code> within the entire
<code class="docutils literal notranslate"><span class="pre">sqlalchemy</span></code> namespace so that no log operations occur, even within an
application that has logging enabled otherwise.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>The SQLAlchemy <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> conserves Python function call
overhead by only emitting log statements when the current logging level is
detected as <code class="docutils literal notranslate"><span class="pre">logging.INFO</span></code> or <code class="docutils literal notranslate"><span class="pre">logging.DEBUG</span></code>.  It only checks this
level when a new connection is procured from the connection pool.  Therefore
when changing the logging configuration for an already-running application,
any <a class="reference internal" href="connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> that’s currently active, or more commonly a
<a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object that’s active in a transaction, won’t
log any SQL according to the new configuration until a new
<a class="reference internal" href="connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> is procured (in the case of
<a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>, this is after the current transaction ends
and a new one begins).</p>
</div>
<section id="echo">
<h3>有关 Echo 标志的更多信息<a class="headerlink" href="#echo" title="Link to this heading">¶</a></h3>
<p>More on the Echo Flag</p>
<p>As mentioned previously, the <a class="reference internal" href="#sqlalchemy.create_engine.params.echo" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.echo</span></code></a> and <a class="reference internal" href="#sqlalchemy.create_engine.params.echo_pool" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.echo_pool</span></code></a>
parameters are a shortcut to immediate logging to <code class="docutils literal notranslate"><span class="pre">sys.stdout</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_engine</span><span class="p">,</span> <span class="n">text</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;sqlite://&quot;</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">echo_pool</span><span class="o">=</span><span class="s2">&quot;debug&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">e</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">print</span><span class="p">(</span><span class="n">conn</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;select &#39;hi&#39;&quot;</span><span class="p">)))</span>
<span class="go">2020-10-24 12:54:57,701 DEBUG sqlalchemy.pool.impl.SingletonThreadPool Created new connection &lt;sqlite3.Connection object at 0x7f287819ac60&gt;</span>
<span class="go">2020-10-24 12:54:57,701 DEBUG sqlalchemy.pool.impl.SingletonThreadPool Connection &lt;sqlite3.Connection object at 0x7f287819ac60&gt; checked out from pool</span>
<span class="go">2020-10-24 12:54:57,702 INFO sqlalchemy.engine.Engine select &#39;hi&#39;</span>
<span class="go">2020-10-24 12:54:57,702 INFO sqlalchemy.engine.Engine ()</span>
<span class="go">hi</span>
<span class="go">2020-10-24 12:54:57,703 DEBUG sqlalchemy.pool.impl.SingletonThreadPool Connection &lt;sqlite3.Connection object at 0x7f287819ac60&gt; being returned to pool</span>
<span class="go">2020-10-24 12:54:57,704 DEBUG sqlalchemy.pool.impl.SingletonThreadPool Connection &lt;sqlite3.Connection object at 0x7f287819ac60&gt; rollback-on-return</span></pre></div>
</div>
<p>Use of these flags is roughly equivalent to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>

<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">()</span>
<span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;sqlalchemy.engine&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;sqlalchemy.pool&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span></pre></div>
</div>
<p>It’s important to note that these two flags work <strong>independently</strong> of any
existing logging configuration, and will make use of <code class="docutils literal notranslate"><span class="pre">logging.basicConfig()</span></code>
unconditionally.  This has the effect of being configured <strong>in addition</strong> to
any existing logger configurations. Therefore, <strong>when configuring logging
explicitly, ensure all echo flags are set to False at all times</strong>, to avoid
getting duplicate log lines.</p>
</section>
<section id="id15">
<h3>设置日志记录名称<a class="headerlink" href="#id15" title="Link to this heading">¶</a></h3>
<p>Setting the Logging Name</p>
<p>The logger name for <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> or
<a class="reference internal" href="pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> is set to be the module-qualified class name of the
object.  This name can be further qualified with an additional name
using the
<a class="reference internal" href="#sqlalchemy.create_engine.params.logging_name" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.logging_name</span></code></a> and
<a class="reference internal" href="#sqlalchemy.create_engine.params.pool_logging_name" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.pool_logging_name</span></code></a> parameters with
<a class="reference internal" href="#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">sqlalchemy.create_engine()</span></code></a>; the name will be appended to existing
class-qualified logging name.   This use is recommended for applications that
make use of multiple global <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> instances simultaenously, so
that they may be distinguished in logging:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_engine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">text</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;sqlalchemy.engine.Engine.myengine&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;sqlite://&quot;</span><span class="p">,</span> <span class="n">logging_name</span><span class="o">=</span><span class="s2">&quot;myengine&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">e</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;select &#39;hi&#39;&quot;</span><span class="p">))</span>
<span class="go">2020-10-24 12:47:04,291 INFO sqlalchemy.engine.Engine.myengine select &#39;hi&#39;</span>
<span class="go">2020-10-24 12:47:04,292 INFO sqlalchemy.engine.Engine.myengine ()</span></pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">小技巧</p>
<p>The <a class="reference internal" href="#sqlalchemy.create_engine.params.logging_name" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.logging_name</span></code></a> and
<a class="reference internal" href="#sqlalchemy.create_engine.params.pool_logging_name" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.pool_logging_name</span></code></a> parameters may also be used in
conjunction with <a class="reference internal" href="#sqlalchemy.create_engine.params.echo" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.echo</span></code></a> and
<a class="reference internal" href="#sqlalchemy.create_engine.params.echo_pool" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.echo_pool</span></code></a>. However, an unavoidable double logging
condition will occur if other engines are created with echo flags set to True
and <strong>no</strong> logging name. This is because a handler will be added automatically
for <code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine</span></code> which will log messages both for the name-less
engine as well as engines with logging names.   For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_engine</span><span class="p">,</span> <span class="n">text</span>

<span class="n">e1</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;sqlite://&quot;</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">logging_name</span><span class="o">=</span><span class="s2">&quot;myname&quot;</span><span class="p">)</span>
<span class="k">with</span> <span class="n">e1</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;SELECT 1&quot;</span><span class="p">))</span>

<span class="n">e2</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;sqlite://&quot;</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">with</span> <span class="n">e2</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;SELECT 2&quot;</span><span class="p">))</span>

<span class="k">with</span> <span class="n">e1</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;SELECT 3&quot;</span><span class="p">))</span></pre></div>
</div>
<p>The above scenario will double log <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">3</span></code>.  To resolve, ensure
all engines have a <code class="docutils literal notranslate"><span class="pre">logging_name</span></code> set, or use explicit logger / handler
setup without using <a class="reference internal" href="#sqlalchemy.create_engine.params.echo" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.echo</span></code></a> and
<a class="reference internal" href="#sqlalchemy.create_engine.params.echo_pool" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.echo_pool</span></code></a>.</p>
</div>
</section>
<section id="dbengine-logging-tokens">
<span id="id16"></span><h3>设置每个连接/子引擎令牌<a class="headerlink" href="#dbengine-logging-tokens" title="Link to this heading">¶</a></h3>
<p>Setting Per-Connection / Sub-Engine Tokens</p>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4.0b2 版本加入.</span></p>
</div>
<p>While the logging name is appropriate to establish on an
<a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> object that is long lived, it’s not flexible enough
to accommodate for an arbitrarily large list of names, for the case of
tracking individual connections and/or transactions in log messages.</p>
<p>For this use case, the log message itself generated by the
<a class="reference internal" href="connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> and <a class="reference internal" href="connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> objects may be
augmented with additional tokens such as transaction or request identifiers.
The <a class="reference internal" href="connections.html#sqlalchemy.engine.Connection.execution_options.params.logging_token" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.logging_token</span></code></a> parameter
accepts a string argument that may be used to establish per-connection tracking
tokens:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_engine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;sqlite://&quot;</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="s2">&quot;debug&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">e</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">logging_token</span><span class="o">=</span><span class="s2">&quot;track1&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;select 1&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="go">2021-02-03 11:48:45,754 INFO sqlalchemy.engine.Engine [track1] select 1</span>
<span class="go">2021-02-03 11:48:45,754 INFO sqlalchemy.engine.Engine [track1] [raw sql] ()</span>
<span class="go">2021-02-03 11:48:45,754 DEBUG sqlalchemy.engine.Engine [track1] Col (&#39;1&#39;,)</span>
<span class="go">2021-02-03 11:48:45,755 DEBUG sqlalchemy.engine.Engine [track1] Row (1,)</span></pre></div>
</div>
<p>The <a class="reference internal" href="connections.html#sqlalchemy.engine.Connection.execution_options.params.logging_token" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Connection.execution_options.logging_token</span></code></a> parameter
may also be established on engines or sub-engines via
<a class="reference internal" href="#sqlalchemy.create_engine.params.execution_options" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.execution_options</span></code></a> or <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine.execution_options" title="sqlalchemy.engine.Engine.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.execution_options()</span></code></a>.
This may be useful to apply different logging tokens to different components
of an application without creating new engines:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_engine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;sqlite://&quot;</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="s2">&quot;debug&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e1</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">logging_token</span><span class="o">=</span><span class="s2">&quot;track1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e2</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">logging_token</span><span class="o">=</span><span class="s2">&quot;track2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">e1</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;select 1&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="go">2021-02-03 11:51:08,960 INFO sqlalchemy.engine.Engine [track1] select 1</span>
<span class="go">2021-02-03 11:51:08,960 INFO sqlalchemy.engine.Engine [track1] [raw sql] ()</span>
<span class="go">2021-02-03 11:51:08,960 DEBUG sqlalchemy.engine.Engine [track1] Col (&#39;1&#39;,)</span>
<span class="go">2021-02-03 11:51:08,961 DEBUG sqlalchemy.engine.Engine [track1] Row (1,)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">e2</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;select 2&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="go">2021-02-03 11:52:05,518 INFO sqlalchemy.engine.Engine [track2] Select 1</span>
<span class="go">2021-02-03 11:52:05,519 INFO sqlalchemy.engine.Engine [track2] [raw sql] ()</span>
<span class="go">2021-02-03 11:52:05,520 DEBUG sqlalchemy.engine.Engine [track2] Col (&#39;1&#39;,)</span>
<span class="go">2021-02-03 11:52:05,520 DEBUG sqlalchemy.engine.Engine [track2] Row (1,)</span></pre></div>
</div>
</section>
<section id="id17">
<h3>隐藏参数<a class="headerlink" href="#id17" title="Link to this heading">¶</a></h3>
<p>Hiding Parameters</p>
<p>The logging emitted by <a class="reference internal" href="connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> also indicates an excerpt
of the SQL parameters that are present for a particular statement.  To prevent
these parameters from being logged for privacy purposes, enable the
<a class="reference internal" href="#sqlalchemy.create_engine.params.hide_parameters" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.hide_parameters</span></code></a> flag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;sqlite://&quot;</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">hide_parameters</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">e</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;select :some_private_name&quot;</span><span class="p">),</span> <span class="p">{</span><span class="s2">&quot;some_private_name&quot;</span><span class="p">:</span> <span class="s2">&quot;pii&quot;</span><span class="p">})</span>
<span class="go">2020-10-24 12:48:32,808 INFO sqlalchemy.engine.Engine select ?</span>
<span class="go">2020-10-24 12:48:32,808 INFO sqlalchemy.engine.Engine [SQL parameters hidden due to hide_parameters=True]</span></pre></div>
</div>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="connections.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">使用Engines和Connection</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="engines_connections.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Engine和Connection的使用</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                <a href="../copyright.html">Copyright</a> &#169; 2007-2025, the SQLAlchemy authors and contributors
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on 04/05/2025 04:00:26</div>
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Engine 配置</a><ul>
<li><a class="reference internal" href="#supported-dbapis">支持的数据库</a></li>
<li><a class="reference internal" href="#url">数据库 URL</a><ul>
<li><a class="reference internal" href="#id2">转义密码中的特殊字符，例如 &#64; 符号</a></li>
<li><a class="reference internal" href="#id3">以编程方式创建 URL</a></li>
<li><a class="reference internal" href="#id4">后端特定的 URL</a><ul>
<li><a class="reference internal" href="#postgresql">PostgreSQL</a></li>
<li><a class="reference internal" href="#mysql">MySQL</a></li>
<li><a class="reference internal" href="#oracle">Oracle</a></li>
<li><a class="reference internal" href="#microsoft-sql-server">Microsoft SQL Server</a></li>
<li><a class="reference internal" href="#sqlite">SQLite</a></li>
<li><a class="reference internal" href="#id5">其他</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#api">引擎创建 API</a><ul>
<li><a class="reference internal" href="#sqlalchemy.create_engine"><code class="docutils literal notranslate"><span class="pre">create_engine()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine_from_config"><code class="docutils literal notranslate"><span class="pre">engine_from_config()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.create_mock_engine"><code class="docutils literal notranslate"><span class="pre">create_mock_engine()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.make_url"><code class="docutils literal notranslate"><span class="pre">make_url()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.create_pool_from_url"><code class="docutils literal notranslate"><span class="pre">create_pool_from_url()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.URL"><code class="docutils literal notranslate"><span class="pre">URL</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.engine.URL.create"><code class="docutils literal notranslate"><span class="pre">URL.create()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.URL.database"><code class="docutils literal notranslate"><span class="pre">URL.database</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.URL.difference_update_query"><code class="docutils literal notranslate"><span class="pre">URL.difference_update_query()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.URL.drivername"><code class="docutils literal notranslate"><span class="pre">URL.drivername</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.URL.get_backend_name"><code class="docutils literal notranslate"><span class="pre">URL.get_backend_name()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.URL.get_dialect"><code class="docutils literal notranslate"><span class="pre">URL.get_dialect()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.URL.get_driver_name"><code class="docutils literal notranslate"><span class="pre">URL.get_driver_name()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.URL.host"><code class="docutils literal notranslate"><span class="pre">URL.host</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.URL.normalized_query"><code class="docutils literal notranslate"><span class="pre">URL.normalized_query</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.URL.password"><code class="docutils literal notranslate"><span class="pre">URL.password</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.URL.port"><code class="docutils literal notranslate"><span class="pre">URL.port</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.URL.query"><code class="docutils literal notranslate"><span class="pre">URL.query</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.URL.render_as_string"><code class="docutils literal notranslate"><span class="pre">URL.render_as_string()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.URL.set"><code class="docutils literal notranslate"><span class="pre">URL.set()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.URL.translate_connect_args"><code class="docutils literal notranslate"><span class="pre">URL.translate_connect_args()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.URL.update_query_dict"><code class="docutils literal notranslate"><span class="pre">URL.update_query_dict()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.URL.update_query_pairs"><code class="docutils literal notranslate"><span class="pre">URL.update_query_pairs()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.URL.update_query_string"><code class="docutils literal notranslate"><span class="pre">URL.update_query_string()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.engine.URL.username"><code class="docutils literal notranslate"><span class="pre">URL.username</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id8">池化</a></li>
<li><a class="reference internal" href="#dbapi-connect">自定义 DBAPI connect() 参数/连接例程</a><ul>
<li><a class="reference internal" href="#id9">传递给 dbapi.connect() 的特殊关键字参数</a><ul>
<li><a class="reference internal" href="#id10">将参数添加到 URL 查询字符串</a></li>
<li><a class="reference internal" href="#connect-args">使用 connect_args 字典参数</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id11">控制如何将参数传递给 DBAPI connect() 函数</a><ul>
<li><a class="reference internal" href="#engines-dynamic-tokens">生成动态身份验证令牌</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dbapi">在连接后修改 DBAPI 连接，或在连接后运行命令</a></li>
<li><a class="reference internal" href="#id13">完全替换 DBAPI <code class="docutils literal notranslate"><span class="pre">connect()</span></code> 函数</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dbengine-logging">配置日志记录</a><ul>
<li><a class="reference internal" href="#echo">有关 Echo 标志的更多信息</a></li>
<li><a class="reference internal" href="#id15">设置日志记录名称</a></li>
<li><a class="reference internal" href="#dbengine-logging-tokens">设置每个连接/子引擎令牌</a></li>
<li><a class="reference internal" href="#id17">隐藏参数</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=2d0eb83f"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../_static/tabs.js?v=3ee01567"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=2f3e6152"></script>
    <script src="../_static/translations.js?v=beaddf03"></script>
    </body>
</html>