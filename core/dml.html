<!doctype html>
<html class="no-js" lang="zh-CN" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="索引" href="../genindex.html" /><link rel="search" title="搜索" href="../search.html" /><link rel="copyright" title="版权所有" href="../copyright.html" /><link rel="next" title="SQL 和 范型函数" href="functions.html" /><link rel="prev" title="SELECT 和相关构造" href="selectable.html" />

    <!-- Generated with Sphinx 7.2.6 and Furo 2024.08.06 -->
        <title>插入,更新,删除 - SQLAlchemy 2.1 Documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/changelog.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx_paramlinks.css" />
    <link rel="stylesheet" type="text/css" href="../_static/docs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">SQLAlchemy 2.1 Documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">SQLAlchemy 2.1 Documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="搜索" name="q" aria-label="搜索">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">概述</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorial/index.html">SQLAlchemy 统一教程</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of SQLAlchemy 统一教程</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/engine.html">建立连接 - Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/dbapi_transactions.html">使用事务和DBAPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/metadata.html">使用数据库元数据</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../tutorial/data.html">处理数据</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of 处理数据</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/data_insert.html">使用 INSERT 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/data_select.html">使用 SELECT 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/data_update.html">使用 UPDATE 和 DELETE 语句</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/orm_data_manipulation.html">使用 ORM 进行数据操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/orm_related_objects.html">使用 ORM 相关对象</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/further_reading.html">进一步阅读</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../orm/index.html">SQLAlchemy ORM</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of SQLAlchemy ORM</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../orm/quickstart.html">ORM 快速入门</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../orm/mapper_config.html">ORM 映射类配置</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of ORM 映射类配置</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../orm/mapping_styles.html">ORM 映射类概述</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../orm/declarative_mapping.html">使用声明式映射类</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of 使用声明式映射类</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../orm/declarative_styles.html">声明式映射风格</a></li>
<li class="toctree-l4"><a class="reference internal" href="../orm/declarative_tables.html">声明式的表配置</a></li>
<li class="toctree-l4"><a class="reference internal" href="../orm/declarative_config.html">使用声明式映射器配置</a></li>
<li class="toctree-l4"><a class="reference internal" href="../orm/declarative_mixins.html">使用 Mixins 组合映射层次结构</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../orm/dataclasses.html">与dataclass和attrs的集成</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/mapped_sql_expr.html">SQL 表达式作为映射属性</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/mapped_attributes.html">更改Attribute的行为</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/composites.html">复合列类型</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/inheritance.html">映射类继承层次结构</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/nonstandard_mappings.html">非传统映射</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/versioning.html">配置版本计数器</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/mapping_api.html">类映射 API</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../orm/scalar_mapping.html">映射 SQL 表达式</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of 映射 SQL 表达式</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../orm/mapping_columns.html">映射表格列</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../orm/relationships.html">关系配置</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of 关系配置</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../orm/basic_relationships.html">基本关系模式</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/self_referential.html">邻接表关系</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/join_conditions.html">配置关系连接方式</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/large_collections.html">使用大型集合</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/collection_api.html">集合自定义和 API 详细信息</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/relationship_persistence.html">特殊关系的持久化模式</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/backref.html">使用旧版“backref”关系参数</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/relationship_api.html">关系 API</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../orm/queryguide/index.html">ORM 查询指南</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of ORM 查询指南</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/select.html">为 ORM 映射类编写 SELECT 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/inheritance.html">为继承映射编写 SELECT 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/dml.html">启用 ORM 的 INSERT、UPDATE 和 DELETE 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/columns.html">列加载选项</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/relationships.html">关系加载技术</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/api.html">用于查询的 ORM API 功能</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/query.html">旧式查询 API</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../orm/session.html">使用会话</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of 使用会话</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../orm/session_basics.html">会话基础知识</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/session_state_management.html">状态管理</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/cascades.html">级联</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/session_transaction.html">事务和连接管理</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/persistence_techniques.html">附加持久性技术</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/contextual.html">上下文/线程本地会话</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/session_events.html">使用事件跟踪查询、对象和会话更改</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/session_api.html">会话 API</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../orm/extending.html">事件和内部</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of 事件和内部</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../orm/events.html">ORM 事件</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/internals.html">ORM 内部</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/exceptions.html">ORM 异常</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../orm/extensions/index.html">ORM 扩展</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of ORM 扩展</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/asyncio.html">异步 I/O (asyncio)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/associationproxy.html">关联代理</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/automap.html">自动映射</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/baked.html">烘焙查询</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/declarative/index.html">声明式扩展</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/mutable.html">突变追踪</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/orderinglist.html">排序列表</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/horizontal_shard.html">水平分片</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/hybrid.html">混合属性</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/indexable.html">Indexable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/instrumentation.html">替代类检测</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../orm/examples.html">核心和 ORM 示例</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">SQLAlchemy Core</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of SQLAlchemy Core</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current has-children"><a class="reference internal" href="expression_api.html">SQL 语句和表达式 API</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of SQL 语句和表达式 API</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="sqlelement.html">列元素和表达式</a></li>
<li class="toctree-l3"><a class="reference internal" href="operators.html">操作符参考</a></li>
<li class="toctree-l3"><a class="reference internal" href="selectable.html">SELECT 和相关构造</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">插入,更新,删除</a></li>
<li class="toctree-l3"><a class="reference internal" href="functions.html">SQL 和 范型函数</a></li>
<li class="toctree-l3"><a class="reference internal" href="compiler.html">自定义 SQL 构造和编译扩展</a></li>
<li class="toctree-l3"><a class="reference internal" href="serializer.html">表达式序列化器扩展</a></li>
<li class="toctree-l3"><a class="reference internal" href="foundation.html">SQL 表达式语言基础构造</a></li>
<li class="toctree-l3"><a class="reference internal" href="visitors.html">访问者和遍历实用程序</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="schema.html">Schema 定义语言</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of Schema 定义语言</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="metadata.html">使用元数据描述数据库</a></li>
<li class="toctree-l3"><a class="reference internal" href="reflection.html">反映数据库对象</a></li>
<li class="toctree-l3"><a class="reference internal" href="defaults.html">列 INSERT/UPDATE 默认值</a></li>
<li class="toctree-l3"><a class="reference internal" href="constraints.html">定义约束和索引</a></li>
<li class="toctree-l3"><a class="reference internal" href="ddl.html">自定义 DDL</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="types.html">SQL 数据类型对象</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of SQL 数据类型对象</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="type_basics.html">类型层次结构</a></li>
<li class="toctree-l3"><a class="reference internal" href="custom_types.html">自定义类型</a></li>
<li class="toctree-l3"><a class="reference internal" href="type_api.html">基本类型 API</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="engines_connections.html">Engine和Connection的使用</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle navigation of Engine和Connection的使用</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="engines.html">Engine 配置</a></li>
<li class="toctree-l3"><a class="reference internal" href="connections.html">使用Engines和Connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="pooling.html">连接池</a></li>
<li class="toctree-l3"><a class="reference internal" href="events.html">核心事件</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="api_basics.html">Core API 基础</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle navigation of Core API 基础</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="event.html">事件</a></li>
<li class="toctree-l3"><a class="reference internal" href="inspection.html">运行时审查 API</a></li>
<li class="toctree-l3"><a class="reference internal" href="exceptions.html">Core 异常</a></li>
<li class="toctree-l3"><a class="reference internal" href="internals.html">Core 内部</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../dialects/index.html">Dialects</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle navigation of Dialects</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../dialects/postgresql.html">PostgreSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dialects/mysql.html">MySQL 和 MariaDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dialects/sqlite.html">SQLite</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dialects/oracle.html">Oracle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dialects/mssql.html">Microsoft SQL Server</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../faq/index.html">常见问题</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle navigation of 常见问题</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../faq/installation.html">安装</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/connections.html">连接 / 引擎</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/metadata_schema.html">元数据 / Schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/sqlexpressions.html">SQL 表达式</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/ormconfiguration.html">ORM 配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/performance.html">性能</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/sessions.html">会话 / 查询</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/thirdparty.html">第三方包集成问题</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../errors.html">错误消息</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../changelog/index.html">变更和迁移</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle navigation of 变更和迁移</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_21.html">SQLAlchemy 2.1 有什么新功能？</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_21.html">2.1 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_20.html">2.0 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_14.html">1.4 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_13.html">1.3 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_12.html">1.2 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_11.html">1.1 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_10.html">1.0 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_09.html">0.9 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_08.html">0.8 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_07.html">0.7 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_06.html">0.6 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_05.html">0.5 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_04.html">0.4 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_03.html">0.3 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_02.html">0.2 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_01.html">0.1 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_20.html">SQLAlchemy 2.0 - Major Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/whatsnew_20.html">What’s New in SQLAlchemy 2.0?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_14.html">What’s New in SQLAlchemy 1.4?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_13.html">What’s New in SQLAlchemy 1.3?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_12.html">What’s New in SQLAlchemy 1.2?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_11.html">What’s New in SQLAlchemy 1.1?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_10.html">What’s New in SQLAlchemy 1.0?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_09.html">What’s New in SQLAlchemy 0.9?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_08.html">What’s New in SQLAlchemy 0.8?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_07.html">What’s New in SQLAlchemy 0.7?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_06.html">What’s New in SQLAlchemy 0.6?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_05.html">What’s new in SQLAlchemy 0.5?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_04.html">What’s new in SQLAlchemy 0.4?</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          

<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="id1">
<h1>插入,更新,删除<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h1>
<p>Insert, Updates, Deletes</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--1">中文</label><div class="tab-content docutils container">
<p>INSERT、UPDATE 和 DELETE 语句建立在以 <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase" title="sqlalchemy.sql.expression.UpdateBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">UpdateBase</span></code></a> 为基础的层次结构上。<a class="reference internal" href="#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> 和 <a class="reference internal" href="#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal notranslate"><span class="pre">Update</span></code></a> 构造基于中间类 <a class="reference internal" href="#sqlalchemy.sql.expression.ValuesBase" title="sqlalchemy.sql.expression.ValuesBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValuesBase</span></code></a>。</p>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--2">英文</label><div class="tab-content docutils container">
<p>INSERT, UPDATE and DELETE statements build on a hierarchy starting
with <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase" title="sqlalchemy.sql.expression.UpdateBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">UpdateBase</span></code></a>.   The <a class="reference internal" href="#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> and <a class="reference internal" href="#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal notranslate"><span class="pre">Update</span></code></a>
constructs build on the intermediary <a class="reference internal" href="#sqlalchemy.sql.expression.ValuesBase" title="sqlalchemy.sql.expression.ValuesBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValuesBase</span></code></a>.</p>
</div>
</div>
<section id="dml">
<span id="dml-foundational-consructors"></span><h2>DML 基础构造函数<a class="headerlink" href="#dml" title="Link to this heading">¶</a></h2>
<p>DML Foundational Constructors</p>
<p>Top level “INSERT”, “UPDATE”, “DELETE” constructors.</p>
<div class="table-wrapper longtable docutils container">
<table class="longtable docutils align-default">
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.sql.expression.delete"><span class="sig-name descname">delete</span></a>(table)</p></td>
<td><p>Construct <a class="reference internal" href="#sqlalchemy.sql.expression.Delete" title="sqlalchemy.sql.expression.Delete"><code class="xref py py-class docutils literal notranslate"><span class="pre">Delete</span></code></a> object.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.sql.expression.insert"><span class="sig-name descname">insert</span></a>(table)</p></td>
<td><p>Construct an <a class="reference internal" href="#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> object.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.sql.expression.update"><span class="sig-name descname">update</span></a>(table)</p></td>
<td><p>Construct an <a class="reference internal" href="#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal notranslate"><span class="pre">Update</span></code></a> object.</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.delete">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.sql.expression.</span></span><span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_DMLTableArgument</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.sql.expression.Delete" title="sqlalchemy.sql.expression.Delete"><span class="pre">Delete</span></a></span></span><a class="headerlink" href="#sqlalchemy.sql.expression.delete" title="Link to this definition">¶</a></dt>
<dd><p>Construct <a class="reference internal" href="#sqlalchemy.sql.expression.Delete" title="sqlalchemy.sql.expression.Delete"><code class="xref py py-class docutils literal notranslate"><span class="pre">Delete</span></code></a> object.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">delete</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">delete</span><span class="p">(</span><span class="n">user_table</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">user_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)</span></pre></div>
</div>
<p>Similar functionality is available via the
<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.TableClause.delete" title="sqlalchemy.sql.expression.TableClause.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TableClause.delete()</span></code></a> method on
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.sql.expression.delete.params.table"></span><strong>table</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.delete.params.table">¶</a> – The table to delete rows from.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="../tutorial/data_update.html#tutorial-core-update-delete"><span class="std std-ref">使用 UPDATE 和 DELETE 语句</span></a> - in the <a class="reference internal" href="../tutorial/index.html#unified-tutorial"><span class="std std-ref">SQLAlchemy 统一教程</span></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.insert">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.sql.expression.</span></span><span class="sig-name descname"><span class="pre">insert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_DMLTableArgument</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><span class="pre">Insert</span></a></span></span><a class="headerlink" href="#sqlalchemy.sql.expression.insert" title="Link to this definition">¶</a></dt>
<dd><p>Construct an <a class="reference internal" href="#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> object.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">insert</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">insert</span><span class="p">(</span><span class="n">user_table</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;username&quot;</span><span class="p">,</span> <span class="n">fullname</span><span class="o">=</span><span class="s2">&quot;Full Username&quot;</span><span class="p">)</span></pre></div>
</div>
<p>Similar functionality is available via the
<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.TableClause.insert" title="sqlalchemy.sql.expression.TableClause.insert"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TableClause.insert()</span></code></a> method on
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="../tutorial/data_insert.html#tutorial-core-insert"><span class="std std-ref">使用 INSERT 语句</span></a> - in the <a class="reference internal" href="../tutorial/index.html#unified-tutorial"><span class="std std-ref">SQLAlchemy 统一教程</span></a></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.sql.expression.insert.params.table"></span><strong>table</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.insert.params.table">¶</a> – <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.TableClause" title="sqlalchemy.sql.expression.TableClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">TableClause</span></code></a>
which is the subject of the
insert.</p></li>
<li><p><span class="target" id="sqlalchemy.sql.expression.insert.params.values"></span><strong>values</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.insert.params.values">¶</a> – collection of values to be inserted; see
<a class="reference internal" href="#sqlalchemy.sql.expression.Insert.values" title="sqlalchemy.sql.expression.Insert.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Insert.values()</span></code></a>
for a description of allowed formats here.
Can be omitted entirely; a <a class="reference internal" href="#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> construct
will also dynamically render the VALUES clause at execution time
based on the parameters passed to <a class="reference internal" href="connections.html#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.sql.expression.insert.params.inline"></span><strong>inline</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.insert.params.inline">¶</a> – if True, no attempt will be made to retrieve the
SQL-generated default values to be provided within the statement;
in particular,
this allows SQL expressions to be rendered ‘inline’ within the
statement without the need to pre-execute them beforehand; for
backends that support “returning”, this turns off the “implicit
returning” feature for the statement.</p></li>
</ul>
</dd>
</dl>
<p>If both <a class="reference internal" href="#sqlalchemy.sql.expression.insert.params.values" title="sqlalchemy.sql.expression.insert"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">insert.values</span></code></a> and compile-time bind
parameters are present, the compile-time bind parameters override the
information specified within <a class="reference internal" href="#sqlalchemy.sql.expression.insert.params.values" title="sqlalchemy.sql.expression.insert"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">insert.values</span></code></a> on a
per-key basis.</p>
<p>The keys within <a class="reference internal" href="#sqlalchemy.sql.expression.Insert.params.values" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Insert.values</span></code></a> can be either
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects or their string
identifiers. Each key may reference one of:</p>
<ul class="simple">
<li><p>a literal data value (i.e. string, number, etc.);</p></li>
<li><p>a Column object;</p></li>
<li><p>a SELECT statement.</p></li>
</ul>
<p>If a <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> statement is specified which references this
<code class="docutils literal notranslate"><span class="pre">INSERT</span></code> statement’s table, the statement will be correlated
against the <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> statement.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="../tutorial/data_insert.html#tutorial-core-insert"><span class="std std-ref">使用 INSERT 语句</span></a> - in the <a class="reference internal" href="../tutorial/index.html#unified-tutorial"><span class="std std-ref">SQLAlchemy 统一教程</span></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.update">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.sql.expression.</span></span><span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_DMLTableArgument</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><span class="pre">Update</span></a></span></span><a class="headerlink" href="#sqlalchemy.sql.expression.update" title="Link to this definition">¶</a></dt>
<dd><p>Construct an <a class="reference internal" href="#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal notranslate"><span class="pre">Update</span></code></a> object.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">update</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">update</span><span class="p">(</span><span class="n">user_table</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">user_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;user #5&quot;</span><span class="p">)</span>
<span class="p">)</span></pre></div>
</div>
<p>Similar functionality is available via the
<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.TableClause.update" title="sqlalchemy.sql.expression.TableClause.update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TableClause.update()</span></code></a> method on
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.sql.expression.update.params.table"></span><strong>table</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.update.params.table">¶</a> – A <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
object representing the database
table to be updated.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="../tutorial/data_update.html#tutorial-core-update-delete"><span class="std std-ref">使用 UPDATE 和 DELETE 语句</span></a> - in the <a class="reference internal" href="../tutorial/index.html#unified-tutorial"><span class="std std-ref">SQLAlchemy 统一教程</span></a></p>
</div>
</dd></dl>

</section>
<section id="id2">
<h2>DML 类文档构造函数<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h2>
<p>DML Class Documentation Constructors</p>
<p>Class documentation for the constructors listed at
<a class="reference internal" href="#dml-foundational-consructors"><span class="std std-ref">DML 基础构造函数</span></a>.</p>
<div class="table-wrapper longtable docutils container">
<table class="longtable docutils align-default">
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.sql.expression.Delete"><span class="sig-name descname">Delete</span></a></p></td>
<td><p>Represent a DELETE construct.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.sql.expression.Insert"><span class="sig-name descname">Insert</span></a></p></td>
<td><p>Represent an INSERT construct.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.sql.expression.Update"><span class="sig-name descname">Update</span></a></p></td>
<td><p>Represent an Update construct.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase"><span class="sig-name descname">UpdateBase</span></a></p></td>
<td><p>Form the base for <code class="docutils literal notranslate"><span class="pre">INSERT</span></code>, <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code>, and <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> statements.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.sql.expression.ValuesBase"><span class="sig-name descname">ValuesBase</span></a></p></td>
<td><p>Supplies support for <a class="reference internal" href="#sqlalchemy.sql.expression.ValuesBase.values" title="sqlalchemy.sql.expression.ValuesBase.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ValuesBase.values()</span></code></a> to
INSERT and UPDATE constructs.</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.Delete">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.sql.expression.</span></span><span class="sig-name descname"><span class="pre">Delete</span></span><a class="headerlink" href="#sqlalchemy.sql.expression.Delete" title="Link to this definition">¶</a></dt>
<dd><p>Represent a DELETE construct.</p>
<p>The <a class="reference internal" href="#sqlalchemy.sql.expression.Delete" title="sqlalchemy.sql.expression.Delete"><code class="xref py py-class docutils literal notranslate"><span class="pre">Delete</span></code></a> object is created using the
<a class="reference internal" href="#sqlalchemy.sql.expression.delete" title="sqlalchemy.sql.expression.delete"><code class="xref py py-func docutils literal notranslate"><span class="pre">delete()</span></code></a> function.</p>
<p>Available extension points:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">post_criteria</span></code>: applies additional logic after the <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> clause.</p></li>
</ul>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.sql.expression.Delete.where"><span class="sig-name descname">where()</span></a>, <a class="reference internal" href="#sqlalchemy.sql.expression.Delete.with_dialect_options"><span class="sig-name descname">with_dialect_options()</span></a>, <a class="reference internal" href="#sqlalchemy.sql.expression.Delete.returning"><span class="sig-name descname">returning()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.sql.expression.Delete" title="sqlalchemy.sql.expression.Delete"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.Delete</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.DMLWhereBase</span></code>, <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase" title="sqlalchemy.sql.expression.UpdateBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.UpdateBase</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.HasSyntaxExtensions</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.Delete.where">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.sql.expression.Delete"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.Delete.</span></code></a><span class="sig-name descname"><span class="pre">where</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">whereclause</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_ColumnExpressionArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.sql.expression.Delete.where" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="xref py py-meth docutils literal notranslate"><span class="pre">DMLWhereBase.where()</span></code> <em>method of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">DMLWhereBase</span></code></p>
</div>
<p>Return a new construct with the given expression(s) added to
its WHERE clause, joined to the existing clause via AND, if any.</p>
<p>Both <a class="reference internal" href="#sqlalchemy.sql.expression.Update.where" title="sqlalchemy.sql.expression.Update.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Update.where()</span></code></a> and <a class="reference internal" href="#sqlalchemy.sql.expression.Delete.where" title="sqlalchemy.sql.expression.Delete.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Delete.where()</span></code></a>
support multiple-table forms, including database-specific
<code class="docutils literal notranslate"><span class="pre">UPDATE...FROM</span></code> as well as <code class="docutils literal notranslate"><span class="pre">DELETE..USING</span></code>.  For backends that
don’t have multiple-table support, a backend agnostic approach
to using multiple tables is to make use of correlated subqueries.
See the linked tutorial sections below for examples.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="../tutorial/data_update.html#tutorial-correlated-updates"><span class="std std-ref">相关更新</span></a></p>
<p><a class="reference internal" href="../tutorial/data_update.html#tutorial-update-from"><span class="std std-ref">UPDATE..FROM</span></a></p>
<p><a class="reference internal" href="../tutorial/data_update.html#tutorial-multi-table-deletes"><span class="std std-ref">多表删除</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.Delete.with_dialect_options">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.sql.expression.Delete"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.Delete.</span></code></a><span class="sig-name descname"><span class="pre">with_dialect_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">opt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.sql.expression.Delete.with_dialect_options" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.with_dialect_options" title="sqlalchemy.sql.expression.UpdateBase.with_dialect_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.with_dialect_options()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase" title="sqlalchemy.sql.expression.UpdateBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">UpdateBase</span></code></a></p>
</div>
<p>Add dialect options to this INSERT/UPDATE/DELETE object.</p>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">upd</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span><span class="n">dialect_options</span><span class="p">(</span><span class="n">mysql_limit</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入: </span>- this method supersedes the dialect options
associated with the constructor.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.Delete.returning">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.sql.expression.Delete"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.Delete.</span></code></a><span class="sig-name descname"><span class="pre">returning</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">cols</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_ColumnsClauseArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_by_parameter_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">_UpdateBase__kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase" title="sqlalchemy.sql.expression.UpdateBase"><span class="pre">UpdateBase</span></a></span></span><a class="headerlink" href="#sqlalchemy.sql.expression.Delete.returning" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.returning" title="sqlalchemy.sql.expression.UpdateBase.returning"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.returning()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase" title="sqlalchemy.sql.expression.UpdateBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">UpdateBase</span></code></a></p>
</div>
<p>Add a <a class="reference internal" href="../glossary.html#term-RETURNING"><span class="xref std std-term">RETURNING</span></a> or equivalent clause to this statement.</p>
<p>e.g.:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="p">(</span>
<span class="go">...     table.update()</span>
<span class="go">...     .where(table.c.data == &quot;value&quot;)</span>
<span class="go">...     .values(status=&quot;X&quot;)</span>
<span class="go">...     .returning(table.c.server_flag, table.c.updated_timestamp)</span>
<span class="go">... )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>
<div class='show_sql_print'><span class="k">UPDATE</span><span class="w"> </span><span class="n">some_table</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">status</span><span class="o">=</span><span class="p">:</span><span class="n">status</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">some_table</span><span class="p">.</span><span class="k">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">:</span><span class="n">data_1</span>
<span class="k">RETURNING</span><span class="w"> </span><span class="n">some_table</span><span class="p">.</span><span class="n">server_flag</span><span class="p">,</span><span class="w"> </span><span class="n">some_table</span><span class="p">.</span><span class="n">updated_timestamp</span>
</div></pre></div>
</div>
<p>The method may be invoked multiple times to add new entries to the
list of expressions to be returned.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4.0b2 版本加入: </span>The method may be invoked multiple times to
add new entries to the list of expressions to be returned.</p>
</div>
<p>The given collection of column expressions should be derived from the
table that is the target of the INSERT, UPDATE, or DELETE.  While
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects are typical, the elements can also be
expressions:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span><span class="o">.</span><span class="n">returning</span><span class="p">(</span>
<span class="go">...     (table.c.first_name + &quot; &quot; + table.c.last_name).label(&quot;fullname&quot;)</span>
<span class="go">... )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>
<div class='show_sql_print'><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">some_table</span><span class="w"> </span><span class="p">(</span><span class="n">first_name</span><span class="p">,</span><span class="w"> </span><span class="n">last_name</span><span class="p">)</span>
<span class="k">VALUES</span><span class="w"> </span><span class="p">(:</span><span class="n">first_name</span><span class="p">,</span><span class="w"> </span><span class="p">:</span><span class="n">last_name</span><span class="p">)</span>
<span class="k">RETURNING</span><span class="w"> </span><span class="n">some_table</span><span class="p">.</span><span class="n">first_name</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">:</span><span class="n">first_name_1</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">some_table</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">fullname</span>
</div></pre></div>
</div>
<p>Upon compilation, a RETURNING clause, or database equivalent,
will be rendered within the statement.   For INSERT and UPDATE,
the values are the newly inserted/updated values.  For DELETE,
the values are those of the rows which were deleted.</p>
<p>Upon execution, the values of the columns to be returned are made
available via the result set and can be iterated using
<a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.fetchone" title="sqlalchemy.engine.CursorResult.fetchone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.fetchone()</span></code></a> and similar.
For DBAPIs which do not
natively support returning values (i.e. cx_oracle), SQLAlchemy will
approximate this behavior at the result level so that a reasonable
amount of behavioral neutrality is provided.</p>
<p>Note that not all databases/DBAPIs
support RETURNING.   For those backends with no support,
an exception is raised upon compilation and/or execution.
For those who do support it, the functionality across backends
varies greatly, including restrictions on executemany()
and other statements which return multiple rows. Please
read the documentation notes for the database in use in
order to determine the availability of RETURNING.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.sql.expression.Delete.returning.params.*cols"></span><strong>*cols</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.Delete.returning.params.*cols">¶</a> – series of columns, SQL expressions, or whole tables
entities to be returned.</p></li>
<li><p><span class="target" id="sqlalchemy.sql.expression.Delete.returning.params.sort_by_parameter_order"></span><strong>sort_by_parameter_order</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.Delete.returning.params.sort_by_parameter_order">¶</a> – <p>for a batch INSERT that is being
executed against multiple parameter sets, organize the results of
RETURNING so that the returned rows correspond to the order of
parameter sets passed in.  This applies only to an <a class="reference internal" href="../glossary.html#term-executemany"><span class="xref std std-term">executemany</span></a>
execution for supporting dialects and typically makes use of the
<a class="reference internal" href="../glossary.html#term-insertmanyvalues"><span class="xref std std-term">insertmanyvalues</span></a> feature.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0.10 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="connections.html#engine-insertmanyvalues-returning-order"><span class="std std-ref">将 RETURNING 行关联到参数集</span></a> - background on
sorting of RETURNING rows for bulk INSERT (Core level discussion)</p>
<p><a class="reference internal" href="../orm/queryguide/dml.html#orm-queryguide-bulk-insert-returning-ordered"><span class="std std-ref">将 RETURNING 记录与输入数据顺序关联</span></a> - example of
use with <a class="reference internal" href="../orm/queryguide/dml.html#orm-queryguide-bulk-insert"><span class="std std-ref">ORM 批量 INSERT 语句</span></a> (ORM level discussion)</p>
</div>
</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.return_defaults" title="sqlalchemy.sql.expression.UpdateBase.return_defaults"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.return_defaults()</span></code></a> - an alternative method tailored
towards efficient fetching of server-side defaults and triggers
for single-row INSERTs or UPDATEs.</p>
<p><a class="reference internal" href="../tutorial/data_insert.html#tutorial-insert-returning"><span class="std std-ref">INSERT…RETURNING</span></a> - in the <a class="reference internal" href="../tutorial/index.html#unified-tutorial"><span class="std std-ref">SQLAlchemy 统一教程</span></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.Insert">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.sql.expression.</span></span><span class="sig-name descname"><span class="pre">Insert</span></span><a class="headerlink" href="#sqlalchemy.sql.expression.Insert" title="Link to this definition">¶</a></dt>
<dd><p>Represent an INSERT construct.</p>
<p>The <a class="reference internal" href="#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> object is created using the
<a class="reference internal" href="#sqlalchemy.sql.expression.insert" title="sqlalchemy.sql.expression.insert"><code class="xref py py-func docutils literal notranslate"><span class="pre">insert()</span></code></a> function.</p>
<p>Available extension points:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">post_values</span></code>: applies additional logic after the <code class="docutils literal notranslate"><span class="pre">VALUES</span></code> clause.</p></li>
</ul>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.sql.expression.Insert.with_dialect_options"><span class="sig-name descname">with_dialect_options()</span></a>, <a class="reference internal" href="#sqlalchemy.sql.expression.Insert.values"><span class="sig-name descname">values()</span></a>, <a class="reference internal" href="#sqlalchemy.sql.expression.Insert.returning"><span class="sig-name descname">returning()</span></a>, <a class="reference internal" href="#sqlalchemy.sql.expression.Insert.from_select"><span class="sig-name descname">from_select()</span></a>, <a class="reference internal" href="#sqlalchemy.sql.expression.Insert.inline"><span class="sig-name descname">inline()</span></a>, <a class="reference internal" href="#sqlalchemy.sql.expression.Insert.select"><span class="sig-name descname">select</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.Insert</span></code></a> (<a class="reference internal" href="#sqlalchemy.sql.expression.ValuesBase" title="sqlalchemy.sql.expression.ValuesBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.ValuesBase</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.HasSyntaxExtensions</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.Insert.with_dialect_options">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.sql.expression.Insert"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.Insert.</span></code></a><span class="sig-name descname"><span class="pre">with_dialect_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">opt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.sql.expression.Insert.with_dialect_options" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.with_dialect_options" title="sqlalchemy.sql.expression.UpdateBase.with_dialect_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.with_dialect_options()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase" title="sqlalchemy.sql.expression.UpdateBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">UpdateBase</span></code></a></p>
</div>
<p>Add dialect options to this INSERT/UPDATE/DELETE object.</p>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">upd</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span><span class="n">dialect_options</span><span class="p">(</span><span class="n">mysql_limit</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入: </span>- this method supersedes the dialect options
associated with the constructor.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.Insert.values">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.sql.expression.Insert"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.Insert.</span></code></a><span class="sig-name descname"><span class="pre">values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_DMLColumnKeyMapping</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.sql.expression.Insert.values" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.sql.expression.ValuesBase.values" title="sqlalchemy.sql.expression.ValuesBase.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ValuesBase.values()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.sql.expression.ValuesBase" title="sqlalchemy.sql.expression.ValuesBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValuesBase</span></code></a></p>
</div>
<p>Specify a fixed VALUES clause for an INSERT statement, or the SET
clause for an UPDATE.</p>
<p>Note that the <a class="reference internal" href="#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> and
<a class="reference internal" href="#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal notranslate"><span class="pre">Update</span></code></a>
constructs support
per-execution time formatting of the VALUES and/or SET clauses,
based on the arguments passed to <a class="reference internal" href="connections.html#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a>.
However, the <a class="reference internal" href="#sqlalchemy.sql.expression.ValuesBase.values" title="sqlalchemy.sql.expression.ValuesBase.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ValuesBase.values()</span></code></a> method can be used to “fix” a
particular set of parameters into the statement.</p>
<p>Multiple calls to <a class="reference internal" href="#sqlalchemy.sql.expression.ValuesBase.values" title="sqlalchemy.sql.expression.ValuesBase.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ValuesBase.values()</span></code></a> will produce a new
construct, each one with the parameter list modified to include
the new parameters sent.  In the typical case of a single
dictionary of parameters, the newly passed keys will replace
the same keys in the previous construct.  In the case of a list-based
“multiple values” construct, each new list of values is extended
onto the existing list of values.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.sql.expression.Insert.values.params.**kwargs"></span><strong>**kwargs</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.Insert.values.params.**kwargs">¶</a> – <p>key value pairs representing the string key
of a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
mapped to the value to be rendered into the
VALUES or SET clause:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">users</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;some name&quot;</span><span class="p">)</span>

<span class="n">users</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;some name&quot;</span><span class="p">)</span></pre></div>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.sql.expression.Insert.values.params.*args"></span><strong>*args</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.Insert.values.params.*args">¶</a> – <p>As an alternative to passing key/value parameters,
a dictionary, tuple, or list of dictionaries or tuples can be passed
as a single positional argument in order to form the VALUES or
SET clause of the statement.  The forms that are accepted vary
based on whether this is an <a class="reference internal" href="#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> or an
<a class="reference internal" href="#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal notranslate"><span class="pre">Update</span></code></a> construct.</p>
<p>For either an <a class="reference internal" href="#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> or
<a class="reference internal" href="#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal notranslate"><span class="pre">Update</span></code></a>
construct, a single dictionary can be passed, which works the same as
that of the kwargs form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">users</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;some name&quot;</span><span class="p">})</span>

<span class="n">users</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;some new name&quot;</span><span class="p">})</span></pre></div>
</div>
<p>Also for either form but more typically for the
<a class="reference internal" href="#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> construct, a tuple that contains an
entry for every column in the table is also accepted:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">users</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;some name&quot;</span><span class="p">))</span></pre></div>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> construct also supports being
passed a list of dictionaries or full-table-tuples, which on the
server will render the less common SQL syntax of “multiple values” -
this syntax is supported on backends such as SQLite, PostgreSQL,
MySQL, but not necessarily others:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">users</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;some name&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;some other name&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;yet another name&quot;</span><span class="p">},</span>
    <span class="p">]</span>
<span class="p">)</span></pre></div>
</div>
<p>The above form would render a multiple VALUES statement similar to:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span>
<span class="w">                </span><span class="p">(:</span><span class="n">name_1</span><span class="p">),</span>
<span class="w">                </span><span class="p">(:</span><span class="n">name_2</span><span class="p">),</span>
<span class="w">                </span><span class="p">(:</span><span class="n">name_3</span><span class="p">)</span></pre></div>
</div>
<p>It is essential to note that <strong>passing multiple values is
NOT the same as using traditional executemany() form</strong>.  The above
syntax is a <strong>special</strong> syntax not typically used.  To emit an
INSERT statement against multiple rows, the normal method is
to pass a multiple values list to the
<a class="reference internal" href="connections.html#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a>
method, which is supported by all database backends and is generally
more efficient for a very large number of parameters.</p>
<blockquote>
<div><blockquote>
<div><div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="../tutorial/dbapi_transactions.html#tutorial-multiple-parameters"><span class="std std-ref">发送多个参数</span></a> - an introduction to
the traditional Core method of multiple parameter set
invocation for INSERTs and other statements.</p>
</div>
</div></blockquote>
<p>The UPDATE construct also supports rendering the SET parameters
in a specific order.  For this feature refer to the
<a class="reference internal" href="#sqlalchemy.sql.expression.Update.ordered_values" title="sqlalchemy.sql.expression.Update.ordered_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Update.ordered_values()</span></code></a> method.</p>
<blockquote>
<div><div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.sql.expression.Update.ordered_values" title="sqlalchemy.sql.expression.Update.ordered_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Update.ordered_values()</span></code></a></p>
</div>
</div></blockquote>
</div></blockquote>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.Insert.returning">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.sql.expression.Insert"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.Insert.</span></code></a><span class="sig-name descname"><span class="pre">returning</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">cols</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_ColumnsClauseArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_by_parameter_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">_UpdateBase__kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase" title="sqlalchemy.sql.expression.UpdateBase"><span class="pre">UpdateBase</span></a></span></span><a class="headerlink" href="#sqlalchemy.sql.expression.Insert.returning" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.returning" title="sqlalchemy.sql.expression.UpdateBase.returning"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.returning()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase" title="sqlalchemy.sql.expression.UpdateBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">UpdateBase</span></code></a></p>
</div>
<p>Add a <a class="reference internal" href="../glossary.html#term-RETURNING"><span class="xref std std-term">RETURNING</span></a> or equivalent clause to this statement.</p>
<p>e.g.:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="p">(</span>
<span class="go">...     table.update()</span>
<span class="go">...     .where(table.c.data == &quot;value&quot;)</span>
<span class="go">...     .values(status=&quot;X&quot;)</span>
<span class="go">...     .returning(table.c.server_flag, table.c.updated_timestamp)</span>
<span class="go">... )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>
<div class='show_sql_print'><span class="k">UPDATE</span><span class="w"> </span><span class="n">some_table</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">status</span><span class="o">=</span><span class="p">:</span><span class="n">status</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">some_table</span><span class="p">.</span><span class="k">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">:</span><span class="n">data_1</span>
<span class="k">RETURNING</span><span class="w"> </span><span class="n">some_table</span><span class="p">.</span><span class="n">server_flag</span><span class="p">,</span><span class="w"> </span><span class="n">some_table</span><span class="p">.</span><span class="n">updated_timestamp</span>
</div></pre></div>
</div>
<p>The method may be invoked multiple times to add new entries to the
list of expressions to be returned.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4.0b2 版本加入: </span>The method may be invoked multiple times to
add new entries to the list of expressions to be returned.</p>
</div>
<p>The given collection of column expressions should be derived from the
table that is the target of the INSERT, UPDATE, or DELETE.  While
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects are typical, the elements can also be
expressions:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span><span class="o">.</span><span class="n">returning</span><span class="p">(</span>
<span class="go">...     (table.c.first_name + &quot; &quot; + table.c.last_name).label(&quot;fullname&quot;)</span>
<span class="go">... )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>
<div class='show_sql_print'><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">some_table</span><span class="w"> </span><span class="p">(</span><span class="n">first_name</span><span class="p">,</span><span class="w"> </span><span class="n">last_name</span><span class="p">)</span>
<span class="k">VALUES</span><span class="w"> </span><span class="p">(:</span><span class="n">first_name</span><span class="p">,</span><span class="w"> </span><span class="p">:</span><span class="n">last_name</span><span class="p">)</span>
<span class="k">RETURNING</span><span class="w"> </span><span class="n">some_table</span><span class="p">.</span><span class="n">first_name</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">:</span><span class="n">first_name_1</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">some_table</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">fullname</span>
</div></pre></div>
</div>
<p>Upon compilation, a RETURNING clause, or database equivalent,
will be rendered within the statement.   For INSERT and UPDATE,
the values are the newly inserted/updated values.  For DELETE,
the values are those of the rows which were deleted.</p>
<p>Upon execution, the values of the columns to be returned are made
available via the result set and can be iterated using
<a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.fetchone" title="sqlalchemy.engine.CursorResult.fetchone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.fetchone()</span></code></a> and similar.
For DBAPIs which do not
natively support returning values (i.e. cx_oracle), SQLAlchemy will
approximate this behavior at the result level so that a reasonable
amount of behavioral neutrality is provided.</p>
<p>Note that not all databases/DBAPIs
support RETURNING.   For those backends with no support,
an exception is raised upon compilation and/or execution.
For those who do support it, the functionality across backends
varies greatly, including restrictions on executemany()
and other statements which return multiple rows. Please
read the documentation notes for the database in use in
order to determine the availability of RETURNING.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.sql.expression.Insert.returning.params.*cols"></span><strong>*cols</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.Insert.returning.params.*cols">¶</a> – series of columns, SQL expressions, or whole tables
entities to be returned.</p></li>
<li><p><span class="target" id="sqlalchemy.sql.expression.Insert.returning.params.sort_by_parameter_order"></span><strong>sort_by_parameter_order</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.Insert.returning.params.sort_by_parameter_order">¶</a> – <p>for a batch INSERT that is being
executed against multiple parameter sets, organize the results of
RETURNING so that the returned rows correspond to the order of
parameter sets passed in.  This applies only to an <a class="reference internal" href="../glossary.html#term-executemany"><span class="xref std std-term">executemany</span></a>
execution for supporting dialects and typically makes use of the
<a class="reference internal" href="../glossary.html#term-insertmanyvalues"><span class="xref std std-term">insertmanyvalues</span></a> feature.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0.10 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="connections.html#engine-insertmanyvalues-returning-order"><span class="std std-ref">将 RETURNING 行关联到参数集</span></a> - background on
sorting of RETURNING rows for bulk INSERT (Core level discussion)</p>
<p><a class="reference internal" href="../orm/queryguide/dml.html#orm-queryguide-bulk-insert-returning-ordered"><span class="std std-ref">将 RETURNING 记录与输入数据顺序关联</span></a> - example of
use with <a class="reference internal" href="../orm/queryguide/dml.html#orm-queryguide-bulk-insert"><span class="std std-ref">ORM 批量 INSERT 语句</span></a> (ORM level discussion)</p>
</div>
</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.return_defaults" title="sqlalchemy.sql.expression.UpdateBase.return_defaults"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.return_defaults()</span></code></a> - an alternative method tailored
towards efficient fetching of server-side defaults and triggers
for single-row INSERTs or UPDATEs.</p>
<p><a class="reference internal" href="../tutorial/data_insert.html#tutorial-insert-returning"><span class="std std-ref">INSERT…RETURNING</span></a> - in the <a class="reference internal" href="../tutorial/index.html#unified-tutorial"><span class="std std-ref">SQLAlchemy 统一教程</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.Insert.from_select">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.sql.expression.Insert"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.Insert.</span></code></a><span class="sig-name descname"><span class="pre">from_select</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_DMLColumnArgument</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">select</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Selectable" title="sqlalchemy.sql.expression.Selectable"><span class="pre">Selectable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_defaults</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.sql.expression.Insert.from_select" title="Link to this definition">¶</a></dt>
<dd><p>Return a new <a class="reference internal" href="#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> construct which represents
an <code class="docutils literal notranslate"><span class="pre">INSERT...FROM</span> <span class="pre">SELECT</span></code> statement.</p>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sel</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">table1</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="n">table1</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">table1</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">c</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">ins</span> <span class="o">=</span> <span class="n">table2</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span><span class="o">.</span><span class="n">from_select</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="n">sel</span><span class="p">)</span></pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.sql.expression.Insert.from_select.params.names"></span><strong>names</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.Insert.from_select.params.names">¶</a> – a sequence of string column names or
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
objects representing the target columns.</p></li>
<li><p><span class="target" id="sqlalchemy.sql.expression.Insert.from_select.params.select"></span><strong>select</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.Insert.from_select.params.select">¶</a> – a <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code></a> construct,
<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.FromClause" title="sqlalchemy.sql.expression.FromClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">FromClause</span></code></a>
or other construct which resolves into a
<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.FromClause" title="sqlalchemy.sql.expression.FromClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">FromClause</span></code></a>,
such as an ORM <a class="reference internal" href="../orm/queryguide/query.html#sqlalchemy.orm.Query" title="sqlalchemy.orm.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> object, etc.  The order of
columns returned from this FROM clause should correspond to the
order of columns sent as the <code class="docutils literal notranslate"><span class="pre">names</span></code> parameter;  while this
is not checked before passing along to the database, the database
would normally raise an exception if these column lists don’t
correspond.</p></li>
<li><p><span class="target" id="sqlalchemy.sql.expression.Insert.from_select.params.include_defaults"></span><strong>include_defaults</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.Insert.from_select.params.include_defaults">¶</a> – <p>if True, non-server default values and
SQL expressions as specified on <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects
(as documented in <a class="reference internal" href="defaults.html#metadata-defaults-toplevel"><span class="std std-ref">列 INSERT/UPDATE 默认值</span></a>) not
otherwise specified in the list of names will be rendered
into the INSERT and SELECT statements, so that these values are also
included in the data to be inserted.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>A Python-side default that uses a Python callable function
will only be invoked <strong>once</strong> for the whole statement, and <strong>not
per row</strong>.</p>
</div>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.Insert.inline">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.sql.expression.Insert"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.Insert.</span></code></a><span class="sig-name descname"><span class="pre">inline</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.sql.expression.Insert.inline" title="Link to this definition">¶</a></dt>
<dd><p>Make this <a class="reference internal" href="#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> construct “inline” .</p>
<p>When set, no attempt will be made to retrieve the
SQL-generated default values to be provided within the statement;
in particular,
this allows SQL expressions to be rendered ‘inline’ within the
statement without the need to pre-execute them beforehand; for
backends that support “returning”, this turns off the “implicit
returning” feature for the statement.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.4 版本发生变更: </span>the <a class="reference internal" href="#sqlalchemy.sql.expression.Insert.params.inline" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Insert.inline</span></code></a>
parameter
is now superseded by the <a class="reference internal" href="#sqlalchemy.sql.expression.Insert.inline" title="sqlalchemy.sql.expression.Insert.inline"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Insert.inline()</span></code></a> method.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.Insert.select">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.expression.Insert"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.Insert.</span></code></a><span class="sig-name descname"><span class="pre">select</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><span class="pre">Select</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Unpack</span><span class="p"><span class="pre">[</span></span><span class="pre">TupleAny</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.sql.expression.Insert.select" title="Link to this definition">¶</a></dt>
<dd><p>SELECT statement for INSERT .. FROM SELECT</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.Update">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.sql.expression.</span></span><span class="sig-name descname"><span class="pre">Update</span></span><a class="headerlink" href="#sqlalchemy.sql.expression.Update" title="Link to this definition">¶</a></dt>
<dd><p>Represent an Update construct.</p>
<p>The <a class="reference internal" href="#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal notranslate"><span class="pre">Update</span></code></a> object is created using the
<a class="reference internal" href="#sqlalchemy.sql.expression.update" title="sqlalchemy.sql.expression.update"><code class="xref py py-func docutils literal notranslate"><span class="pre">update()</span></code></a> function.</p>
<p>Available extension points:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">post_criteria</span></code>: applies additional logic after the <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> clause.</p></li>
</ul>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.sql.expression.Update.returning"><span class="sig-name descname">returning()</span></a>, <a class="reference internal" href="#sqlalchemy.sql.expression.Update.where"><span class="sig-name descname">where()</span></a>, <a class="reference internal" href="#sqlalchemy.sql.expression.Update.with_dialect_options"><span class="sig-name descname">with_dialect_options()</span></a>, <a class="reference internal" href="#sqlalchemy.sql.expression.Update.values"><span class="sig-name descname">values()</span></a>, <a class="reference internal" href="#sqlalchemy.sql.expression.Update.inline"><span class="sig-name descname">inline()</span></a>, <a class="reference internal" href="#sqlalchemy.sql.expression.Update.ordered_values"><span class="sig-name descname">ordered_values()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.Update</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.DMLWhereBase</span></code>, <a class="reference internal" href="#sqlalchemy.sql.expression.ValuesBase" title="sqlalchemy.sql.expression.ValuesBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.ValuesBase</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.HasSyntaxExtensions</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.Update.returning">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.sql.expression.Update"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.Update.</span></code></a><span class="sig-name descname"><span class="pre">returning</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">cols</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_ColumnsClauseArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_by_parameter_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">_UpdateBase__kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase" title="sqlalchemy.sql.expression.UpdateBase"><span class="pre">UpdateBase</span></a></span></span><a class="headerlink" href="#sqlalchemy.sql.expression.Update.returning" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.returning" title="sqlalchemy.sql.expression.UpdateBase.returning"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.returning()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase" title="sqlalchemy.sql.expression.UpdateBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">UpdateBase</span></code></a></p>
</div>
<p>Add a <a class="reference internal" href="../glossary.html#term-RETURNING"><span class="xref std std-term">RETURNING</span></a> or equivalent clause to this statement.</p>
<p>e.g.:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="p">(</span>
<span class="go">...     table.update()</span>
<span class="go">...     .where(table.c.data == &quot;value&quot;)</span>
<span class="go">...     .values(status=&quot;X&quot;)</span>
<span class="go">...     .returning(table.c.server_flag, table.c.updated_timestamp)</span>
<span class="go">... )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>
<div class='show_sql_print'><span class="k">UPDATE</span><span class="w"> </span><span class="n">some_table</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">status</span><span class="o">=</span><span class="p">:</span><span class="n">status</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">some_table</span><span class="p">.</span><span class="k">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">:</span><span class="n">data_1</span>
<span class="k">RETURNING</span><span class="w"> </span><span class="n">some_table</span><span class="p">.</span><span class="n">server_flag</span><span class="p">,</span><span class="w"> </span><span class="n">some_table</span><span class="p">.</span><span class="n">updated_timestamp</span>
</div></pre></div>
</div>
<p>The method may be invoked multiple times to add new entries to the
list of expressions to be returned.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4.0b2 版本加入: </span>The method may be invoked multiple times to
add new entries to the list of expressions to be returned.</p>
</div>
<p>The given collection of column expressions should be derived from the
table that is the target of the INSERT, UPDATE, or DELETE.  While
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects are typical, the elements can also be
expressions:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span><span class="o">.</span><span class="n">returning</span><span class="p">(</span>
<span class="go">...     (table.c.first_name + &quot; &quot; + table.c.last_name).label(&quot;fullname&quot;)</span>
<span class="go">... )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>
<div class='show_sql_print'><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">some_table</span><span class="w"> </span><span class="p">(</span><span class="n">first_name</span><span class="p">,</span><span class="w"> </span><span class="n">last_name</span><span class="p">)</span>
<span class="k">VALUES</span><span class="w"> </span><span class="p">(:</span><span class="n">first_name</span><span class="p">,</span><span class="w"> </span><span class="p">:</span><span class="n">last_name</span><span class="p">)</span>
<span class="k">RETURNING</span><span class="w"> </span><span class="n">some_table</span><span class="p">.</span><span class="n">first_name</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">:</span><span class="n">first_name_1</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">some_table</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">fullname</span>
</div></pre></div>
</div>
<p>Upon compilation, a RETURNING clause, or database equivalent,
will be rendered within the statement.   For INSERT and UPDATE,
the values are the newly inserted/updated values.  For DELETE,
the values are those of the rows which were deleted.</p>
<p>Upon execution, the values of the columns to be returned are made
available via the result set and can be iterated using
<a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.fetchone" title="sqlalchemy.engine.CursorResult.fetchone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.fetchone()</span></code></a> and similar.
For DBAPIs which do not
natively support returning values (i.e. cx_oracle), SQLAlchemy will
approximate this behavior at the result level so that a reasonable
amount of behavioral neutrality is provided.</p>
<p>Note that not all databases/DBAPIs
support RETURNING.   For those backends with no support,
an exception is raised upon compilation and/or execution.
For those who do support it, the functionality across backends
varies greatly, including restrictions on executemany()
and other statements which return multiple rows. Please
read the documentation notes for the database in use in
order to determine the availability of RETURNING.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.sql.expression.Update.returning.params.*cols"></span><strong>*cols</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.Update.returning.params.*cols">¶</a> – series of columns, SQL expressions, or whole tables
entities to be returned.</p></li>
<li><p><span class="target" id="sqlalchemy.sql.expression.Update.returning.params.sort_by_parameter_order"></span><strong>sort_by_parameter_order</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.Update.returning.params.sort_by_parameter_order">¶</a> – <p>for a batch INSERT that is being
executed against multiple parameter sets, organize the results of
RETURNING so that the returned rows correspond to the order of
parameter sets passed in.  This applies only to an <a class="reference internal" href="../glossary.html#term-executemany"><span class="xref std std-term">executemany</span></a>
execution for supporting dialects and typically makes use of the
<a class="reference internal" href="../glossary.html#term-insertmanyvalues"><span class="xref std std-term">insertmanyvalues</span></a> feature.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0.10 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="connections.html#engine-insertmanyvalues-returning-order"><span class="std std-ref">将 RETURNING 行关联到参数集</span></a> - background on
sorting of RETURNING rows for bulk INSERT (Core level discussion)</p>
<p><a class="reference internal" href="../orm/queryguide/dml.html#orm-queryguide-bulk-insert-returning-ordered"><span class="std std-ref">将 RETURNING 记录与输入数据顺序关联</span></a> - example of
use with <a class="reference internal" href="../orm/queryguide/dml.html#orm-queryguide-bulk-insert"><span class="std std-ref">ORM 批量 INSERT 语句</span></a> (ORM level discussion)</p>
</div>
</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.return_defaults" title="sqlalchemy.sql.expression.UpdateBase.return_defaults"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.return_defaults()</span></code></a> - an alternative method tailored
towards efficient fetching of server-side defaults and triggers
for single-row INSERTs or UPDATEs.</p>
<p><a class="reference internal" href="../tutorial/data_insert.html#tutorial-insert-returning"><span class="std std-ref">INSERT…RETURNING</span></a> - in the <a class="reference internal" href="../tutorial/index.html#unified-tutorial"><span class="std std-ref">SQLAlchemy 统一教程</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.Update.where">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.sql.expression.Update"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.Update.</span></code></a><span class="sig-name descname"><span class="pre">where</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">whereclause</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_ColumnExpressionArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.sql.expression.Update.where" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="xref py py-meth docutils literal notranslate"><span class="pre">DMLWhereBase.where()</span></code> <em>method of</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">DMLWhereBase</span></code></p>
</div>
<p>Return a new construct with the given expression(s) added to
its WHERE clause, joined to the existing clause via AND, if any.</p>
<p>Both <a class="reference internal" href="#sqlalchemy.sql.expression.Update.where" title="sqlalchemy.sql.expression.Update.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Update.where()</span></code></a> and <a class="reference internal" href="#sqlalchemy.sql.expression.Delete.where" title="sqlalchemy.sql.expression.Delete.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Delete.where()</span></code></a>
support multiple-table forms, including database-specific
<code class="docutils literal notranslate"><span class="pre">UPDATE...FROM</span></code> as well as <code class="docutils literal notranslate"><span class="pre">DELETE..USING</span></code>.  For backends that
don’t have multiple-table support, a backend agnostic approach
to using multiple tables is to make use of correlated subqueries.
See the linked tutorial sections below for examples.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="../tutorial/data_update.html#tutorial-correlated-updates"><span class="std std-ref">相关更新</span></a></p>
<p><a class="reference internal" href="../tutorial/data_update.html#tutorial-update-from"><span class="std std-ref">UPDATE..FROM</span></a></p>
<p><a class="reference internal" href="../tutorial/data_update.html#tutorial-multi-table-deletes"><span class="std std-ref">多表删除</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.Update.with_dialect_options">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.sql.expression.Update"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.Update.</span></code></a><span class="sig-name descname"><span class="pre">with_dialect_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">opt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.sql.expression.Update.with_dialect_options" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.with_dialect_options" title="sqlalchemy.sql.expression.UpdateBase.with_dialect_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.with_dialect_options()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase" title="sqlalchemy.sql.expression.UpdateBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">UpdateBase</span></code></a></p>
</div>
<p>Add dialect options to this INSERT/UPDATE/DELETE object.</p>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">upd</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span><span class="n">dialect_options</span><span class="p">(</span><span class="n">mysql_limit</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入: </span>- this method supersedes the dialect options
associated with the constructor.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.Update.values">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.sql.expression.Update"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.Update.</span></code></a><span class="sig-name descname"><span class="pre">values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_DMLColumnKeyMapping</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.sql.expression.Update.values" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <a class="reference internal" href="#sqlalchemy.sql.expression.ValuesBase.values" title="sqlalchemy.sql.expression.ValuesBase.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ValuesBase.values()</span></code></a> <em>method of</em> <a class="reference internal" href="#sqlalchemy.sql.expression.ValuesBase" title="sqlalchemy.sql.expression.ValuesBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValuesBase</span></code></a></p>
</div>
<p>Specify a fixed VALUES clause for an INSERT statement, or the SET
clause for an UPDATE.</p>
<p>Note that the <a class="reference internal" href="#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> and
<a class="reference internal" href="#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal notranslate"><span class="pre">Update</span></code></a>
constructs support
per-execution time formatting of the VALUES and/or SET clauses,
based on the arguments passed to <a class="reference internal" href="connections.html#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a>.
However, the <a class="reference internal" href="#sqlalchemy.sql.expression.ValuesBase.values" title="sqlalchemy.sql.expression.ValuesBase.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ValuesBase.values()</span></code></a> method can be used to “fix” a
particular set of parameters into the statement.</p>
<p>Multiple calls to <a class="reference internal" href="#sqlalchemy.sql.expression.ValuesBase.values" title="sqlalchemy.sql.expression.ValuesBase.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ValuesBase.values()</span></code></a> will produce a new
construct, each one with the parameter list modified to include
the new parameters sent.  In the typical case of a single
dictionary of parameters, the newly passed keys will replace
the same keys in the previous construct.  In the case of a list-based
“multiple values” construct, each new list of values is extended
onto the existing list of values.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.sql.expression.Update.values.params.**kwargs"></span><strong>**kwargs</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.Update.values.params.**kwargs">¶</a> – <p>key value pairs representing the string key
of a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
mapped to the value to be rendered into the
VALUES or SET clause:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">users</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;some name&quot;</span><span class="p">)</span>

<span class="n">users</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;some name&quot;</span><span class="p">)</span></pre></div>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.sql.expression.Update.values.params.*args"></span><strong>*args</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.Update.values.params.*args">¶</a> – <p>As an alternative to passing key/value parameters,
a dictionary, tuple, or list of dictionaries or tuples can be passed
as a single positional argument in order to form the VALUES or
SET clause of the statement.  The forms that are accepted vary
based on whether this is an <a class="reference internal" href="#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> or an
<a class="reference internal" href="#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal notranslate"><span class="pre">Update</span></code></a> construct.</p>
<p>For either an <a class="reference internal" href="#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> or
<a class="reference internal" href="#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal notranslate"><span class="pre">Update</span></code></a>
construct, a single dictionary can be passed, which works the same as
that of the kwargs form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">users</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;some name&quot;</span><span class="p">})</span>

<span class="n">users</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;some new name&quot;</span><span class="p">})</span></pre></div>
</div>
<p>Also for either form but more typically for the
<a class="reference internal" href="#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> construct, a tuple that contains an
entry for every column in the table is also accepted:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">users</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;some name&quot;</span><span class="p">))</span></pre></div>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> construct also supports being
passed a list of dictionaries or full-table-tuples, which on the
server will render the less common SQL syntax of “multiple values” -
this syntax is supported on backends such as SQLite, PostgreSQL,
MySQL, but not necessarily others:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">users</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;some name&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;some other name&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;yet another name&quot;</span><span class="p">},</span>
    <span class="p">]</span>
<span class="p">)</span></pre></div>
</div>
<p>The above form would render a multiple VALUES statement similar to:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span>
<span class="w">                </span><span class="p">(:</span><span class="n">name_1</span><span class="p">),</span>
<span class="w">                </span><span class="p">(:</span><span class="n">name_2</span><span class="p">),</span>
<span class="w">                </span><span class="p">(:</span><span class="n">name_3</span><span class="p">)</span></pre></div>
</div>
<p>It is essential to note that <strong>passing multiple values is
NOT the same as using traditional executemany() form</strong>.  The above
syntax is a <strong>special</strong> syntax not typically used.  To emit an
INSERT statement against multiple rows, the normal method is
to pass a multiple values list to the
<a class="reference internal" href="connections.html#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a>
method, which is supported by all database backends and is generally
more efficient for a very large number of parameters.</p>
<blockquote>
<div><blockquote>
<div><div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="../tutorial/dbapi_transactions.html#tutorial-multiple-parameters"><span class="std std-ref">发送多个参数</span></a> - an introduction to
the traditional Core method of multiple parameter set
invocation for INSERTs and other statements.</p>
</div>
</div></blockquote>
<p>The UPDATE construct also supports rendering the SET parameters
in a specific order.  For this feature refer to the
<a class="reference internal" href="#sqlalchemy.sql.expression.Update.ordered_values" title="sqlalchemy.sql.expression.Update.ordered_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Update.ordered_values()</span></code></a> method.</p>
<blockquote>
<div><div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.sql.expression.Update.ordered_values" title="sqlalchemy.sql.expression.Update.ordered_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Update.ordered_values()</span></code></a></p>
</div>
</div></blockquote>
</div></blockquote>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.Update.inline">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.sql.expression.Update"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.Update.</span></code></a><span class="sig-name descname"><span class="pre">inline</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.sql.expression.Update.inline" title="Link to this definition">¶</a></dt>
<dd><p>Make this <a class="reference internal" href="#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal notranslate"><span class="pre">Update</span></code></a> construct “inline” .</p>
<p>When set, SQL defaults present on <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
objects via the
<code class="docutils literal notranslate"><span class="pre">default</span></code> keyword will be compiled ‘inline’ into the statement and
not pre-executed.  This means that their values will not be available
in the dictionary returned from
<a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.last_updated_params" title="sqlalchemy.engine.CursorResult.last_updated_params"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.last_updated_params()</span></code></a>.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.4 版本发生变更: </span>the <a class="reference internal" href="#sqlalchemy.sql.expression.update.params.inline" title="sqlalchemy.sql.expression.update"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">update.inline</span></code></a>
parameter
is now superseded by the <a class="reference internal" href="#sqlalchemy.sql.expression.Update.inline" title="sqlalchemy.sql.expression.Update.inline"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Update.inline()</span></code></a> method.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.Update.ordered_values">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.sql.expression.Update"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.Update.</span></code></a><span class="sig-name descname"><span class="pre">ordered_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.Tuple" title="sqlalchemy.sql.expression.Tuple"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_DMLColumnArgument</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.sql.expression.Update.ordered_values" title="Link to this definition">¶</a></dt>
<dd><p>Specify the VALUES clause of this UPDATE statement with an explicit
parameter ordering that will be maintained in the SET clause of the
resulting UPDATE statement.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">stmt</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span><span class="n">ordered_values</span><span class="p">((</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;ed&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;ident&quot;</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">))</span></pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="../tutorial/data_update.html#tutorial-parameter-ordered-updates"><span class="std std-ref">参数有序更新</span></a> - full example of the
<a class="reference internal" href="#sqlalchemy.sql.expression.Update.ordered_values" title="sqlalchemy.sql.expression.Update.ordered_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Update.ordered_values()</span></code></a> method.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.4 版本发生变更: </span>The <a class="reference internal" href="#sqlalchemy.sql.expression.Update.ordered_values" title="sqlalchemy.sql.expression.Update.ordered_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Update.ordered_values()</span></code></a>
method
supersedes the
<a class="reference internal" href="#sqlalchemy.sql.expression.update.params.preserve_parameter_order" title="sqlalchemy.sql.expression.update"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">update.preserve_parameter_order</span></code></a>
parameter, which will be removed in SQLAlchemy 2.0.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.UpdateBase">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.sql.expression.</span></span><span class="sig-name descname"><span class="pre">UpdateBase</span></span><a class="headerlink" href="#sqlalchemy.sql.expression.UpdateBase" title="Link to this definition">¶</a></dt>
<dd><p>Form the base for <code class="docutils literal notranslate"><span class="pre">INSERT</span></code>, <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code>, and <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> statements.</p>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.entity_description"><span class="sig-name descname">entity_description</span></a>, <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.exported_columns"><span class="sig-name descname">exported_columns</span></a>, <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.is_derived_from"><span class="sig-name descname">is_derived_from()</span></a>, <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.params"><span class="sig-name descname">params()</span></a>, <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.return_defaults"><span class="sig-name descname">return_defaults()</span></a>, <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.returning"><span class="sig-name descname">returning()</span></a>, <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.returning_column_descriptions"><span class="sig-name descname">returning_column_descriptions</span></a>, <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.with_dialect_options"><span class="sig-name descname">with_dialect_options()</span></a>, <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.with_hint"><span class="sig-name descname">with_hint()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase" title="sqlalchemy.sql.expression.UpdateBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.UpdateBase</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.roles.DMLRole</span></code>, <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.HasCTE" title="sqlalchemy.sql.expression.HasCTE"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.HasCTE</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.HasCompileState</span></code>, <a class="reference internal" href="foundation.html#sqlalchemy.sql.base.DialectKWArgs" title="sqlalchemy.sql.base.DialectKWArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.base.DialectKWArgs</span></code></a>, <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.HasPrefixes" title="sqlalchemy.sql.expression.HasPrefixes"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.HasPrefixes</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.Generative</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.ExecutableReturnsRows</span></code>, <a class="reference internal" href="foundation.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.ClauseElement</span></code></a>)</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.UpdateBase.entity_description">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.UpdateBase.</span></code></a><span class="sig-name descname"><span class="pre">entity_description</span></span><a class="headerlink" href="#sqlalchemy.sql.expression.UpdateBase.entity_description" title="Link to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="../glossary.html#term-plugin-enabled"><span class="xref std std-term">plugin-enabled</span></a> description of the table and/or
entity which this DML construct is operating against.</p>
<p>This attribute is generally useful when using the ORM, as an
extended structure which includes information about mapped
entities is returned.  The section <a class="reference internal" href="../orm/queryguide/api.html#queryguide-inspection"><span class="std std-ref">检查启用 ORM 的 SELECT 和 DML 语句中的实体和列</span></a>
contains more background.</p>
<p>For a Core statement, the structure returned by this accessor
is derived from the <code class="xref py py-attr docutils literal notranslate"><span class="pre">UpdateBase.table</span></code> attribute, and
refers to the <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> being inserted, updated, or deleted:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="n">insert</span><span class="p">(</span><span class="n">user_table</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span><span class="o">.</span><span class="n">entity_description</span>
<span class="go">{</span>
<span class="go">    &quot;name&quot;: &quot;user_table&quot;,</span>
<span class="go">    &quot;table&quot;: Table(&quot;user_table&quot;, ...)</span>
<span class="go">}</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4.33 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.returning_column_descriptions" title="sqlalchemy.sql.expression.UpdateBase.returning_column_descriptions"><code class="xref py py-attr docutils literal notranslate"><span class="pre">UpdateBase.returning_column_descriptions</span></code></a></p>
<p><a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Select.column_descriptions" title="sqlalchemy.sql.expression.Select.column_descriptions"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Select.column_descriptions</span></code></a> - entity information for
a <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code></a> construct</p>
<p><a class="reference internal" href="../orm/queryguide/api.html#queryguide-inspection"><span class="std std-ref">检查启用 ORM 的 SELECT 和 DML 语句中的实体和列</span></a> - ORM background</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.UpdateBase.exported_columns">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.UpdateBase.</span></code></a><span class="sig-name descname"><span class="pre">exported_columns</span></span><a class="headerlink" href="#sqlalchemy.sql.expression.UpdateBase.exported_columns" title="Link to this definition">¶</a></dt>
<dd><p>Return the RETURNING columns as a column collection for this
statement.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.UpdateBase.is_derived_from">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.UpdateBase.</span></code></a><span class="sig-name descname"><span class="pre">is_derived_from</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fromclause</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.FromClause" title="sqlalchemy.sql.selectable.FromClause"><span class="pre">FromClause</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.sql.expression.UpdateBase.is_derived_from" title="Link to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if this <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.ReturnsRows" title="sqlalchemy.sql.expression.ReturnsRows"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReturnsRows</span></code></a> is
‘derived’ from the given <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.FromClause" title="sqlalchemy.sql.expression.FromClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">FromClause</span></code></a>.</p>
<p>Since these are DMLs, we dont want such statements ever being adapted
so we return False for derives.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.UpdateBase.params">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.UpdateBase.</span></code></a><span class="sig-name descname"><span class="pre">params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">arg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">NoReturn</span></span></span><a class="headerlink" href="#sqlalchemy.sql.expression.UpdateBase.params" title="Link to this definition">¶</a></dt>
<dd><p>Set the parameters for the statement.</p>
<p>This method raises <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code> on the base class,
and is overridden by <a class="reference internal" href="#sqlalchemy.sql.expression.ValuesBase" title="sqlalchemy.sql.expression.ValuesBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValuesBase</span></code></a> to provide the
SET/VALUES clause of UPDATE and INSERT.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.UpdateBase.return_defaults">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.UpdateBase.</span></code></a><span class="sig-name descname"><span class="pre">return_defaults</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">cols</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_DMLColumnArgument</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">supplemental_cols</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">_DMLColumnArgument</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_by_parameter_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.sql.expression.UpdateBase.return_defaults" title="Link to this definition">¶</a></dt>
<dd><p>Make use of a <a class="reference internal" href="../glossary.html#term-RETURNING"><span class="xref std std-term">RETURNING</span></a> clause for the purpose
of fetching server-side expressions and defaults, for supporting
backends only.</p>
<div class="admonition deepalchemy">
<p class="admonition-title">Deep Alchemy</p>
<p>The <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.return_defaults" title="sqlalchemy.sql.expression.UpdateBase.return_defaults"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.return_defaults()</span></code></a> method is used by the ORM
for its internal work in fetching newly generated primary key
and server default values, in particular to provide the underyling
implementation of the <a class="reference internal" href="../orm/mapping_api.html#sqlalchemy.orm.Mapper.params.eager_defaults" title="sqlalchemy.orm.Mapper"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Mapper.eager_defaults</span></code></a>
ORM feature as well as to allow RETURNING support with bulk
ORM inserts.  Its behavior is fairly idiosyncratic
and is not really intended for general use.  End users should
stick with using <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.returning" title="sqlalchemy.sql.expression.UpdateBase.returning"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.returning()</span></code></a> in order to
add RETURNING clauses to their INSERT, UPDATE and DELETE
statements.</p>
</div>
<p>Normally, a single row INSERT statement will automatically populate the
<a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a> attribute when executed,
which stores the primary key of the row that was just inserted in the
form of a <a class="reference internal" href="connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> object with column names as named tuple keys
(and the <a class="reference internal" href="connections.html#sqlalchemy.engine.Row._mapping" title="sqlalchemy.engine.Row._mapping"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._mapping</span></code></a> view fully populated as well). The
dialect in use chooses the strategy to use in order to populate this
data; if it was generated using server-side defaults and / or SQL
expressions, dialect-specific approaches such as <code class="docutils literal notranslate"><span class="pre">cursor.lastrowid</span></code>
or <code class="docutils literal notranslate"><span class="pre">RETURNING</span></code> are typically used to acquire the new primary key
value.</p>
<p>However, when the statement is modified by calling
<a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.return_defaults" title="sqlalchemy.sql.expression.UpdateBase.return_defaults"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.return_defaults()</span></code></a> before executing the statement,
additional behaviors take place <strong>only</strong> for backends that support
RETURNING and for <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects that maintain the
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.params.implicit_returning" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.implicit_returning</span></code></a> parameter at its default value of
<code class="docutils literal notranslate"><span class="pre">True</span></code>. In these cases, when the <a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> is returned
from the statement’s execution, not only will
<a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a> be populated as always, the
<a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.returned_defaults" title="sqlalchemy.engine.CursorResult.returned_defaults"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.returned_defaults</span></code></a> attribute will also be
populated with a <a class="reference internal" href="connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> named-tuple representing the full range
of server generated
values from that single row, including values for any columns that
specify <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.server_default" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.server_default</span></code></a> or which make use of
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.default" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.default</span></code></a> using a SQL expression.</p>
<p>When invoking INSERT statements with multiple rows using
<a class="reference internal" href="connections.html#engine-insertmanyvalues"><span class="std std-ref">insertmanyvalues</span></a>, the
<a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.return_defaults" title="sqlalchemy.sql.expression.UpdateBase.return_defaults"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.return_defaults()</span></code></a> modifier will have the effect of
the <a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.inserted_primary_key_rows" title="sqlalchemy.engine.CursorResult.inserted_primary_key_rows"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key_rows</span></code></a> and
<a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.returned_defaults_rows" title="sqlalchemy.engine.CursorResult.returned_defaults_rows"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.returned_defaults_rows</span></code></a> attributes being
fully populated with lists of <a class="reference internal" href="connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects representing newly
inserted primary key values as well as newly inserted server generated
values for each row inserted. The
<a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a> and
<a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.returned_defaults" title="sqlalchemy.engine.CursorResult.returned_defaults"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.returned_defaults</span></code></a> attributes will also continue
to be populated with the first row of these two collections.</p>
<p>If the backend does not support RETURNING or the <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> in use
has disabled <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.params.implicit_returning" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.implicit_returning</span></code></a>, then no RETURNING
clause is added and no additional data is fetched, however the
INSERT, UPDATE or DELETE statement proceeds normally.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">stmt</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s2">&quot;newdata&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">return_defaults</span><span class="p">()</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>

<span class="n">server_created_at</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">returned_defaults</span><span class="p">[</span><span class="s2">&quot;created_at&quot;</span><span class="p">]</span></pre></div>
</div>
<p>When used against an UPDATE statement
<a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.return_defaults" title="sqlalchemy.sql.expression.UpdateBase.return_defaults"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.return_defaults()</span></code></a> instead looks for columns that
include <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.onupdate" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.onupdate</span></code></a> or
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.server_onupdate" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.server_onupdate</span></code></a> parameters assigned, when
constructing the columns that will be included in the RETURNING clause
by default if explicit columns were not specified. When used against a
DELETE statement, no columns are included in RETURNING by default, they
instead must be specified explicitly as there are no columns that
normally change values when a DELETE statement proceeds.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入: </span><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.return_defaults" title="sqlalchemy.sql.expression.UpdateBase.return_defaults"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.return_defaults()</span></code></a> is supported
for DELETE statements also and has been moved from
<a class="reference internal" href="#sqlalchemy.sql.expression.ValuesBase" title="sqlalchemy.sql.expression.ValuesBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValuesBase</span></code></a> to <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase" title="sqlalchemy.sql.expression.UpdateBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">UpdateBase</span></code></a>.</p>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.return_defaults" title="sqlalchemy.sql.expression.UpdateBase.return_defaults"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.return_defaults()</span></code></a> method is mutually exclusive
against the <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.returning" title="sqlalchemy.sql.expression.UpdateBase.returning"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.returning()</span></code></a> method and errors will be
raised during the SQL compilation process if both are used at the same
time on one statement. The RETURNING clause of the INSERT, UPDATE or
DELETE statement is therefore controlled by only one of these methods
at a time.</p>
<p>The <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.return_defaults" title="sqlalchemy.sql.expression.UpdateBase.return_defaults"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.return_defaults()</span></code></a> method differs from
<a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.returning" title="sqlalchemy.sql.expression.UpdateBase.returning"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.returning()</span></code></a> in these ways:</p>
<ol class="arabic">
<li><p><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.return_defaults" title="sqlalchemy.sql.expression.UpdateBase.return_defaults"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.return_defaults()</span></code></a> method causes the
<a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.returned_defaults" title="sqlalchemy.engine.CursorResult.returned_defaults"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.returned_defaults</span></code></a> collection to be populated
with the first row from the RETURNING result. This attribute is not
populated when using <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.returning" title="sqlalchemy.sql.expression.UpdateBase.returning"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.returning()</span></code></a>.</p></li>
<li><p><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.return_defaults" title="sqlalchemy.sql.expression.UpdateBase.return_defaults"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.return_defaults()</span></code></a> is compatible with existing
logic used to fetch auto-generated primary key values that are then
populated into the <a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a>
attribute. By contrast, using <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.returning" title="sqlalchemy.sql.expression.UpdateBase.returning"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.returning()</span></code></a> will
have the effect of the <a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a>
attribute being left unpopulated.</p></li>
<li><p><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.return_defaults" title="sqlalchemy.sql.expression.UpdateBase.return_defaults"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.return_defaults()</span></code></a> can be called against any
backend. Backends that don’t support RETURNING will skip the usage
of the feature, rather than raising an exception, <em>unless</em>
<code class="docutils literal notranslate"><span class="pre">supplemental_cols</span></code> is passed. The return value
of <a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.returned_defaults" title="sqlalchemy.engine.CursorResult.returned_defaults"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.returned_defaults</span></code></a> will be <code class="docutils literal notranslate"><span class="pre">None</span></code>
for backends that don’t support RETURNING or for which the target
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> sets <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.params.implicit_returning" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.implicit_returning</span></code></a> to
<code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p>An INSERT statement invoked with executemany() is supported if the
backend database driver supports the
<a class="reference internal" href="connections.html#engine-insertmanyvalues"><span class="std std-ref">insertmanyvalues</span></a>
feature which is now supported by most SQLAlchemy-included backends.
When executemany is used, the
<a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.returned_defaults_rows" title="sqlalchemy.engine.CursorResult.returned_defaults_rows"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.returned_defaults_rows</span></code></a> and
<a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.inserted_primary_key_rows" title="sqlalchemy.engine.CursorResult.inserted_primary_key_rows"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key_rows</span></code></a> accessors
will return the inserted defaults and primary keys.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入: </span>Added
<a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.returned_defaults_rows" title="sqlalchemy.engine.CursorResult.returned_defaults_rows"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.returned_defaults_rows</span></code></a> and
<a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.inserted_primary_key_rows" title="sqlalchemy.engine.CursorResult.inserted_primary_key_rows"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key_rows</span></code></a> accessors.
In version 2.0, the underlying implementation which fetches and
populates the data for these attributes was generalized to be
supported by most backends, whereas in 1.4 they were only
supported by the <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code> driver.</p>
</div>
</li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.sql.expression.UpdateBase.return_defaults.params.cols"></span><strong>cols</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.UpdateBase.return_defaults.params.cols">¶</a> – optional list of column key names or
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> that acts as a filter for those columns that
will be fetched.</p></li>
<li><p><span class="target" id="sqlalchemy.sql.expression.UpdateBase.return_defaults.params.supplemental_cols"></span><strong>supplemental_cols</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.UpdateBase.return_defaults.params.supplemental_cols">¶</a> – <p>optional list of RETURNING expressions,
in the same form as one would pass to the
<a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.returning" title="sqlalchemy.sql.expression.UpdateBase.returning"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.returning()</span></code></a> method. When present, the additional
columns will be included in the RETURNING clause, and the
<a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a> object will be “rewound” when returned, so
that methods like <a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.all" title="sqlalchemy.engine.CursorResult.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.all()</span></code></a> will return new rows
mostly as though the statement used <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.returning" title="sqlalchemy.sql.expression.UpdateBase.returning"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.returning()</span></code></a>
directly. However, unlike when using <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.returning" title="sqlalchemy.sql.expression.UpdateBase.returning"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.returning()</span></code></a>
directly, the <strong>order of the columns is undefined</strong>, so can only be
targeted using names or <a class="reference internal" href="connections.html#sqlalchemy.engine.Row._mapping" title="sqlalchemy.engine.Row._mapping"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Row._mapping</span></code></a> keys; they cannot
reliably be targeted positionally.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.sql.expression.UpdateBase.return_defaults.params.sort_by_parameter_order"></span><strong>sort_by_parameter_order</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.UpdateBase.return_defaults.params.sort_by_parameter_order">¶</a> – <p>for a batch INSERT that is being
executed against multiple parameter sets, organize the results of
RETURNING so that the returned rows correspond to the order of
parameter sets passed in.  This applies only to an <a class="reference internal" href="../glossary.html#term-executemany"><span class="xref std std-term">executemany</span></a>
execution for supporting dialects and typically makes use of the
<a class="reference internal" href="../glossary.html#term-insertmanyvalues"><span class="xref std std-term">insertmanyvalues</span></a> feature.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0.10 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="connections.html#engine-insertmanyvalues-returning-order"><span class="std std-ref">将 RETURNING 行关联到参数集</span></a> - background on
sorting of RETURNING rows for bulk INSERT</p>
</div>
</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.returning" title="sqlalchemy.sql.expression.UpdateBase.returning"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.returning()</span></code></a></p>
<p><a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.returned_defaults" title="sqlalchemy.engine.CursorResult.returned_defaults"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.returned_defaults</span></code></a></p>
<p><a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.returned_defaults_rows" title="sqlalchemy.engine.CursorResult.returned_defaults_rows"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.returned_defaults_rows</span></code></a></p>
<p><a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.inserted_primary_key" title="sqlalchemy.engine.CursorResult.inserted_primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key</span></code></a></p>
<p><a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.inserted_primary_key_rows" title="sqlalchemy.engine.CursorResult.inserted_primary_key_rows"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CursorResult.inserted_primary_key_rows</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.UpdateBase.returning">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.UpdateBase.</span></code></a><span class="sig-name descname"><span class="pre">returning</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">cols</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_ColumnsClauseArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_by_parameter_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">_UpdateBase__kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase" title="sqlalchemy.sql.expression.UpdateBase"><span class="pre">UpdateBase</span></a></span></span><a class="headerlink" href="#sqlalchemy.sql.expression.UpdateBase.returning" title="Link to this definition">¶</a></dt>
<dd><p>Add a <a class="reference internal" href="../glossary.html#term-RETURNING"><span class="xref std std-term">RETURNING</span></a> or equivalent clause to this statement.</p>
<p>e.g.:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="p">(</span>
<span class="go">...     table.update()</span>
<span class="go">...     .where(table.c.data == &quot;value&quot;)</span>
<span class="go">...     .values(status=&quot;X&quot;)</span>
<span class="go">...     .returning(table.c.server_flag, table.c.updated_timestamp)</span>
<span class="go">... )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>
<div class='show_sql_print'><span class="k">UPDATE</span><span class="w"> </span><span class="n">some_table</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">status</span><span class="o">=</span><span class="p">:</span><span class="n">status</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">some_table</span><span class="p">.</span><span class="k">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">:</span><span class="n">data_1</span>
<span class="k">RETURNING</span><span class="w"> </span><span class="n">some_table</span><span class="p">.</span><span class="n">server_flag</span><span class="p">,</span><span class="w"> </span><span class="n">some_table</span><span class="p">.</span><span class="n">updated_timestamp</span>
</div></pre></div>
</div>
<p>The method may be invoked multiple times to add new entries to the
list of expressions to be returned.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4.0b2 版本加入: </span>The method may be invoked multiple times to
add new entries to the list of expressions to be returned.</p>
</div>
<p>The given collection of column expressions should be derived from the
table that is the target of the INSERT, UPDATE, or DELETE.  While
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects are typical, the elements can also be
expressions:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span><span class="o">.</span><span class="n">returning</span><span class="p">(</span>
<span class="go">...     (table.c.first_name + &quot; &quot; + table.c.last_name).label(&quot;fullname&quot;)</span>
<span class="go">... )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>
<div class='show_sql_print'><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">some_table</span><span class="w"> </span><span class="p">(</span><span class="n">first_name</span><span class="p">,</span><span class="w"> </span><span class="n">last_name</span><span class="p">)</span>
<span class="k">VALUES</span><span class="w"> </span><span class="p">(:</span><span class="n">first_name</span><span class="p">,</span><span class="w"> </span><span class="p">:</span><span class="n">last_name</span><span class="p">)</span>
<span class="k">RETURNING</span><span class="w"> </span><span class="n">some_table</span><span class="p">.</span><span class="n">first_name</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">:</span><span class="n">first_name_1</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">some_table</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">fullname</span>
</div></pre></div>
</div>
<p>Upon compilation, a RETURNING clause, or database equivalent,
will be rendered within the statement.   For INSERT and UPDATE,
the values are the newly inserted/updated values.  For DELETE,
the values are those of the rows which were deleted.</p>
<p>Upon execution, the values of the columns to be returned are made
available via the result set and can be iterated using
<a class="reference internal" href="connections.html#sqlalchemy.engine.CursorResult.fetchone" title="sqlalchemy.engine.CursorResult.fetchone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorResult.fetchone()</span></code></a> and similar.
For DBAPIs which do not
natively support returning values (i.e. cx_oracle), SQLAlchemy will
approximate this behavior at the result level so that a reasonable
amount of behavioral neutrality is provided.</p>
<p>Note that not all databases/DBAPIs
support RETURNING.   For those backends with no support,
an exception is raised upon compilation and/or execution.
For those who do support it, the functionality across backends
varies greatly, including restrictions on executemany()
and other statements which return multiple rows. Please
read the documentation notes for the database in use in
order to determine the availability of RETURNING.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.sql.expression.UpdateBase.returning.params.*cols"></span><strong>*cols</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.UpdateBase.returning.params.*cols">¶</a> – series of columns, SQL expressions, or whole tables
entities to be returned.</p></li>
<li><p><span class="target" id="sqlalchemy.sql.expression.UpdateBase.returning.params.sort_by_parameter_order"></span><strong>sort_by_parameter_order</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.UpdateBase.returning.params.sort_by_parameter_order">¶</a> – <p>for a batch INSERT that is being
executed against multiple parameter sets, organize the results of
RETURNING so that the returned rows correspond to the order of
parameter sets passed in.  This applies only to an <a class="reference internal" href="../glossary.html#term-executemany"><span class="xref std std-term">executemany</span></a>
execution for supporting dialects and typically makes use of the
<a class="reference internal" href="../glossary.html#term-insertmanyvalues"><span class="xref std std-term">insertmanyvalues</span></a> feature.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0.10 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="connections.html#engine-insertmanyvalues-returning-order"><span class="std std-ref">将 RETURNING 行关联到参数集</span></a> - background on
sorting of RETURNING rows for bulk INSERT (Core level discussion)</p>
<p><a class="reference internal" href="../orm/queryguide/dml.html#orm-queryguide-bulk-insert-returning-ordered"><span class="std std-ref">将 RETURNING 记录与输入数据顺序关联</span></a> - example of
use with <a class="reference internal" href="../orm/queryguide/dml.html#orm-queryguide-bulk-insert"><span class="std std-ref">ORM 批量 INSERT 语句</span></a> (ORM level discussion)</p>
</div>
</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.return_defaults" title="sqlalchemy.sql.expression.UpdateBase.return_defaults"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.return_defaults()</span></code></a> - an alternative method tailored
towards efficient fetching of server-side defaults and triggers
for single-row INSERTs or UPDATEs.</p>
<p><a class="reference internal" href="../tutorial/data_insert.html#tutorial-insert-returning"><span class="std std-ref">INSERT…RETURNING</span></a> - in the <a class="reference internal" href="../tutorial/index.html#unified-tutorial"><span class="std std-ref">SQLAlchemy 统一教程</span></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.UpdateBase.returning_column_descriptions">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.UpdateBase.</span></code></a><span class="sig-name descname"><span class="pre">returning_column_descriptions</span></span><a class="headerlink" href="#sqlalchemy.sql.expression.UpdateBase.returning_column_descriptions" title="Link to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="../glossary.html#term-plugin-enabled"><span class="xref std std-term">plugin-enabled</span></a> description of the columns
which this DML construct is RETURNING against, in other words
the expressions established as part of <a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.returning" title="sqlalchemy.sql.expression.UpdateBase.returning"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.returning()</span></code></a>.</p>
<p>This attribute is generally useful when using the ORM, as an
extended structure which includes information about mapped
entities is returned.  The section <a class="reference internal" href="../orm/queryguide/api.html#queryguide-inspection"><span class="std std-ref">检查启用 ORM 的 SELECT 和 DML 语句中的实体和列</span></a>
contains more background.</p>
<p>For a Core statement, the structure returned by this accessor is
derived from the same objects that are returned by the
<a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.exported_columns" title="sqlalchemy.sql.expression.UpdateBase.exported_columns"><code class="xref py py-attr docutils literal notranslate"><span class="pre">UpdateBase.exported_columns</span></code></a> accessor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="n">insert</span><span class="p">(</span><span class="n">user_table</span><span class="p">)</span><span class="o">.</span><span class="n">returning</span><span class="p">(</span><span class="n">user_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">user_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span><span class="o">.</span><span class="n">entity_description</span>
<span class="go">[</span>
<span class="go">    {</span>
<span class="go">        &quot;name&quot;: &quot;id&quot;,</span>
<span class="go">        &quot;type&quot;: Integer,</span>
<span class="go">        &quot;expr&quot;: Column(&quot;id&quot;, Integer(), table=&lt;user&gt;, ...)</span>
<span class="go">    },</span>
<span class="go">    {</span>
<span class="go">        &quot;name&quot;: &quot;name&quot;,</span>
<span class="go">        &quot;type&quot;: String(),</span>
<span class="go">        &quot;expr&quot;: Column(&quot;name&quot;, String(), table=&lt;user&gt;, ...)</span>
<span class="go">    },</span>
<span class="go">]</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4.33 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.entity_description" title="sqlalchemy.sql.expression.UpdateBase.entity_description"><code class="xref py py-attr docutils literal notranslate"><span class="pre">UpdateBase.entity_description</span></code></a></p>
<p><a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Select.column_descriptions" title="sqlalchemy.sql.expression.Select.column_descriptions"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Select.column_descriptions</span></code></a> - entity information for
a <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code></a> construct</p>
<p><a class="reference internal" href="../orm/queryguide/api.html#queryguide-inspection"><span class="std std-ref">检查启用 ORM 的 SELECT 和 DML 语句中的实体和列</span></a> - ORM background</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.UpdateBase.with_dialect_options">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.UpdateBase.</span></code></a><span class="sig-name descname"><span class="pre">with_dialect_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">opt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.sql.expression.UpdateBase.with_dialect_options" title="Link to this definition">¶</a></dt>
<dd><p>Add dialect options to this INSERT/UPDATE/DELETE object.</p>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">upd</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span><span class="n">dialect_options</span><span class="p">(</span><span class="n">mysql_limit</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入: </span>- this method supersedes the dialect options
associated with the constructor.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.UpdateBase.with_hint">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.UpdateBase.</span></code></a><span class="sig-name descname"><span class="pre">with_hint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">selectable</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_DMLTableArgument</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dialect_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'*'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.sql.expression.UpdateBase.with_hint" title="Link to this definition">¶</a></dt>
<dd><p>Add a table hint for a single table to this
INSERT/UPDATE/DELETE statement.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.with_hint" title="sqlalchemy.sql.expression.UpdateBase.with_hint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.with_hint()</span></code></a> currently applies only to
Microsoft SQL Server.  For MySQL INSERT/UPDATE/DELETE hints, use
<code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.prefix_with()</span></code>.</p>
</div>
<p>The text of the hint is rendered in the appropriate
location for the database backend in use, relative
to the <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> that is the subject of this
statement, or optionally to that of the given
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> passed as the <code class="docutils literal notranslate"><span class="pre">selectable</span></code> argument.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">dialect_name</span></code> option will limit the rendering of a particular
hint to a particular backend. Such as, to add a hint
that only takes effect for SQL Server:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mytable</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span><span class="o">.</span><span class="n">with_hint</span><span class="p">(</span><span class="s2">&quot;WITH (PAGLOCK)&quot;</span><span class="p">,</span> <span class="n">dialect_name</span><span class="o">=</span><span class="s2">&quot;mssql&quot;</span><span class="p">)</span></pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.sql.expression.UpdateBase.with_hint.params.text"></span><strong>text</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.UpdateBase.with_hint.params.text">¶</a> – Text of the hint.</p></li>
<li><p><span class="target" id="sqlalchemy.sql.expression.UpdateBase.with_hint.params.selectable"></span><strong>selectable</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.UpdateBase.with_hint.params.selectable">¶</a> – optional <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> that specifies
an element of the FROM clause within an UPDATE or DELETE
to be the subject of the hint - applies only to certain backends.</p></li>
<li><p><span class="target" id="sqlalchemy.sql.expression.UpdateBase.with_hint.params.dialect_name"></span><strong>dialect_name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.UpdateBase.with_hint.params.dialect_name">¶</a> – defaults to <code class="docutils literal notranslate"><span class="pre">*</span></code>, if specified as the name
of a particular dialect, will apply these hints only when
that dialect is in use.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.ValuesBase">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.sql.expression.</span></span><span class="sig-name descname"><span class="pre">ValuesBase</span></span><a class="headerlink" href="#sqlalchemy.sql.expression.ValuesBase" title="Link to this definition">¶</a></dt>
<dd><p>Supplies support for <a class="reference internal" href="#sqlalchemy.sql.expression.ValuesBase.values" title="sqlalchemy.sql.expression.ValuesBase.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ValuesBase.values()</span></code></a> to
INSERT and UPDATE constructs.</p>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.sql.expression.ValuesBase.select"><span class="sig-name descname">select</span></a>, <a class="reference internal" href="#sqlalchemy.sql.expression.ValuesBase.values"><span class="sig-name descname">values()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.sql.expression.ValuesBase" title="sqlalchemy.sql.expression.ValuesBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.ValuesBase</span></code></a> (<a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase" title="sqlalchemy.sql.expression.UpdateBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.UpdateBase</span></code></a>)</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.ValuesBase.select">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.expression.ValuesBase"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.ValuesBase.</span></code></a><span class="sig-name descname"><span class="pre">select</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><span class="pre">Select</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Unpack</span><span class="p"><span class="pre">[</span></span><span class="pre">TupleAny</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.sql.expression.ValuesBase.select" title="Link to this definition">¶</a></dt>
<dd><p>SELECT statement for INSERT .. FROM SELECT</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.sql.expression.ValuesBase.values">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.sql.expression.ValuesBase"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.ValuesBase.</span></code></a><span class="sig-name descname"><span class="pre">values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_DMLColumnKeyMapping</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.sql.expression.ValuesBase.values" title="Link to this definition">¶</a></dt>
<dd><p>Specify a fixed VALUES clause for an INSERT statement, or the SET
clause for an UPDATE.</p>
<p>Note that the <a class="reference internal" href="#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> and
<a class="reference internal" href="#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal notranslate"><span class="pre">Update</span></code></a>
constructs support
per-execution time formatting of the VALUES and/or SET clauses,
based on the arguments passed to <a class="reference internal" href="connections.html#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a>.
However, the <a class="reference internal" href="#sqlalchemy.sql.expression.ValuesBase.values" title="sqlalchemy.sql.expression.ValuesBase.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ValuesBase.values()</span></code></a> method can be used to “fix” a
particular set of parameters into the statement.</p>
<p>Multiple calls to <a class="reference internal" href="#sqlalchemy.sql.expression.ValuesBase.values" title="sqlalchemy.sql.expression.ValuesBase.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ValuesBase.values()</span></code></a> will produce a new
construct, each one with the parameter list modified to include
the new parameters sent.  In the typical case of a single
dictionary of parameters, the newly passed keys will replace
the same keys in the previous construct.  In the case of a list-based
“multiple values” construct, each new list of values is extended
onto the existing list of values.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.sql.expression.ValuesBase.values.params.**kwargs"></span><strong>**kwargs</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.ValuesBase.values.params.**kwargs">¶</a> – <p>key value pairs representing the string key
of a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
mapped to the value to be rendered into the
VALUES or SET clause:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">users</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;some name&quot;</span><span class="p">)</span>

<span class="n">users</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;some name&quot;</span><span class="p">)</span></pre></div>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.sql.expression.ValuesBase.values.params.*args"></span><strong>*args</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.expression.ValuesBase.values.params.*args">¶</a> – <p>As an alternative to passing key/value parameters,
a dictionary, tuple, or list of dictionaries or tuples can be passed
as a single positional argument in order to form the VALUES or
SET clause of the statement.  The forms that are accepted vary
based on whether this is an <a class="reference internal" href="#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> or an
<a class="reference internal" href="#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal notranslate"><span class="pre">Update</span></code></a> construct.</p>
<p>For either an <a class="reference internal" href="#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> or
<a class="reference internal" href="#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal notranslate"><span class="pre">Update</span></code></a>
construct, a single dictionary can be passed, which works the same as
that of the kwargs form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">users</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;some name&quot;</span><span class="p">})</span>

<span class="n">users</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;some new name&quot;</span><span class="p">})</span></pre></div>
</div>
<p>Also for either form but more typically for the
<a class="reference internal" href="#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> construct, a tuple that contains an
entry for every column in the table is also accepted:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">users</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;some name&quot;</span><span class="p">))</span></pre></div>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> construct also supports being
passed a list of dictionaries or full-table-tuples, which on the
server will render the less common SQL syntax of “multiple values” -
this syntax is supported on backends such as SQLite, PostgreSQL,
MySQL, but not necessarily others:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">users</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;some name&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;some other name&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;yet another name&quot;</span><span class="p">},</span>
    <span class="p">]</span>
<span class="p">)</span></pre></div>
</div>
<p>The above form would render a multiple VALUES statement similar to:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span>
<span class="w">                </span><span class="p">(:</span><span class="n">name_1</span><span class="p">),</span>
<span class="w">                </span><span class="p">(:</span><span class="n">name_2</span><span class="p">),</span>
<span class="w">                </span><span class="p">(:</span><span class="n">name_3</span><span class="p">)</span></pre></div>
</div>
<p>It is essential to note that <strong>passing multiple values is
NOT the same as using traditional executemany() form</strong>.  The above
syntax is a <strong>special</strong> syntax not typically used.  To emit an
INSERT statement against multiple rows, the normal method is
to pass a multiple values list to the
<a class="reference internal" href="connections.html#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a>
method, which is supported by all database backends and is generally
more efficient for a very large number of parameters.</p>
<blockquote>
<div><blockquote>
<div><div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="../tutorial/dbapi_transactions.html#tutorial-multiple-parameters"><span class="std std-ref">发送多个参数</span></a> - an introduction to
the traditional Core method of multiple parameter set
invocation for INSERTs and other statements.</p>
</div>
</div></blockquote>
<p>The UPDATE construct also supports rendering the SET parameters
in a specific order.  For this feature refer to the
<a class="reference internal" href="#sqlalchemy.sql.expression.Update.ordered_values" title="sqlalchemy.sql.expression.Update.ordered_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Update.ordered_values()</span></code></a> method.</p>
<blockquote>
<div><div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.sql.expression.Update.ordered_values" title="sqlalchemy.sql.expression.Update.ordered_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Update.ordered_values()</span></code></a></p>
</div>
</div></blockquote>
</div></blockquote>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="functions.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">SQL 和 范型函数</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="selectable.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">SELECT 和相关构造</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                <a href="../copyright.html">Copyright</a> &#169; 2007-2025, the SQLAlchemy authors and contributors
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on 04/05/2025 04:00:26</div>
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">插入,更新,删除</a><ul>
<li><a class="reference internal" href="#dml">DML 基础构造函数</a><ul>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.delete"><code class="docutils literal notranslate"><span class="pre">delete()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.insert"><code class="docutils literal notranslate"><span class="pre">insert()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.update"><code class="docutils literal notranslate"><span class="pre">update()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#id2">DML 类文档构造函数</a><ul>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.Delete"><code class="docutils literal notranslate"><span class="pre">Delete</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.Delete.where"><code class="docutils literal notranslate"><span class="pre">Delete.where()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.Delete.with_dialect_options"><code class="docutils literal notranslate"><span class="pre">Delete.with_dialect_options()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.Delete.returning"><code class="docutils literal notranslate"><span class="pre">Delete.returning()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.Insert"><code class="docutils literal notranslate"><span class="pre">Insert</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.Insert.with_dialect_options"><code class="docutils literal notranslate"><span class="pre">Insert.with_dialect_options()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.Insert.values"><code class="docutils literal notranslate"><span class="pre">Insert.values()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.Insert.returning"><code class="docutils literal notranslate"><span class="pre">Insert.returning()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.Insert.from_select"><code class="docutils literal notranslate"><span class="pre">Insert.from_select()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.Insert.inline"><code class="docutils literal notranslate"><span class="pre">Insert.inline()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.Insert.select"><code class="docutils literal notranslate"><span class="pre">Insert.select</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.Update"><code class="docutils literal notranslate"><span class="pre">Update</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.Update.returning"><code class="docutils literal notranslate"><span class="pre">Update.returning()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.Update.where"><code class="docutils literal notranslate"><span class="pre">Update.where()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.Update.with_dialect_options"><code class="docutils literal notranslate"><span class="pre">Update.with_dialect_options()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.Update.values"><code class="docutils literal notranslate"><span class="pre">Update.values()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.Update.inline"><code class="docutils literal notranslate"><span class="pre">Update.inline()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.Update.ordered_values"><code class="docutils literal notranslate"><span class="pre">Update.ordered_values()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase"><code class="docutils literal notranslate"><span class="pre">UpdateBase</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.entity_description"><code class="docutils literal notranslate"><span class="pre">UpdateBase.entity_description</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.exported_columns"><code class="docutils literal notranslate"><span class="pre">UpdateBase.exported_columns</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.is_derived_from"><code class="docutils literal notranslate"><span class="pre">UpdateBase.is_derived_from()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.params"><code class="docutils literal notranslate"><span class="pre">UpdateBase.params()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.return_defaults"><code class="docutils literal notranslate"><span class="pre">UpdateBase.return_defaults()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.returning"><code class="docutils literal notranslate"><span class="pre">UpdateBase.returning()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.returning_column_descriptions"><code class="docutils literal notranslate"><span class="pre">UpdateBase.returning_column_descriptions</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.with_dialect_options"><code class="docutils literal notranslate"><span class="pre">UpdateBase.with_dialect_options()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.UpdateBase.with_hint"><code class="docutils literal notranslate"><span class="pre">UpdateBase.with_hint()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.ValuesBase"><code class="docutils literal notranslate"><span class="pre">ValuesBase</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.ValuesBase.select"><code class="docutils literal notranslate"><span class="pre">ValuesBase.select</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.expression.ValuesBase.values"><code class="docutils literal notranslate"><span class="pre">ValuesBase.values()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=2d0eb83f"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../_static/tabs.js?v=3ee01567"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=2f3e6152"></script>
    <script src="../_static/translations.js?v=beaddf03"></script>
    </body>
</html>