<!doctype html>
<html class="no-js" lang="zh-CN" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="索引" href="../genindex.html" /><link rel="search" title="搜索" href="../search.html" /><link rel="copyright" title="版权所有" href="../copyright.html" /><link rel="next" title="Schema 定义语言" href="schema.html" /><link rel="prev" title="SQL 表达式语言基础构造" href="foundation.html" />

    <!-- Generated with Sphinx 7.2.6 and Furo 2024.08.06 -->
        <title>访问者和遍历实用程序 - SQLAlchemy 2.1 Documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/changelog.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx_paramlinks.css" />
    <link rel="stylesheet" type="text/css" href="../_static/docs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">SQLAlchemy 2.1 Documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">SQLAlchemy 2.1 Documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="搜索" name="q" aria-label="搜索">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">概述</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorial/index.html">SQLAlchemy 统一教程</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of SQLAlchemy 统一教程</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/engine.html">建立连接 - Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/dbapi_transactions.html">使用事务和DBAPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/metadata.html">使用数据库元数据</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../tutorial/data.html">处理数据</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of 处理数据</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/data_insert.html">使用 INSERT 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/data_select.html">使用 SELECT 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/data_update.html">使用 UPDATE 和 DELETE 语句</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/orm_data_manipulation.html">使用 ORM 进行数据操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/orm_related_objects.html">使用 ORM 相关对象</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/further_reading.html">进一步阅读</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../orm/index.html">SQLAlchemy ORM</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of SQLAlchemy ORM</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../orm/quickstart.html">ORM 快速入门</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../orm/mapper_config.html">ORM 映射类配置</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of ORM 映射类配置</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../orm/mapping_styles.html">ORM 映射类概述</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../orm/declarative_mapping.html">使用声明式映射类</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of 使用声明式映射类</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../orm/declarative_styles.html">声明式映射风格</a></li>
<li class="toctree-l4"><a class="reference internal" href="../orm/declarative_tables.html">声明式的表配置</a></li>
<li class="toctree-l4"><a class="reference internal" href="../orm/declarative_config.html">使用声明式映射器配置</a></li>
<li class="toctree-l4"><a class="reference internal" href="../orm/declarative_mixins.html">使用 Mixins 组合映射层次结构</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../orm/dataclasses.html">与dataclass和attrs的集成</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/mapped_sql_expr.html">SQL 表达式作为映射属性</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/mapped_attributes.html">更改Attribute的行为</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/composites.html">复合列类型</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/inheritance.html">映射类继承层次结构</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/nonstandard_mappings.html">非传统映射</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/versioning.html">配置版本计数器</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/mapping_api.html">类映射 API</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../orm/scalar_mapping.html">映射 SQL 表达式</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of 映射 SQL 表达式</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../orm/mapping_columns.html">映射表格列</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../orm/relationships.html">关系配置</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of 关系配置</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../orm/basic_relationships.html">基本关系模式</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/self_referential.html">邻接表关系</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/join_conditions.html">配置关系连接方式</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/large_collections.html">使用大型集合</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/collection_api.html">集合自定义和 API 详细信息</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/relationship_persistence.html">特殊关系的持久化模式</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/backref.html">使用旧版“backref”关系参数</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/relationship_api.html">关系 API</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../orm/queryguide/index.html">ORM 查询指南</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of ORM 查询指南</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/select.html">为 ORM 映射类编写 SELECT 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/inheritance.html">为继承映射编写 SELECT 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/dml.html">启用 ORM 的 INSERT、UPDATE 和 DELETE 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/columns.html">列加载选项</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/relationships.html">关系加载技术</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/api.html">用于查询的 ORM API 功能</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/queryguide/query.html">旧式查询 API</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../orm/session.html">使用会话</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of 使用会话</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../orm/session_basics.html">会话基础知识</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/session_state_management.html">状态管理</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/cascades.html">级联</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/session_transaction.html">事务和连接管理</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/persistence_techniques.html">附加持久性技术</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/contextual.html">上下文/线程本地会话</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/session_events.html">使用事件跟踪查询、对象和会话更改</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/session_api.html">会话 API</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../orm/extending.html">事件和内部</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of 事件和内部</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../orm/events.html">ORM 事件</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/internals.html">ORM 内部</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/exceptions.html">ORM 异常</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../orm/extensions/index.html">ORM 扩展</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of ORM 扩展</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/asyncio.html">异步 I/O (asyncio)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/associationproxy.html">关联代理</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/automap.html">自动映射</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/baked.html">烘焙查询</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/declarative/index.html">声明式扩展</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/mutable.html">突变追踪</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/orderinglist.html">排序列表</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/horizontal_shard.html">水平分片</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/hybrid.html">混合属性</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/indexable.html">Indexable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orm/extensions/instrumentation.html">替代类检测</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../orm/examples.html">核心和 ORM 示例</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">SQLAlchemy Core</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of SQLAlchemy Core</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current has-children"><a class="reference internal" href="expression_api.html">SQL 语句和表达式 API</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of SQL 语句和表达式 API</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="sqlelement.html">列元素和表达式</a></li>
<li class="toctree-l3"><a class="reference internal" href="operators.html">操作符参考</a></li>
<li class="toctree-l3"><a class="reference internal" href="selectable.html">SELECT 和相关构造</a></li>
<li class="toctree-l3"><a class="reference internal" href="dml.html">插入,更新,删除</a></li>
<li class="toctree-l3"><a class="reference internal" href="functions.html">SQL 和 范型函数</a></li>
<li class="toctree-l3"><a class="reference internal" href="compiler.html">自定义 SQL 构造和编译扩展</a></li>
<li class="toctree-l3"><a class="reference internal" href="serializer.html">表达式序列化器扩展</a></li>
<li class="toctree-l3"><a class="reference internal" href="foundation.html">SQL 表达式语言基础构造</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">访问者和遍历实用程序</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="schema.html">Schema 定义语言</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of Schema 定义语言</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="metadata.html">使用元数据描述数据库</a></li>
<li class="toctree-l3"><a class="reference internal" href="reflection.html">反映数据库对象</a></li>
<li class="toctree-l3"><a class="reference internal" href="defaults.html">列 INSERT/UPDATE 默认值</a></li>
<li class="toctree-l3"><a class="reference internal" href="constraints.html">定义约束和索引</a></li>
<li class="toctree-l3"><a class="reference internal" href="ddl.html">自定义 DDL</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="types.html">SQL 数据类型对象</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of SQL 数据类型对象</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="type_basics.html">类型层次结构</a></li>
<li class="toctree-l3"><a class="reference internal" href="custom_types.html">自定义类型</a></li>
<li class="toctree-l3"><a class="reference internal" href="type_api.html">基本类型 API</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="engines_connections.html">Engine和Connection的使用</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle navigation of Engine和Connection的使用</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="engines.html">Engine 配置</a></li>
<li class="toctree-l3"><a class="reference internal" href="connections.html">使用Engines和Connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="pooling.html">连接池</a></li>
<li class="toctree-l3"><a class="reference internal" href="events.html">核心事件</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="api_basics.html">Core API 基础</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle navigation of Core API 基础</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="event.html">事件</a></li>
<li class="toctree-l3"><a class="reference internal" href="inspection.html">运行时审查 API</a></li>
<li class="toctree-l3"><a class="reference internal" href="exceptions.html">Core 异常</a></li>
<li class="toctree-l3"><a class="reference internal" href="internals.html">Core 内部</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../dialects/index.html">Dialects</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle navigation of Dialects</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../dialects/postgresql.html">PostgreSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dialects/mysql.html">MySQL 和 MariaDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dialects/sqlite.html">SQLite</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dialects/oracle.html">Oracle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dialects/mssql.html">Microsoft SQL Server</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../faq/index.html">常见问题</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle navigation of 常见问题</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../faq/installation.html">安装</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/connections.html">连接 / 引擎</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/metadata_schema.html">元数据 / Schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/sqlexpressions.html">SQL 表达式</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/ormconfiguration.html">ORM 配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/performance.html">性能</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/sessions.html">会话 / 查询</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/thirdparty.html">第三方包集成问题</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../errors.html">错误消息</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../changelog/index.html">变更和迁移</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle navigation of 变更和迁移</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_21.html">SQLAlchemy 2.1 有什么新功能？</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_21.html">2.1 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_20.html">2.0 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_14.html">1.4 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_13.html">1.3 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_12.html">1.2 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_11.html">1.1 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_10.html">1.0 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_09.html">0.9 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_08.html">0.8 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_07.html">0.7 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_06.html">0.6 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_05.html">0.5 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_04.html">0.4 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_03.html">0.3 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_02.html">0.2 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_01.html">0.1 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_20.html">SQLAlchemy 2.0 - Major Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/whatsnew_20.html">What’s New in SQLAlchemy 2.0?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_14.html">What’s New in SQLAlchemy 1.4?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_13.html">What’s New in SQLAlchemy 1.3?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_12.html">What’s New in SQLAlchemy 1.2?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_11.html">What’s New in SQLAlchemy 1.1?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_10.html">What’s New in SQLAlchemy 1.0?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_09.html">What’s New in SQLAlchemy 0.9?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_08.html">What’s New in SQLAlchemy 0.8?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_07.html">What’s New in SQLAlchemy 0.7?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_06.html">What’s New in SQLAlchemy 0.6?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_05.html">What’s new in SQLAlchemy 0.5?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_04.html">What’s new in SQLAlchemy 0.4?</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          

<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="id1">
<h1>访问者和遍历实用程序<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h1>
<p>Visitor and Traversal Utilities</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--1">中文</label><div class="tab-content docutils container">
<p><a class="reference internal" href="#module-sqlalchemy.sql.visitors" title="sqlalchemy.sql.visitors"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors</span></code></a> 模块由类和函数组成，其目的是通用地 <strong>遍历</strong> 核心 SQL 表达式结构。这与 Python 的 <code class="docutils literal notranslate"><span class="pre">ast</span></code> 模块类似，它提供了一个系统，使程序可以对 SQL 表达式的每个组件进行操作。常见的用途包括定位各种元素，如 <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> 或 <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.BindParameter" title="sqlalchemy.sql.expression.BindParameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">BindParameter</span></code></a> 对象，以及更改结构的状态，例如用其他 FROM 子句替换某些 FROM 子句。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p><a class="reference internal" href="#module-sqlalchemy.sql.visitors" title="sqlalchemy.sql.visitors"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors</span></code></a> 模块是一个内部 API，并不是完全公开的。它可能会发生变化，并且可能在未考虑到 SQLAlchemy 自身内部的使用模式下无法按预期工作。</p>
</div>
<p><a class="reference internal" href="#module-sqlalchemy.sql.visitors" title="sqlalchemy.sql.visitors"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors</span></code></a> 模块是 SQLAlchemy <strong>内部</strong> 的一部分，通常不会被调用的应用程序代码使用。然而，它在某些边缘情况下使用，例如构建缓存例程时，以及使用 <a class="reference internal" href="compiler.html#sqlalchemy-ext-compiler-toplevel"><span class="std std-ref">自定义 SQL 构造和编译扩展</span></a> 构建自定义 SQL 表达式时。</p>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--2">英文</label><div class="tab-content docutils container">
<p>The <a class="reference internal" href="#module-sqlalchemy.sql.visitors" title="sqlalchemy.sql.visitors"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors</span></code></a> module consists of classes and functions
that serve the purpose of generically <strong>traversing</strong> a Core SQL expression
structure.   This is not unlike the Python <code class="docutils literal notranslate"><span class="pre">ast</span></code> module in that is presents
a system by which a program can operate upon each component of a SQL
expression.   Common purposes this serves are locating various kinds of
elements such as <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> or <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.BindParameter" title="sqlalchemy.sql.expression.BindParameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">BindParameter</span></code></a> objects,
as well as altering the state of the structure such as replacing certain FROM
clauses with others.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>the <a class="reference internal" href="#module-sqlalchemy.sql.visitors" title="sqlalchemy.sql.visitors"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors</span></code></a> module is an internal API and
is not fully public.    It is subject to change and may additionally not
function as expected for use patterns that aren’t considered within
SQLAlchemy’s own internals.</p>
</div>
<p>The <a class="reference internal" href="#module-sqlalchemy.sql.visitors" title="sqlalchemy.sql.visitors"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors</span></code></a> module is part of the <strong>internals</strong> of
SQLAlchemy and it is not usually used by calling application code.  It is
however used in certain edge cases such as when constructing caching routines
as well as when building out custom SQL expressions using the
<a class="reference internal" href="compiler.html#sqlalchemy-ext-compiler-toplevel"><span class="std std-ref">Custom SQL Constructs and Compilation Extension</span></a>.</p>
</div>
</div>
<p id="module-sqlalchemy.sql.visitors">Visitor/traversal interface and library functions.</p>
<div class="table-wrapper longtable docutils container">
<table class="longtable docutils align-default">
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.sql.visitors.anon_map"><span class="sig-name descname">anon_map</span></a></p></td>
<td><p>A map that creates new keys for missing key access.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.sql.visitors.cloned_traverse"><span class="sig-name descname">cloned_traverse</span></a>(obj, opts, visitors)</p></td>
<td><p>Clone the given expression structure, allowing modifications by
visitors for mutable objects.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.sql.visitors.ExternalTraversal"><span class="sig-name descname">ExternalTraversal</span></a></p></td>
<td><p>Base class for visitor objects which can traverse externally using
the <a class="reference internal" href="#sqlalchemy.sql.visitors.traverse" title="sqlalchemy.sql.visitors.traverse"><code class="xref py py-func docutils literal notranslate"><span class="pre">traverse()</span></code></a> function.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><span class="sig-name descname">InternalTraversal</span></a></p></td>
<td><p>Defines visitor symbols used for internal traversal.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.sql.visitors.iterate"><span class="sig-name descname">iterate</span></a>(obj[, opts])</p></td>
<td><p>Traverse the given expression structure, returning an iterator.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.sql.visitors.replacement_traverse"><span class="sig-name descname">replacement_traverse</span></a>(obj, opts, replace)</p></td>
<td><p>Clone the given expression structure, allowing element
replacement by a given replacement function.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.sql.visitors.traverse"><span class="sig-name descname">traverse</span></a>(obj, opts, visitors)</p></td>
<td><p>Traverse and visit the given expression structure using the default
iterator.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.sql.visitors.traverse_using"><span class="sig-name descname">traverse_using</span></a>(iterator, obj, visitors)</p></td>
<td><p>Visit the given expression structure using the given iterator of
objects.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.sql.visitors.Visitable"><span class="sig-name descname">Visitable</span></a></p></td>
<td><p>Base class for visitable objects.</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.ExternalTraversal">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.sql.visitors.</span></span><span class="sig-name descname"><span class="pre">ExternalTraversal</span></span><a class="headerlink" href="#sqlalchemy.sql.visitors.ExternalTraversal" title="Link to this definition">¶</a></dt>
<dd><p>Base class for visitor objects which can traverse externally using
the <a class="reference internal" href="#sqlalchemy.sql.visitors.traverse" title="sqlalchemy.sql.visitors.traverse"><code class="xref py py-func docutils literal notranslate"><span class="pre">traverse()</span></code></a> function.</p>
<p>Direct usage of the <a class="reference internal" href="#sqlalchemy.sql.visitors.traverse" title="sqlalchemy.sql.visitors.traverse"><code class="xref py py-func docutils literal notranslate"><span class="pre">traverse()</span></code></a> function is usually
preferred.</p>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.sql.visitors.ExternalTraversal.chain"><span class="sig-name descname">chain()</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.ExternalTraversal.iterate"><span class="sig-name descname">iterate()</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.ExternalTraversal.traverse"><span class="sig-name descname">traverse()</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.ExternalTraversal.visitor_iterator"><span class="sig-name descname">visitor_iterator</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.sql.visitors.ExternalTraversal" title="sqlalchemy.sql.visitors.ExternalTraversal"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.ExternalTraversal</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.util.langhelpers.MemoizedSlots</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.ExternalTraversal.chain">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.ExternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.ExternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">chain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">visitor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#sqlalchemy.sql.visitors.ExternalTraversal" title="sqlalchemy.sql.visitors.ExternalTraversal"><span class="pre">ExternalTraversal</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_ExtT</span></span></span><a class="headerlink" href="#sqlalchemy.sql.visitors.ExternalTraversal.chain" title="Link to this definition">¶</a></dt>
<dd><p>‘Chain’ an additional ExternalTraversal onto this ExternalTraversal</p>
<p>The chained visitor will receive all visit events after this one.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.ExternalTraversal.iterate">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.ExternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.ExternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">iterate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ExternallyTraversible</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">ExternallyTraversible</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.sql.visitors.ExternalTraversal.iterate" title="Link to this definition">¶</a></dt>
<dd><p>Traverse the given expression structure, returning an iterator
of all elements.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.ExternalTraversal.traverse">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.ExternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.ExternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">traverse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ExternallyTraversible</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ExternallyTraversible</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.sql.visitors.ExternalTraversal.traverse" title="Link to this definition">¶</a></dt>
<dd><p>Traverse and visit the given expression structure.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.ExternalTraversal.visitor_iterator">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.ExternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.ExternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">visitor_iterator</span></span><a class="headerlink" href="#sqlalchemy.sql.visitors.ExternalTraversal.visitor_iterator" title="Link to this definition">¶</a></dt>
<dd><p>Iterate through this visitor and each ‘chained’ visitor.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.sql.visitors.</span></span><span class="sig-name descname"><span class="pre">InternalTraversal</span></span><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal" title="Link to this definition">¶</a></dt>
<dd><p>Defines visitor symbols used for internal traversal.</p>
<p>The <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal" title="sqlalchemy.sql.visitors.InternalTraversal"><code class="xref py py-class docutils literal notranslate"><span class="pre">InternalTraversal</span></code></a> class is used in two ways.  One is that
it can serve as the superclass for an object that implements the
various visit methods of the class.   The other is that the symbols
themselves of <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal" title="sqlalchemy.sql.visitors.InternalTraversal"><code class="xref py py-class docutils literal notranslate"><span class="pre">InternalTraversal</span></code></a> are used within
the <code class="docutils literal notranslate"><span class="pre">_traverse_internals</span></code> collection.   Such as, the <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.Case" title="sqlalchemy.sql.expression.Case"><code class="xref py py-class docutils literal notranslate"><span class="pre">Case</span></code></a>
object defines <code class="docutils literal notranslate"><span class="pre">_traverse_internals</span></code> as</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Case</span><span class="p">(</span><span class="n">ColumnElement</span><span class="p">[</span><span class="n">_T</span><span class="p">]):</span>
    <span class="n">_traverse_internals</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="n">InternalTraversal</span><span class="o">.</span><span class="n">dp_clauseelement</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;whens&quot;</span><span class="p">,</span> <span class="n">InternalTraversal</span><span class="o">.</span><span class="n">dp_clauseelement_tuples</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;else_&quot;</span><span class="p">,</span> <span class="n">InternalTraversal</span><span class="o">.</span><span class="n">dp_clauseelement</span><span class="p">),</span>
    <span class="p">]</span></pre><div class="code-non-annotations-key"></div></div>
</div>
<p>Above, the <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.Case" title="sqlalchemy.sql.expression.Case"><code class="xref py py-class docutils literal notranslate"><span class="pre">Case</span></code></a> class indicates its internal state as the
attributes named <code class="docutils literal notranslate"><span class="pre">value</span></code>, <code class="docutils literal notranslate"><span class="pre">whens</span></code>, and <code class="docutils literal notranslate"><span class="pre">else_</span></code>.    They each
link to an <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal" title="sqlalchemy.sql.visitors.InternalTraversal"><code class="xref py py-class docutils literal notranslate"><span class="pre">InternalTraversal</span></code></a> method which indicates the type
of datastructure to which each attribute refers.</p>
<p>Using the <code class="docutils literal notranslate"><span class="pre">_traverse_internals</span></code> structure, objects of type
<code class="xref py py-class docutils literal notranslate"><span class="pre">InternalTraversible</span></code> will have the following methods automatically
implemented:</p>
<ul class="simple">
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">HasTraverseInternals.get_children()</span></code></p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">HasTraverseInternals._copy_internals()</span></code></p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">HasCacheKey._gen_cache_key()</span></code></p></li>
</ul>
<p>Subclasses can also implement these methods directly, particularly for the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">HasTraverseInternals._copy_internals()</span></code> method, when special steps
are needed.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入.</span></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_annotations_key"><span class="sig-name descname">dp_annotations_key</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_anon_name"><span class="sig-name descname">dp_anon_name</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_boolean"><span class="sig-name descname">dp_boolean</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_clauseelement"><span class="sig-name descname">dp_clauseelement</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_clauseelement_list"><span class="sig-name descname">dp_clauseelement_list</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_clauseelement_tuple"><span class="sig-name descname">dp_clauseelement_tuple</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_clauseelement_tuples"><span class="sig-name descname">dp_clauseelement_tuples</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_dialect_options"><span class="sig-name descname">dp_dialect_options</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_dml_multi_values"><span class="sig-name descname">dp_dml_multi_values</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_dml_ordered_values"><span class="sig-name descname">dp_dml_ordered_values</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_dml_values"><span class="sig-name descname">dp_dml_values</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_fromclause_canonical_column_collection"><span class="sig-name descname">dp_fromclause_canonical_column_collection</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_fromclause_ordered_set"><span class="sig-name descname">dp_fromclause_ordered_set</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_has_cache_key"><span class="sig-name descname">dp_has_cache_key</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_has_cache_key_list"><span class="sig-name descname">dp_has_cache_key_list</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_has_cache_key_tuples"><span class="sig-name descname">dp_has_cache_key_tuples</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_ignore"><span class="sig-name descname">dp_ignore</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_inspectable"><span class="sig-name descname">dp_inspectable</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_inspectable_list"><span class="sig-name descname">dp_inspectable_list</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_multi"><span class="sig-name descname">dp_multi</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_multi_list"><span class="sig-name descname">dp_multi_list</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_named_ddl_element"><span class="sig-name descname">dp_named_ddl_element</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_operator"><span class="sig-name descname">dp_operator</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_plain_dict"><span class="sig-name descname">dp_plain_dict</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_plain_obj"><span class="sig-name descname">dp_plain_obj</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_prefix_sequence"><span class="sig-name descname">dp_prefix_sequence</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_propagate_attrs"><span class="sig-name descname">dp_propagate_attrs</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_statement_hint_list"><span class="sig-name descname">dp_statement_hint_list</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_string"><span class="sig-name descname">dp_string</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_string_clauseelement_dict"><span class="sig-name descname">dp_string_clauseelement_dict</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_string_list"><span class="sig-name descname">dp_string_list</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_string_multi_dict"><span class="sig-name descname">dp_string_multi_dict</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_table_hint_list"><span class="sig-name descname">dp_table_hint_list</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_type"><span class="sig-name descname">dp_type</span></a>, <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_unknown_structure"><span class="sig-name descname">dp_unknown_structure</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal" title="sqlalchemy.sql.visitors.InternalTraversal"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code>)</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_annotations_key">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_annotations_key</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'AK'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_annotations_key" title="Link to this definition">¶</a></dt>
<dd><p>Visit the _annotations_cache_key element.</p>
<p>This is a dictionary of additional information about a ClauseElement
that modifies its role.  It should be included when comparing or caching
objects, however generating this key is relatively expensive.   Visitors
should check the “_annotations” dict for non-None first before creating
this key.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_anon_name">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_anon_name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'AN'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_anon_name" title="Link to this definition">¶</a></dt>
<dd><p>Visit a potentially “anonymized” string value.</p>
<p>The string value is considered to be significant for cache key
generation.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_boolean">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_boolean</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'B'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_boolean" title="Link to this definition">¶</a></dt>
<dd><p>Visit a boolean value.</p>
<p>The boolean value is considered to be significant for cache key
generation.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_clauseelement">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_clauseelement</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'CE'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_clauseelement" title="Link to this definition">¶</a></dt>
<dd><p>Visit a <a class="reference internal" href="foundation.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClauseElement</span></code></a> object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_clauseelement_list">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_clauseelement_list</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'CL'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_clauseelement_list" title="Link to this definition">¶</a></dt>
<dd><p>Visit a list of <a class="reference internal" href="foundation.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClauseElement</span></code></a> objects.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_clauseelement_tuple">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_clauseelement_tuple</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'CT'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_clauseelement_tuple" title="Link to this definition">¶</a></dt>
<dd><p>Visit a tuple of <a class="reference internal" href="foundation.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClauseElement</span></code></a> objects.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_clauseelement_tuples">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_clauseelement_tuples</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'CTS'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_clauseelement_tuples" title="Link to this definition">¶</a></dt>
<dd><p>Visit a list of tuples which contain <a class="reference internal" href="foundation.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClauseElement</span></code></a>
objects.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_dialect_options">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_dialect_options</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'DO'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_dialect_options" title="Link to this definition">¶</a></dt>
<dd><p>Visit a dialect options structure.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_dml_multi_values">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_dml_multi_values</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'DML_MV'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_dml_multi_values" title="Link to this definition">¶</a></dt>
<dd><p>Visit the values() multi-valued list of dictionaries of an
<a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_dml_ordered_values">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_dml_ordered_values</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'DML_OV'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_dml_ordered_values" title="Link to this definition">¶</a></dt>
<dd><p>Visit the values() ordered tuple list of an
<a class="reference internal" href="dml.html#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal notranslate"><span class="pre">Update</span></code></a> object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_dml_values">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_dml_values</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'DML_V'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_dml_values" title="Link to this definition">¶</a></dt>
<dd><p>Visit the values() dictionary of a <a class="reference internal" href="dml.html#sqlalchemy.sql.expression.ValuesBase" title="sqlalchemy.sql.expression.ValuesBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValuesBase</span></code></a>
(e.g. Insert or Update) object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_fromclause_canonical_column_collection">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_fromclause_canonical_column_collection</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'FC'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_fromclause_canonical_column_collection" title="Link to this definition">¶</a></dt>
<dd><p>Visit a <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.FromClause" title="sqlalchemy.sql.expression.FromClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">FromClause</span></code></a> object in the context of the
<code class="docutils literal notranslate"><span class="pre">columns</span></code> attribute.</p>
<p>The column collection is “canonical”, meaning it is the originally
defined location of the <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnClause" title="sqlalchemy.sql.expression.ColumnClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnClause</span></code></a> objects.   Right now
this means that the object being visited is a
<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.TableClause" title="sqlalchemy.sql.expression.TableClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">TableClause</span></code></a>
or <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> object only.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_fromclause_ordered_set">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_fromclause_ordered_set</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'CO'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_fromclause_ordered_set" title="Link to this definition">¶</a></dt>
<dd><p>Visit an ordered set of <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.FromClause" title="sqlalchemy.sql.expression.FromClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">FromClause</span></code></a> objects.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_has_cache_key">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_has_cache_key</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'HC'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_has_cache_key" title="Link to this definition">¶</a></dt>
<dd><p>Visit a <a class="reference internal" href="foundation.html#sqlalchemy.sql.traversals.HasCacheKey" title="sqlalchemy.sql.traversals.HasCacheKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">HasCacheKey</span></code></a> object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_has_cache_key_list">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_has_cache_key_list</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'HL'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_has_cache_key_list" title="Link to this definition">¶</a></dt>
<dd><p>Visit a list of <a class="reference internal" href="foundation.html#sqlalchemy.sql.traversals.HasCacheKey" title="sqlalchemy.sql.traversals.HasCacheKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">HasCacheKey</span></code></a> objects.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_has_cache_key_tuples">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_has_cache_key_tuples</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'HT'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_has_cache_key_tuples" title="Link to this definition">¶</a></dt>
<dd><p>Visit a list of tuples which contain <a class="reference internal" href="foundation.html#sqlalchemy.sql.traversals.HasCacheKey" title="sqlalchemy.sql.traversals.HasCacheKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">HasCacheKey</span></code></a>
objects.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_ignore">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_ignore</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'IG'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_ignore" title="Link to this definition">¶</a></dt>
<dd><p>Specify an object that should be ignored entirely.</p>
<p>This currently applies function call argument caching where some
arguments should not be considered to be part of a cache key.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_inspectable">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_inspectable</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'IS'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_inspectable" title="Link to this definition">¶</a></dt>
<dd><p>Visit an inspectable object where the return value is a
<a class="reference internal" href="foundation.html#sqlalchemy.sql.traversals.HasCacheKey" title="sqlalchemy.sql.traversals.HasCacheKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">HasCacheKey</span></code></a> object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_inspectable_list">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_inspectable_list</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'IL'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_inspectable_list" title="Link to this definition">¶</a></dt>
<dd><p>Visit a list of inspectable objects which upon inspection are
HasCacheKey objects.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_multi">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_multi</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'M'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_multi" title="Link to this definition">¶</a></dt>
<dd><p>Visit an object that may be a <a class="reference internal" href="foundation.html#sqlalchemy.sql.traversals.HasCacheKey" title="sqlalchemy.sql.traversals.HasCacheKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">HasCacheKey</span></code></a> or may be a
plain hashable object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_multi_list">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_multi_list</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'MT'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_multi_list" title="Link to this definition">¶</a></dt>
<dd><p>Visit a tuple containing elements that may be <a class="reference internal" href="foundation.html#sqlalchemy.sql.traversals.HasCacheKey" title="sqlalchemy.sql.traversals.HasCacheKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">HasCacheKey</span></code></a> or
may be a plain hashable object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_named_ddl_element">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_named_ddl_element</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'DD'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_named_ddl_element" title="Link to this definition">¶</a></dt>
<dd><p>Visit a simple named DDL element.</p>
<p>The current object used by this method is the <a class="reference internal" href="defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>.</p>
<p>The object is only considered to be important for cache key generation
as far as its name, but not any other aspects of it.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_operator">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_operator</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'O'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_operator" title="Link to this definition">¶</a></dt>
<dd><p>Visit an operator.</p>
<p>The operator is a function from the <code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlalchemy.sql.operators</span></code>
module.</p>
<p>The operator value is considered to be significant for cache key
generation.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_plain_dict">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_plain_dict</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'PD'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_plain_dict" title="Link to this definition">¶</a></dt>
<dd><p>Visit a dictionary with string keys.</p>
<p>The keys of the dictionary should be strings, the values should
be immutable and hashable.   The dictionary is considered to be
significant for cache key generation.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_plain_obj">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_plain_obj</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'PO'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_plain_obj" title="Link to this definition">¶</a></dt>
<dd><p>Visit a plain python object.</p>
<p>The value should be immutable and hashable, such as an integer.
The value is considered to be significant for cache key generation.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_prefix_sequence">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_prefix_sequence</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'PS'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_prefix_sequence" title="Link to this definition">¶</a></dt>
<dd><p>Visit the sequence represented by <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.HasPrefixes" title="sqlalchemy.sql.expression.HasPrefixes"><code class="xref py py-class docutils literal notranslate"><span class="pre">HasPrefixes</span></code></a>
or <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.HasSuffixes" title="sqlalchemy.sql.expression.HasSuffixes"><code class="xref py py-class docutils literal notranslate"><span class="pre">HasSuffixes</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_propagate_attrs">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_propagate_attrs</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'PA'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_propagate_attrs" title="Link to this definition">¶</a></dt>
<dd><p>Visit the propagate attrs dict.  This hardcodes to the particular
elements we care about right now.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_statement_hint_list">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_statement_hint_list</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'SH'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_statement_hint_list" title="Link to this definition">¶</a></dt>
<dd><p>Visit the <code class="docutils literal notranslate"><span class="pre">_statement_hints</span></code> collection of a
<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal notranslate"><span class="pre">Select</span></code></a>
object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_string">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_string</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'S'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_string" title="Link to this definition">¶</a></dt>
<dd><p>Visit a plain string value.</p>
<p>Examples include table and column names, bound parameter keys, special
keywords such as “UNION”, “UNION ALL”.</p>
<p>The string value is considered to be significant for cache key
generation.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_string_clauseelement_dict">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_string_clauseelement_dict</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'CD'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_string_clauseelement_dict" title="Link to this definition">¶</a></dt>
<dd><p>Visit a dictionary of string keys to <a class="reference internal" href="foundation.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClauseElement</span></code></a>
objects.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_string_list">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_string_list</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'SL'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_string_list" title="Link to this definition">¶</a></dt>
<dd><p>Visit a list of strings.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_string_multi_dict">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_string_multi_dict</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'MD'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_string_multi_dict" title="Link to this definition">¶</a></dt>
<dd><p>Visit a dictionary of string keys to values which may either be
plain immutable/hashable or <a class="reference internal" href="foundation.html#sqlalchemy.sql.traversals.HasCacheKey" title="sqlalchemy.sql.traversals.HasCacheKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">HasCacheKey</span></code></a> objects.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_table_hint_list">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_table_hint_list</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'TH'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_table_hint_list" title="Link to this definition">¶</a></dt>
<dd><p>Visit the <code class="docutils literal notranslate"><span class="pre">_hints</span></code> collection of a <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal notranslate"><span class="pre">Select</span></code></a>
object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_type">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_type</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'T'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_type" title="Link to this definition">¶</a></dt>
<dd><p>Visit a <a class="reference internal" href="type_api.html#sqlalchemy.types.TypeEngine" title="sqlalchemy.types.TypeEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeEngine</span></code></a> object</p>
<p>The type object is considered to be significant for cache key
generation.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.InternalTraversal.dp_unknown_structure">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.InternalTraversal.</span></code></a><span class="sig-name descname"><span class="pre">dp_unknown_structure</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'UK'</span></em><a class="headerlink" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_unknown_structure" title="Link to this definition">¶</a></dt>
<dd><p>Visit an unknown structure.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.Visitable">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.sql.visitors.</span></span><span class="sig-name descname"><span class="pre">Visitable</span></span><a class="headerlink" href="#sqlalchemy.sql.visitors.Visitable" title="Link to this definition">¶</a></dt>
<dd><p>Base class for visitable objects.</p>
<p><a class="reference internal" href="#sqlalchemy.sql.visitors.Visitable" title="sqlalchemy.sql.visitors.Visitable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Visitable</span></code></a> is used to implement the SQL compiler dispatch
functions.    Other forms of traversal such as for cache key generation
are implemented separately using the <code class="xref py py-class docutils literal notranslate"><span class="pre">HasTraverseInternals</span></code>
interface.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 2.0 版本发生变更: </span>The <a class="reference internal" href="#sqlalchemy.sql.visitors.Visitable" title="sqlalchemy.sql.visitors.Visitable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Visitable</span></code></a> class was named
<code class="xref py py-class docutils literal notranslate"><span class="pre">Traversible</span></code> in the 1.4 series; the name is changed back
to <a class="reference internal" href="#sqlalchemy.sql.visitors.Visitable" title="sqlalchemy.sql.visitors.Visitable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Visitable</span></code></a> in 2.0 which is what it was prior to 1.4.</p>
<p>Both names remain importable in both 1.4 and 2.0 versions.</p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.anon_map">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.sql.visitors.</span></span><span class="sig-name descname"><span class="pre">anon_map</span></span><a class="headerlink" href="#sqlalchemy.sql.visitors.anon_map" title="Link to this definition">¶</a></dt>
<dd><p>A map that creates new keys for missing key access.</p>
<p>Produces an incrementing sequence given a series of unique keys.</p>
<p>This is similar to the compiler prefix_anon_map class although simpler.</p>
<p>Inlines the approach taken by <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.util.PopulateDict</span></code> which
is otherwise usually used for this type of operation.</p>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.sql.visitors.anon_map" title="sqlalchemy.sql.visitors.anon_map"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.visitors.anon_map</span></code></a> (<code class="docutils literal notranslate"><span class="pre">builtins.dict</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Generic</span></code>)</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.cloned_traverse">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.sql.visitors.</span></span><span class="sig-name descname"><span class="pre">cloned_traverse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ExternallyTraversible</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">opts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">visitors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ExternallyTraversible</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.sql.visitors.cloned_traverse" title="Link to this definition">¶</a></dt>
<dd><p>Clone the given expression structure, allowing modifications by
visitors for mutable objects.</p>
<p>Traversal usage is the same as that of <a class="reference internal" href="#sqlalchemy.sql.visitors.traverse" title="sqlalchemy.sql.visitors.traverse"><code class="xref py py-func docutils literal notranslate"><span class="pre">traverse()</span></code></a>.
The visitor functions present in the <code class="docutils literal notranslate"><span class="pre">visitors</span></code> dictionary may also
modify the internals of the given structure as the traversal proceeds.</p>
<p>The <a class="reference internal" href="#sqlalchemy.sql.visitors.cloned_traverse" title="sqlalchemy.sql.visitors.cloned_traverse"><code class="xref py py-func docutils literal notranslate"><span class="pre">cloned_traverse()</span></code></a> function does <strong>not</strong> provide objects that are
part of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Immutable</span></code> interface to the visit methods (this
primarily includes <a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnClause" title="sqlalchemy.sql.expression.ColumnClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnClause</span></code></a>, <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>,
<a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.TableClause" title="sqlalchemy.sql.expression.TableClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">TableClause</span></code></a> and <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects). As this traversal is
only intended to allow in-place mutation of objects, <code class="xref py py-class docutils literal notranslate"><span class="pre">Immutable</span></code>
objects are skipped. The <code class="xref py py-meth docutils literal notranslate"><span class="pre">Immutable._clone()</span></code> method is still called
on each object to allow for objects to replace themselves with a different
object based on a clone of their sub-internals (e.g. a
<a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnClause" title="sqlalchemy.sql.expression.ColumnClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnClause</span></code></a> that clones its subquery to return a new
<a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnClause" title="sqlalchemy.sql.expression.ColumnClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnClause</span></code></a>).</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 2.0 版本发生变更: </span>The <a class="reference internal" href="#sqlalchemy.sql.visitors.cloned_traverse" title="sqlalchemy.sql.visitors.cloned_traverse"><code class="xref py py-func docutils literal notranslate"><span class="pre">cloned_traverse()</span></code></a> function omits
objects that are part of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Immutable</span></code> interface.</p>
</div>
<p>The central API feature used by the <a class="reference internal" href="#sqlalchemy.sql.visitors.cloned_traverse" title="sqlalchemy.sql.visitors.cloned_traverse"><code class="xref py py-func docutils literal notranslate"><span class="pre">cloned_traverse()</span></code></a>
and <a class="reference internal" href="#sqlalchemy.sql.visitors.replacement_traverse" title="sqlalchemy.sql.visitors.replacement_traverse"><code class="xref py py-func docutils literal notranslate"><span class="pre">replacement_traverse()</span></code></a> functions, in addition to the
<a class="reference internal" href="foundation.html#sqlalchemy.sql.expression.ClauseElement.get_children" title="sqlalchemy.sql.expression.ClauseElement.get_children"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ClauseElement.get_children()</span></code></a>
function that is used to achieve
the iteration, is the <code class="xref py py-meth docutils literal notranslate"><span class="pre">ClauseElement._copy_internals()</span></code>
method.
For a <a class="reference internal" href="foundation.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClauseElement</span></code></a>
structure to support cloning and replacement
traversals correctly, it needs to be able to pass a cloning function into
its internal members in order to make copies of them.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.sql.visitors.traverse" title="sqlalchemy.sql.visitors.traverse"><code class="xref py py-func docutils literal notranslate"><span class="pre">traverse()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.sql.visitors.replacement_traverse" title="sqlalchemy.sql.visitors.replacement_traverse"><code class="xref py py-func docutils literal notranslate"><span class="pre">replacement_traverse()</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.iterate">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.sql.visitors.</span></span><span class="sig-name descname"><span class="pre">iterate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ExternallyTraversible</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">opts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">ExternallyTraversible</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.sql.visitors.iterate" title="Link to this definition">¶</a></dt>
<dd><p>Traverse the given expression structure, returning an iterator.</p>
<p>Traversal is configured to be breadth-first.</p>
<p>The central API feature used by the <a class="reference internal" href="#sqlalchemy.sql.visitors.iterate" title="sqlalchemy.sql.visitors.iterate"><code class="xref py py-func docutils literal notranslate"><span class="pre">iterate()</span></code></a>
function is the
<a class="reference internal" href="foundation.html#sqlalchemy.sql.expression.ClauseElement.get_children" title="sqlalchemy.sql.expression.ClauseElement.get_children"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ClauseElement.get_children()</span></code></a> method of
<a class="reference internal" href="foundation.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClauseElement</span></code></a> objects.  This method should return all
the <a class="reference internal" href="foundation.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClauseElement</span></code></a> objects which are associated with a
particular <a class="reference internal" href="foundation.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClauseElement</span></code></a> object. For example, a
<a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.Case" title="sqlalchemy.sql.expression.Case"><code class="xref py py-class docutils literal notranslate"><span class="pre">Case</span></code></a> structure will refer to a series of
<a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.ColumnElement" title="sqlalchemy.sql.expression.ColumnElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnElement</span></code></a> objects within its “whens” and “else_”
member variables.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.sql.visitors.iterate.params.obj"></span><strong>obj</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.visitors.iterate.params.obj">¶</a> – <a class="reference internal" href="foundation.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClauseElement</span></code></a> structure to be traversed</p></li>
<li><p><span class="target" id="sqlalchemy.sql.visitors.iterate.params.opts"></span><strong>opts</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.visitors.iterate.params.opts">¶</a> – dictionary of iteration options.   This dictionary is usually
empty in modern usage.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.replacement_traverse">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.sql.visitors.</span></span><span class="sig-name descname"><span class="pre">replacement_traverse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ExternallyTraversible</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">opts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_TraverseTransformCallableType</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ExternallyTraversible</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.sql.visitors.replacement_traverse" title="Link to this definition">¶</a></dt>
<dd><p>Clone the given expression structure, allowing element
replacement by a given replacement function.</p>
<p>This function is very similar to the <a class="reference internal" href="#sqlalchemy.sql.visitors.cloned_traverse" title="sqlalchemy.sql.visitors.cloned_traverse"><code class="xref py py-func docutils literal notranslate"><span class="pre">cloned_traverse()</span></code></a>
function, except instead of being passed a dictionary of visitors, all
elements are unconditionally passed into the given replace function.
The replace function then has the option to return an entirely new object
which will replace the one given.  If it returns <code class="docutils literal notranslate"><span class="pre">None</span></code>, then the object
is kept in place.</p>
<p>The difference in usage between <a class="reference internal" href="#sqlalchemy.sql.visitors.cloned_traverse" title="sqlalchemy.sql.visitors.cloned_traverse"><code class="xref py py-func docutils literal notranslate"><span class="pre">cloned_traverse()</span></code></a> and
<a class="reference internal" href="#sqlalchemy.sql.visitors.replacement_traverse" title="sqlalchemy.sql.visitors.replacement_traverse"><code class="xref py py-func docutils literal notranslate"><span class="pre">replacement_traverse()</span></code></a> is that in the former case, an
already-cloned object is passed to the visitor function, and the visitor
function can then manipulate the internal state of the object.
In the case of the latter, the visitor function should only return an
entirely different object, or do nothing.</p>
<p>The use case for <a class="reference internal" href="#sqlalchemy.sql.visitors.replacement_traverse" title="sqlalchemy.sql.visitors.replacement_traverse"><code class="xref py py-func docutils literal notranslate"><span class="pre">replacement_traverse()</span></code></a> is that of
replacing a FROM clause inside of a SQL structure with a different one,
as is a common use case within the ORM.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.traverse">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.sql.visitors.</span></span><span class="sig-name descname"><span class="pre">traverse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ExternallyTraversible</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">opts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">visitors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ExternallyTraversible</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.sql.visitors.traverse" title="Link to this definition">¶</a></dt>
<dd><p>Traverse and visit the given expression structure using the default
iterator.</p>
<blockquote>
<div><p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.sql</span><span class="w"> </span><span class="kn">import</span> <span class="n">visitors</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">some_table</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">some_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">foo</span> <span class="o">==</span> <span class="s2">&quot;bar&quot;</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">visit_bindparam</span><span class="p">(</span><span class="n">bind_param</span><span class="p">):</span>
    <span class="n">print</span><span class="p">(</span><span class="s2">&quot;found bound value: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">bind_param</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>


<span class="n">visitors</span><span class="o">.</span><span class="n">traverse</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="p">{},</span> <span class="p">{</span><span class="s2">&quot;bindparam&quot;</span><span class="p">:</span> <span class="n">visit_bindparam</span><span class="p">})</span></pre></div>
</div>
</div></blockquote>
<p>The iteration of objects uses the <a class="reference internal" href="#sqlalchemy.sql.visitors.iterate" title="sqlalchemy.sql.visitors.iterate"><code class="xref py py-func docutils literal notranslate"><span class="pre">iterate()</span></code></a> function,
which does a breadth-first traversal using a stack.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.sql.visitors.traverse.params.obj"></span><strong>obj</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.visitors.traverse.params.obj">¶</a> – <a class="reference internal" href="foundation.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClauseElement</span></code></a> structure to be traversed</p></li>
<li><p><span class="target" id="sqlalchemy.sql.visitors.traverse.params.opts"></span><strong>opts</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.visitors.traverse.params.opts">¶</a> – dictionary of iteration options.   This dictionary is usually
empty in modern usage.</p></li>
<li><p><span class="target" id="sqlalchemy.sql.visitors.traverse.params.visitors"></span><strong>visitors</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.visitors.traverse.params.visitors">¶</a> – dictionary of visit functions.   The dictionary should
have strings as keys, each of which would correspond to the
<code class="docutils literal notranslate"><span class="pre">__visit_name__</span></code> of a particular kind of SQL expression object, and
callable functions  as values, each of which represents a visitor function
for that kind of object.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.sql.visitors.traverse_using">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.sql.visitors.</span></span><span class="sig-name descname"><span class="pre">traverse_using</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iterator</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">ExternallyTraversible</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ExternallyTraversible</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">visitors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ExternallyTraversible</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.sql.visitors.traverse_using" title="Link to this definition">¶</a></dt>
<dd><p>Visit the given expression structure using the given iterator of
objects.</p>
<p><a class="reference internal" href="#sqlalchemy.sql.visitors.traverse_using" title="sqlalchemy.sql.visitors.traverse_using"><code class="xref py py-func docutils literal notranslate"><span class="pre">traverse_using()</span></code></a> is usually called internally as the result
of the <a class="reference internal" href="#sqlalchemy.sql.visitors.traverse" title="sqlalchemy.sql.visitors.traverse"><code class="xref py py-func docutils literal notranslate"><span class="pre">traverse()</span></code></a> function.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.sql.visitors.traverse_using.params.iterator"></span><strong>iterator</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.visitors.traverse_using.params.iterator">¶</a> – an iterable or sequence which will yield
<a class="reference internal" href="foundation.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClauseElement</span></code></a>
structures; the iterator is assumed to be the
product of the <a class="reference internal" href="#sqlalchemy.sql.visitors.iterate" title="sqlalchemy.sql.visitors.iterate"><code class="xref py py-func docutils literal notranslate"><span class="pre">iterate()</span></code></a> function.</p></li>
<li><p><span class="target" id="sqlalchemy.sql.visitors.traverse_using.params.obj"></span><strong>obj</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.visitors.traverse_using.params.obj">¶</a> – the <a class="reference internal" href="foundation.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClauseElement</span></code></a>
that was used as the target of the
<a class="reference internal" href="#sqlalchemy.sql.visitors.iterate" title="sqlalchemy.sql.visitors.iterate"><code class="xref py py-func docutils literal notranslate"><span class="pre">iterate()</span></code></a> function.</p></li>
<li><p><span class="target" id="sqlalchemy.sql.visitors.traverse_using.params.visitors"></span><strong>visitors</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.sql.visitors.traverse_using.params.visitors">¶</a> – dictionary of visit functions.  See <a class="reference internal" href="#sqlalchemy.sql.visitors.traverse" title="sqlalchemy.sql.visitors.traverse"><code class="xref py py-func docutils literal notranslate"><span class="pre">traverse()</span></code></a>
for details on this dictionary.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.sql.visitors.traverse" title="sqlalchemy.sql.visitors.traverse"><code class="xref py py-func docutils literal notranslate"><span class="pre">traverse()</span></code></a></p>
</div>
</dd></dl>

</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="schema.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Schema 定义语言</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="foundation.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">SQL 表达式语言基础构造</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                <a href="../copyright.html">Copyright</a> &#169; 2007-2025, the SQLAlchemy authors and contributors
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on 04/05/2025 04:00:26</div>
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">访问者和遍历实用程序</a><ul>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.ExternalTraversal"><code class="docutils literal notranslate"><span class="pre">ExternalTraversal</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.ExternalTraversal.chain"><code class="docutils literal notranslate"><span class="pre">ExternalTraversal.chain()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.ExternalTraversal.iterate"><code class="docutils literal notranslate"><span class="pre">ExternalTraversal.iterate()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.ExternalTraversal.traverse"><code class="docutils literal notranslate"><span class="pre">ExternalTraversal.traverse()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.ExternalTraversal.visitor_iterator"><code class="docutils literal notranslate"><span class="pre">ExternalTraversal.visitor_iterator</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal"><code class="docutils literal notranslate"><span class="pre">InternalTraversal</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_annotations_key"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_annotations_key</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_anon_name"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_anon_name</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_boolean"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_boolean</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_clauseelement"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_clauseelement</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_clauseelement_list"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_clauseelement_list</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_clauseelement_tuple"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_clauseelement_tuple</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_clauseelement_tuples"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_clauseelement_tuples</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_dialect_options"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_dialect_options</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_dml_multi_values"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_dml_multi_values</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_dml_ordered_values"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_dml_ordered_values</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_dml_values"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_dml_values</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_fromclause_canonical_column_collection"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_fromclause_canonical_column_collection</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_fromclause_ordered_set"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_fromclause_ordered_set</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_has_cache_key"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_has_cache_key</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_has_cache_key_list"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_has_cache_key_list</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_has_cache_key_tuples"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_has_cache_key_tuples</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_ignore"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_ignore</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_inspectable"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_inspectable</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_inspectable_list"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_inspectable_list</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_multi"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_multi</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_multi_list"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_multi_list</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_named_ddl_element"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_named_ddl_element</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_operator"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_operator</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_plain_dict"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_plain_dict</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_plain_obj"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_plain_obj</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_prefix_sequence"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_prefix_sequence</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_propagate_attrs"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_propagate_attrs</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_statement_hint_list"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_statement_hint_list</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_string"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_string</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_string_clauseelement_dict"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_string_clauseelement_dict</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_string_list"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_string_list</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_string_multi_dict"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_string_multi_dict</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_table_hint_list"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_table_hint_list</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_type"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_type</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.InternalTraversal.dp_unknown_structure"><code class="docutils literal notranslate"><span class="pre">InternalTraversal.dp_unknown_structure</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.Visitable"><code class="docutils literal notranslate"><span class="pre">Visitable</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.anon_map"><code class="docutils literal notranslate"><span class="pre">anon_map</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.cloned_traverse"><code class="docutils literal notranslate"><span class="pre">cloned_traverse()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.iterate"><code class="docutils literal notranslate"><span class="pre">iterate()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.replacement_traverse"><code class="docutils literal notranslate"><span class="pre">replacement_traverse()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.traverse"><code class="docutils literal notranslate"><span class="pre">traverse()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.sql.visitors.traverse_using"><code class="docutils literal notranslate"><span class="pre">traverse_using()</span></code></a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=2d0eb83f"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../_static/tabs.js?v=3ee01567"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=2f3e6152"></script>
    <script src="../_static/translations.js?v=beaddf03"></script>
    </body>
</html>