<!doctype html>
<html class="no-js" lang="zh-CN" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="索引" href="../genindex.html" /><link rel="search" title="搜索" href="../search.html" /><link rel="copyright" title="版权所有" href="../copyright.html" /><link rel="next" title="事件和内部" href="extending.html" /><link rel="prev" title="使用事件跟踪查询、对象和会话更改" href="session_events.html" />

    <!-- Generated with Sphinx 7.2.6 and Furo 2024.08.06 -->
        <title>会话 API - SQLAlchemy 2.1 Documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/changelog.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx_paramlinks.css" />
    <link rel="stylesheet" type="text/css" href="../_static/docs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">SQLAlchemy 2.1 Documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">SQLAlchemy 2.1 Documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="搜索" name="q" aria-label="搜索">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">概述</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorial/index.html">SQLAlchemy 统一教程</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of SQLAlchemy 统一教程</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/engine.html">建立连接 - Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/dbapi_transactions.html">使用事务和DBAPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/metadata.html">使用数据库元数据</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../tutorial/data.html">处理数据</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of 处理数据</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/data_insert.html">使用 INSERT 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/data_select.html">使用 SELECT 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/data_update.html">使用 UPDATE 和 DELETE 语句</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/orm_data_manipulation.html">使用 ORM 进行数据操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/orm_related_objects.html">使用 ORM 相关对象</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/further_reading.html">进一步阅读</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">SQLAlchemy ORM</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of SQLAlchemy ORM</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="quickstart.html">ORM 快速入门</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="mapper_config.html">ORM 映射类配置</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of ORM 映射类配置</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="mapping_styles.html">ORM 映射类概述</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="declarative_mapping.html">使用声明式映射类</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of 使用声明式映射类</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="declarative_styles.html">声明式映射风格</a></li>
<li class="toctree-l4"><a class="reference internal" href="declarative_tables.html">声明式的表配置</a></li>
<li class="toctree-l4"><a class="reference internal" href="declarative_config.html">使用声明式映射器配置</a></li>
<li class="toctree-l4"><a class="reference internal" href="declarative_mixins.html">使用 Mixins 组合映射层次结构</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="dataclasses.html">与dataclass和attrs的集成</a></li>
<li class="toctree-l3"><a class="reference internal" href="mapped_sql_expr.html">SQL 表达式作为映射属性</a></li>
<li class="toctree-l3"><a class="reference internal" href="mapped_attributes.html">更改Attribute的行为</a></li>
<li class="toctree-l3"><a class="reference internal" href="composites.html">复合列类型</a></li>
<li class="toctree-l3"><a class="reference internal" href="inheritance.html">映射类继承层次结构</a></li>
<li class="toctree-l3"><a class="reference internal" href="nonstandard_mappings.html">非传统映射</a></li>
<li class="toctree-l3"><a class="reference internal" href="versioning.html">配置版本计数器</a></li>
<li class="toctree-l3"><a class="reference internal" href="mapping_api.html">类映射 API</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="scalar_mapping.html">映射 SQL 表达式</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of 映射 SQL 表达式</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="mapping_columns.html">映射表格列</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="relationships.html">关系配置</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of 关系配置</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="basic_relationships.html">基本关系模式</a></li>
<li class="toctree-l3"><a class="reference internal" href="self_referential.html">邻接表关系</a></li>
<li class="toctree-l3"><a class="reference internal" href="join_conditions.html">配置关系连接方式</a></li>
<li class="toctree-l3"><a class="reference internal" href="large_collections.html">使用大型集合</a></li>
<li class="toctree-l3"><a class="reference internal" href="collection_api.html">集合自定义和 API 详细信息</a></li>
<li class="toctree-l3"><a class="reference internal" href="relationship_persistence.html">特殊关系的持久化模式</a></li>
<li class="toctree-l3"><a class="reference internal" href="backref.html">使用旧版“backref”关系参数</a></li>
<li class="toctree-l3"><a class="reference internal" href="relationship_api.html">关系 API</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="queryguide/index.html">ORM 查询指南</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of ORM 查询指南</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="queryguide/select.html">为 ORM 映射类编写 SELECT 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="queryguide/inheritance.html">为继承映射编写 SELECT 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="queryguide/dml.html">启用 ORM 的 INSERT、UPDATE 和 DELETE 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="queryguide/columns.html">列加载选项</a></li>
<li class="toctree-l3"><a class="reference internal" href="queryguide/relationships.html">关系加载技术</a></li>
<li class="toctree-l3"><a class="reference internal" href="queryguide/api.html">用于查询的 ORM API 功能</a></li>
<li class="toctree-l3"><a class="reference internal" href="queryguide/query.html">旧式查询 API</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="session.html">使用会话</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of 使用会话</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="session_basics.html">会话基础知识</a></li>
<li class="toctree-l3"><a class="reference internal" href="session_state_management.html">状态管理</a></li>
<li class="toctree-l3"><a class="reference internal" href="cascades.html">级联</a></li>
<li class="toctree-l3"><a class="reference internal" href="session_transaction.html">事务和连接管理</a></li>
<li class="toctree-l3"><a class="reference internal" href="persistence_techniques.html">附加持久性技术</a></li>
<li class="toctree-l3"><a class="reference internal" href="contextual.html">上下文/线程本地会话</a></li>
<li class="toctree-l3"><a class="reference internal" href="session_events.html">使用事件跟踪查询、对象和会话更改</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">会话 API</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="extending.html">事件和内部</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of 事件和内部</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="events.html">ORM 事件</a></li>
<li class="toctree-l3"><a class="reference internal" href="internals.html">ORM 内部</a></li>
<li class="toctree-l3"><a class="reference internal" href="exceptions.html">ORM 异常</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="extensions/index.html">ORM 扩展</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of ORM 扩展</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="extensions/asyncio.html">异步 I/O (asyncio)</a></li>
<li class="toctree-l3"><a class="reference internal" href="extensions/associationproxy.html">关联代理</a></li>
<li class="toctree-l3"><a class="reference internal" href="extensions/automap.html">自动映射</a></li>
<li class="toctree-l3"><a class="reference internal" href="extensions/baked.html">烘焙查询</a></li>
<li class="toctree-l3"><a class="reference internal" href="extensions/declarative/index.html">声明式扩展</a></li>
<li class="toctree-l3"><a class="reference internal" href="extensions/mutable.html">突变追踪</a></li>
<li class="toctree-l3"><a class="reference internal" href="extensions/orderinglist.html">排序列表</a></li>
<li class="toctree-l3"><a class="reference internal" href="extensions/horizontal_shard.html">水平分片</a></li>
<li class="toctree-l3"><a class="reference internal" href="extensions/hybrid.html">混合属性</a></li>
<li class="toctree-l3"><a class="reference internal" href="extensions/indexable.html">Indexable</a></li>
<li class="toctree-l3"><a class="reference internal" href="extensions/instrumentation.html">替代类检测</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="examples.html">核心和 ORM 示例</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../core/index.html">SQLAlchemy Core</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of SQLAlchemy Core</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../core/expression_api.html">SQL 语句和表达式 API</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of SQL 语句和表达式 API</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../core/sqlelement.html">列元素和表达式</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/operators.html">操作符参考</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/selectable.html">SELECT 和相关构造</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/dml.html">插入,更新,删除</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/functions.html">SQL 和 范型函数</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/compiler.html">自定义 SQL 构造和编译扩展</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/serializer.html">表达式序列化器扩展</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/foundation.html">SQL 表达式语言基础构造</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/visitors.html">访问者和遍历实用程序</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../core/schema.html">Schema 定义语言</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of Schema 定义语言</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../core/metadata.html">使用元数据描述数据库</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/reflection.html">反映数据库对象</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/defaults.html">列 INSERT/UPDATE 默认值</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/constraints.html">定义约束和索引</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/ddl.html">自定义 DDL</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../core/types.html">SQL 数据类型对象</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of SQL 数据类型对象</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../core/type_basics.html">类型层次结构</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/custom_types.html">自定义类型</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/type_api.html">基本类型 API</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../core/engines_connections.html">Engine和Connection的使用</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle navigation of Engine和Connection的使用</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../core/engines.html">Engine 配置</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/connections.html">使用Engines和Connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/pooling.html">连接池</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/events.html">核心事件</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../core/api_basics.html">Core API 基础</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle navigation of Core API 基础</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../core/event.html">事件</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/inspection.html">运行时审查 API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/exceptions.html">Core 异常</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/internals.html">Core 内部</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../dialects/index.html">Dialects</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle navigation of Dialects</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../dialects/postgresql.html">PostgreSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dialects/mysql.html">MySQL 和 MariaDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dialects/sqlite.html">SQLite</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dialects/oracle.html">Oracle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dialects/mssql.html">Microsoft SQL Server</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../faq/index.html">常见问题</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle navigation of 常见问题</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../faq/installation.html">安装</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/connections.html">连接 / 引擎</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/metadata_schema.html">元数据 / Schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/sqlexpressions.html">SQL 表达式</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/ormconfiguration.html">ORM 配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/performance.html">性能</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/sessions.html">会话 / 查询</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/thirdparty.html">第三方包集成问题</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../errors.html">错误消息</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../changelog/index.html">变更和迁移</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle navigation of 变更和迁移</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_21.html">SQLAlchemy 2.1 有什么新功能？</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_21.html">2.1 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_20.html">2.0 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_14.html">1.4 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_13.html">1.3 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_12.html">1.2 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_11.html">1.1 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_10.html">1.0 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_09.html">0.9 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_08.html">0.8 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_07.html">0.7 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_06.html">0.6 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_05.html">0.5 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_04.html">0.4 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_03.html">0.3 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_02.html">0.2 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_01.html">0.1 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_20.html">SQLAlchemy 2.0 - Major Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/whatsnew_20.html">What’s New in SQLAlchemy 2.0?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_14.html">What’s New in SQLAlchemy 1.4?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_13.html">What’s New in SQLAlchemy 1.3?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_12.html">What’s New in SQLAlchemy 1.2?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_11.html">What’s New in SQLAlchemy 1.1?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_10.html">What’s New in SQLAlchemy 1.0?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_09.html">What’s New in SQLAlchemy 0.9?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_08.html">What’s New in SQLAlchemy 0.8?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_07.html">What’s New in SQLAlchemy 0.7?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_06.html">What’s New in SQLAlchemy 0.6?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_05.html">What’s new in SQLAlchemy 0.5?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_04.html">What’s new in SQLAlchemy 0.4?</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          

<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="api">
<h1>会话 API<a class="headerlink" href="#api" title="Link to this heading">¶</a></h1>
<p>Session API</p>
<section id="session-sessionmaker">
<h2>Session 和 sessionmaker()<a class="headerlink" href="#session-sessionmaker" title="Link to this heading">¶</a></h2>
<p>Session and sessionmaker()</p>
<div class="table-wrapper longtable docutils container">
<table class="longtable docutils align-default">
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState"><span class="sig-name descname">ORMExecuteState</span></a></p></td>
<td><p>Represents a call to the <a class="reference internal" href="#sqlalchemy.orm.Session.execute" title="sqlalchemy.orm.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a> method, as passed
to the <a class="reference internal" href="events.html#sqlalchemy.orm.SessionEvents.do_orm_execute" title="sqlalchemy.orm.SessionEvents.do_orm_execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SessionEvents.do_orm_execute()</span></code></a> event hook.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.Session"><span class="sig-name descname">Session</span></a></p></td>
<td><p>Manages persistence operations for ORM-mapped objects.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.sessionmaker"><span class="sig-name descname">sessionmaker</span></a></p></td>
<td><p>A configurable <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> factory.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.SessionTransaction"><span class="sig-name descname">SessionTransaction</span></a></p></td>
<td><p>A <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>-level transaction.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.SessionTransactionOrigin"><span class="sig-name descname">SessionTransactionOrigin</span></a></p></td>
<td><p>indicates the origin of a <a class="reference internal" href="#sqlalchemy.orm.SessionTransaction" title="sqlalchemy.orm.SessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionTransaction</span></code></a>.</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.orm.sessionmaker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">sessionmaker</span></span><a class="headerlink" href="#sqlalchemy.orm.sessionmaker" title="Link to this definition">¶</a></dt>
<dd><p>A configurable <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> factory.</p>
<p>The <a class="reference internal" href="#sqlalchemy.orm.sessionmaker" title="sqlalchemy.orm.sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code></a> factory generates new
<a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> objects when called, creating them given
the configurational arguments established here.</p>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_engine</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">sessionmaker</span>

<span class="c1"># an Engine, which the Session will use for connection</span>
<span class="c1"># resources</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql+psycopg2://scott:tiger@localhost/&quot;</span><span class="p">)</span>

<span class="n">Session</span> <span class="o">=</span> <span class="n">sessionmaker</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>

<span class="k">with</span> <span class="n">Session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">some_object</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">some_other_object</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span></pre></div>
</div>
<p>Context manager use is optional; otherwise, the returned
<a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object may be closed explicitly via the
<a class="reference internal" href="#sqlalchemy.orm.Session.close" title="sqlalchemy.orm.Session.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.close()</span></code></a> method.   Using a
<code class="docutils literal notranslate"><span class="pre">try:/finally:</span></code> block is optional, however will ensure that the close
takes place even if there are database errors:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">session</span> <span class="o">=</span> <span class="n">Session</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">some_object</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">some_other_object</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">session</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div>
</div>
<p><a class="reference internal" href="#sqlalchemy.orm.sessionmaker" title="sqlalchemy.orm.sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code></a> acts as a factory for <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>
objects in the same way as an <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> acts as a factory
for <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> objects.  In this way it also includes
a <a class="reference internal" href="#sqlalchemy.orm.sessionmaker.begin" title="sqlalchemy.orm.sessionmaker.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sessionmaker.begin()</span></code></a> method, that provides a context
manager which both begins and commits a transaction, as well as closes
out the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> when complete, rolling back the transaction
if any errors occur:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Session</span> <span class="o">=</span> <span class="n">sessionmaker</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>

<span class="k">with</span> <span class="n">Session</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">some_object</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">some_other_object</span><span class="p">)</span>
<span class="c1"># commits transaction, closes session</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入.</span></p>
</div>
<p>When calling upon <a class="reference internal" href="#sqlalchemy.orm.sessionmaker" title="sqlalchemy.orm.sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code></a> to construct a
<a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>, keyword arguments may also be passed to the
method; these arguments will override that of the globally configured
parameters.  Below we use a <a class="reference internal" href="#sqlalchemy.orm.sessionmaker" title="sqlalchemy.orm.sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code></a> bound to a certain
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> to produce a <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> that is instead
bound to a specific <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> procured from that engine:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Session</span> <span class="o">=</span> <span class="n">sessionmaker</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>

<span class="c1"># bind an individual session to a connection</span>

<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">connection</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="o">...</span>  <span class="c1"># work with session</span></pre></div>
</div>
<p>The class also includes a method <a class="reference internal" href="#sqlalchemy.orm.sessionmaker.configure" title="sqlalchemy.orm.sessionmaker.configure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sessionmaker.configure()</span></code></a>, which
can be used to specify additional keyword arguments to the factory, which
will take effect for subsequent <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> objects generated. This
is usually used to associate one or more <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> objects
with an existing
<a class="reference internal" href="#sqlalchemy.orm.sessionmaker" title="sqlalchemy.orm.sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code></a> factory before it is first used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># application starts, sessionmaker does not have</span>
<span class="c1"># an engine bound yet</span>
<span class="n">Session</span> <span class="o">=</span> <span class="n">sessionmaker</span><span class="p">()</span>

<span class="c1"># ... later, when an engine URL is read from a configuration</span>
<span class="c1"># file or other events allow the engine to be created</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;sqlite:///foo.db&quot;</span><span class="p">)</span>
<span class="n">Session</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>

<span class="n">sess</span> <span class="o">=</span> <span class="n">Session</span><span class="p">()</span>
<span class="c1"># work with session</span></pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="session_basics.html#session-getting"><span class="std std-ref">打开和关闭会话</span></a> - introductory text on creating
sessions using <a class="reference internal" href="#sqlalchemy.orm.sessionmaker" title="sqlalchemy.orm.sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code></a>.</p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.orm.sessionmaker.__call__"><span class="sig-name descname">__call__()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.sessionmaker.__init__"><span class="sig-name descname">__init__()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.sessionmaker.begin"><span class="sig-name descname">begin()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.sessionmaker.configure"><span class="sig-name descname">configure()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.sessionmaker.identity_key"><span class="sig-name descname">identity_key()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.sessionmaker.object_session"><span class="sig-name descname">object_session()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.orm.sessionmaker" title="sqlalchemy.orm.sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.orm.sessionmaker</span></code></a> (<code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.session._SessionClassMethods</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Generic</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.sessionmaker.__call__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.sessionmaker"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.sessionmaker.</span></code></a><span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">local_kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_S</span></span></span><a class="headerlink" href="#sqlalchemy.orm.sessionmaker.__call__" title="Link to this definition">¶</a></dt>
<dd><p>Produce a new <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object using the configuration
established in this <a class="reference internal" href="#sqlalchemy.orm.sessionmaker" title="sqlalchemy.orm.sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code></a>.</p>
<p>In Python, the <code class="docutils literal notranslate"><span class="pre">__call__</span></code> method is invoked on an object when
it is “called” in the same way as a function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Session</span> <span class="o">=</span> <span class="n">sessionmaker</span><span class="p">(</span><span class="n">some_engine</span><span class="p">)</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">Session</span><span class="p">()</span>  <span class="c1"># invokes sessionmaker.__call__()</span></pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.sessionmaker.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.sessionmaker"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.sessionmaker.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bind:</span> <span class="pre">Optional[_SessionBind]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">class_:</span> <span class="pre">Type[_S]</span> <span class="pre">=</span> <span class="pre">&lt;class</span> <span class="pre">'sqlalchemy.orm.session.Session'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autoflush:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expire_on_commit:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info:</span> <span class="pre">Optional[_InfoType]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kw:</span> <span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.sessionmaker.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Construct a new <a class="reference internal" href="#sqlalchemy.orm.sessionmaker" title="sqlalchemy.orm.sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code></a>.</p>
<p>All arguments here except for <code class="docutils literal notranslate"><span class="pre">class_</span></code> correspond to arguments
accepted by <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> directly.  See the
<a class="reference internal" href="#sqlalchemy.orm.Session.__init__" title="sqlalchemy.orm.Session.__init__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.__init__()</span></code></a> docstring for more details on parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.sessionmaker.params.bind"></span><strong>bind</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.sessionmaker.params.bind">¶</a> – a <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> or other <code class="xref py py-class docutils literal notranslate"><span class="pre">Connectable</span></code>
with
which newly created <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> objects will be associated.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.sessionmaker.params.class_"></span><strong>class_</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.sessionmaker.params.class_">¶</a> – class to use in order to create new <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>
objects.  Defaults to <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.sessionmaker.params.autoflush"></span><strong>autoflush</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.sessionmaker.params.autoflush">¶</a> – <p>The autoflush setting to use with newly created
<a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> objects.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="session_basics.html#session-flushing"><span class="std std-ref">刷新</span></a> - additional background on autoflush</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.sessionmaker.params.expire_on_commit"></span><strong>expire_on_commit=True</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.sessionmaker.params.expire_on_commit">¶</a> – the
<a class="reference internal" href="#sqlalchemy.orm.Session.params.expire_on_commit" title="sqlalchemy.orm.Session"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.expire_on_commit</span></code></a> setting to use
with newly created <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> objects.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.sessionmaker.params.info"></span><strong>info</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.sessionmaker.params.info">¶</a> – optional dictionary of information that will be available
via <a class="reference internal" href="#sqlalchemy.orm.Session.info" title="sqlalchemy.orm.Session.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.info</span></code></a>.  Note this dictionary is <em>updated</em>, not
replaced, when the <code class="docutils literal notranslate"><span class="pre">info</span></code> parameter is specified to the specific
<a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> construction operation.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.sessionmaker.params.**kw"></span><strong>**kw</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.sessionmaker.params.**kw">¶</a> – all other keyword arguments are passed to the
constructor of newly created <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> objects.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.sessionmaker.begin">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.sessionmaker"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.sessionmaker.</span></code></a><span class="sig-name descname"><span class="pre">begin</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">AbstractContextManager</span><span class="p"><span class="pre">[</span></span><span class="pre">_S</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.sessionmaker.begin" title="Link to this definition">¶</a></dt>
<dd><p>Produce a context manager that both provides a new
<a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> as well as a transaction that commits.</p>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Session</span> <span class="o">=</span> <span class="n">sessionmaker</span><span class="p">(</span><span class="n">some_engine</span><span class="p">)</span>

<span class="k">with</span> <span class="n">Session</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">some_object</span><span class="p">)</span>

<span class="c1"># commits transaction, closes session</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.sessionmaker.configure">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.sessionmaker"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.sessionmaker.</span></code></a><span class="sig-name descname"><span class="pre">configure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">new_kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.sessionmaker.configure" title="Link to this definition">¶</a></dt>
<dd><p>(Re)configure the arguments for this sessionmaker.</p>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Session</span> <span class="o">=</span> <span class="n">sessionmaker</span><span class="p">()</span>

<span class="n">Session</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;sqlite://&quot;</span><span class="p">))</span></pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.sessionmaker.identity_key">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><a class="reference internal" href="#sqlalchemy.orm.sessionmaker"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.sessionmaker.</span></code></a><span class="sig-name descname"><span class="pre">identity_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">class_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ident</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.Tuple" title="sqlalchemy.sql.expression.Tuple"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Unpack</span><span class="p"><span class="pre">[</span></span><span class="pre">TupleAny</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../core/connections.html#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><span class="pre">RowMapping</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identity_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_IdentityKeyType</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.sessionmaker.identity_key" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.session._SessionClassMethods.identity_key</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.session._SessionClassMethods</span></code></p>
</div>
<p>Return an identity key.</p>
<p>This is an alias of <a class="reference internal" href="mapping_api.html#sqlalchemy.orm.util.identity_key" title="sqlalchemy.orm.util.identity_key"><code class="xref py py-func docutils literal notranslate"><span class="pre">identity_key()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.sessionmaker.object_session">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><a class="reference internal" href="#sqlalchemy.orm.sessionmaker"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.sessionmaker.</span></code></a><span class="sig-name descname"><span class="pre">object_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.session.Session"><span class="pre">Session</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.sessionmaker.object_session" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.session._SessionClassMethods.object_session</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.session._SessionClassMethods</span></code></p>
</div>
<p>Return the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> to which an object belongs.</p>
<p>This is an alias of <a class="reference internal" href="#sqlalchemy.orm.object_session" title="sqlalchemy.orm.object_session"><code class="xref py py-func docutils literal notranslate"><span class="pre">object_session()</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.orm.ORMExecuteState">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">ORMExecuteState</span></span><a class="headerlink" href="#sqlalchemy.orm.ORMExecuteState" title="Link to this definition">¶</a></dt>
<dd><p>Represents a call to the <a class="reference internal" href="#sqlalchemy.orm.Session.execute" title="sqlalchemy.orm.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a> method, as passed
to the <a class="reference internal" href="events.html#sqlalchemy.orm.SessionEvents.do_orm_execute" title="sqlalchemy.orm.SessionEvents.do_orm_execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SessionEvents.do_orm_execute()</span></code></a> event hook.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="session_events.html#session-execute-events"><span class="std std-ref">执行事件</span></a> - top level documentation on how
to use <a class="reference internal" href="events.html#sqlalchemy.orm.SessionEvents.do_orm_execute" title="sqlalchemy.orm.SessionEvents.do_orm_execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SessionEvents.do_orm_execute()</span></code></a></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.__init__"><span class="sig-name descname">__init__()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.all_mappers"><span class="sig-name descname">all_mappers</span></a>, <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.bind_arguments"><span class="sig-name descname">bind_arguments</span></a>, <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.bind_mapper"><span class="sig-name descname">bind_mapper</span></a>, <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.execution_options"><span class="sig-name descname">execution_options</span></a>, <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.invoke_statement"><span class="sig-name descname">invoke_statement()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.is_column_load"><span class="sig-name descname">is_column_load</span></a>, <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.is_delete"><span class="sig-name descname">is_delete</span></a>, <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.is_executemany"><span class="sig-name descname">is_executemany</span></a>, <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.is_from_statement"><span class="sig-name descname">is_from_statement</span></a>, <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.is_insert"><span class="sig-name descname">is_insert</span></a>, <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.is_orm_statement"><span class="sig-name descname">is_orm_statement</span></a>, <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.is_relationship_load"><span class="sig-name descname">is_relationship_load</span></a>, <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.is_select"><span class="sig-name descname">is_select</span></a>, <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.is_update"><span class="sig-name descname">is_update</span></a>, <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.lazy_loaded_from"><span class="sig-name descname">lazy_loaded_from</span></a>, <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.load_options"><span class="sig-name descname">load_options</span></a>, <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.loader_strategy_path"><span class="sig-name descname">loader_strategy_path</span></a>, <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.local_execution_options"><span class="sig-name descname">local_execution_options</span></a>, <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.parameters"><span class="sig-name descname">parameters</span></a>, <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.session"><span class="sig-name descname">session</span></a>, <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.statement"><span class="sig-name descname">statement</span></a>, <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.update_delete_options"><span class="sig-name descname">update_delete_options</span></a>, <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.update_execution_options"><span class="sig-name descname">update_execution_options()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.user_defined_options"><span class="sig-name descname">user_defined_options</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState" title="sqlalchemy.orm.ORMExecuteState"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMExecuteState</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.util.langhelpers.MemoizedSlots</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.ORMExecuteState.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMExecuteState.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><span class="pre">Session</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_ExecuteOptions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compile_state_cls</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">_ORMCompileState</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">events_todo</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">_InstanceLevelDispatch</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><span class="pre">Session</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.ORMExecuteState.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Construct a new <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState" title="sqlalchemy.orm.ORMExecuteState"><code class="xref py py-class docutils literal notranslate"><span class="pre">ORMExecuteState</span></code></a>.</p>
<p>this object is constructed internally.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.ORMExecuteState.all_mappers">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMExecuteState.</span></code></a><span class="sig-name descname"><span class="pre">all_mappers</span></span><a class="headerlink" href="#sqlalchemy.orm.ORMExecuteState.all_mappers" title="Link to this definition">¶</a></dt>
<dd><p>Return a sequence of all <a class="reference internal" href="mapping_api.html#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> objects that are
involved at the top level of this statement.</p>
<p>By “top level” we mean those <a class="reference internal" href="mapping_api.html#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> objects that would
be represented in the result set rows for a <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code></a>
query, or for a <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.update" title="sqlalchemy.sql.expression.update"><code class="xref py py-func docutils literal notranslate"><span class="pre">update()</span></code></a> or <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.delete" title="sqlalchemy.sql.expression.delete"><code class="xref py py-func docutils literal notranslate"><span class="pre">delete()</span></code></a> query,
the mapper that is the main subject of the UPDATE or DELETE.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4.0b2 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.bind_mapper" title="sqlalchemy.orm.ORMExecuteState.bind_mapper"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ORMExecuteState.bind_mapper</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.ORMExecuteState.bind_arguments">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMExecuteState.</span></code></a><span class="sig-name descname"><span class="pre">bind_arguments</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">_BindArguments</span></em><a class="headerlink" href="#sqlalchemy.orm.ORMExecuteState.bind_arguments" title="Link to this definition">¶</a></dt>
<dd><p>The dictionary passed as the
<a class="reference internal" href="#sqlalchemy.orm.Session.execute.params.bind_arguments" title="sqlalchemy.orm.Session.execute"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.execute.bind_arguments</span></code></a> dictionary.</p>
<p>This dictionary may be used by extensions to <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> to pass
arguments that will assist in determining amongst a set of database
connections which one should be used to invoke this statement.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.ORMExecuteState.bind_mapper">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMExecuteState.</span></code></a><span class="sig-name descname"><span class="pre">bind_mapper</span></span><a class="headerlink" href="#sqlalchemy.orm.ORMExecuteState.bind_mapper" title="Link to this definition">¶</a></dt>
<dd><p>Return the <a class="reference internal" href="mapping_api.html#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> that is the primary “bind” mapper.</p>
<p>For an <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState" title="sqlalchemy.orm.ORMExecuteState"><code class="xref py py-class docutils literal notranslate"><span class="pre">ORMExecuteState</span></code></a> object invoking an ORM
statement, that is, the <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.is_orm_statement" title="sqlalchemy.orm.ORMExecuteState.is_orm_statement"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ORMExecuteState.is_orm_statement</span></code></a>
attribute is <code class="docutils literal notranslate"><span class="pre">True</span></code>, this attribute will return the
<a class="reference internal" href="mapping_api.html#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> that is considered to be the “primary” mapper
of the statement.   The term “bind mapper” refers to the fact that
a <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object may be “bound” to multiple
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> objects keyed to mapped classes, and the
“bind mapper” determines which of those <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> objects
would be selected.</p>
<p>For a statement that is invoked against a single mapped class,
<a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.bind_mapper" title="sqlalchemy.orm.ORMExecuteState.bind_mapper"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ORMExecuteState.bind_mapper</span></code></a> is intended to be a reliable
way of getting this mapper.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4.0b2 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.all_mappers" title="sqlalchemy.orm.ORMExecuteState.all_mappers"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ORMExecuteState.all_mappers</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.ORMExecuteState.execution_options">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMExecuteState.</span></code></a><span class="sig-name descname"><span class="pre">execution_options</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">_ExecuteOptions</span></em><a class="headerlink" href="#sqlalchemy.orm.ORMExecuteState.execution_options" title="Link to this definition">¶</a></dt>
<dd><p>The complete dictionary of current execution options.</p>
<p>This is a merge of the statement level options with the
locally passed execution options.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.local_execution_options" title="sqlalchemy.orm.ORMExecuteState.local_execution_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ORMExecuteState.local_execution_options</span></code></a></p>
<p><a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Executable.execution_options" title="sqlalchemy.sql.expression.Executable.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Executable.execution_options()</span></code></a></p>
<p><a class="reference internal" href="queryguide/api.html#orm-queryguide-execution-options"><span class="std std-ref">ORM 执行选项</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.ORMExecuteState.invoke_statement">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMExecuteState.</span></code></a><span class="sig-name descname"><span class="pre">invoke_statement</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><span class="pre">Result</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Unpack</span><span class="p"><span class="pre">[</span></span><span class="pre">TupleAny</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.ORMExecuteState.invoke_statement" title="Link to this definition">¶</a></dt>
<dd><p>Execute the statement represented by this
<a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState" title="sqlalchemy.orm.ORMExecuteState"><code class="xref py py-class docutils literal notranslate"><span class="pre">ORMExecuteState</span></code></a>, without re-invoking events that have
already proceeded.</p>
<p>This method essentially performs a re-entrant execution of the current
statement for which the <a class="reference internal" href="events.html#sqlalchemy.orm.SessionEvents.do_orm_execute" title="sqlalchemy.orm.SessionEvents.do_orm_execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SessionEvents.do_orm_execute()</span></code></a> event is
being currently invoked.    The use case for this is for event handlers
that want to override how the ultimate
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object is returned, such as for schemes that
retrieve results from an offline cache or which concatenate results
from multiple executions.</p>
<p>When the <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object is returned by the actual
handler function within <a class="reference internal" href="events.html#sqlalchemy.orm.SessionEvents.do_orm_execute" title="sqlalchemy.orm.SessionEvents.do_orm_execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SessionEvents.do_orm_execute()</span></code></a> and
is propagated to the calling
<a class="reference internal" href="#sqlalchemy.orm.Session.execute" title="sqlalchemy.orm.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a> method, the remainder of the
<a class="reference internal" href="#sqlalchemy.orm.Session.execute" title="sqlalchemy.orm.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a> method is preempted and the
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object is returned to the caller of
<a class="reference internal" href="#sqlalchemy.orm.Session.execute" title="sqlalchemy.orm.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a> immediately.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.ORMExecuteState.invoke_statement.params.statement"></span><strong>statement</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.ORMExecuteState.invoke_statement.params.statement">¶</a> – optional statement to be invoked, in place of the
statement currently represented by <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.statement" title="sqlalchemy.orm.ORMExecuteState.statement"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ORMExecuteState.statement</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.ORMExecuteState.invoke_statement.params.params"></span><strong>params</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.ORMExecuteState.invoke_statement.params.params">¶</a> – <p>optional dictionary of parameters or list of parameters
which will be merged into the existing
<a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.parameters" title="sqlalchemy.orm.ORMExecuteState.parameters"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ORMExecuteState.parameters</span></code></a> of this <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState" title="sqlalchemy.orm.ORMExecuteState"><code class="xref py py-class docutils literal notranslate"><span class="pre">ORMExecuteState</span></code></a>.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 2.0 版本发生变更: </span>a list of parameter dictionaries is accepted
for executemany executions.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.ORMExecuteState.invoke_statement.params.execution_options"></span><strong>execution_options</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.ORMExecuteState.invoke_statement.params.execution_options">¶</a> – optional dictionary of execution options
will be merged into the existing
<a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.execution_options" title="sqlalchemy.orm.ORMExecuteState.execution_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ORMExecuteState.execution_options</span></code></a> of this
<a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState" title="sqlalchemy.orm.ORMExecuteState"><code class="xref py py-class docutils literal notranslate"><span class="pre">ORMExecuteState</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.ORMExecuteState.invoke_statement.params.bind_arguments"></span><strong>bind_arguments</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.ORMExecuteState.invoke_statement.params.bind_arguments">¶</a> – optional dictionary of bind_arguments
which will be merged amongst the current
<a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.bind_arguments" title="sqlalchemy.orm.ORMExecuteState.bind_arguments"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ORMExecuteState.bind_arguments</span></code></a>
of this <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState" title="sqlalchemy.orm.ORMExecuteState"><code class="xref py py-class docutils literal notranslate"><span class="pre">ORMExecuteState</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>a <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object with ORM-level results.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="session_events.html#do-orm-execute-re-executing"><span class="std std-ref">重新执行语句</span></a> - background and examples on the
appropriate usage of <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.invoke_statement" title="sqlalchemy.orm.ORMExecuteState.invoke_statement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ORMExecuteState.invoke_statement()</span></code></a>.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.ORMExecuteState.is_column_load">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMExecuteState.</span></code></a><span class="sig-name descname"><span class="pre">is_column_load</span></span><a class="headerlink" href="#sqlalchemy.orm.ORMExecuteState.is_column_load" title="Link to this definition">¶</a></dt>
<dd><p>Return True if the operation is refreshing column-oriented
attributes on an existing ORM object.</p>
<p>This occurs during operations such as <a class="reference internal" href="#sqlalchemy.orm.Session.refresh" title="sqlalchemy.orm.Session.refresh"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code></a>,
as well as when an attribute deferred by <a class="reference internal" href="queryguide/columns.html#sqlalchemy.orm.defer" title="sqlalchemy.orm.defer"><code class="xref py py-func docutils literal notranslate"><span class="pre">defer()</span></code></a> is
being loaded, or an attribute that was expired either directly
by <a class="reference internal" href="#sqlalchemy.orm.Session.expire" title="sqlalchemy.orm.Session.expire"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code></a> or via a commit operation is being
loaded.</p>
<p>Handlers will very likely not want to add any options to queries
when such an operation is occurring as the query should be a straight
primary key fetch which should not have any additional WHERE criteria,
and loader options travelling with the instance
will have already been added to the query.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4.0b2 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.is_relationship_load" title="sqlalchemy.orm.ORMExecuteState.is_relationship_load"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ORMExecuteState.is_relationship_load</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.ORMExecuteState.is_delete">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMExecuteState.</span></code></a><span class="sig-name descname"><span class="pre">is_delete</span></span><a class="headerlink" href="#sqlalchemy.orm.ORMExecuteState.is_delete" title="Link to this definition">¶</a></dt>
<dd><p>return True if this is a DELETE operation.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 2.0.30 版本发生变更: </span>- the attribute is also True for a
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select.from_statement" title="sqlalchemy.sql.expression.Select.from_statement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Select.from_statement()</span></code></a> construct that is itself against
a <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Delete" title="sqlalchemy.sql.expression.Delete"><code class="xref py py-class docutils literal notranslate"><span class="pre">Delete</span></code></a> construct, such as
<code class="docutils literal notranslate"><span class="pre">select(Entity).from_statement(delete(..))</span></code></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.ORMExecuteState.is_executemany">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMExecuteState.</span></code></a><span class="sig-name descname"><span class="pre">is_executemany</span></span><a class="headerlink" href="#sqlalchemy.orm.ORMExecuteState.is_executemany" title="Link to this definition">¶</a></dt>
<dd><p>return True if the parameters are a multi-element list of
dictionaries with more than one dictionary.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.ORMExecuteState.is_from_statement">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMExecuteState.</span></code></a><span class="sig-name descname"><span class="pre">is_from_statement</span></span><a class="headerlink" href="#sqlalchemy.orm.ORMExecuteState.is_from_statement" title="Link to this definition">¶</a></dt>
<dd><p>return True if this operation is a
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select.from_statement" title="sqlalchemy.sql.expression.Select.from_statement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Select.from_statement()</span></code></a> operation.</p>
<p>This is independent from <a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.is_select" title="sqlalchemy.orm.ORMExecuteState.is_select"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ORMExecuteState.is_select</span></code></a>, as a
<code class="docutils literal notranslate"><span class="pre">select().from_statement()</span></code> construct can be used with
INSERT/UPDATE/DELETE RETURNING types of statements as well.
<a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.is_select" title="sqlalchemy.orm.ORMExecuteState.is_select"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ORMExecuteState.is_select</span></code></a> will only be set if the
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select.from_statement" title="sqlalchemy.sql.expression.Select.from_statement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Select.from_statement()</span></code></a> is itself against a
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal notranslate"><span class="pre">Select</span></code></a> construct.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0.30 版本加入.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.ORMExecuteState.is_insert">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMExecuteState.</span></code></a><span class="sig-name descname"><span class="pre">is_insert</span></span><a class="headerlink" href="#sqlalchemy.orm.ORMExecuteState.is_insert" title="Link to this definition">¶</a></dt>
<dd><p>return True if this is an INSERT operation.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 2.0.30 版本发生变更: </span>- the attribute is also True for a
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select.from_statement" title="sqlalchemy.sql.expression.Select.from_statement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Select.from_statement()</span></code></a> construct that is itself against
a <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> construct, such as
<code class="docutils literal notranslate"><span class="pre">select(Entity).from_statement(insert(..))</span></code></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.ORMExecuteState.is_orm_statement">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMExecuteState.</span></code></a><span class="sig-name descname"><span class="pre">is_orm_statement</span></span><a class="headerlink" href="#sqlalchemy.orm.ORMExecuteState.is_orm_statement" title="Link to this definition">¶</a></dt>
<dd><p>return True if the operation is an ORM statement.</p>
<p>This indicates that the select(), insert(), update(), or delete()
being invoked contains ORM entities as subjects.   For a statement
that does not have ORM entities and instead refers only to
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> metadata, it is invoked as a Core SQL statement
and no ORM-level automation takes place.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.ORMExecuteState.is_relationship_load">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMExecuteState.</span></code></a><span class="sig-name descname"><span class="pre">is_relationship_load</span></span><a class="headerlink" href="#sqlalchemy.orm.ORMExecuteState.is_relationship_load" title="Link to this definition">¶</a></dt>
<dd><p>Return True if this load is loading objects on behalf of a
relationship.</p>
<p>This means, the loader in effect is either a LazyLoader,
SelectInLoader, SubqueryLoader, or similar, and the entire
SELECT statement being emitted is on behalf of a relationship
load.</p>
<p>Handlers will very likely not want to add any options to queries
when such an operation is occurring, as loader options are already
capable of being propagated to relationship loaders and should
be already present.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.is_column_load" title="sqlalchemy.orm.ORMExecuteState.is_column_load"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ORMExecuteState.is_column_load</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.ORMExecuteState.is_select">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMExecuteState.</span></code></a><span class="sig-name descname"><span class="pre">is_select</span></span><a class="headerlink" href="#sqlalchemy.orm.ORMExecuteState.is_select" title="Link to this definition">¶</a></dt>
<dd><p>return True if this is a SELECT operation.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 2.0.30 版本发生变更: </span>- the attribute is also True for a
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select.from_statement" title="sqlalchemy.sql.expression.Select.from_statement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Select.from_statement()</span></code></a> construct that is itself against
a <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal notranslate"><span class="pre">Select</span></code></a> construct, such as
<code class="docutils literal notranslate"><span class="pre">select(Entity).from_statement(select(..))</span></code></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.ORMExecuteState.is_update">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMExecuteState.</span></code></a><span class="sig-name descname"><span class="pre">is_update</span></span><a class="headerlink" href="#sqlalchemy.orm.ORMExecuteState.is_update" title="Link to this definition">¶</a></dt>
<dd><p>return True if this is an UPDATE operation.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 2.0.30 版本发生变更: </span>- the attribute is also True for a
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select.from_statement" title="sqlalchemy.sql.expression.Select.from_statement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Select.from_statement()</span></code></a> construct that is itself against
a <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal notranslate"><span class="pre">Update</span></code></a> construct, such as
<code class="docutils literal notranslate"><span class="pre">select(Entity).from_statement(update(..))</span></code></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.ORMExecuteState.lazy_loaded_from">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMExecuteState.</span></code></a><span class="sig-name descname"><span class="pre">lazy_loaded_from</span></span><a class="headerlink" href="#sqlalchemy.orm.ORMExecuteState.lazy_loaded_from" title="Link to this definition">¶</a></dt>
<dd><p>An <a class="reference internal" href="internals.html#sqlalchemy.orm.InstanceState" title="sqlalchemy.orm.InstanceState"><code class="xref py py-class docutils literal notranslate"><span class="pre">InstanceState</span></code></a> that is using this statement execution
for a lazy load operation.</p>
<p>The primary rationale for this attribute is to support the horizontal
sharding extension, where it is available within specific query
execution time hooks created by this extension.   To that end, the
attribute is only intended to be meaningful at <strong>query execution
time</strong>, and importantly not any time prior to that, including query
compilation time.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.ORMExecuteState.load_options">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMExecuteState.</span></code></a><span class="sig-name descname"><span class="pre">load_options</span></span><a class="headerlink" href="#sqlalchemy.orm.ORMExecuteState.load_options" title="Link to this definition">¶</a></dt>
<dd><p>Return the load_options that will be used for this execution.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.ORMExecuteState.loader_strategy_path">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMExecuteState.</span></code></a><span class="sig-name descname"><span class="pre">loader_strategy_path</span></span><a class="headerlink" href="#sqlalchemy.orm.ORMExecuteState.loader_strategy_path" title="Link to this definition">¶</a></dt>
<dd><p>Return the <code class="xref py py-class docutils literal notranslate"><span class="pre">PathRegistry</span></code> for the current load path.</p>
<p>This object represents the “path” in a query along relationships
when a particular object or collection is being loaded.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.ORMExecuteState.local_execution_options">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMExecuteState.</span></code></a><span class="sig-name descname"><span class="pre">local_execution_options</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">_ExecuteOptions</span></em><a class="headerlink" href="#sqlalchemy.orm.ORMExecuteState.local_execution_options" title="Link to this definition">¶</a></dt>
<dd><p>Dictionary view of the execution options passed to the
<a class="reference internal" href="#sqlalchemy.orm.Session.execute" title="sqlalchemy.orm.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a> method.</p>
<p>This does not include options that may be associated with the statement
being invoked.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.execution_options" title="sqlalchemy.orm.ORMExecuteState.execution_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ORMExecuteState.execution_options</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.ORMExecuteState.parameters">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMExecuteState.</span></code></a><span class="sig-name descname"><span class="pre">parameters</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.orm.ORMExecuteState.parameters" title="Link to this definition">¶</a></dt>
<dd><p>Dictionary of parameters that was passed to
<a class="reference internal" href="#sqlalchemy.orm.Session.execute" title="sqlalchemy.orm.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.ORMExecuteState.session">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMExecuteState.</span></code></a><span class="sig-name descname"><span class="pre">session</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><span class="pre">Session</span></a></em><a class="headerlink" href="#sqlalchemy.orm.ORMExecuteState.session" title="Link to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> in use.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.ORMExecuteState.statement">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMExecuteState.</span></code></a><span class="sig-name descname"><span class="pre">statement</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></em><a class="headerlink" href="#sqlalchemy.orm.ORMExecuteState.statement" title="Link to this definition">¶</a></dt>
<dd><p>The SQL statement being invoked.</p>
<p>For an ORM selection as would
be retrieved from <a class="reference internal" href="queryguide/query.html#sqlalchemy.orm.Query" title="sqlalchemy.orm.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a>, this is an instance of
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-class docutils literal notranslate"><span class="pre">select</span></code></a> that was generated from the ORM query.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.ORMExecuteState.update_delete_options">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMExecuteState.</span></code></a><span class="sig-name descname"><span class="pre">update_delete_options</span></span><a class="headerlink" href="#sqlalchemy.orm.ORMExecuteState.update_delete_options" title="Link to this definition">¶</a></dt>
<dd><p>Return the update_delete_options that will be used for this
execution.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.ORMExecuteState.update_execution_options">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMExecuteState.</span></code></a><span class="sig-name descname"><span class="pre">update_execution_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">opts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.ORMExecuteState.update_execution_options" title="Link to this definition">¶</a></dt>
<dd><p>Update the local execution options with new values.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.ORMExecuteState.user_defined_options">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMExecuteState.</span></code></a><span class="sig-name descname"><span class="pre">user_defined_options</span></span><a class="headerlink" href="#sqlalchemy.orm.ORMExecuteState.user_defined_options" title="Link to this definition">¶</a></dt>
<dd><p>The sequence of <code class="xref py py-class docutils literal notranslate"><span class="pre">UserDefinedOptions</span></code> that have been
associated with the statement being invoked.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">Session</span></span><a class="headerlink" href="#sqlalchemy.orm.Session" title="Link to this definition">¶</a></dt>
<dd><p>Manages persistence operations for ORM-mapped objects.</p>
<p>The <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> is <strong>not safe for use in concurrent threads.</strong>.
See <a class="reference internal" href="session_basics.html#session-faq-threadsafe"><span class="std std-ref">会话是线程安全的吗？AsyncSession 在并发任务中共享是否安全？</span></a> for background.</p>
<p>The Session’s usage paradigm is described at <a class="reference internal" href="session.html"><span class="doc">使用会话</span></a>.</p>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.__init__"><span class="sig-name descname">__init__()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.add"><span class="sig-name descname">add()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.add_all"><span class="sig-name descname">add_all()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.begin"><span class="sig-name descname">begin()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.begin_nested"><span class="sig-name descname">begin_nested()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.bind_mapper"><span class="sig-name descname">bind_mapper()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.bind_table"><span class="sig-name descname">bind_table()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.bulk_insert_mappings"><span class="sig-name descname">bulk_insert_mappings()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.bulk_save_objects"><span class="sig-name descname">bulk_save_objects()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.bulk_update_mappings"><span class="sig-name descname">bulk_update_mappings()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.close"><span class="sig-name descname">close()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.commit"><span class="sig-name descname">commit()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.connection"><span class="sig-name descname">connection()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.delete"><span class="sig-name descname">delete()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.delete_all"><span class="sig-name descname">delete_all()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.deleted"><span class="sig-name descname">deleted</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.dirty"><span class="sig-name descname">dirty</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.enable_relationship_loading"><span class="sig-name descname">enable_relationship_loading()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.execute"><span class="sig-name descname">execute()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.expire"><span class="sig-name descname">expire()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.expire_all"><span class="sig-name descname">expire_all()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.expunge"><span class="sig-name descname">expunge()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.expunge_all"><span class="sig-name descname">expunge_all()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.flush"><span class="sig-name descname">flush()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.get"><span class="sig-name descname">get()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.get_bind"><span class="sig-name descname">get_bind()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.get_nested_transaction"><span class="sig-name descname">get_nested_transaction()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.get_one"><span class="sig-name descname">get_one()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.get_transaction"><span class="sig-name descname">get_transaction()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.identity_key"><span class="sig-name descname">identity_key()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.identity_map"><span class="sig-name descname">identity_map</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.in_nested_transaction"><span class="sig-name descname">in_nested_transaction()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.in_transaction"><span class="sig-name descname">in_transaction()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.info"><span class="sig-name descname">info</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.invalidate"><span class="sig-name descname">invalidate()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.is_active"><span class="sig-name descname">is_active</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.is_modified"><span class="sig-name descname">is_modified()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.merge"><span class="sig-name descname">merge()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.merge_all"><span class="sig-name descname">merge_all()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.new"><span class="sig-name descname">new</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.no_autoflush"><span class="sig-name descname">no_autoflush</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.object_session"><span class="sig-name descname">object_session()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.prepare"><span class="sig-name descname">prepare()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.query"><span class="sig-name descname">query()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.refresh"><span class="sig-name descname">refresh()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.reset"><span class="sig-name descname">reset()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.rollback"><span class="sig-name descname">rollback()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.scalar"><span class="sig-name descname">scalar()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.scalars"><span class="sig-name descname">scalars()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session</span></code></a> (<code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.session._SessionClassMethods</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.event.registry.EventTarget</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bind</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_SessionBind</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autoflush</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">True</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expire_on_commit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autobegin</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">twophase</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">_SessionBindKey</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_SessionBind</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_baked_queries</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_InfoType</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_cls</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="queryguide/query.html#sqlalchemy.orm.Query" title="sqlalchemy.orm.Query"><span class="pre">Query</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autocommit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">False</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">join_transaction_mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">JoinTransactionMode</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'conditional_savepoint'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">close_resets_only</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">_NoArg</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.Session.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Construct a new <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.</p>
<p>See also the <a class="reference internal" href="#sqlalchemy.orm.sessionmaker" title="sqlalchemy.orm.sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code></a> function which is used to
generate a <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>-producing callable with a given
set of arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.Session.params.autoflush"></span><strong>autoflush</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.params.autoflush">¶</a> – <p>When <code class="docutils literal notranslate"><span class="pre">True</span></code>, all query operations will issue a
<a class="reference internal" href="#sqlalchemy.orm.Session.flush" title="sqlalchemy.orm.Session.flush"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.flush()</span></code></a> call to this <code class="docutils literal notranslate"><span class="pre">Session</span></code> before proceeding.
This is a convenience feature so that <a class="reference internal" href="#sqlalchemy.orm.Session.flush" title="sqlalchemy.orm.Session.flush"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.flush()</span></code></a> need
not be called repeatedly in order for database queries to retrieve
results.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="session_basics.html#session-flushing"><span class="std std-ref">刷新</span></a> - additional background on autoflush</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.params.autobegin"></span><strong>autobegin</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.params.autobegin">¶</a> – <p>Automatically start transactions (i.e. equivalent to
invoking <a class="reference internal" href="#sqlalchemy.orm.Session.begin" title="sqlalchemy.orm.Session.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.begin()</span></code></a>) when database access is
requested by an operation.   Defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>.    Set to
<code class="docutils literal notranslate"><span class="pre">False</span></code> to prevent a <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> from implicitly
beginning transactions after construction, as well as after any of
the <a class="reference internal" href="#sqlalchemy.orm.Session.rollback" title="sqlalchemy.orm.Session.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.rollback()</span></code></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.commit" title="sqlalchemy.orm.Session.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.commit()</span></code></a>,
or <a class="reference internal" href="#sqlalchemy.orm.Session.close" title="sqlalchemy.orm.Session.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.close()</span></code></a> methods are called.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="session_basics.html#session-autobegin-disable"><span class="std std-ref">禁用自动开始以防止隐式事务</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.params.bind"></span><strong>bind</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.params.bind">¶</a> – An optional <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> or
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> to
which this <code class="docutils literal notranslate"><span class="pre">Session</span></code> should be bound. When specified, all SQL
operations performed by this session will execute via this
connectable.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.params.binds"></span><strong>binds</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.params.binds">¶</a> – <p>A dictionary which may specify any number of
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> or <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
objects as the source of
connectivity for SQL operations on a per-entity basis.   The keys
of the dictionary consist of any series of mapped classes,
arbitrary Python classes that are bases for mapped classes,
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects and <a class="reference internal" href="mapping_api.html#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> objects.
The
values of the dictionary are then instances of
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>
or less commonly <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> objects.
Operations which
proceed relative to a particular mapped class will consult this
dictionary for the closest matching entity in order to determine
which <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> should be used for a particular SQL
operation.    The complete heuristics for resolution are
described at <a class="reference internal" href="#sqlalchemy.orm.Session.get_bind" title="sqlalchemy.orm.Session.get_bind"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code></a>.  Usage looks like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Session</span> <span class="o">=</span> <span class="n">sessionmaker</span><span class="p">(</span>
    <span class="n">binds</span><span class="o">=</span><span class="p">{</span>
        <span class="n">SomeMappedClass</span><span class="p">:</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql+psycopg2://engine1&quot;</span><span class="p">),</span>
        <span class="n">SomeDeclarativeBase</span><span class="p">:</span> <span class="n">create_engine</span><span class="p">(</span>
            <span class="s2">&quot;postgresql+psycopg2://engine2&quot;</span>
        <span class="p">),</span>
        <span class="n">some_mapper</span><span class="p">:</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql+psycopg2://engine3&quot;</span><span class="p">),</span>
        <span class="n">some_table</span><span class="p">:</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql+psycopg2://engine4&quot;</span><span class="p">),</span>
    <span class="p">}</span>
<span class="p">)</span></pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="persistence_techniques.html#session-partitioning"><span class="std std-ref">分区策略（例如每个会话有多个数据库后端）</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.bind_mapper" title="sqlalchemy.orm.Session.bind_mapper"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.bind_mapper()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.bind_table" title="sqlalchemy.orm.Session.bind_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.bind_table()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.get_bind" title="sqlalchemy.orm.Session.get_bind"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.params.class_"></span><strong>class_</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.params.class_">¶</a> – Specify an alternate class other than
<code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.session.Session</span></code> which should be used by the
returned class. This is the only argument that is local to the
<a class="reference internal" href="#sqlalchemy.orm.sessionmaker" title="sqlalchemy.orm.sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code></a> function, and is not sent directly to the
constructor for <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.params.enable_baked_queries"></span><strong>enable_baked_queries</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.params.enable_baked_queries">¶</a> – <p>legacy; defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>.
A parameter consumed
by the <a class="reference internal" href="extensions/baked.html#module-sqlalchemy.ext.baked" title="sqlalchemy.ext.baked"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlalchemy.ext.baked</span></code></a> extension to determine if
“baked queries” should be cached, as is the normal operation
of this extension.  When set to <code class="docutils literal notranslate"><span class="pre">False</span></code>, caching as used by
this particular extension is disabled.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.4 版本发生变更: </span>The <code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.baked</span></code> extension is
legacy and is not used by any of SQLAlchemy’s internals. This
flag therefore only affects applications that are making explicit
use of this extension within their own code.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.params.expire_on_commit"></span><strong>expire_on_commit</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.params.expire_on_commit">¶</a> – <p>Defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>. When <code class="docutils literal notranslate"><span class="pre">True</span></code>, all
instances will be fully expired after each <a class="reference internal" href="#sqlalchemy.orm.Session.commit" title="sqlalchemy.orm.Session.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">commit()</span></code></a>,
so that all attribute/object access subsequent to a completed
transaction will load from the most recent database state.</p>
<blockquote>
<div><div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="session_basics.html#session-committing"><span class="std std-ref">提交</span></a></p>
</div>
</div></blockquote>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.params.future"></span><strong>future</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.params.future">¶</a> – <p>Deprecated; this flag is always True.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="../changelog/migration_20.html#migration-20-toplevel"><span class="std std-ref">SQLAlchemy 2.0 - Major Migration Guide</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.params.info"></span><strong>info</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.params.info">¶</a> – optional dictionary of arbitrary data to be associated
with this <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.  Is available via the
<a class="reference internal" href="#sqlalchemy.orm.Session.info" title="sqlalchemy.orm.Session.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.info</span></code></a> attribute.  Note the dictionary is copied at
construction time so that modifications to the per-
<a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> dictionary will be local to that
<a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.params.query_cls"></span><strong>query_cls</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.params.query_cls">¶</a> – Class which should be used to create new Query
objects, as returned by the <a class="reference internal" href="#sqlalchemy.orm.Session.query" title="sqlalchemy.orm.Session.query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.query()</span></code></a> method.
Defaults to <a class="reference internal" href="queryguide/query.html#sqlalchemy.orm.Query" title="sqlalchemy.orm.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.params.twophase"></span><strong>twophase</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.params.twophase">¶</a> – When <code class="docutils literal notranslate"><span class="pre">True</span></code>, all transactions will be started as
a “two phase” transaction, i.e. using the “two phase” semantics
of the database in use along with an XID.  During a
<a class="reference internal" href="#sqlalchemy.orm.Session.commit" title="sqlalchemy.orm.Session.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">commit()</span></code></a>, after <a class="reference internal" href="#sqlalchemy.orm.Session.flush" title="sqlalchemy.orm.Session.flush"><code class="xref py py-meth docutils literal notranslate"><span class="pre">flush()</span></code></a> has been issued for all
attached databases, the <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.TwoPhaseTransaction.prepare" title="sqlalchemy.engine.TwoPhaseTransaction.prepare"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TwoPhaseTransaction.prepare()</span></code></a>
method on each database’s <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TwoPhaseTransaction</span></code></a> will be
called. This allows each database to roll back the entire
transaction, before each transaction is committed.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.params.autocommit"></span><strong>autocommit</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.params.autocommit">¶</a> – the “autocommit” keyword is present for backwards
compatibility but must remain at its default value of <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.params.join_transaction_mode"></span><strong>join_transaction_mode</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.params.join_transaction_mode">¶</a> – <p>Describes the transactional behavior to
take when a given bind is a <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> that
has already begun a transaction outside the scope of this
<a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>; in other words the
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection.in_transaction" title="sqlalchemy.engine.Connection.in_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.in_transaction()</span></code></a> method returns True.</p>
<p>The following behaviors only take effect when the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>
<strong>actually makes use of the connection given</strong>; that is, a method
such as <a class="reference internal" href="#sqlalchemy.orm.Session.execute" title="sqlalchemy.orm.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a>, <a class="reference internal" href="#sqlalchemy.orm.Session.connection" title="sqlalchemy.orm.Session.connection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.connection()</span></code></a>,
etc. are actually invoked:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;conditional_savepoint&quot;</span></code> - this is the default.  if the given
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> is begun within a transaction but
does not have a SAVEPOINT, then <code class="docutils literal notranslate"><span class="pre">&quot;rollback_only&quot;</span></code> is used.
If the <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> is additionally within
a SAVEPOINT, in other words
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection.in_nested_transaction" title="sqlalchemy.engine.Connection.in_nested_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.in_nested_transaction()</span></code></a> method returns
True, then <code class="docutils literal notranslate"><span class="pre">&quot;create_savepoint&quot;</span></code> is used.</p>
<p><code class="docutils literal notranslate"><span class="pre">&quot;conditional_savepoint&quot;</span></code> behavior attempts to make use of
savepoints in order to keep the state of the existing transaction
unchanged, but only if there is already a savepoint in progress;
otherwise, it is not assumed that the backend in use has adequate
support for SAVEPOINT, as availability of this feature varies.
<code class="docutils literal notranslate"><span class="pre">&quot;conditional_savepoint&quot;</span></code> also seeks to establish approximate
backwards compatibility with previous <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>
behavior, for applications that are not setting a specific mode. It
is recommended that one of the explicit settings be used.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;create_savepoint&quot;</span></code> - the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> will use
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection.begin_nested" title="sqlalchemy.engine.Connection.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_nested()</span></code></a> in all cases to create
its own transaction.  This transaction by its nature rides
“on top” of any existing transaction that’s opened on the given
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>; if the underlying database and
the driver in use has full, non-broken support for SAVEPOINT, the
external transaction will remain unaffected throughout the
lifespan of the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">&quot;create_savepoint&quot;</span></code> mode is the most useful for integrating
a <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> into a test suite where an externally
initiated transaction should remain unaffected; however, it relies
on proper SAVEPOINT support from the underlying driver and
database.</p>
<div class="admonition tip">
<p class="admonition-title">小技巧</p>
<p>When using SQLite, the SQLite driver included through
Python 3.11 does not handle SAVEPOINTs correctly in all cases
without workarounds. See the sections
<a class="reference internal" href="../dialects/sqlite.html#pysqlite-serializable"><span class="std std-ref">Serializable isolation / Savepoints / Transactional DDL</span></a> and <a class="reference internal" href="../dialects/sqlite.html#aiosqlite-serializable"><span class="std std-ref">Serializable isolation / Savepoints / Transactional DDL (asyncio version)</span></a>
for details on current workarounds.</p>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;control_fully&quot;</span></code> - the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> will take
control of the given transaction as its own;
<a class="reference internal" href="#sqlalchemy.orm.Session.commit" title="sqlalchemy.orm.Session.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.commit()</span></code></a> will call <code class="docutils literal notranslate"><span class="pre">.commit()</span></code> on the
transaction, <a class="reference internal" href="#sqlalchemy.orm.Session.rollback" title="sqlalchemy.orm.Session.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.rollback()</span></code></a> will call
<code class="docutils literal notranslate"><span class="pre">.rollback()</span></code> on the transaction, <a class="reference internal" href="#sqlalchemy.orm.Session.close" title="sqlalchemy.orm.Session.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.close()</span></code></a> will
call <code class="docutils literal notranslate"><span class="pre">.rollback</span></code> on the transaction.</p>
<div class="admonition tip">
<p class="admonition-title">小技巧</p>
<p>This mode of use is equivalent to how SQLAlchemy 1.4 would
handle a <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> given with an existing
SAVEPOINT (i.e. <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection.begin_nested" title="sqlalchemy.engine.Connection.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_nested()</span></code></a>); the
<a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> would take full control of the existing
SAVEPOINT.</p>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;rollback_only&quot;</span></code> - the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> will take control
of the given transaction for <code class="docutils literal notranslate"><span class="pre">.rollback()</span></code> calls only;
<code class="docutils literal notranslate"><span class="pre">.commit()</span></code> calls will not be propagated to the given
transaction.  <code class="docutils literal notranslate"><span class="pre">.close()</span></code> calls will have no effect on the
given transaction.</p>
<div class="admonition tip">
<p class="admonition-title">小技巧</p>
<p>This mode of use is equivalent to how SQLAlchemy 1.4 would
handle a <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> given with an existing
regular database transaction (i.e.
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection.begin" title="sqlalchemy.engine.Connection.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin()</span></code></a>); the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>
would propagate <a class="reference internal" href="#sqlalchemy.orm.Session.rollback" title="sqlalchemy.orm.Session.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.rollback()</span></code></a> calls to the
underlying transaction, but not <a class="reference internal" href="#sqlalchemy.orm.Session.commit" title="sqlalchemy.orm.Session.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.commit()</span></code></a> or
<a class="reference internal" href="#sqlalchemy.orm.Session.close" title="sqlalchemy.orm.Session.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.close()</span></code></a> calls.</p>
</div>
</li>
</ul>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0.0rc1 版本加入.</span></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.params.close_resets_only"></span><strong>close_resets_only</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.params.close_resets_only">¶</a> – <p>Defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>. Determines if
the session should reset itself after calling <code class="docutils literal notranslate"><span class="pre">.close()</span></code>
or should pass in a no longer usable state, disabling re-use.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0.22 版本加入: </span>added flag <code class="docutils literal notranslate"><span class="pre">close_resets_only</span></code>.
A future SQLAlchemy version may change the default value of
this flag to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="session_basics.html#session-closing"><span class="std std-ref">关闭</span></a> - Detail on the semantics of
<a class="reference internal" href="#sqlalchemy.orm.Session.close" title="sqlalchemy.orm.Session.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.close()</span></code></a> and <a class="reference internal" href="#sqlalchemy.orm.Session.reset" title="sqlalchemy.orm.Session.reset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.reset()</span></code></a>.</p>
</div>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.add">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_warn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.add" title="Link to this definition">¶</a></dt>
<dd><p>Place an object into this <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.</p>
<p>Objects that are in the <a class="reference internal" href="../glossary.html#term-transient"><span class="xref std std-term">transient</span></a> state when passed to the
<a class="reference internal" href="#sqlalchemy.orm.Session.add" title="sqlalchemy.orm.Session.add"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add()</span></code></a> method will move to the
<a class="reference internal" href="../glossary.html#term-pending"><span class="xref std std-term">pending</span></a> state, until the next flush, at which point they
will move to the <a class="reference internal" href="../glossary.html#term-persistent"><span class="xref std std-term">persistent</span></a> state.</p>
<p>Objects that are in the <a class="reference internal" href="../glossary.html#term-detached"><span class="xref std std-term">detached</span></a> state when passed to the
<a class="reference internal" href="#sqlalchemy.orm.Session.add" title="sqlalchemy.orm.Session.add"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add()</span></code></a> method will move to the <a class="reference internal" href="../glossary.html#term-persistent"><span class="xref std std-term">persistent</span></a>
state directly.</p>
<p>If the transaction used by the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> is rolled back,
objects which were transient when they were passed to
<a class="reference internal" href="#sqlalchemy.orm.Session.add" title="sqlalchemy.orm.Session.add"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add()</span></code></a> will be moved back to the
<a class="reference internal" href="../glossary.html#term-transient"><span class="xref std std-term">transient</span></a> state, and will no longer be present within this
<a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.add_all" title="sqlalchemy.orm.Session.add_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add_all()</span></code></a></p>
<p><a class="reference internal" href="session_basics.html#session-adding"><span class="std std-ref">添加新项目或现有项目</span></a> - at <a class="reference internal" href="session_basics.html#session-basics"><span class="std std-ref">使用会话的基础知识</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.add_all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">add_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instances</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">object</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.add_all" title="Link to this definition">¶</a></dt>
<dd><p>Add the given collection of instances to this <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.</p>
<p>See the documentation for <a class="reference internal" href="#sqlalchemy.orm.Session.add" title="sqlalchemy.orm.Session.add"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add()</span></code></a> for a general
behavioral description.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.add" title="sqlalchemy.orm.Session.add"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add()</span></code></a></p>
<p><a class="reference internal" href="session_basics.html#session-adding"><span class="std std-ref">添加新项目或现有项目</span></a> - at <a class="reference internal" href="session_basics.html#session-basics"><span class="std std-ref">使用会话的基础知识</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.begin">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">begin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nested</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.orm.SessionTransaction" title="sqlalchemy.orm.session.SessionTransaction"><span class="pre">SessionTransaction</span></a></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.begin" title="Link to this definition">¶</a></dt>
<dd><p>Begin a transaction, or nested transaction,
on this <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>, if one is not already begun.</p>
<p>The <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object features <strong>autobegin</strong> behavior,
so that normally it is not necessary to call the
<a class="reference internal" href="#sqlalchemy.orm.Session.begin" title="sqlalchemy.orm.Session.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.begin()</span></code></a>
method explicitly. However, it may be used in order to control
the scope of when the transactional state is begun.</p>
<p>When used to begin the outermost transaction, an error is raised
if this <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> is already inside of a transaction.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.orm.Session.begin.params.nested"></span><strong>nested</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.begin.params.nested">¶</a> – if True, begins a SAVEPOINT transaction and is
equivalent to calling <a class="reference internal" href="#sqlalchemy.orm.Session.begin_nested" title="sqlalchemy.orm.Session.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.begin_nested()</span></code></a>. For
documentation on SAVEPOINT transactions, please see
<a class="reference internal" href="session_transaction.html#session-begin-nested"><span class="std std-ref">使用 SAVEPOINT</span></a>.</p>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>the <a class="reference internal" href="#sqlalchemy.orm.SessionTransaction" title="sqlalchemy.orm.SessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionTransaction</span></code></a> object.  Note that
<a class="reference internal" href="#sqlalchemy.orm.SessionTransaction" title="sqlalchemy.orm.SessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionTransaction</span></code></a>
acts as a Python context manager, allowing <a class="reference internal" href="#sqlalchemy.orm.Session.begin" title="sqlalchemy.orm.Session.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.begin()</span></code></a>
to be used in a “with” block.  See <a class="reference internal" href="session_transaction.html#session-explicit-begin"><span class="std std-ref">显式开始</span></a> for
an example.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="session_basics.html#session-autobegin"><span class="std std-ref">自动开始</span></a></p>
<p><a class="reference internal" href="session_transaction.html#unitofwork-transaction"><span class="std std-ref">管理事务</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.begin_nested" title="sqlalchemy.orm.Session.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.begin_nested()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.begin_nested">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">begin_nested</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.orm.SessionTransaction" title="sqlalchemy.orm.session.SessionTransaction"><span class="pre">SessionTransaction</span></a></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.begin_nested" title="Link to this definition">¶</a></dt>
<dd><p>Begin a “nested” transaction on this Session, e.g. SAVEPOINT.</p>
<p>The target database(s) and associated drivers must support SQL
SAVEPOINT for this method to function correctly.</p>
<p>For documentation on SAVEPOINT
transactions, please see <a class="reference internal" href="session_transaction.html#session-begin-nested"><span class="std std-ref">使用 SAVEPOINT</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>the <a class="reference internal" href="#sqlalchemy.orm.SessionTransaction" title="sqlalchemy.orm.SessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionTransaction</span></code></a> object.  Note that
<a class="reference internal" href="#sqlalchemy.orm.SessionTransaction" title="sqlalchemy.orm.SessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionTransaction</span></code></a> acts as a context manager, allowing
<a class="reference internal" href="#sqlalchemy.orm.Session.begin_nested" title="sqlalchemy.orm.Session.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.begin_nested()</span></code></a> to be used in a “with” block.
See <a class="reference internal" href="session_transaction.html#session-begin-nested"><span class="std std-ref">使用 SAVEPOINT</span></a> for a usage example.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="session_transaction.html#session-begin-nested"><span class="std std-ref">使用 SAVEPOINT</span></a></p>
<p><a class="reference internal" href="../dialects/sqlite.html#pysqlite-serializable"><span class="std std-ref">Serializable isolation / Savepoints / Transactional DDL</span></a> - special workarounds required
with the SQLite driver in order for SAVEPOINT to work
correctly. For asyncio use cases, see the section
<a class="reference internal" href="../dialects/sqlite.html#aiosqlite-serializable"><span class="std std-ref">Serializable isolation / Savepoints / Transactional DDL (asyncio version)</span></a>.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.bind_mapper">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">bind_mapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mapper</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_EntityBindKey</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_SessionBind</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.bind_mapper" title="Link to this definition">¶</a></dt>
<dd><p>Associate a <a class="reference internal" href="mapping_api.html#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> or arbitrary Python class with a
“bind”, e.g. an <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> or
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p>The given entity is added to a lookup used by the
<a class="reference internal" href="#sqlalchemy.orm.Session.get_bind" title="sqlalchemy.orm.Session.get_bind"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code></a> method.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.Session.bind_mapper.params.mapper"></span><strong>mapper</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.bind_mapper.params.mapper">¶</a> – a <a class="reference internal" href="mapping_api.html#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> object,
or an instance of a mapped
class, or any Python class that is the base of a set of mapped
classes.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.bind_mapper.params.bind"></span><strong>bind</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.bind_mapper.params.bind">¶</a> – an <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> or <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
object.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="persistence_techniques.html#session-partitioning"><span class="std std-ref">分区策略（例如每个会话有多个数据库后端）</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.params.binds" title="sqlalchemy.orm.Session"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.binds</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.bind_table" title="sqlalchemy.orm.Session.bind_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.bind_table()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.bind_table">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">bind_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.TableClause" title="sqlalchemy.sql.selectable.TableClause"><span class="pre">TableClause</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.base.Engine"><span class="pre">Engine</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.base.Connection"><span class="pre">Connection</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.bind_table" title="Link to this definition">¶</a></dt>
<dd><p>Associate a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> with a “bind”, e.g. an
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>
or <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p>The given <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> is added to a lookup used by the
<a class="reference internal" href="#sqlalchemy.orm.Session.get_bind" title="sqlalchemy.orm.Session.get_bind"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code></a> method.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.Session.bind_table.params.table"></span><strong>table</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.bind_table.params.table">¶</a> – a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> object,
which is typically the target
of an ORM mapping, or is present within a selectable that is
mapped.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.bind_table.params.bind"></span><strong>bind</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.bind_table.params.bind">¶</a> – an <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> or <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
object.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="persistence_techniques.html#session-partitioning"><span class="std std-ref">分区策略（例如每个会话有多个数据库后端）</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.params.binds" title="sqlalchemy.orm.Session"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.binds</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.bind_mapper" title="sqlalchemy.orm.Session.bind_mapper"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.bind_mapper()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.bulk_insert_mappings">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">bulk_insert_mappings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mapper</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mapping_api.html#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><span class="pre">Mapper</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mappings</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_defaults</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">render_nulls</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.bulk_insert_mappings" title="Link to this definition">¶</a></dt>
<dd><p>Perform a bulk insert of the given list of mapping dictionaries.</p>
<div class="admonition legacy">
<p class="admonition-title">Legacy Feature</p>
<p>This method is a legacy feature as of the 2.0 series of
SQLAlchemy.   For modern bulk INSERT and UPDATE, see
the sections <a class="reference internal" href="queryguide/dml.html#orm-queryguide-bulk-insert"><span class="std std-ref">ORM 批量 INSERT 语句</span></a> and
<a class="reference internal" href="queryguide/dml.html#orm-queryguide-bulk-update"><span class="std std-ref">ORM 按主键批量 UPDATE</span></a>.  The 2.0 API shares
implementation details with this method and adds new features
as well.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.Session.bulk_insert_mappings.params.mapper"></span><strong>mapper</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.bulk_insert_mappings.params.mapper">¶</a> – a mapped class, or the actual <a class="reference internal" href="mapping_api.html#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a>
object,
representing the single kind of object represented within the mapping
list.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.bulk_insert_mappings.params.mappings"></span><strong>mappings</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.bulk_insert_mappings.params.mappings">¶</a> – a sequence of dictionaries, each one containing the
state of the mapped row to be inserted, in terms of the attribute
names on the mapped class.   If the mapping refers to multiple tables,
such as a joined-inheritance mapping, each dictionary must contain all
keys to be populated into all tables.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.bulk_insert_mappings.params.return_defaults"></span><strong>return_defaults</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.bulk_insert_mappings.params.return_defaults">¶</a> – <p>when True, the INSERT process will be altered
to ensure that newly generated primary key values will be fetched.
The rationale for this parameter is typically to enable
<a class="reference internal" href="inheritance.html#joined-inheritance"><span class="std std-ref">Joined Table Inheritance</span></a> mappings to
be bulk inserted.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>for backends that don’t support RETURNING, the
<a class="reference internal" href="#sqlalchemy.orm.Session.bulk_insert_mappings.params.return_defaults" title="sqlalchemy.orm.Session.bulk_insert_mappings"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.bulk_insert_mappings.return_defaults</span></code></a>
parameter can significantly decrease performance as INSERT
statements can no longer be batched.   See
<a class="reference internal" href="../core/connections.html#engine-insertmanyvalues"><span class="std std-ref">INSERT 语句的“插入多个值”行为</span></a>
for background on which backends are affected.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.bulk_insert_mappings.params.render_nulls"></span><strong>render_nulls</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.bulk_insert_mappings.params.render_nulls">¶</a> – <p>When True, a value of <code class="docutils literal notranslate"><span class="pre">None</span></code> will result
in a NULL value being included in the INSERT statement, rather
than the column being omitted from the INSERT.   This allows all
the rows being INSERTed to have the identical set of columns which
allows the full set of rows to be batched to the DBAPI.  Normally,
each column-set that contains a different combination of NULL values
than the previous row must omit a different series of columns from
the rendered INSERT statement, which means it must be emitted as a
separate statement.   By passing this flag, the full set of rows
are guaranteed to be batchable into one batch; the cost however is
that server-side defaults which are invoked by an omitted column will
be skipped, so care must be taken to ensure that these are not
necessary.</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>When this flag is set, <strong>server side default SQL values will
not be invoked</strong> for those columns that are inserted as NULL;
the NULL value will be sent explicitly.   Care must be taken
to ensure that no server-side default functions need to be
invoked for the operation as a whole.</p>
</div>
</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="queryguide/dml.html"><span class="doc">启用 ORM 的 INSERT、UPDATE 和 DELETE 语句</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.bulk_save_objects" title="sqlalchemy.orm.Session.bulk_save_objects"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.bulk_save_objects()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.bulk_update_mappings" title="sqlalchemy.orm.Session.bulk_update_mappings"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.bulk_update_mappings()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.bulk_save_objects">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">bulk_save_objects</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">objects</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">object</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_defaults</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_changed_only</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preserve_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.bulk_save_objects" title="Link to this definition">¶</a></dt>
<dd><p>Perform a bulk save of the given list of objects.</p>
<div class="admonition legacy">
<p class="admonition-title">Legacy Feature</p>
<p>This method is a legacy feature as of the 2.0 series of
SQLAlchemy.   For modern bulk INSERT and UPDATE, see
the sections <a class="reference internal" href="queryguide/dml.html#orm-queryguide-bulk-insert"><span class="std std-ref">ORM 批量 INSERT 语句</span></a> and
<a class="reference internal" href="queryguide/dml.html#orm-queryguide-bulk-update"><span class="std std-ref">ORM 按主键批量 UPDATE</span></a>.</p>
<p>For general INSERT and UPDATE of existing ORM mapped objects,
prefer standard <a class="reference internal" href="../glossary.html#term-unit-of-work"><span class="xref std std-term">unit of work</span></a> data management patterns,
introduced in the <a class="reference internal" href="../tutorial/index.html#unified-tutorial"><span class="std std-ref">SQLAlchemy 统一教程</span></a> at
<a class="reference internal" href="../tutorial/orm_data_manipulation.html#tutorial-orm-data-manipulation"><span class="std std-ref">使用 ORM 进行数据操作</span></a>.  SQLAlchemy 2.0
now uses <a class="reference internal" href="../core/connections.html#engine-insertmanyvalues"><span class="std std-ref">INSERT 语句的“插入多个值”行为</span></a> with modern dialects
which solves previous issues of bulk INSERT slowness.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.Session.bulk_save_objects.params.objects"></span><strong>objects</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.bulk_save_objects.params.objects">¶</a> – <p>a sequence of mapped object instances.  The mapped
objects are persisted as is, and are <strong>not</strong> associated with the
<a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> afterwards.</p>
<p>For each object, whether the object is sent as an INSERT or an
UPDATE is dependent on the same rules used by the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>
in traditional operation; if the object has the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">InstanceState.key</span></code>
attribute set, then the object is assumed to be “detached” and
will result in an UPDATE.  Otherwise, an INSERT is used.</p>
<p>In the case of an UPDATE, statements are grouped based on which
attributes have changed, and are thus to be the subject of each
SET clause.  If <code class="docutils literal notranslate"><span class="pre">update_changed_only</span></code> is False, then all
attributes present within each object are applied to the UPDATE
statement, which may help in allowing the statements to be grouped
together into a larger executemany(), and will also reduce the
overhead of checking history on attributes.</p>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.bulk_save_objects.params.return_defaults"></span><strong>return_defaults</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.bulk_save_objects.params.return_defaults">¶</a> – when True, rows that are missing values which
generate defaults, namely integer primary key defaults and sequences,
will be inserted <strong>one at a time</strong>, so that the primary key value
is available.  In particular this will allow joined-inheritance
and other multi-table mappings to insert correctly without the need
to provide primary key values ahead of time; however,
<a class="reference internal" href="#sqlalchemy.orm.Session.bulk_save_objects.params.return_defaults" title="sqlalchemy.orm.Session.bulk_save_objects"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.bulk_save_objects.return_defaults</span></code></a> <strong>greatly
reduces the performance gains</strong> of the method overall.  It is strongly
advised to please use the standard <a class="reference internal" href="#sqlalchemy.orm.Session.add_all" title="sqlalchemy.orm.Session.add_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add_all()</span></code></a>
approach.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.bulk_save_objects.params.update_changed_only"></span><strong>update_changed_only</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.bulk_save_objects.params.update_changed_only">¶</a> – when True, UPDATE statements are rendered
based on those attributes in each state that have logged changes.
When False, all attributes present are rendered into the SET clause
with the exception of primary key attributes.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.bulk_save_objects.params.preserve_order"></span><strong>preserve_order</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.bulk_save_objects.params.preserve_order">¶</a> – when True, the order of inserts and updates
matches exactly the order in which the objects are given.   When
False, common types of objects are grouped into inserts
and updates, to allow for more batching opportunities.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="queryguide/dml.html"><span class="doc">启用 ORM 的 INSERT、UPDATE 和 DELETE 语句</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.bulk_insert_mappings" title="sqlalchemy.orm.Session.bulk_insert_mappings"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.bulk_insert_mappings()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.bulk_update_mappings" title="sqlalchemy.orm.Session.bulk_update_mappings"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.bulk_update_mappings()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.bulk_update_mappings">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">bulk_update_mappings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mapper</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mapping_api.html#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><span class="pre">Mapper</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mappings</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.bulk_update_mappings" title="Link to this definition">¶</a></dt>
<dd><p>Perform a bulk update of the given list of mapping dictionaries.</p>
<div class="admonition legacy">
<p class="admonition-title">Legacy Feature</p>
<p>This method is a legacy feature as of the 2.0 series of
SQLAlchemy.   For modern bulk INSERT and UPDATE, see
the sections <a class="reference internal" href="queryguide/dml.html#orm-queryguide-bulk-insert"><span class="std std-ref">ORM 批量 INSERT 语句</span></a> and
<a class="reference internal" href="queryguide/dml.html#orm-queryguide-bulk-update"><span class="std std-ref">ORM 按主键批量 UPDATE</span></a>.  The 2.0 API shares
implementation details with this method and adds new features
as well.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.Session.bulk_update_mappings.params.mapper"></span><strong>mapper</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.bulk_update_mappings.params.mapper">¶</a> – a mapped class, or the actual <a class="reference internal" href="mapping_api.html#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a>
object,
representing the single kind of object represented within the mapping
list.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.bulk_update_mappings.params.mappings"></span><strong>mappings</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.bulk_update_mappings.params.mappings">¶</a> – a sequence of dictionaries, each one containing the
state of the mapped row to be updated, in terms of the attribute names
on the mapped class.   If the mapping refers to multiple tables, such
as a joined-inheritance mapping, each dictionary may contain keys
corresponding to all tables.   All those keys which are present and
are not part of the primary key are applied to the SET clause of the
UPDATE statement; the primary key values, which are required, are
applied to the WHERE clause.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="queryguide/dml.html"><span class="doc">启用 ORM 的 INSERT、UPDATE 和 DELETE 语句</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.bulk_insert_mappings" title="sqlalchemy.orm.Session.bulk_insert_mappings"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.bulk_insert_mappings()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.bulk_save_objects" title="sqlalchemy.orm.Session.bulk_save_objects"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.bulk_save_objects()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.close">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.close" title="Link to this definition">¶</a></dt>
<dd><p>Close out the transactional resources and ORM objects used by this
<a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.</p>
<p>This expunges all ORM objects associated with this
<a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>, ends any transaction in progress and
<a class="reference internal" href="../glossary.html#term-releases"><span class="xref std std-term">releases</span></a> any <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> objects which this
<a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> itself has checked out from associated
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> objects. The operation then leaves the
<a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> in a state which it may be used again.</p>
<div class="admonition tip">
<p class="admonition-title">小技巧</p>
<p>In the default running mode the <a class="reference internal" href="#sqlalchemy.orm.Session.close" title="sqlalchemy.orm.Session.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.close()</span></code></a>
method <strong>does not prevent the Session from being used again</strong>.
The <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> itself does not actually have a
distinct “closed” state; it merely means
the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> will release all database connections
and ORM objects.</p>
<p>Setting the parameter <a class="reference internal" href="#sqlalchemy.orm.Session.params.close_resets_only" title="sqlalchemy.orm.Session"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.close_resets_only</span></code></a>
to <code class="docutils literal notranslate"><span class="pre">False</span></code> will instead make the <code class="docutils literal notranslate"><span class="pre">close</span></code> final, meaning that
any further action on the session will be forbidden.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.4 版本发生变更: </span>The <a class="reference internal" href="#sqlalchemy.orm.Session.close" title="sqlalchemy.orm.Session.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.close()</span></code></a> method does not
immediately create a new <a class="reference internal" href="#sqlalchemy.orm.SessionTransaction" title="sqlalchemy.orm.SessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionTransaction</span></code></a> object;
instead, the new <a class="reference internal" href="#sqlalchemy.orm.SessionTransaction" title="sqlalchemy.orm.SessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionTransaction</span></code></a> is created only if
the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> is used again for a database operation.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="session_basics.html#session-closing"><span class="std std-ref">关闭</span></a> - detail on the semantics of
<a class="reference internal" href="#sqlalchemy.orm.Session.close" title="sqlalchemy.orm.Session.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.close()</span></code></a> and <a class="reference internal" href="#sqlalchemy.orm.Session.reset" title="sqlalchemy.orm.Session.reset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.reset()</span></code></a>.</p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.reset" title="sqlalchemy.orm.Session.reset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.reset()</span></code></a> - a similar method that behaves like
<code class="docutils literal notranslate"><span class="pre">close()</span></code> with  the parameter
<a class="reference internal" href="#sqlalchemy.orm.Session.params.close_resets_only" title="sqlalchemy.orm.Session"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.close_resets_only</span></code></a> set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.commit">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.commit" title="Link to this definition">¶</a></dt>
<dd><p>Flush pending changes and commit the current transaction.</p>
<p>When the COMMIT operation is complete, all objects are fully
<a class="reference internal" href="../glossary.html#term-expired"><span class="xref std std-term">expired</span></a>, erasing their internal contents, which will be
automatically re-loaded when the objects are next accessed. In the
interim, these objects are in an expired state and will not function if
they are <a class="reference internal" href="../glossary.html#term-detached"><span class="xref std std-term">detached</span></a> from the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>. Additionally,
this re-load operation is not supported when using asyncio-oriented
APIs. The <a class="reference internal" href="#sqlalchemy.orm.Session.params.expire_on_commit" title="sqlalchemy.orm.Session"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.expire_on_commit</span></code></a> parameter may be used
to disable this behavior.</p>
<p>When there is no transaction in place for the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>,
indicating that no operations were invoked on this <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>
since the previous call to <a class="reference internal" href="#sqlalchemy.orm.Session.commit" title="sqlalchemy.orm.Session.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.commit()</span></code></a>, the method will
begin and commit an internal-only “logical” transaction, that does not
normally affect the database unless pending flush changes were
detected, but will still invoke event handlers and object expiration
rules.</p>
<p>The outermost database transaction is committed unconditionally,
automatically releasing any SAVEPOINTs in effect.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="session_basics.html#session-committing"><span class="std std-ref">提交</span></a></p>
<p><a class="reference internal" href="session_transaction.html#unitofwork-transaction"><span class="std std-ref">管理事务</span></a></p>
<p><a class="reference internal" href="extensions/asyncio.html#asyncio-orm-avoid-lazyloads"><span class="std std-ref">使用 AsyncSession 时防止隐式 IO</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.connection">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoreExecuteOptionsParameter</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><span class="pre">Connection</span></a></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.connection" title="Link to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object corresponding to this
<a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object’s transactional state.</p>
<p>Either the <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> corresponding to the current
transaction is returned, or if no transaction is in progress, a new
one is begun and the <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
returned (note that no
transactional state is established with the DBAPI until the first
SQL statement is emitted).</p>
<p>Ambiguity in multi-bind or unbound <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> objects can be
resolved through any of the optional keyword arguments.   This
ultimately makes usage of the <a class="reference internal" href="#sqlalchemy.orm.Session.get_bind" title="sqlalchemy.orm.Session.get_bind"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_bind()</span></code></a> method for resolution.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.Session.connection.params.bind_arguments"></span><strong>bind_arguments</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.connection.params.bind_arguments">¶</a> – dictionary of bind arguments.  May include
“mapper”, “bind”, “clause”, other custom arguments that are passed
to <a class="reference internal" href="#sqlalchemy.orm.Session.get_bind" title="sqlalchemy.orm.Session.get_bind"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.connection.params.execution_options"></span><strong>execution_options</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.connection.params.execution_options">¶</a> – <p>a dictionary of execution options that will
be passed to <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a>, <strong>when the
connection is first procured only</strong>.   If the connection is already
present within the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>, a warning is emitted and
the arguments are ignored.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="session_transaction.html#session-transaction-isolation"><span class="std std-ref">设置事务隔离级别/DBAPI AUTOCOMMIT</span></a></p>
</div>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.delete">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.delete" title="Link to this definition">¶</a></dt>
<dd><p>Mark an instance as deleted.</p>
<p>The object is assumed to be either <a class="reference internal" href="../glossary.html#term-persistent"><span class="xref std std-term">persistent</span></a> or
<a class="reference internal" href="../glossary.html#term-detached"><span class="xref std std-term">detached</span></a> when passed; after the method is called, the
object will remain in the <a class="reference internal" href="../glossary.html#term-persistent"><span class="xref std std-term">persistent</span></a> state until the next
flush proceeds.  During this time, the object will also be a member
of the <a class="reference internal" href="#sqlalchemy.orm.Session.deleted" title="sqlalchemy.orm.Session.deleted"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.deleted</span></code></a> collection.</p>
<p>When the next flush proceeds, the object will move to the
<a class="reference internal" href="../glossary.html#term-deleted"><span class="xref std std-term">deleted</span></a> state, indicating a <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> statement was emitted
for its row within the current transaction.   When the transaction
is successfully committed,
the deleted object is moved to the <a class="reference internal" href="../glossary.html#term-detached"><span class="xref std std-term">detached</span></a> state and is
no longer present within this <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="session_basics.html#session-deleting"><span class="std std-ref">删除</span></a> - at <a class="reference internal" href="session_basics.html#session-basics"><span class="std std-ref">使用会话的基础知识</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.delete_all" title="sqlalchemy.orm.Session.delete_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.delete_all()</span></code></a> - multiple instance version</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.delete_all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">delete_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instances</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">object</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.delete_all" title="Link to this definition">¶</a></dt>
<dd><p>Calls <a class="reference internal" href="#sqlalchemy.orm.Session.delete" title="sqlalchemy.orm.Session.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.delete()</span></code></a> on multiple instances.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.delete" title="sqlalchemy.orm.Session.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.delete()</span></code></a> - main documentation on delete</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 2.1 版本加入.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.deleted">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">deleted</span></span><a class="headerlink" href="#sqlalchemy.orm.Session.deleted" title="Link to this definition">¶</a></dt>
<dd><p>The set of all instances marked as ‘deleted’ within this <code class="docutils literal notranslate"><span class="pre">Session</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.dirty">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">dirty</span></span><a class="headerlink" href="#sqlalchemy.orm.Session.dirty" title="Link to this definition">¶</a></dt>
<dd><p>The set of all persistent instances considered dirty.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">some_mapped_object</span> <span class="ow">in</span> <span class="n">session</span><span class="o">.</span><span class="n">dirty</span></pre></div>
</div>
<p>Instances are considered dirty when they were modified but not
deleted.</p>
<p>Note that this ‘dirty’ calculation is ‘optimistic’; most
attribute-setting or collection modification operations will
mark an instance as ‘dirty’ and place it in this set, even if
there is no net change to the attribute’s value.  At flush
time, the value of each attribute is compared to its
previously saved value, and if there’s no net change, no SQL
operation will occur (this is a more expensive operation so
it’s only done at flush time).</p>
<p>To check if an instance has actionable net changes to its
attributes, use the <a class="reference internal" href="#sqlalchemy.orm.Session.is_modified" title="sqlalchemy.orm.Session.is_modified"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.is_modified()</span></code></a> method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.enable_relationship_loading">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">enable_relationship_loading</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.enable_relationship_loading" title="Link to this definition">¶</a></dt>
<dd><p>Associate an object with this <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> for related
object loading.</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.enable_relationship_loading" title="sqlalchemy.orm.Session.enable_relationship_loading"><code class="xref py py-meth docutils literal notranslate"><span class="pre">enable_relationship_loading()</span></code></a> exists to serve special
use cases and is not recommended for general use.</p>
</div>
<p>Accesses of attributes mapped with <a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a>
will attempt to load a value from the database using this
<a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> as the source of connectivity.  The values
will be loaded based on foreign key and primary key values
present on this object - if not present, then those relationships
will be unavailable.</p>
<p>The object will be attached to this session, but will
<strong>not</strong> participate in any persistence operations; its state
for almost all purposes will remain either “transient” or
“detached”, except for the case of relationship loading.</p>
<p>Also note that backrefs will often not work as expected.
Altering a relationship-bound attribute on the target object
may not fire off a backref event, if the effective value
is what was already loaded from a foreign-key-holding value.</p>
<p>The <a class="reference internal" href="#sqlalchemy.orm.Session.enable_relationship_loading" title="sqlalchemy.orm.Session.enable_relationship_loading"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.enable_relationship_loading()</span></code></a> method is
similar to the <code class="docutils literal notranslate"><span class="pre">load_on_pending</span></code> flag on <a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a>.
Unlike that flag, <a class="reference internal" href="#sqlalchemy.orm.Session.enable_relationship_loading" title="sqlalchemy.orm.Session.enable_relationship_loading"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.enable_relationship_loading()</span></code></a> allows
an object to remain transient while still being able to load
related items.</p>
<p>To make a transient object associated with a <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>
via <a class="reference internal" href="#sqlalchemy.orm.Session.enable_relationship_loading" title="sqlalchemy.orm.Session.enable_relationship_loading"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.enable_relationship_loading()</span></code></a> pending, add
it to the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> using <a class="reference internal" href="#sqlalchemy.orm.Session.add" title="sqlalchemy.orm.Session.add"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add()</span></code></a> normally.
If the object instead represents an existing identity in the database,
it should be merged using <a class="reference internal" href="#sqlalchemy.orm.Session.merge" title="sqlalchemy.orm.Session.merge"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.merge()</span></code></a>.</p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.enable_relationship_loading" title="sqlalchemy.orm.Session.enable_relationship_loading"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.enable_relationship_loading()</span></code></a> does not improve
behavior when the ORM is used normally - object references should be
constructed at the object level, not at the foreign key level, so
that they are present in an ordinary way before flush()
proceeds.  This method is not intended for general use.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship.params.load_on_pending" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.load_on_pending</span></code></a> - this flag
allows per-relationship loading of many-to-ones on items that
are pending.</p>
<p><a class="reference internal" href="#sqlalchemy.orm.make_transient_to_detached" title="sqlalchemy.orm.make_transient_to_detached"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_transient_to_detached()</span></code></a> - allows for an object to
be added to a <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> without SQL emitted, which then
will unexpire attributes on access.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.execute">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_parent_execute_state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_add_event</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><span class="pre">Result</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Unpack</span><span class="p"><span class="pre">[</span></span><span class="pre">TupleAny</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.execute" title="Link to this definition">¶</a></dt>
<dd><p>Execute a SQL expression construct.</p>
<p>Returns a <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object representing
results of the statement execution.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">select</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">User</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">5</span><span class="p">))</span></pre></div>
</div>
<p>The API contract of <a class="reference internal" href="#sqlalchemy.orm.Session.execute" title="sqlalchemy.orm.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a> is similar to that
of <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a>, the <a class="reference internal" href="../glossary.html#term-2.0-style"><span class="xref std std-term">2.0 style</span></a> version
of <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.4 版本发生变更: </span>the <a class="reference internal" href="#sqlalchemy.orm.Session.execute" title="sqlalchemy.orm.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a> method is
now the primary point of ORM statement execution when using
<a class="reference internal" href="../glossary.html#term-2.0-style"><span class="xref std std-term">2.0 style</span></a> ORM usage.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.Session.execute.params.statement"></span><strong>statement</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.execute.params.statement">¶</a> – An executable statement (i.e. an <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Executable</span></code></a> expression
such as <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code></a>).</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.execute.params.params"></span><strong>params</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.execute.params.params">¶</a> – Optional dictionary, or list of dictionaries, containing
bound parameter values.   If a single dictionary, single-row
execution occurs; if a list of dictionaries, an
“executemany” will be invoked.  The keys in each dictionary
must correspond to parameter names present in the statement.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.execute.params.execution_options"></span><strong>execution_options</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.execute.params.execution_options">¶</a> – <p>optional dictionary of execution options,
which will be associated with the statement execution.  This
dictionary can provide a subset of the options that are accepted
by <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a>, and may also
provide additional options understood only in an ORM context.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="queryguide/api.html#orm-queryguide-execution-options"><span class="std std-ref">ORM 执行选项</span></a> - ORM-specific execution
options</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.execute.params.bind_arguments"></span><strong>bind_arguments</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.execute.params.bind_arguments">¶</a> – dictionary of additional arguments to determine
the bind.  May include “mapper”, “bind”, or other custom arguments.
Contents of this dictionary are passed to the
<a class="reference internal" href="#sqlalchemy.orm.Session.get_bind" title="sqlalchemy.orm.Session.get_bind"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code></a> method.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>a <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Result" title="sqlalchemy.engine.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.expire">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">expire</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attribute_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.expire" title="Link to this definition">¶</a></dt>
<dd><p>Expire the attributes on an instance.</p>
<p>Marks the attributes of an instance as out of date. When an expired
attribute is next accessed, a query will be issued to the
<a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object’s current transactional context in order to
load all expired attributes for the given instance.   Note that
a highly isolated transaction will return the same values as were
previously read in that same transaction, regardless of changes
in database state outside of that transaction.</p>
<p>To expire all objects in the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> simultaneously,
use <a class="reference internal" href="#sqlalchemy.orm.Session.expire_all" title="sqlalchemy.orm.Session.expire_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire_all()</span></code></a>.</p>
<p>The <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object’s default behavior is to
expire all state whenever the <a class="reference internal" href="#sqlalchemy.orm.Session.rollback" title="sqlalchemy.orm.Session.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.rollback()</span></code></a>
or <a class="reference internal" href="#sqlalchemy.orm.Session.commit" title="sqlalchemy.orm.Session.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.commit()</span></code></a> methods are called, so that new
state can be loaded for the new transaction.   For this reason,
calling <a class="reference internal" href="#sqlalchemy.orm.Session.expire" title="sqlalchemy.orm.Session.expire"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code></a> only makes sense for the specific
case that a non-ORM SQL statement was emitted in the current
transaction.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.Session.expire.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.expire.params.instance">¶</a> – The instance to be refreshed.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.expire.params.attribute_names"></span><strong>attribute_names</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.expire.params.attribute_names">¶</a> – optional list of string attribute names
indicating a subset of attributes to be expired.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="session_state_management.html#session-expire"><span class="std std-ref">刷新/过期</span></a> - introductory material</p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.expire" title="sqlalchemy.orm.Session.expire"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.refresh" title="sqlalchemy.orm.Session.refresh"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code></a></p>
<p><a class="reference internal" href="queryguide/query.html#sqlalchemy.orm.Query.populate_existing" title="sqlalchemy.orm.Query.populate_existing"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.populate_existing()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.expire_all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">expire_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.expire_all" title="Link to this definition">¶</a></dt>
<dd><p>Expires all persistent instances within this Session.</p>
<p>When any attributes on a persistent instance is next accessed,
a query will be issued using the
<a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object’s current transactional context in order to
load all expired attributes for the given instance.   Note that
a highly isolated transaction will return the same values as were
previously read in that same transaction, regardless of changes
in database state outside of that transaction.</p>
<p>To expire individual objects and individual attributes
on those objects, use <a class="reference internal" href="#sqlalchemy.orm.Session.expire" title="sqlalchemy.orm.Session.expire"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code></a>.</p>
<p>The <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object’s default behavior is to
expire all state whenever the <a class="reference internal" href="#sqlalchemy.orm.Session.rollback" title="sqlalchemy.orm.Session.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.rollback()</span></code></a>
or <a class="reference internal" href="#sqlalchemy.orm.Session.commit" title="sqlalchemy.orm.Session.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.commit()</span></code></a> methods are called, so that new
state can be loaded for the new transaction.   For this reason,
calling <a class="reference internal" href="#sqlalchemy.orm.Session.expire_all" title="sqlalchemy.orm.Session.expire_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire_all()</span></code></a> is not usually needed,
assuming the transaction is isolated.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="session_state_management.html#session-expire"><span class="std std-ref">刷新/过期</span></a> - introductory material</p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.expire" title="sqlalchemy.orm.Session.expire"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.refresh" title="sqlalchemy.orm.Session.refresh"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code></a></p>
<p><a class="reference internal" href="queryguide/query.html#sqlalchemy.orm.Query.populate_existing" title="sqlalchemy.orm.Query.populate_existing"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.populate_existing()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.expunge">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">expunge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.expunge" title="Link to this definition">¶</a></dt>
<dd><p>Remove the <cite>instance</cite> from this <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<p>This will free all internal references to the instance.  Cascading
will be applied according to the <em>expunge</em> cascade rule.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.expunge_all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">expunge_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.expunge_all" title="Link to this definition">¶</a></dt>
<dd><p>Remove all object instances from this <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<p>This is equivalent to calling <code class="docutils literal notranslate"><span class="pre">expunge(obj)</span></code> on all objects in this
<code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.flush">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">flush</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">objects</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.flush" title="Link to this definition">¶</a></dt>
<dd><p>Flush all the object changes to the database.</p>
<p>Writes out all pending object creations, deletions and modifications
to the database as INSERTs, DELETEs, UPDATEs, etc.  Operations are
automatically ordered by the Session’s unit of work dependency
solver.</p>
<p>Database operations will be issued in the current transactional
context and do not affect the state of the transaction, unless an
error occurs, in which case the entire transaction is rolled back.
You may flush() as often as you like within a transaction to move
changes from Python to the database’s transaction buffer.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.orm.Session.flush.params.objects"></span><strong>objects</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.flush.params.objects">¶</a> – <p>Optional; restricts the flush operation to operate
only on elements that are in the given collection.</p>
<p>This feature is for an extremely narrow set of use cases where
particular objects may need to be operated upon before the
full flush() occurs.  It is not intended for general use.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">自 2.1 版本弃用.</span></p>
</div>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.get">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entity</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_EntityBindKey</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ident</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_PKIdentityArgument</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../core/defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><span class="pre">ORMOption</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">populate_existing</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_for_update</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ForUpdateParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identity_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_O</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.get" title="Link to this definition">¶</a></dt>
<dd><p>Return an instance based on the given primary key identifier,
or <code class="docutils literal notranslate"><span class="pre">None</span></code> if not found.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_user</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

<span class="n">some_object</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">VersionedFoo</span><span class="p">,</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="n">some_object</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">VersionedFoo</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;version_id&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入: </span>Added <a class="reference internal" href="#sqlalchemy.orm.Session.get" title="sqlalchemy.orm.Session.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get()</span></code></a>, which is moved
from the now legacy <a class="reference internal" href="queryguide/query.html#sqlalchemy.orm.Query.get" title="sqlalchemy.orm.Query.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.get()</span></code></a> method.</p>
</div>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.get" title="sqlalchemy.orm.Session.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get()</span></code></a> is special in that it provides direct
access to the identity map of the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.
If the given primary key identifier is present
in the local identity map, the object is returned
directly from this collection and no SQL is emitted,
unless the object has been marked fully expired.
If not present,
a SELECT is performed in order to locate the object.</p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.get" title="sqlalchemy.orm.Session.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get()</span></code></a> also will perform a check if
the object is present in the identity map and
marked as expired - a SELECT
is emitted to refresh the object as well as to
ensure that the row is still present.
If not, <a class="reference internal" href="exceptions.html#sqlalchemy.orm.exc.ObjectDeletedError" title="sqlalchemy.orm.exc.ObjectDeletedError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ObjectDeletedError</span></code></a> is raised.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.Session.get.params.entity"></span><strong>entity</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.get.params.entity">¶</a> – a mapped class or <a class="reference internal" href="mapping_api.html#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> indicating the
type of entity to be loaded.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.get.params.ident"></span><strong>ident</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.get.params.ident">¶</a> – <p>A scalar, tuple, or dictionary representing the
primary key.  For a composite (e.g. multiple column) primary key,
a tuple or dictionary should be passed.</p>
<p>For a single-column primary key, the scalar calling form is typically
the most expedient.  If the primary key of a row is the value “5”,
the call looks like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_object</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SomeClass</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span></pre></div>
</div>
<p>The tuple form contains primary key values typically in
the order in which they correspond to the mapped
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
object’s primary key columns, or if the
<a class="reference internal" href="mapping_api.html#sqlalchemy.orm.Mapper.params.primary_key" title="sqlalchemy.orm.Mapper"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Mapper.primary_key</span></code></a> configuration parameter were
used, in
the order used for that parameter. For example, if the primary key
of a row is represented by the integer
digits “5, 10” the call would look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_object</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SomeClass</span><span class="p">,</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span></pre></div>
</div>
<p>The dictionary form should include as keys the mapped attribute names
corresponding to each element of the primary key.  If the mapped class
has the attributes <code class="docutils literal notranslate"><span class="pre">id</span></code>, <code class="docutils literal notranslate"><span class="pre">version_id</span></code> as the attributes which
store the object’s primary key value, the call would look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_object</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SomeClass</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;version_id&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span></pre></div>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.get.params.options"></span><strong>options</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.get.params.options">¶</a> – optional sequence of loader options which will be
applied to the query, if one is emitted.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.get.params.populate_existing"></span><strong>populate_existing</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.get.params.populate_existing">¶</a> – causes the method to unconditionally emit
a SQL query and refresh the object with the newly loaded data,
regardless of whether or not the object is already present.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.get.params.with_for_update"></span><strong>with_for_update</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.get.params.with_for_update">¶</a> – optional boolean <code class="docutils literal notranslate"><span class="pre">True</span></code> indicating FOR UPDATE
should be used, or may be a dictionary containing flags to
indicate a more specific set of FOR UPDATE flags for the SELECT;
flags should match the parameters of
<a class="reference internal" href="queryguide/query.html#sqlalchemy.orm.Query.with_for_update" title="sqlalchemy.orm.Query.with_for_update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.with_for_update()</span></code></a>.
Supersedes the <a class="reference internal" href="#sqlalchemy.orm.Session.refresh.params.lockmode" title="sqlalchemy.orm.Session.refresh"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.refresh.lockmode</span></code></a> parameter.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.get.params.execution_options"></span><strong>execution_options</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.get.params.execution_options">¶</a> – <p>optional dictionary of execution options,
which will be associated with the query execution if one is emitted.
This dictionary can provide a subset of the options that are
accepted by <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a>, and may
also provide additional options understood only in an ORM context.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4.29 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="queryguide/api.html#orm-queryguide-execution-options"><span class="std std-ref">ORM 执行选项</span></a> - ORM-specific execution
options</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.get.params.bind_arguments"></span><strong>bind_arguments</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.get.params.bind_arguments">¶</a> – <p>dictionary of additional arguments to determine
the bind.  May include “mapper”, “bind”, or other custom arguments.
Contents of this dictionary are passed to the
<a class="reference internal" href="#sqlalchemy.orm.Session.get_bind" title="sqlalchemy.orm.Session.get_bind"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code></a> method.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0.0rc1 版本加入.</span></p>
</div>
</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The object instance, or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.get_bind">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">get_bind</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mapper</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_EntityBindKey</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clause</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../core/foundation.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><span class="pre">ClauseElement</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_SessionBind</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_sa_skip_events</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_sa_skip_for_implicit_returning</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><span class="pre">Engine</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><span class="pre">Connection</span></a></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.get_bind" title="Link to this definition">¶</a></dt>
<dd><p>Return a “bind” to which this <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> is bound.</p>
<p>The “bind” is usually an instance of <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>,
except in the case where the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> has been
explicitly bound directly to a <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p>For a multiply-bound or unbound <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>, the
<code class="docutils literal notranslate"><span class="pre">mapper</span></code> or <code class="docutils literal notranslate"><span class="pre">clause</span></code> arguments are used to determine the
appropriate bind to return.</p>
<p>Note that the “mapper” argument is usually present
when <a class="reference internal" href="#sqlalchemy.orm.Session.get_bind" title="sqlalchemy.orm.Session.get_bind"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code></a> is called via an ORM
operation such as a <a class="reference internal" href="#sqlalchemy.orm.Session.query" title="sqlalchemy.orm.Session.query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.query()</span></code></a>, each
individual INSERT/UPDATE/DELETE operation within a
<a class="reference internal" href="#sqlalchemy.orm.Session.flush" title="sqlalchemy.orm.Session.flush"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.flush()</span></code></a>, call, etc.</p>
<p>The order of resolution is:</p>
<ol class="arabic simple">
<li><p>if mapper given and <a class="reference internal" href="#sqlalchemy.orm.Session.params.binds" title="sqlalchemy.orm.Session"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.binds</span></code></a> is present,
locate a bind based first on the mapper in use, then
on the mapped class in use, then on any base classes that are
present in the <code class="docutils literal notranslate"><span class="pre">__mro__</span></code> of the mapped class, from more specific
superclasses to more general.</p></li>
<li><p>if clause given and <code class="docutils literal notranslate"><span class="pre">Session.binds</span></code> is present,
locate a bind based on <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects
found in the given clause present in <code class="docutils literal notranslate"><span class="pre">Session.binds</span></code>.</p></li>
<li><p>if <code class="docutils literal notranslate"><span class="pre">Session.binds</span></code> is present, return that.</p></li>
<li><p>if clause given, attempt to return a bind
linked to the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> ultimately
associated with the clause.</p></li>
<li><p>if mapper given, attempt to return a bind
linked to the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> ultimately
associated with the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> or other
selectable to which the mapper is mapped.</p></li>
<li><p>No bind can be found, <a class="reference internal" href="../core/exceptions.html#sqlalchemy.exc.UnboundExecutionError" title="sqlalchemy.exc.UnboundExecutionError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UnboundExecutionError</span></code></a>
is raised.</p></li>
</ol>
<p>Note that the <a class="reference internal" href="#sqlalchemy.orm.Session.get_bind" title="sqlalchemy.orm.Session.get_bind"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_bind()</span></code></a> method can be overridden on
a user-defined subclass of <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> to provide any kind
of bind resolution scheme.  See the example at
<a class="reference internal" href="persistence_techniques.html#session-custom-partitioning"><span class="std std-ref">自定义垂直分区</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.Session.get_bind.params.mapper"></span><strong>mapper</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.get_bind.params.mapper">¶</a> – Optional mapped class or corresponding <a class="reference internal" href="mapping_api.html#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> instance.
The bind can be derived from a <a class="reference internal" href="mapping_api.html#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> first by
consulting the “binds” map associated with this <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>,
and secondly by consulting the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> associated
with the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> to which the <a class="reference internal" href="mapping_api.html#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> is
mapped for a bind.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.get_bind.params.clause"></span><strong>clause</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.get_bind.params.clause">¶</a> – A <a class="reference internal" href="../core/foundation.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClauseElement</span></code></a> (i.e.
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code></a>,
<a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a>,
etc.).  If the <code class="docutils literal notranslate"><span class="pre">mapper</span></code> argument is not present or could not
produce a bind, the given expression construct will be searched
for a bound element, typically a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
associated with
bound <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="persistence_techniques.html#session-partitioning"><span class="std std-ref">分区策略（例如每个会话有多个数据库后端）</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.params.binds" title="sqlalchemy.orm.Session"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.binds</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.bind_mapper" title="sqlalchemy.orm.Session.bind_mapper"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.bind_mapper()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.bind_table" title="sqlalchemy.orm.Session.bind_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.bind_table()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.get_nested_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">get_nested_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.orm.SessionTransaction" title="sqlalchemy.orm.session.SessionTransaction"><span class="pre">SessionTransaction</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.get_nested_transaction" title="Link to this definition">¶</a></dt>
<dd><p>Return the current nested transaction in progress, if any.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.get_one">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">get_one</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entity</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_EntityBindKey</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ident</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_PKIdentityArgument</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../core/defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><span class="pre">ORMOption</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">populate_existing</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_for_update</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ForUpdateParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identity_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_O</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.get_one" title="Link to this definition">¶</a></dt>
<dd><p>Return exactly one instance based on the given primary key
identifier, or raise an exception if not found.</p>
<p>Raises <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.exc.NoResultFound</span></code> if the query
selects no rows.</p>
<p>For a detailed documentation of the arguments see the
method <a class="reference internal" href="#sqlalchemy.orm.Session.get" title="sqlalchemy.orm.Session.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get()</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0.22 版本加入.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>The object instance.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<dl class="simple">
<dt><a class="reference internal" href="#sqlalchemy.orm.Session.get" title="sqlalchemy.orm.Session.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get()</span></code></a> - equivalent method that instead</dt><dd><p>returns <code class="docutils literal notranslate"><span class="pre">None</span></code> if no row was found with the provided primary
key</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.get_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">get_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.orm.SessionTransaction" title="sqlalchemy.orm.session.SessionTransaction"><span class="pre">SessionTransaction</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.get_transaction" title="Link to this definition">¶</a></dt>
<dd><p>Return the current root transaction in progress, if any.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.identity_key">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">identity_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">class_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ident</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.Tuple" title="sqlalchemy.sql.expression.Tuple"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Unpack</span><span class="p"><span class="pre">[</span></span><span class="pre">TupleAny</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../core/connections.html#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><span class="pre">RowMapping</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identity_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_IdentityKeyType</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.identity_key" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.session._SessionClassMethods.identity_key</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.session._SessionClassMethods</span></code></p>
</div>
<p>Return an identity key.</p>
<p>This is an alias of <a class="reference internal" href="mapping_api.html#sqlalchemy.orm.util.identity_key" title="sqlalchemy.orm.util.identity_key"><code class="xref py py-func docutils literal notranslate"><span class="pre">identity_key()</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.identity_map">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">identity_map</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="internals.html#sqlalchemy.orm.IdentityMap" title="sqlalchemy.orm.IdentityMap"><span class="pre">IdentityMap</span></a></em><a class="headerlink" href="#sqlalchemy.orm.Session.identity_map" title="Link to this definition">¶</a></dt>
<dd><p>A mapping of object identities to objects themselves.</p>
<p>Iterating through <code class="docutils literal notranslate"><span class="pre">Session.identity_map.values()</span></code> provides
access to the full set of persistent objects (i.e., those
that have row identity) currently in the session.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="mapping_api.html#sqlalchemy.orm.util.identity_key" title="sqlalchemy.orm.util.identity_key"><code class="xref py py-func docutils literal notranslate"><span class="pre">identity_key()</span></code></a> - helper function to produce the keys used
in this dictionary.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.in_nested_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">in_nested_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.in_nested_transaction" title="Link to this definition">¶</a></dt>
<dd><p>Return True if this <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> has begun a nested
transaction, e.g. SAVEPOINT.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.in_transaction">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">in_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.in_transaction" title="Link to this definition">¶</a></dt>
<dd><p>Return True if this <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> has begun a transaction.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.is_active" title="sqlalchemy.orm.Session.is_active"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.is_active</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.info">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">info</span></span><a class="headerlink" href="#sqlalchemy.orm.Session.info" title="Link to this definition">¶</a></dt>
<dd><p>A user-modifiable dictionary.</p>
<p>The initial value of this dictionary can be populated using the
<code class="docutils literal notranslate"><span class="pre">info</span></code> argument to the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> constructor or
<a class="reference internal" href="#sqlalchemy.orm.sessionmaker" title="sqlalchemy.orm.sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code></a> constructor or factory methods.  The dictionary
here is always local to this <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> and can be modified
independently of all other <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> objects.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.invalidate">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">invalidate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.invalidate" title="Link to this definition">¶</a></dt>
<dd><p>Close this Session, using connection invalidation.</p>
<p>This is a variant of <a class="reference internal" href="#sqlalchemy.orm.Session.close" title="sqlalchemy.orm.Session.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.close()</span></code></a> that will additionally
ensure that the <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection.invalidate" title="sqlalchemy.engine.Connection.invalidate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.invalidate()</span></code></a>
method will be called on each <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object
that is currently in use for a transaction (typically there is only
one connection unless the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> is used with
multiple engines).</p>
<p>This can be called when the database is known to be in a state where
the connections are no longer safe to be used.</p>
<p>Below illustrates a scenario when using <a class="reference external" href="https://www.gevent.org/">gevent</a>, which can produce <code class="docutils literal notranslate"><span class="pre">Timeout</span></code> exceptions
that may mean the underlying connection should be discarded:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">gevent</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">sess</span> <span class="o">=</span> <span class="n">Session</span><span class="p">()</span>
    <span class="n">sess</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">User</span><span class="p">())</span>
    <span class="n">sess</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="k">except</span> <span class="n">gevent</span><span class="o">.</span><span class="n">Timeout</span><span class="p">:</span>
    <span class="n">sess</span><span class="o">.</span><span class="n">invalidate</span><span class="p">()</span>
    <span class="k">raise</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">sess</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
    <span class="k">raise</span></pre></div>
</div>
<p>The method additionally does everything that <a class="reference internal" href="#sqlalchemy.orm.Session.close" title="sqlalchemy.orm.Session.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.close()</span></code></a>
does, including that all ORM objects are expunged.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.is_active">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">is_active</span></span><a class="headerlink" href="#sqlalchemy.orm.Session.is_active" title="Link to this definition">¶</a></dt>
<dd><p>True if this <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> not in “partial rollback” state.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.4 版本发生变更: </span>The <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> no longer begins
a new transaction immediately, so this attribute will be False
when the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> is first instantiated.</p>
</div>
<p>“partial rollback” state typically indicates that the flush process
of the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> has failed, and that the
<a class="reference internal" href="#sqlalchemy.orm.Session.rollback" title="sqlalchemy.orm.Session.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.rollback()</span></code></a> method must be emitted in order to
fully roll back the transaction.</p>
<p>If this <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> is not in a transaction at all, the
<a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> will autobegin when it is first used, so in this
case <a class="reference internal" href="#sqlalchemy.orm.Session.is_active" title="sqlalchemy.orm.Session.is_active"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.is_active</span></code></a> will return True.</p>
<p>Otherwise, if this <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> is within a transaction,
and that transaction has not been rolled back internally, the
<a class="reference internal" href="#sqlalchemy.orm.Session.is_active" title="sqlalchemy.orm.Session.is_active"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.is_active</span></code></a> will also return True.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="../faq/sessions.html#faq-session-rollback"><span class="std std-ref">“由于刷新期间出现先前的异常，此 Session 的事务已被回滚。”（或类似）</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.in_transaction" title="sqlalchemy.orm.Session.in_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.in_transaction()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.is_modified">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">is_modified</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_collections</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.is_modified" title="Link to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if the given instance has locally
modified attributes.</p>
<p>This method retrieves the history for each instrumented
attribute on the instance and performs a comparison of the current
value to its previously flushed or committed value, if any.</p>
<p>It is in effect a more expensive and accurate
version of checking for the given instance in the
<a class="reference internal" href="#sqlalchemy.orm.Session.dirty" title="sqlalchemy.orm.Session.dirty"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.dirty</span></code></a> collection; a full test for
each attribute’s net “dirty” status is performed.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="n">session</span><span class="o">.</span><span class="n">is_modified</span><span class="p">(</span><span class="n">someobject</span><span class="p">)</span></pre></div>
</div>
<p>A few caveats to this method apply:</p>
<ul>
<li><p>Instances present in the <a class="reference internal" href="#sqlalchemy.orm.Session.dirty" title="sqlalchemy.orm.Session.dirty"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.dirty</span></code></a> collection may
report <code class="docutils literal notranslate"><span class="pre">False</span></code> when tested with this method.  This is because
the object may have received change events via attribute mutation,
thus placing it in <a class="reference internal" href="#sqlalchemy.orm.Session.dirty" title="sqlalchemy.orm.Session.dirty"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.dirty</span></code></a>, but ultimately the state
is the same as that loaded from the database, resulting in no net
change here.</p></li>
<li><p>Scalar attributes may not have recorded the previously set
value when a new value was applied, if the attribute was not loaded,
or was expired, at the time the new value was received - in these
cases, the attribute is assumed to have a change, even if there is
ultimately no net change against its database value. SQLAlchemy in
most cases does not need the “old” value when a set event occurs, so
it skips the expense of a SQL call if the old value isn’t present,
based on the assumption that an UPDATE of the scalar value is
usually needed, and in those few cases where it isn’t, is less
expensive on average than issuing a defensive SELECT.</p>
<p>The “old” value is fetched unconditionally upon set only if the
attribute container has the <code class="docutils literal notranslate"><span class="pre">active_history</span></code> flag set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.
This flag is set typically for primary key attributes and scalar
object references that are not a simple many-to-one.  To set this
flag for any arbitrary mapped column, use the <code class="docutils literal notranslate"><span class="pre">active_history</span></code>
argument with <a class="reference internal" href="mapping_api.html#sqlalchemy.orm.column_property" title="sqlalchemy.orm.column_property"><code class="xref py py-func docutils literal notranslate"><span class="pre">column_property()</span></code></a>.</p>
</li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.Session.is_modified.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.is_modified.params.instance">¶</a> – mapped instance to be tested for pending changes.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.is_modified.params.include_collections"></span><strong>include_collections</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.is_modified.params.include_collections">¶</a> – Indicates if multivalued collections
should be included in the operation.  Setting this to <code class="docutils literal notranslate"><span class="pre">False</span></code> is a
way to detect only local-column based properties (i.e. scalar columns
or many-to-one foreign keys) that would result in an UPDATE for this
instance upon flush.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.merge">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_O</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">load</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../core/defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><span class="pre">ORMOption</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_O</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.merge" title="Link to this definition">¶</a></dt>
<dd><p>Copy the state of a given instance into a corresponding instance
within this <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.</p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.merge" title="sqlalchemy.orm.Session.merge"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.merge()</span></code></a> examines the primary key attributes of the
source instance, and attempts to reconcile it with an instance of the
same primary key in the session.   If not found locally, it attempts
to load the object from the database based on primary key, and if
none can be located, creates a new instance.  The state of each
attribute on the source instance is then copied to the target
instance.  The resulting target instance is then returned by the
method; the original source instance is left unmodified, and
un-associated with the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> if not already.</p>
<p>This operation cascades to associated instances if the association is
mapped with <code class="docutils literal notranslate"><span class="pre">cascade=&quot;merge&quot;</span></code>.</p>
<p>See <a class="reference internal" href="session_state_management.html#unitofwork-merging"><span class="std std-ref">合并</span></a> for a detailed discussion of merging.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.Session.merge.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.merge.params.instance">¶</a> – Instance to be merged.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.merge.params.load"></span><strong>load</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.merge.params.load">¶</a> – <p>Boolean, when False, <a class="reference internal" href="#sqlalchemy.orm.Session.merge" title="sqlalchemy.orm.Session.merge"><code class="xref py py-meth docutils literal notranslate"><span class="pre">merge()</span></code></a> switches into
a “high performance” mode which causes it to forego emitting history
events as well as all database access.  This flag is used for
cases such as transferring graphs of objects into a <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>
from a second level cache, or to transfer just-loaded objects
into the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> owned by a worker thread or process
without re-querying the database.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">load=False</span></code> use case adds the caveat that the given
object has to be in a “clean” state, that is, has no pending changes
to be flushed - even if the incoming object is detached from any
<a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.   This is so that when
the merge operation populates local attributes and
cascades to related objects and
collections, the values can be “stamped” onto the
target object as is, without generating any history or attribute
events, and without the need to reconcile the incoming data with
any existing related objects or collections that might not
be loaded.  The resulting objects from <code class="docutils literal notranslate"><span class="pre">load=False</span></code> are always
produced as “clean”, so it is only appropriate that the given objects
should be “clean” as well, else this suggests a mis-use of the
method.</p>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.merge.params.options"></span><strong>options</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.merge.params.options">¶</a> – <p>optional sequence of loader options which will be
applied to the <a class="reference internal" href="#sqlalchemy.orm.Session.get" title="sqlalchemy.orm.Session.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get()</span></code></a> method when the merge
operation loads the existing version of the object from the database.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4.24 版本加入.</span></p>
</div>
</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.make_transient_to_detached" title="sqlalchemy.orm.make_transient_to_detached"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_transient_to_detached()</span></code></a> - provides for an alternative
means of “merging” a single object into the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.merge_all" title="sqlalchemy.orm.Session.merge_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.merge_all()</span></code></a> - multiple instance version</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.merge_all">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">merge_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instances</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">load</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../core/defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><span class="pre">ORMOption</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../core/defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.merge_all" title="Link to this definition">¶</a></dt>
<dd><p>Calls <a class="reference internal" href="#sqlalchemy.orm.Session.merge" title="sqlalchemy.orm.Session.merge"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.merge()</span></code></a> on multiple instances.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.merge" title="sqlalchemy.orm.Session.merge"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.merge()</span></code></a> - main documentation on merge</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 2.1 版本加入.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.new">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">new</span></span><a class="headerlink" href="#sqlalchemy.orm.Session.new" title="Link to this definition">¶</a></dt>
<dd><p>The set of all instances marked as ‘new’ within this <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.no_autoflush">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">no_autoflush</span></span><a class="headerlink" href="#sqlalchemy.orm.Session.no_autoflush" title="Link to this definition">¶</a></dt>
<dd><p>Return a context manager that disables autoflush.</p>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">no_autoflush</span><span class="p">:</span>

    <span class="n">some_object</span> <span class="o">=</span> <span class="n">SomeClass</span><span class="p">()</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">some_object</span><span class="p">)</span>
    <span class="c1"># won&#39;t autoflush</span>
    <span class="n">some_object</span><span class="o">.</span><span class="n">related_thing</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">SomeRelated</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span></pre></div>
</div>
<p>Operations that proceed within the <code class="docutils literal notranslate"><span class="pre">with:</span></code> block
will not be subject to flushes occurring upon query
access.  This is useful when initializing a series
of objects which involve existing database queries,
where the uncompleted object should not yet be flushed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.object_session">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">object_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.session.Session"><span class="pre">Session</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.object_session" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.session._SessionClassMethods.object_session</span></code> <em>method of</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.session._SessionClassMethods</span></code></p>
</div>
<p>Return the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> to which an object belongs.</p>
<p>This is an alias of <a class="reference internal" href="#sqlalchemy.orm.object_session" title="sqlalchemy.orm.object_session"><code class="xref py py-func docutils literal notranslate"><span class="pre">object_session()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.prepare">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">prepare</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.prepare" title="Link to this definition">¶</a></dt>
<dd><p>Prepare the current transaction in progress for two phase commit.</p>
<p>If no transaction is in progress, this method raises an
<a class="reference internal" href="../core/exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a>.</p>
<p>Only root transactions of two phase sessions can be prepared. If the
current transaction is not such, an
<a class="reference internal" href="../core/exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a> is raised.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.query">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">entities</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_ColumnsClauseArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="queryguide/query.html#sqlalchemy.orm.Query" title="sqlalchemy.orm.Query"><span class="pre">Query</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.query" title="Link to this definition">¶</a></dt>
<dd><p>Return a new <a class="reference internal" href="queryguide/query.html#sqlalchemy.orm.Query" title="sqlalchemy.orm.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> object corresponding to this
<a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.</p>
<p>Note that the <a class="reference internal" href="queryguide/query.html#sqlalchemy.orm.Query" title="sqlalchemy.orm.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> object is legacy as of
SQLAlchemy 2.0; the <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code></a> construct is now used
to construct ORM queries.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="../tutorial/index.html#unified-tutorial"><span class="std std-ref">SQLAlchemy 统一教程</span></a></p>
<p><a class="reference internal" href="queryguide/index.html#queryguide-toplevel"><span class="std std-ref">ORM 查询指南</span></a></p>
<p><a class="reference internal" href="queryguide/query.html#query-api-toplevel"><span class="std std-ref">旧式查询 API</span></a> - legacy API doc</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.refresh">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">refresh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attribute_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_for_update</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ForUpdateParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.refresh" title="Link to this definition">¶</a></dt>
<dd><p>Expire and refresh attributes on the given instance.</p>
<p>The selected attributes will first be expired as they would when using
<a class="reference internal" href="#sqlalchemy.orm.Session.expire" title="sqlalchemy.orm.Session.expire"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code></a>; then a SELECT statement will be issued to
the database to refresh column-oriented attributes with the current
value available in the current transaction.</p>
<p><a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> oriented attributes will also be immediately
loaded if they were already eagerly loaded on the object, using the
same eager loading strategy that they were loaded with originally.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入: </span>- the <a class="reference internal" href="#sqlalchemy.orm.Session.refresh" title="sqlalchemy.orm.Session.refresh"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code></a> method
can also refresh eagerly loaded attributes.</p>
</div>
<p><a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> oriented attributes that would normally
load using the <code class="docutils literal notranslate"><span class="pre">select</span></code> (or “lazy”) loader strategy will also
load <strong>if they are named explicitly in the attribute_names
collection</strong>, emitting a SELECT statement for the attribute using the
<code class="docutils literal notranslate"><span class="pre">immediate</span></code> loader strategy.  If lazy-loaded relationships are not
named in <a class="reference internal" href="#sqlalchemy.orm.Session.refresh.params.attribute_names" title="sqlalchemy.orm.Session.refresh"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.refresh.attribute_names</span></code></a>, then
they remain as “lazy loaded” attributes and are not implicitly
refreshed.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 2.0.4 版本发生变更: </span>The <a class="reference internal" href="#sqlalchemy.orm.Session.refresh" title="sqlalchemy.orm.Session.refresh"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code></a> method
will now refresh lazy-loaded <a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> oriented
attributes for those which are named explicitly in the
<a class="reference internal" href="#sqlalchemy.orm.Session.refresh.params.attribute_names" title="sqlalchemy.orm.Session.refresh"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.refresh.attribute_names</span></code></a> collection.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">小技巧</p>
<p>While the <a class="reference internal" href="#sqlalchemy.orm.Session.refresh" title="sqlalchemy.orm.Session.refresh"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.refresh()</span></code></a> method is capable of
refreshing both column and relationship oriented attributes, its
primary focus is on refreshing of local column-oriented attributes
on a single instance. For more open ended “refresh” functionality,
including the ability to refresh the attributes on many objects at
once while having explicit control over relationship loader
strategies, use the
<a class="reference internal" href="queryguide/api.html#orm-queryguide-populate-existing"><span class="std std-ref">populate existing</span></a> feature
instead.</p>
</div>
<p>Note that a highly isolated transaction will return the same values as
were previously read in that same transaction, regardless of changes
in database state outside of that transaction.   Refreshing
attributes usually only makes sense at the start of a transaction
where database rows have not yet been accessed.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.Session.refresh.params.attribute_names"></span><strong>attribute_names</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.refresh.params.attribute_names">¶</a> – optional.  An iterable collection of
string attribute names indicating a subset of attributes to
be refreshed.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Session.refresh.params.with_for_update"></span><strong>with_for_update</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Session.refresh.params.with_for_update">¶</a> – optional boolean <code class="docutils literal notranslate"><span class="pre">True</span></code> indicating FOR UPDATE
should be used, or may be a dictionary containing flags to
indicate a more specific set of FOR UPDATE flags for the SELECT;
flags should match the parameters of
<a class="reference internal" href="queryguide/query.html#sqlalchemy.orm.Query.with_for_update" title="sqlalchemy.orm.Query.with_for_update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.with_for_update()</span></code></a>.
Supersedes the <a class="reference internal" href="#sqlalchemy.orm.Session.refresh.params.lockmode" title="sqlalchemy.orm.Session.refresh"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.refresh.lockmode</span></code></a> parameter.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="session_state_management.html#session-expire"><span class="std std-ref">刷新/过期</span></a> - introductory material</p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.expire" title="sqlalchemy.orm.Session.expire"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.expire_all" title="sqlalchemy.orm.Session.expire_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire_all()</span></code></a></p>
<p><a class="reference internal" href="queryguide/api.html#orm-queryguide-populate-existing"><span class="std std-ref">填充现有</span></a> - allows any ORM query
to refresh objects as they would be loaded normally.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.reset">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.reset" title="Link to this definition">¶</a></dt>
<dd><p>Close out the transactional resources and ORM objects used by this
<a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>, resetting the session to its initial state.</p>
<p>This method provides for same “reset-only” behavior that the
<a class="reference internal" href="#sqlalchemy.orm.Session.close" title="sqlalchemy.orm.Session.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.close()</span></code></a> method has provided historically, where the
state of the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> is reset as though the object were
brand new, and ready to be used again.
This method may then be useful for <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> objects
which set <a class="reference internal" href="#sqlalchemy.orm.Session.params.close_resets_only" title="sqlalchemy.orm.Session"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.close_resets_only</span></code></a> to <code class="docutils literal notranslate"><span class="pre">False</span></code>,
so that “reset only” behavior is still available.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0.22 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="session_basics.html#session-closing"><span class="std std-ref">关闭</span></a> - detail on the semantics of
<a class="reference internal" href="#sqlalchemy.orm.Session.close" title="sqlalchemy.orm.Session.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.close()</span></code></a> and <a class="reference internal" href="#sqlalchemy.orm.Session.reset" title="sqlalchemy.orm.Session.reset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.reset()</span></code></a>.</p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.close" title="sqlalchemy.orm.Session.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.close()</span></code></a> - a similar method will additionally
prevent re-use of the Session when the parameter
<a class="reference internal" href="#sqlalchemy.orm.Session.params.close_resets_only" title="sqlalchemy.orm.Session"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.close_resets_only</span></code></a> is set to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.rollback">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.rollback" title="Link to this definition">¶</a></dt>
<dd><p>Rollback the current transaction in progress.</p>
<p>If no transaction is in progress, this method is a pass-through.</p>
<p>The method always rolls back
the topmost database transaction, discarding any nested
transactions that may be in progress.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="session_basics.html#session-rollback"><span class="std std-ref">回滚</span></a></p>
<p><a class="reference internal" href="session_transaction.html#unitofwork-transaction"><span class="std std-ref">管理事务</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.scalar">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">scalar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreSingleExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.scalar" title="Link to this definition">¶</a></dt>
<dd><p>Execute a statement and return a scalar result.</p>
<p>Usage and parameters are the same as that of
<a class="reference internal" href="#sqlalchemy.orm.Session.execute" title="sqlalchemy.orm.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a>; the return result is a scalar Python
value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Session.scalars">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Session.</span></code></a><span class="sig-name descname"><span class="pre">scalars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><span class="pre">Executable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_CoreAnyExecuteParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrmExecuteOptionsParameter</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind_arguments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_BindArguments</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../core/connections.html#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><span class="pre">ScalarResult</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.Session.scalars" title="Link to this definition">¶</a></dt>
<dd><p>Execute a statement and return the results as scalars.</p>
<p>Usage and parameters are the same as that of
<a class="reference internal" href="#sqlalchemy.orm.Session.execute" title="sqlalchemy.orm.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a>; the return result is a
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a> filtering object which
will return single elements rather than <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> objects.</p>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>a <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a> object</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4.24 版本加入: </span>Added <a class="reference internal" href="#sqlalchemy.orm.Session.scalars" title="sqlalchemy.orm.Session.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.scalars()</span></code></a></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4.26 版本加入: </span>Added <a class="reference internal" href="contextual.html#sqlalchemy.orm.scoped_session.scalars" title="sqlalchemy.orm.scoped_session.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">scoped_session.scalars()</span></code></a></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="queryguide/select.html#orm-queryguide-select-orm-entities"><span class="std std-ref">选择 ORM 实体</span></a> - contrasts the behavior
of <a class="reference internal" href="#sqlalchemy.orm.Session.execute" title="sqlalchemy.orm.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a> to <a class="reference internal" href="#sqlalchemy.orm.Session.scalars" title="sqlalchemy.orm.Session.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.scalars()</span></code></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.orm.SessionTransaction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">SessionTransaction</span></span><a class="headerlink" href="#sqlalchemy.orm.SessionTransaction" title="Link to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>-level transaction.</p>
<p><a class="reference internal" href="#sqlalchemy.orm.SessionTransaction" title="sqlalchemy.orm.SessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionTransaction</span></code></a> is produced from the
<a class="reference internal" href="#sqlalchemy.orm.Session.begin" title="sqlalchemy.orm.Session.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.begin()</span></code></a>
and <a class="reference internal" href="#sqlalchemy.orm.Session.begin_nested" title="sqlalchemy.orm.Session.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.begin_nested()</span></code></a> methods.   It’s largely an internal
object that in modern use provides a context manager for session
transactions.</p>
<p>Documentation on interacting with <a class="reference internal" href="#sqlalchemy.orm.SessionTransaction" title="sqlalchemy.orm.SessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionTransaction</span></code></a> is
at: <a class="reference internal" href="session_transaction.html#unitofwork-transaction"><span class="std std-ref">管理事务</span></a>.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.4 版本发生变更: </span>The scoping and API methods to work with the
<a class="reference internal" href="#sqlalchemy.orm.SessionTransaction" title="sqlalchemy.orm.SessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionTransaction</span></code></a> object directly have been simplified.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="session_transaction.html#unitofwork-transaction"><span class="std std-ref">管理事务</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.begin" title="sqlalchemy.orm.Session.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.begin()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.begin_nested" title="sqlalchemy.orm.Session.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.begin_nested()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.rollback" title="sqlalchemy.orm.Session.rollback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.rollback()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.commit" title="sqlalchemy.orm.Session.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.commit()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.in_transaction" title="sqlalchemy.orm.Session.in_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.in_transaction()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.in_nested_transaction" title="sqlalchemy.orm.Session.in_nested_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.in_nested_transaction()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.get_transaction" title="sqlalchemy.orm.Session.get_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_transaction()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.get_nested_transaction" title="sqlalchemy.orm.Session.get_nested_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get_nested_transaction()</span></code></a></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.orm.SessionTransaction.nested"><span class="sig-name descname">nested</span></a>, <a class="reference internal" href="#sqlalchemy.orm.SessionTransaction.origin"><span class="sig-name descname">origin</span></a>, <a class="reference internal" href="#sqlalchemy.orm.SessionTransaction.parent"><span class="sig-name descname">parent</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.orm.SessionTransaction" title="sqlalchemy.orm.SessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.orm.SessionTransaction</span></code></a> (<code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.state_changes._StateChange</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.util.TransactionalContext</span></code>)</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.SessionTransaction.nested">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.SessionTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.SessionTransaction.</span></code></a><span class="sig-name descname"><span class="pre">nested</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#sqlalchemy.orm.SessionTransaction.nested" title="Link to this definition">¶</a></dt>
<dd><p>Indicates if this is a nested, or SAVEPOINT, transaction.</p>
<p>When <a class="reference internal" href="#sqlalchemy.orm.SessionTransaction.nested" title="sqlalchemy.orm.SessionTransaction.nested"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SessionTransaction.nested</span></code></a> is True, it is expected
that <a class="reference internal" href="#sqlalchemy.orm.SessionTransaction.parent" title="sqlalchemy.orm.SessionTransaction.parent"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SessionTransaction.parent</span></code></a> will be present as well,
linking to the enclosing <a class="reference internal" href="#sqlalchemy.orm.SessionTransaction" title="sqlalchemy.orm.SessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionTransaction</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.SessionTransaction.origin" title="sqlalchemy.orm.SessionTransaction.origin"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SessionTransaction.origin</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.SessionTransaction.origin">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.SessionTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.SessionTransaction.</span></code></a><span class="sig-name descname"><span class="pre">origin</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#sqlalchemy.orm.SessionTransactionOrigin" title="sqlalchemy.orm.SessionTransactionOrigin"><span class="pre">SessionTransactionOrigin</span></a></em><a class="headerlink" href="#sqlalchemy.orm.SessionTransaction.origin" title="Link to this definition">¶</a></dt>
<dd><p>Origin of this <a class="reference internal" href="#sqlalchemy.orm.SessionTransaction" title="sqlalchemy.orm.SessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionTransaction</span></code></a>.</p>
<p>Refers to a <a class="reference internal" href="#sqlalchemy.orm.SessionTransactionOrigin" title="sqlalchemy.orm.SessionTransactionOrigin"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionTransactionOrigin</span></code></a> instance which is an
enumeration indicating the source event that led to constructing
this <a class="reference internal" href="#sqlalchemy.orm.SessionTransaction" title="sqlalchemy.orm.SessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionTransaction</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.SessionTransaction.parent">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.SessionTransaction"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.SessionTransaction.</span></code></a><span class="sig-name descname"><span class="pre">parent</span></span><a class="headerlink" href="#sqlalchemy.orm.SessionTransaction.parent" title="Link to this definition">¶</a></dt>
<dd><p>The parent <a class="reference internal" href="#sqlalchemy.orm.SessionTransaction" title="sqlalchemy.orm.SessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionTransaction</span></code></a> of this
<a class="reference internal" href="#sqlalchemy.orm.SessionTransaction" title="sqlalchemy.orm.SessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionTransaction</span></code></a>.</p>
<p>If this attribute is <code class="docutils literal notranslate"><span class="pre">None</span></code>, indicates this
<a class="reference internal" href="#sqlalchemy.orm.SessionTransaction" title="sqlalchemy.orm.SessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionTransaction</span></code></a> is at the top of the stack, and
corresponds to a real “COMMIT”/”ROLLBACK”
block.  If non-<code class="docutils literal notranslate"><span class="pre">None</span></code>, then this is either a “subtransaction”
(an internal marker object used by the flush process) or a
“nested” / SAVEPOINT transaction.  If the
<a class="reference internal" href="#sqlalchemy.orm.SessionTransaction.nested" title="sqlalchemy.orm.SessionTransaction.nested"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SessionTransaction.nested</span></code></a> attribute is <code class="docutils literal notranslate"><span class="pre">True</span></code>, then
this is a SAVEPOINT, and if <code class="docutils literal notranslate"><span class="pre">False</span></code>, indicates this a subtransaction.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.orm.SessionTransactionOrigin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">SessionTransactionOrigin</span></span><a class="headerlink" href="#sqlalchemy.orm.SessionTransactionOrigin" title="Link to this definition">¶</a></dt>
<dd><p>indicates the origin of a <a class="reference internal" href="#sqlalchemy.orm.SessionTransaction" title="sqlalchemy.orm.SessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionTransaction</span></code></a>.</p>
<p>This enumeration is present on the
<a class="reference internal" href="#sqlalchemy.orm.SessionTransaction.origin" title="sqlalchemy.orm.SessionTransaction.origin"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SessionTransaction.origin</span></code></a> attribute of any
<a class="reference internal" href="#sqlalchemy.orm.SessionTransaction" title="sqlalchemy.orm.SessionTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionTransaction</span></code></a> object.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.orm.SessionTransactionOrigin.AUTOBEGIN"><span class="sig-name descname">AUTOBEGIN</span></a>, <a class="reference internal" href="#sqlalchemy.orm.SessionTransactionOrigin.BEGIN"><span class="sig-name descname">BEGIN</span></a>, <a class="reference internal" href="#sqlalchemy.orm.SessionTransactionOrigin.BEGIN_NESTED"><span class="sig-name descname">BEGIN_NESTED</span></a>, <a class="reference internal" href="#sqlalchemy.orm.SessionTransactionOrigin.SUBTRANSACTION"><span class="sig-name descname">SUBTRANSACTION</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.orm.SessionTransactionOrigin" title="sqlalchemy.orm.SessionTransactionOrigin"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.orm.SessionTransactionOrigin</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code>)</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.SessionTransactionOrigin.AUTOBEGIN">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.SessionTransactionOrigin"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.SessionTransactionOrigin.</span></code></a><span class="sig-name descname"><span class="pre">AUTOBEGIN</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#sqlalchemy.orm.SessionTransactionOrigin.AUTOBEGIN" title="Link to this definition">¶</a></dt>
<dd><p>transaction were started by autobegin</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.SessionTransactionOrigin.BEGIN">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.SessionTransactionOrigin"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.SessionTransactionOrigin.</span></code></a><span class="sig-name descname"><span class="pre">BEGIN</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#sqlalchemy.orm.SessionTransactionOrigin.BEGIN" title="Link to this definition">¶</a></dt>
<dd><p>transaction were started by calling <a class="reference internal" href="#sqlalchemy.orm.Session.begin" title="sqlalchemy.orm.Session.begin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.begin()</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.SessionTransactionOrigin.BEGIN_NESTED">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.SessionTransactionOrigin"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.SessionTransactionOrigin.</span></code></a><span class="sig-name descname"><span class="pre">BEGIN_NESTED</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#sqlalchemy.orm.SessionTransactionOrigin.BEGIN_NESTED" title="Link to this definition">¶</a></dt>
<dd><p>tranaction were started by <a class="reference internal" href="#sqlalchemy.orm.Session.begin_nested" title="sqlalchemy.orm.Session.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.begin_nested()</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.SessionTransactionOrigin.SUBTRANSACTION">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.SessionTransactionOrigin"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.SessionTransactionOrigin.</span></code></a><span class="sig-name descname"><span class="pre">SUBTRANSACTION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3</span></em><a class="headerlink" href="#sqlalchemy.orm.SessionTransactionOrigin.SUBTRANSACTION" title="Link to this definition">¶</a></dt>
<dd><p>transaction is an internal “subtransaction”</p>
</dd></dl>

</dd></dl>

</section>
<section id="id1">
<h2>会话实用程序<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h2>
<p>Session Utilities</p>
<div class="table-wrapper longtable docutils container">
<table class="longtable docutils align-default">
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.close_all_sessions"><span class="sig-name descname">close_all_sessions</span></a>()</p></td>
<td><p>Close all sessions in memory.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.make_transient"><span class="sig-name descname">make_transient</span></a>(instance)</p></td>
<td><p>Alter the state of the given instance so that it is <a class="reference internal" href="../glossary.html#term-transient"><span class="xref std std-term">transient</span></a>.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.make_transient_to_detached"><span class="sig-name descname">make_transient_to_detached</span></a>(instance)</p></td>
<td><p>Make the given transient instance <a class="reference internal" href="../glossary.html#term-detached"><span class="xref std std-term">detached</span></a>.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.object_session"><span class="sig-name descname">object_session</span></a>(instance)</p></td>
<td><p>Return the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> to which the given instance belongs.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.util.was_deleted"><span class="sig-name descname">was_deleted</span></a>(object_)</p></td>
<td><p>Return True if the given object was deleted
within a session flush.</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.close_all_sessions">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">close_all_sessions</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.close_all_sessions" title="Link to this definition">¶</a></dt>
<dd><p>Close all sessions in memory.</p>
<p>This function consults a global registry of all <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> objects
and calls <a class="reference internal" href="#sqlalchemy.orm.Session.close" title="sqlalchemy.orm.Session.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.close()</span></code></a> on them, which resets them to a clean
state.</p>
<p>This function is not for general use but may be useful for test suites
within the teardown scheme.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.make_transient">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">make_transient</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.make_transient" title="Link to this definition">¶</a></dt>
<dd><p>Alter the state of the given instance so that it is <a class="reference internal" href="../glossary.html#term-transient"><span class="xref std std-term">transient</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p><a class="reference internal" href="#sqlalchemy.orm.make_transient" title="sqlalchemy.orm.make_transient"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_transient()</span></code></a> is a special-case function for
advanced use cases only.</p>
</div>
<p>The given mapped instance is assumed to be in the <a class="reference internal" href="../glossary.html#term-persistent"><span class="xref std std-term">persistent</span></a> or
<a class="reference internal" href="../glossary.html#term-detached"><span class="xref std std-term">detached</span></a> state.   The function will remove its association with any
<a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> as well as its <a class="reference internal" href="internals.html#sqlalchemy.orm.InstanceState.identity" title="sqlalchemy.orm.InstanceState.identity"><code class="xref py py-attr docutils literal notranslate"><span class="pre">InstanceState.identity</span></code></a>. The
effect is that the object will behave as though it were newly constructed,
except retaining any attribute / collection values that were loaded at the
time of the call.   The <a class="reference internal" href="internals.html#sqlalchemy.orm.InstanceState.deleted" title="sqlalchemy.orm.InstanceState.deleted"><code class="xref py py-attr docutils literal notranslate"><span class="pre">InstanceState.deleted</span></code></a> flag is also reset
if this object had been deleted as a result of using
<a class="reference internal" href="#sqlalchemy.orm.Session.delete" title="sqlalchemy.orm.Session.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.delete()</span></code></a>.</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p><a class="reference internal" href="#sqlalchemy.orm.make_transient" title="sqlalchemy.orm.make_transient"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_transient()</span></code></a> does <strong>not</strong> “unexpire” or otherwise eagerly
load ORM-mapped attributes that are not currently loaded at the time
the function is called.   This includes attributes which:</p>
<ul class="simple">
<li><p>were expired via <a class="reference internal" href="#sqlalchemy.orm.Session.expire" title="sqlalchemy.orm.Session.expire"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.expire()</span></code></a></p></li>
<li><p>were expired as the natural effect of committing a session
transaction, e.g. <a class="reference internal" href="#sqlalchemy.orm.Session.commit" title="sqlalchemy.orm.Session.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.commit()</span></code></a></p></li>
<li><p>are normally <a class="reference internal" href="../glossary.html#term-lazy-loaded"><span class="xref std std-term">lazy loaded</span></a> but are not currently loaded</p></li>
<li><p>are “deferred” (see <a class="reference internal" href="queryguide/columns.html#orm-queryguide-column-deferral"><span class="std std-ref">使用【列延迟】限制加载哪些列</span></a>) and are
not yet loaded</p></li>
<li><p>were not present in the query which loaded this object, such as that
which is common in joined table inheritance and other scenarios.</p></li>
</ul>
<p>After <a class="reference internal" href="#sqlalchemy.orm.make_transient" title="sqlalchemy.orm.make_transient"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_transient()</span></code></a> is called, unloaded attributes such
as those above will normally resolve to the value <code class="docutils literal notranslate"><span class="pre">None</span></code> when
accessed, or an empty collection for a collection-oriented attribute.
As the object is transient and un-associated with any database
identity, it will no longer retrieve these values.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.make_transient_to_detached" title="sqlalchemy.orm.make_transient_to_detached"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_transient_to_detached()</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.make_transient_to_detached">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">make_transient_to_detached</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.make_transient_to_detached" title="Link to this definition">¶</a></dt>
<dd><p>Make the given transient instance <a class="reference internal" href="../glossary.html#term-detached"><span class="xref std std-term">detached</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p><a class="reference internal" href="#sqlalchemy.orm.make_transient_to_detached" title="sqlalchemy.orm.make_transient_to_detached"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_transient_to_detached()</span></code></a> is a special-case function for
advanced use cases only.</p>
</div>
<p>All attribute history on the given instance
will be reset as though the instance were freshly loaded
from a query.  Missing attributes will be marked as expired.
The primary key attributes of the object, which are required, will be made
into the “key” of the instance.</p>
<p>The object can then be added to a session, or merged
possibly with the load=False flag, at which point it will look
as if it were loaded that way, without emitting SQL.</p>
<p>This is a special use case function that differs from a normal
call to <a class="reference internal" href="#sqlalchemy.orm.Session.merge" title="sqlalchemy.orm.Session.merge"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.merge()</span></code></a> in that a given persistent state
can be manufactured without any SQL calls.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.make_transient" title="sqlalchemy.orm.make_transient"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_transient()</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Session.enable_relationship_loading" title="sqlalchemy.orm.Session.enable_relationship_loading"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.enable_relationship_loading()</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.object_session">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">object_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.session.Session"><span class="pre">Session</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.object_session" title="Link to this definition">¶</a></dt>
<dd><p>Return the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> to which the given instance belongs.</p>
<p>This is essentially the same as the <a class="reference internal" href="internals.html#sqlalchemy.orm.InstanceState.session" title="sqlalchemy.orm.InstanceState.session"><code class="xref py py-attr docutils literal notranslate"><span class="pre">InstanceState.session</span></code></a>
accessor.  See that attribute for details.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.util.was_deleted">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.util.</span></span><span class="sig-name descname"><span class="pre">was_deleted</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">object_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.orm.util.was_deleted" title="Link to this definition">¶</a></dt>
<dd><p>Return True if the given object was deleted
within a session flush.</p>
<p>This is regardless of whether or not the object is
persistent or detached.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="internals.html#sqlalchemy.orm.InstanceState.was_deleted" title="sqlalchemy.orm.InstanceState.was_deleted"><code class="xref py py-attr docutils literal notranslate"><span class="pre">InstanceState.was_deleted</span></code></a></p>
</div>
</dd></dl>

</section>
<section id="id2">
<h2>属性和状态管理实用程序<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h2>
<p>Attribute and State Management Utilities</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--1">中文</label><div class="tab-content docutils container">
<p>这些函数由 SQLAlchemy 属性检测 API 提供，以提供处理实例、属性值和历史记录的详细接口。在构建事件监听器函数时，其中一些非常有用，例如 <a class="reference internal" href="events.html"><span class="doc">ORM 事件</span></a> 中描述的那些。</p>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--2">英文</label><div class="tab-content docutils container">
<p>These functions are provided by the SQLAlchemy attribute
instrumentation API to provide a detailed interface for dealing
with instances, attribute values, and history.  Some of them
are useful when constructing event listener functions, such as
those described in <a class="reference internal" href="events.html"><span class="doc">ORM 事件</span></a>.</p>
</div>
</div>
<div class="table-wrapper longtable docutils container">
<table class="longtable docutils align-default">
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.attributes.del_attribute"><span class="sig-name descname">del_attribute</span></a>(instance, key)</p></td>
<td><p>Delete the value of an attribute, firing history events.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.attributes.flag_dirty"><span class="sig-name descname">flag_dirty</span></a>(instance)</p></td>
<td><p>Mark an instance as ‘dirty’ without any specific attribute mentioned.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.attributes.flag_modified"><span class="sig-name descname">flag_modified</span></a>(instance, key)</p></td>
<td><p>Mark an attribute on an instance as ‘modified’.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.attributes.get_attribute"><span class="sig-name descname">get_attribute</span></a>(instance, key)</p></td>
<td><p>Get the value of an attribute, firing any callables required.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.attributes.get_history"><span class="sig-name descname">get_history</span></a>(obj, key[, passive])</p></td>
<td><p>Return a <a class="reference internal" href="#sqlalchemy.orm.attributes.History" title="sqlalchemy.orm.attributes.History"><code class="xref py py-class docutils literal notranslate"><span class="pre">History</span></code></a> record for the given object
and attribute key.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.attributes.History"><span class="sig-name descname">History</span></a></p></td>
<td><p>A 3-tuple of added, unchanged and deleted values,
representing the changes which have occurred on an instrumented
attribute.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.attributes.init_collection"><span class="sig-name descname">init_collection</span></a>(obj, key)</p></td>
<td><p>Initialize a collection attribute and return the collection adapter.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.attributes.instance_state"><span class="sig-name descname">instance_state</span></a></p></td>
<td><p>Return the <a class="reference internal" href="internals.html#sqlalchemy.orm.InstanceState" title="sqlalchemy.orm.InstanceState"><code class="xref py py-class docutils literal notranslate"><span class="pre">InstanceState</span></code></a> for a given
mapped object.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.instrumentation.is_instrumented"><span class="sig-name descname">is_instrumented</span></a>(instance, key)</p></td>
<td><p>Return True if the given attribute on the given instance is
instrumented by the attributes package.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.util.object_state"><span class="sig-name descname">object_state</span></a>(instance)</p></td>
<td><p>Given an object, return the <a class="reference internal" href="internals.html#sqlalchemy.orm.InstanceState" title="sqlalchemy.orm.InstanceState"><code class="xref py py-class docutils literal notranslate"><span class="pre">InstanceState</span></code></a>
associated with the object.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.attributes.set_attribute"><span class="sig-name descname">set_attribute</span></a>(instance, key, value[, initiator])</p></td>
<td><p>Set the value of an attribute, firing history events.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.attributes.set_committed_value"><span class="sig-name descname">set_committed_value</span></a>(instance, key, value)</p></td>
<td><p>Set the value of an attribute with no history events.</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.util.object_state">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.util.</span></span><span class="sig-name descname"><span class="pre">object_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_T</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="internals.html#sqlalchemy.orm.InstanceState" title="sqlalchemy.orm.InstanceState"><span class="pre">InstanceState</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.util.object_state" title="Link to this definition">¶</a></dt>
<dd><p>Given an object, return the <a class="reference internal" href="internals.html#sqlalchemy.orm.InstanceState" title="sqlalchemy.orm.InstanceState"><code class="xref py py-class docutils literal notranslate"><span class="pre">InstanceState</span></code></a>
associated with the object.</p>
<p>Raises <a class="reference internal" href="exceptions.html#sqlalchemy.orm.exc.UnmappedInstanceError" title="sqlalchemy.orm.exc.UnmappedInstanceError"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.orm.exc.UnmappedInstanceError</span></code></a>
if no mapping is configured.</p>
<p>Equivalent functionality is available via the <a class="reference internal" href="../core/inspection.html#sqlalchemy.inspect" title="sqlalchemy.inspect"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect()</span></code></a>
function as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inspect</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span></pre></div>
</div>
<p>Using the inspection system will raise
<a class="reference internal" href="../core/exceptions.html#sqlalchemy.exc.NoInspectionAvailable" title="sqlalchemy.exc.NoInspectionAvailable"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.exc.NoInspectionAvailable</span></code></a> if the instance is
not part of a mapping.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.del_attribute">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.attributes.</span></span><span class="sig-name descname"><span class="pre">del_attribute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.attributes.del_attribute" title="Link to this definition">¶</a></dt>
<dd><p>Delete the value of an attribute, firing history events.</p>
<p>This function may be used regardless of instrumentation
applied directly to the class, i.e. no descriptors are required.
Custom attribute management schemes will need to make usage
of this method to establish attribute state as understood
by SQLAlchemy.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.get_attribute">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.attributes.</span></span><span class="sig-name descname"><span class="pre">get_attribute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#sqlalchemy.orm.attributes.get_attribute" title="Link to this definition">¶</a></dt>
<dd><p>Get the value of an attribute, firing any callables required.</p>
<p>This function may be used regardless of instrumentation
applied directly to the class, i.e. no descriptors are required.
Custom attribute management schemes will need to make usage
of this method to make usage of attribute state as understood
by SQLAlchemy.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.get_history">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.attributes.</span></span><span class="sig-name descname"><span class="pre">get_history</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">passive</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">PassiveFlag</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">symbol('PASSIVE_OFF')</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.orm.attributes.History" title="sqlalchemy.orm.attributes.History"><span class="pre">History</span></a></span></span><a class="headerlink" href="#sqlalchemy.orm.attributes.get_history" title="Link to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="#sqlalchemy.orm.attributes.History" title="sqlalchemy.orm.attributes.History"><code class="xref py py-class docutils literal notranslate"><span class="pre">History</span></code></a> record for the given object
and attribute key.</p>
<p>This is the <strong>pre-flush</strong> history for a given attribute, which is
reset each time the <a class="reference internal" href="#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> flushes changes to the
current database transaction.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>Prefer to use the <a class="reference internal" href="internals.html#sqlalchemy.orm.AttributeState.history" title="sqlalchemy.orm.AttributeState.history"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AttributeState.history</span></code></a> and
<a class="reference internal" href="internals.html#sqlalchemy.orm.AttributeState.load_history" title="sqlalchemy.orm.AttributeState.load_history"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AttributeState.load_history()</span></code></a> accessors to retrieve the
<a class="reference internal" href="#sqlalchemy.orm.attributes.History" title="sqlalchemy.orm.attributes.History"><code class="xref py py-class docutils literal notranslate"><span class="pre">History</span></code></a> for instance attributes.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.attributes.get_history.params.obj"></span><strong>obj</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.attributes.get_history.params.obj">¶</a> – an object whose class is instrumented by the
attributes package.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.attributes.get_history.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.attributes.get_history.params.key">¶</a> – string attribute name.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.attributes.get_history.params.passive"></span><strong>passive</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.attributes.get_history.params.passive">¶</a> – indicates loading behavior for the attribute
if the value is not already present.   This is a
bitflag attribute, which defaults to the symbol
<code class="xref py py-attr docutils literal notranslate"><span class="pre">PASSIVE_OFF</span></code> indicating all necessary SQL
should be emitted.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="internals.html#sqlalchemy.orm.AttributeState.history" title="sqlalchemy.orm.AttributeState.history"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AttributeState.history</span></code></a></p>
<p><a class="reference internal" href="internals.html#sqlalchemy.orm.AttributeState.load_history" title="sqlalchemy.orm.AttributeState.load_history"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AttributeState.load_history()</span></code></a> - retrieve history
using loader callables if the value is not locally present.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.init_collection">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.attributes.</span></span><span class="sig-name descname"><span class="pre">init_collection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="collection_api.html#sqlalchemy.orm.collections.CollectionAdapter" title="sqlalchemy.orm.collections.CollectionAdapter"><span class="pre">CollectionAdapter</span></a></span></span><a class="headerlink" href="#sqlalchemy.orm.attributes.init_collection" title="Link to this definition">¶</a></dt>
<dd><p>Initialize a collection attribute and return the collection adapter.</p>
<p>This function is used to provide direct access to collection internals
for a previously unloaded attribute.  e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">collection_adapter</span> <span class="o">=</span> <span class="n">init_collection</span><span class="p">(</span><span class="n">someobject</span><span class="p">,</span> <span class="s2">&quot;elements&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
    <span class="n">collection_adapter</span><span class="o">.</span><span class="n">append_without_event</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span></pre></div>
</div>
<p>For an easier way to do the above, see
<a class="reference internal" href="#sqlalchemy.orm.attributes.set_committed_value" title="sqlalchemy.orm.attributes.set_committed_value"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_committed_value()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.attributes.init_collection.params.obj"></span><strong>obj</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.attributes.init_collection.params.obj">¶</a> – a mapped object</p></li>
<li><p><span class="target" id="sqlalchemy.orm.attributes.init_collection.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.attributes.init_collection.params.key">¶</a> – string attribute name where the collection is located.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.flag_modified">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.attributes.</span></span><span class="sig-name descname"><span class="pre">flag_modified</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.attributes.flag_modified" title="Link to this definition">¶</a></dt>
<dd><p>Mark an attribute on an instance as ‘modified’.</p>
<p>This sets the ‘modified’ flag on the instance and
establishes an unconditional change event for the given attribute.
The attribute must have a value present, else an
<a class="reference internal" href="../core/exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a> is raised.</p>
<p>To mark an object “dirty” without referring to any specific attribute
so that it is considered within a flush, use the
<a class="reference internal" href="#sqlalchemy.orm.attributes.flag_dirty" title="sqlalchemy.orm.attributes.flag_dirty"><code class="xref py py-func docutils literal notranslate"><span class="pre">flag_dirty()</span></code></a> call.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.attributes.flag_dirty" title="sqlalchemy.orm.attributes.flag_dirty"><code class="xref py py-func docutils literal notranslate"><span class="pre">flag_dirty()</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.flag_dirty">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.attributes.</span></span><span class="sig-name descname"><span class="pre">flag_dirty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.attributes.flag_dirty" title="Link to this definition">¶</a></dt>
<dd><p>Mark an instance as ‘dirty’ without any specific attribute mentioned.</p>
<p>This is a special operation that will allow the object to travel through
the flush process for interception by events such as
<a class="reference internal" href="events.html#sqlalchemy.orm.SessionEvents.before_flush" title="sqlalchemy.orm.SessionEvents.before_flush"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SessionEvents.before_flush()</span></code></a>.   Note that no SQL will be emitted in
the flush process for an object that has no changes, even if marked dirty
via this method.  However, a <a class="reference internal" href="events.html#sqlalchemy.orm.SessionEvents.before_flush" title="sqlalchemy.orm.SessionEvents.before_flush"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SessionEvents.before_flush()</span></code></a> handler
will be able to see the object in the <a class="reference internal" href="#sqlalchemy.orm.Session.dirty" title="sqlalchemy.orm.Session.dirty"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.dirty</span></code></a> collection and
may establish changes on it, which will then be included in the SQL
emitted.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.attributes.flag_modified" title="sqlalchemy.orm.attributes.flag_modified"><code class="xref py py-func docutils literal notranslate"><span class="pre">flag_modified()</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.instance_state">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.attributes.</span></span><span class="sig-name descname"><span class="pre">instance_state</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.attributes.instance_state" title="Link to this definition">¶</a></dt>
<dd><p>Return the <a class="reference internal" href="internals.html#sqlalchemy.orm.InstanceState" title="sqlalchemy.orm.InstanceState"><code class="xref py py-class docutils literal notranslate"><span class="pre">InstanceState</span></code></a> for a given
mapped object.</p>
<p>This function is the internal version
of <a class="reference internal" href="#sqlalchemy.orm.util.object_state" title="sqlalchemy.orm.util.object_state"><code class="xref py py-func docutils literal notranslate"><span class="pre">object_state()</span></code></a>.   The
<a class="reference internal" href="#sqlalchemy.orm.util.object_state" title="sqlalchemy.orm.util.object_state"><code class="xref py py-func docutils literal notranslate"><span class="pre">object_state()</span></code></a> and/or the
<a class="reference internal" href="../core/inspection.html#sqlalchemy.inspect" title="sqlalchemy.inspect"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect()</span></code></a> function is preferred here
as they each emit an informative exception
if the given object is not mapped.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.instrumentation.is_instrumented">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.instrumentation.</span></span><span class="sig-name descname"><span class="pre">is_instrumented</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.instrumentation.is_instrumented" title="Link to this definition">¶</a></dt>
<dd><p>Return True if the given attribute on the given instance is
instrumented by the attributes package.</p>
<p>This function may be used regardless of instrumentation
applied directly to the class, i.e. no descriptors are required.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.set_attribute">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.attributes.</span></span><span class="sig-name descname"><span class="pre">set_attribute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initiator</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="internals.html#sqlalchemy.orm.AttributeEventToken" title="sqlalchemy.orm.attributes.AttributeEventToken"><span class="pre">AttributeEventToken</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.attributes.set_attribute" title="Link to this definition">¶</a></dt>
<dd><p>Set the value of an attribute, firing history events.</p>
<p>This function may be used regardless of instrumentation
applied directly to the class, i.e. no descriptors are required.
Custom attribute management schemes will need to make usage
of this method to establish attribute state as understood
by SQLAlchemy.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.attributes.set_attribute.params.instance"></span><strong>instance</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.attributes.set_attribute.params.instance">¶</a> – the object that will be modified</p></li>
<li><p><span class="target" id="sqlalchemy.orm.attributes.set_attribute.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.attributes.set_attribute.params.key">¶</a> – string name of the attribute</p></li>
<li><p><span class="target" id="sqlalchemy.orm.attributes.set_attribute.params.value"></span><strong>value</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.attributes.set_attribute.params.value">¶</a> – value to assign</p></li>
<li><p><span class="target" id="sqlalchemy.orm.attributes.set_attribute.params.initiator"></span><strong>initiator</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.attributes.set_attribute.params.initiator">¶</a> – an instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">Event</span></code> that would have
been propagated from a previous event listener.  This argument
is used when the <a class="reference internal" href="#sqlalchemy.orm.attributes.set_attribute" title="sqlalchemy.orm.attributes.set_attribute"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_attribute()</span></code></a> function is being used within
an existing event listening function where an <code class="xref py py-class docutils literal notranslate"><span class="pre">Event</span></code> object
is being supplied; the object may be used to track the origin of the
chain of events.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.set_committed_value">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.attributes.</span></span><span class="sig-name descname"><span class="pre">set_committed_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.attributes.set_committed_value" title="Link to this definition">¶</a></dt>
<dd><p>Set the value of an attribute with no history events.</p>
<p>Cancels any previous history present.  The value should be
a scalar value for scalar-holding attributes, or
an iterable for any collection-holding attribute.</p>
<p>This is the same underlying method used when a lazy loader
fires off and loads additional data from the database.
In particular, this method can be used by application code
which has loaded additional attributes or collections through
separate queries, which can then be attached to an instance
as though it were part of its original loaded state.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.History">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.attributes.</span></span><span class="sig-name descname"><span class="pre">History</span></span><a class="headerlink" href="#sqlalchemy.orm.attributes.History" title="Link to this definition">¶</a></dt>
<dd><p>A 3-tuple of added, unchanged and deleted values,
representing the changes which have occurred on an instrumented
attribute.</p>
<p>The easiest way to get a <a class="reference internal" href="#sqlalchemy.orm.attributes.History" title="sqlalchemy.orm.attributes.History"><code class="xref py py-class docutils literal notranslate"><span class="pre">History</span></code></a> object for a particular
attribute on an object is to use the <a class="reference internal" href="../core/inspection.html#sqlalchemy.inspect" title="sqlalchemy.inspect"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect()</span></code></a> function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">inspect</span>

<span class="n">hist</span> <span class="o">=</span> <span class="n">inspect</span><span class="p">(</span><span class="n">myobject</span><span class="p">)</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">myattribute</span><span class="o">.</span><span class="n">history</span></pre></div>
</div>
<p>Each tuple member is an iterable sequence:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">added</span></code> - the collection of items added to the attribute (the first
tuple element).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unchanged</span></code> - the collection of items that have not changed on the
attribute (the second tuple element).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">deleted</span></code> - the collection of items that have been removed from the
attribute (the third tuple element).</p></li>
</ul>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.orm.attributes.History.added"><span class="sig-name descname">added</span></a>, <a class="reference internal" href="#sqlalchemy.orm.attributes.History.deleted"><span class="sig-name descname">deleted</span></a>, <a class="reference internal" href="#sqlalchemy.orm.attributes.History.empty"><span class="sig-name descname">empty()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.attributes.History.has_changes"><span class="sig-name descname">has_changes()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.attributes.History.non_added"><span class="sig-name descname">non_added()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.attributes.History.non_deleted"><span class="sig-name descname">non_deleted()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.attributes.History.sum"><span class="sig-name descname">sum()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.attributes.History.unchanged"><span class="sig-name descname">unchanged</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.orm.History</span></code> (<code class="docutils literal notranslate"><span class="pre">builtins.tuple</span></code>)</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.History.added">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.attributes.History"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.attributes.History.</span></code></a><span class="sig-name descname"><span class="pre">added</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.orm.attributes.History.added" title="Link to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.History.deleted">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.attributes.History"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.attributes.History.</span></code></a><span class="sig-name descname"><span class="pre">deleted</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.orm.attributes.History.deleted" title="Link to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.History.empty">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.attributes.History"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.attributes.History.</span></code></a><span class="sig-name descname"><span class="pre">empty</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.orm.attributes.History.empty" title="Link to this definition">¶</a></dt>
<dd><p>Return True if this <a class="reference internal" href="#sqlalchemy.orm.attributes.History" title="sqlalchemy.orm.attributes.History"><code class="xref py py-class docutils literal notranslate"><span class="pre">History</span></code></a> has no changes
and no existing, unchanged state.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.History.has_changes">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.attributes.History"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.attributes.History.</span></code></a><span class="sig-name descname"><span class="pre">has_changes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.orm.attributes.History.has_changes" title="Link to this definition">¶</a></dt>
<dd><p>Return True if this <a class="reference internal" href="#sqlalchemy.orm.attributes.History" title="sqlalchemy.orm.attributes.History"><code class="xref py py-class docutils literal notranslate"><span class="pre">History</span></code></a> has changes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.History.non_added">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.attributes.History"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.attributes.History.</span></code></a><span class="sig-name descname"><span class="pre">non_added</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.attributes.History.non_added" title="Link to this definition">¶</a></dt>
<dd><p>Return a collection of unchanged + deleted.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.History.non_deleted">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.attributes.History"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.attributes.History.</span></code></a><span class="sig-name descname"><span class="pre">non_deleted</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.attributes.History.non_deleted" title="Link to this definition">¶</a></dt>
<dd><p>Return a collection of added + unchanged.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.History.sum">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.attributes.History"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.attributes.History.</span></code></a><span class="sig-name descname"><span class="pre">sum</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.attributes.History.sum" title="Link to this definition">¶</a></dt>
<dd><p>Return a collection of added + unchanged + deleted.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.attributes.History.unchanged">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.attributes.History"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.attributes.History.</span></code></a><span class="sig-name descname"><span class="pre">unchanged</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.orm.attributes.History.unchanged" title="Link to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

</dd></dl>

</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="extending.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">事件和内部</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="session_events.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">使用事件跟踪查询、对象和会话更改</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                <a href="../copyright.html">Copyright</a> &#169; 2007-2025, the SQLAlchemy authors and contributors
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on 04/05/2025 04:00:26</div>
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">会话 API</a><ul>
<li><a class="reference internal" href="#session-sessionmaker">Session 和 sessionmaker()</a><ul>
<li><a class="reference internal" href="#sqlalchemy.orm.sessionmaker"><code class="docutils literal notranslate"><span class="pre">sessionmaker</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.orm.sessionmaker.__call__"><code class="docutils literal notranslate"><span class="pre">sessionmaker.__call__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.sessionmaker.__init__"><code class="docutils literal notranslate"><span class="pre">sessionmaker.__init__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.sessionmaker.begin"><code class="docutils literal notranslate"><span class="pre">sessionmaker.begin()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.sessionmaker.configure"><code class="docutils literal notranslate"><span class="pre">sessionmaker.configure()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.sessionmaker.identity_key"><code class="docutils literal notranslate"><span class="pre">sessionmaker.identity_key()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.sessionmaker.object_session"><code class="docutils literal notranslate"><span class="pre">sessionmaker.object_session()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState"><code class="docutils literal notranslate"><span class="pre">ORMExecuteState</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.__init__"><code class="docutils literal notranslate"><span class="pre">ORMExecuteState.__init__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.all_mappers"><code class="docutils literal notranslate"><span class="pre">ORMExecuteState.all_mappers</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.bind_arguments"><code class="docutils literal notranslate"><span class="pre">ORMExecuteState.bind_arguments</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.bind_mapper"><code class="docutils literal notranslate"><span class="pre">ORMExecuteState.bind_mapper</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.execution_options"><code class="docutils literal notranslate"><span class="pre">ORMExecuteState.execution_options</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.invoke_statement"><code class="docutils literal notranslate"><span class="pre">ORMExecuteState.invoke_statement()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.is_column_load"><code class="docutils literal notranslate"><span class="pre">ORMExecuteState.is_column_load</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.is_delete"><code class="docutils literal notranslate"><span class="pre">ORMExecuteState.is_delete</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.is_executemany"><code class="docutils literal notranslate"><span class="pre">ORMExecuteState.is_executemany</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.is_from_statement"><code class="docutils literal notranslate"><span class="pre">ORMExecuteState.is_from_statement</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.is_insert"><code class="docutils literal notranslate"><span class="pre">ORMExecuteState.is_insert</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.is_orm_statement"><code class="docutils literal notranslate"><span class="pre">ORMExecuteState.is_orm_statement</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.is_relationship_load"><code class="docutils literal notranslate"><span class="pre">ORMExecuteState.is_relationship_load</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.is_select"><code class="docutils literal notranslate"><span class="pre">ORMExecuteState.is_select</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.is_update"><code class="docutils literal notranslate"><span class="pre">ORMExecuteState.is_update</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.lazy_loaded_from"><code class="docutils literal notranslate"><span class="pre">ORMExecuteState.lazy_loaded_from</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.load_options"><code class="docutils literal notranslate"><span class="pre">ORMExecuteState.load_options</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.loader_strategy_path"><code class="docutils literal notranslate"><span class="pre">ORMExecuteState.loader_strategy_path</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.local_execution_options"><code class="docutils literal notranslate"><span class="pre">ORMExecuteState.local_execution_options</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.parameters"><code class="docutils literal notranslate"><span class="pre">ORMExecuteState.parameters</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.session"><code class="docutils literal notranslate"><span class="pre">ORMExecuteState.session</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.statement"><code class="docutils literal notranslate"><span class="pre">ORMExecuteState.statement</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.update_delete_options"><code class="docutils literal notranslate"><span class="pre">ORMExecuteState.update_delete_options</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.update_execution_options"><code class="docutils literal notranslate"><span class="pre">ORMExecuteState.update_execution_options()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.ORMExecuteState.user_defined_options"><code class="docutils literal notranslate"><span class="pre">ORMExecuteState.user_defined_options</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session"><code class="docutils literal notranslate"><span class="pre">Session</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.__init__"><code class="docutils literal notranslate"><span class="pre">Session.__init__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.add"><code class="docutils literal notranslate"><span class="pre">Session.add()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.add_all"><code class="docutils literal notranslate"><span class="pre">Session.add_all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.begin"><code class="docutils literal notranslate"><span class="pre">Session.begin()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.begin_nested"><code class="docutils literal notranslate"><span class="pre">Session.begin_nested()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.bind_mapper"><code class="docutils literal notranslate"><span class="pre">Session.bind_mapper()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.bind_table"><code class="docutils literal notranslate"><span class="pre">Session.bind_table()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.bulk_insert_mappings"><code class="docutils literal notranslate"><span class="pre">Session.bulk_insert_mappings()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.bulk_save_objects"><code class="docutils literal notranslate"><span class="pre">Session.bulk_save_objects()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.bulk_update_mappings"><code class="docutils literal notranslate"><span class="pre">Session.bulk_update_mappings()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.close"><code class="docutils literal notranslate"><span class="pre">Session.close()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.commit"><code class="docutils literal notranslate"><span class="pre">Session.commit()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.connection"><code class="docutils literal notranslate"><span class="pre">Session.connection()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.delete"><code class="docutils literal notranslate"><span class="pre">Session.delete()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.delete_all"><code class="docutils literal notranslate"><span class="pre">Session.delete_all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.deleted"><code class="docutils literal notranslate"><span class="pre">Session.deleted</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.dirty"><code class="docutils literal notranslate"><span class="pre">Session.dirty</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.enable_relationship_loading"><code class="docutils literal notranslate"><span class="pre">Session.enable_relationship_loading()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.execute"><code class="docutils literal notranslate"><span class="pre">Session.execute()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.expire"><code class="docutils literal notranslate"><span class="pre">Session.expire()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.expire_all"><code class="docutils literal notranslate"><span class="pre">Session.expire_all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.expunge"><code class="docutils literal notranslate"><span class="pre">Session.expunge()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.expunge_all"><code class="docutils literal notranslate"><span class="pre">Session.expunge_all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.flush"><code class="docutils literal notranslate"><span class="pre">Session.flush()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.get"><code class="docutils literal notranslate"><span class="pre">Session.get()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.get_bind"><code class="docutils literal notranslate"><span class="pre">Session.get_bind()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.get_nested_transaction"><code class="docutils literal notranslate"><span class="pre">Session.get_nested_transaction()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.get_one"><code class="docutils literal notranslate"><span class="pre">Session.get_one()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.get_transaction"><code class="docutils literal notranslate"><span class="pre">Session.get_transaction()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.identity_key"><code class="docutils literal notranslate"><span class="pre">Session.identity_key()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.identity_map"><code class="docutils literal notranslate"><span class="pre">Session.identity_map</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.in_nested_transaction"><code class="docutils literal notranslate"><span class="pre">Session.in_nested_transaction()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.in_transaction"><code class="docutils literal notranslate"><span class="pre">Session.in_transaction()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.info"><code class="docutils literal notranslate"><span class="pre">Session.info</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.invalidate"><code class="docutils literal notranslate"><span class="pre">Session.invalidate()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.is_active"><code class="docutils literal notranslate"><span class="pre">Session.is_active</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.is_modified"><code class="docutils literal notranslate"><span class="pre">Session.is_modified()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.merge"><code class="docutils literal notranslate"><span class="pre">Session.merge()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.merge_all"><code class="docutils literal notranslate"><span class="pre">Session.merge_all()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.new"><code class="docutils literal notranslate"><span class="pre">Session.new</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.no_autoflush"><code class="docutils literal notranslate"><span class="pre">Session.no_autoflush</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.object_session"><code class="docutils literal notranslate"><span class="pre">Session.object_session()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.prepare"><code class="docutils literal notranslate"><span class="pre">Session.prepare()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.query"><code class="docutils literal notranslate"><span class="pre">Session.query()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.refresh"><code class="docutils literal notranslate"><span class="pre">Session.refresh()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.reset"><code class="docutils literal notranslate"><span class="pre">Session.reset()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.rollback"><code class="docutils literal notranslate"><span class="pre">Session.rollback()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.scalar"><code class="docutils literal notranslate"><span class="pre">Session.scalar()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Session.scalars"><code class="docutils literal notranslate"><span class="pre">Session.scalars()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.orm.SessionTransaction"><code class="docutils literal notranslate"><span class="pre">SessionTransaction</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.orm.SessionTransaction.nested"><code class="docutils literal notranslate"><span class="pre">SessionTransaction.nested</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.SessionTransaction.origin"><code class="docutils literal notranslate"><span class="pre">SessionTransaction.origin</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.SessionTransaction.parent"><code class="docutils literal notranslate"><span class="pre">SessionTransaction.parent</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.orm.SessionTransactionOrigin"><code class="docutils literal notranslate"><span class="pre">SessionTransactionOrigin</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.orm.SessionTransactionOrigin.AUTOBEGIN"><code class="docutils literal notranslate"><span class="pre">SessionTransactionOrigin.AUTOBEGIN</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.SessionTransactionOrigin.BEGIN"><code class="docutils literal notranslate"><span class="pre">SessionTransactionOrigin.BEGIN</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.SessionTransactionOrigin.BEGIN_NESTED"><code class="docutils literal notranslate"><span class="pre">SessionTransactionOrigin.BEGIN_NESTED</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.SessionTransactionOrigin.SUBTRANSACTION"><code class="docutils literal notranslate"><span class="pre">SessionTransactionOrigin.SUBTRANSACTION</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id1">会话实用程序</a><ul>
<li><a class="reference internal" href="#sqlalchemy.orm.close_all_sessions"><code class="docutils literal notranslate"><span class="pre">close_all_sessions()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.make_transient"><code class="docutils literal notranslate"><span class="pre">make_transient()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.make_transient_to_detached"><code class="docutils literal notranslate"><span class="pre">make_transient_to_detached()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.object_session"><code class="docutils literal notranslate"><span class="pre">object_session()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.util.was_deleted"><code class="docutils literal notranslate"><span class="pre">was_deleted()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#id2">属性和状态管理实用程序</a><ul>
<li><a class="reference internal" href="#sqlalchemy.orm.util.object_state"><code class="docutils literal notranslate"><span class="pre">object_state()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.del_attribute"><code class="docutils literal notranslate"><span class="pre">del_attribute()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.get_attribute"><code class="docutils literal notranslate"><span class="pre">get_attribute()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.get_history"><code class="docutils literal notranslate"><span class="pre">get_history()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.init_collection"><code class="docutils literal notranslate"><span class="pre">init_collection()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.flag_modified"><code class="docutils literal notranslate"><span class="pre">flag_modified()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.flag_dirty"><code class="docutils literal notranslate"><span class="pre">flag_dirty()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.instance_state"><code class="docutils literal notranslate"><span class="pre">instance_state()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.instrumentation.is_instrumented"><code class="docutils literal notranslate"><span class="pre">is_instrumented()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.set_attribute"><code class="docutils literal notranslate"><span class="pre">set_attribute()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.set_committed_value"><code class="docutils literal notranslate"><span class="pre">set_committed_value()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.History"><code class="docutils literal notranslate"><span class="pre">History</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.History.added"><code class="docutils literal notranslate"><span class="pre">History.added</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.History.deleted"><code class="docutils literal notranslate"><span class="pre">History.deleted</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.History.empty"><code class="docutils literal notranslate"><span class="pre">History.empty()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.History.has_changes"><code class="docutils literal notranslate"><span class="pre">History.has_changes()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.History.non_added"><code class="docutils literal notranslate"><span class="pre">History.non_added()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.History.non_deleted"><code class="docutils literal notranslate"><span class="pre">History.non_deleted()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.History.sum"><code class="docutils literal notranslate"><span class="pre">History.sum()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.attributes.History.unchanged"><code class="docutils literal notranslate"><span class="pre">History.unchanged</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=2d0eb83f"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../_static/tabs.js?v=3ee01567"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=2f3e6152"></script>
    <script src="../_static/translations.js?v=beaddf03"></script>
    </body>
</html>