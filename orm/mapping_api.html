<!doctype html>
<html class="no-js" lang="zh-CN" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="索引" href="../genindex.html" /><link rel="search" title="搜索" href="../search.html" /><link rel="copyright" title="版权所有" href="../copyright.html" /><link rel="next" title="映射 SQL 表达式" href="scalar_mapping.html" /><link rel="prev" title="配置版本计数器" href="versioning.html" />

    <!-- Generated with Sphinx 7.2.6 and Furo 2024.08.06 -->
        <title>类映射 API - SQLAlchemy 2.1 Documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/changelog.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx_paramlinks.css" />
    <link rel="stylesheet" type="text/css" href="../_static/docs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">SQLAlchemy 2.1 Documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">SQLAlchemy 2.1 Documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="搜索" name="q" aria-label="搜索">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">概述</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorial/index.html">SQLAlchemy 统一教程</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of SQLAlchemy 统一教程</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/engine.html">建立连接 - Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/dbapi_transactions.html">使用事务和DBAPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/metadata.html">使用数据库元数据</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../tutorial/data.html">处理数据</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of 处理数据</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/data_insert.html">使用 INSERT 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/data_select.html">使用 SELECT 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/data_update.html">使用 UPDATE 和 DELETE 语句</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/orm_data_manipulation.html">使用 ORM 进行数据操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/orm_related_objects.html">使用 ORM 相关对象</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/further_reading.html">进一步阅读</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">SQLAlchemy ORM</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of SQLAlchemy ORM</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="quickstart.html">ORM 快速入门</a></li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="mapper_config.html">ORM 映射类配置</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of ORM 映射类配置</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="mapping_styles.html">ORM 映射类概述</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="declarative_mapping.html">使用声明式映射类</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of 使用声明式映射类</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="declarative_styles.html">声明式映射风格</a></li>
<li class="toctree-l4"><a class="reference internal" href="declarative_tables.html">声明式的表配置</a></li>
<li class="toctree-l4"><a class="reference internal" href="declarative_config.html">使用声明式映射器配置</a></li>
<li class="toctree-l4"><a class="reference internal" href="declarative_mixins.html">使用 Mixins 组合映射层次结构</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="dataclasses.html">与dataclass和attrs的集成</a></li>
<li class="toctree-l3"><a class="reference internal" href="mapped_sql_expr.html">SQL 表达式作为映射属性</a></li>
<li class="toctree-l3"><a class="reference internal" href="mapped_attributes.html">更改Attribute的行为</a></li>
<li class="toctree-l3"><a class="reference internal" href="composites.html">复合列类型</a></li>
<li class="toctree-l3"><a class="reference internal" href="inheritance.html">映射类继承层次结构</a></li>
<li class="toctree-l3"><a class="reference internal" href="nonstandard_mappings.html">非传统映射</a></li>
<li class="toctree-l3"><a class="reference internal" href="versioning.html">配置版本计数器</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">类映射 API</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="scalar_mapping.html">映射 SQL 表达式</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of 映射 SQL 表达式</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="mapping_columns.html">映射表格列</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="relationships.html">关系配置</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of 关系配置</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="basic_relationships.html">基本关系模式</a></li>
<li class="toctree-l3"><a class="reference internal" href="self_referential.html">邻接表关系</a></li>
<li class="toctree-l3"><a class="reference internal" href="join_conditions.html">配置关系连接方式</a></li>
<li class="toctree-l3"><a class="reference internal" href="large_collections.html">使用大型集合</a></li>
<li class="toctree-l3"><a class="reference internal" href="collection_api.html">集合自定义和 API 详细信息</a></li>
<li class="toctree-l3"><a class="reference internal" href="relationship_persistence.html">特殊关系的持久化模式</a></li>
<li class="toctree-l3"><a class="reference internal" href="backref.html">使用旧版“backref”关系参数</a></li>
<li class="toctree-l3"><a class="reference internal" href="relationship_api.html">关系 API</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="queryguide/index.html">ORM 查询指南</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of ORM 查询指南</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="queryguide/select.html">为 ORM 映射类编写 SELECT 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="queryguide/inheritance.html">为继承映射编写 SELECT 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="queryguide/dml.html">启用 ORM 的 INSERT、UPDATE 和 DELETE 语句</a></li>
<li class="toctree-l3"><a class="reference internal" href="queryguide/columns.html">列加载选项</a></li>
<li class="toctree-l3"><a class="reference internal" href="queryguide/relationships.html">关系加载技术</a></li>
<li class="toctree-l3"><a class="reference internal" href="queryguide/api.html">用于查询的 ORM API 功能</a></li>
<li class="toctree-l3"><a class="reference internal" href="queryguide/query.html">旧式查询 API</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="session.html">使用会话</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of 使用会话</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="session_basics.html">会话基础知识</a></li>
<li class="toctree-l3"><a class="reference internal" href="session_state_management.html">状态管理</a></li>
<li class="toctree-l3"><a class="reference internal" href="cascades.html">级联</a></li>
<li class="toctree-l3"><a class="reference internal" href="session_transaction.html">事务和连接管理</a></li>
<li class="toctree-l3"><a class="reference internal" href="persistence_techniques.html">附加持久性技术</a></li>
<li class="toctree-l3"><a class="reference internal" href="contextual.html">上下文/线程本地会话</a></li>
<li class="toctree-l3"><a class="reference internal" href="session_events.html">使用事件跟踪查询、对象和会话更改</a></li>
<li class="toctree-l3"><a class="reference internal" href="session_api.html">会话 API</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="extending.html">事件和内部</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of 事件和内部</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="events.html">ORM 事件</a></li>
<li class="toctree-l3"><a class="reference internal" href="internals.html">ORM 内部</a></li>
<li class="toctree-l3"><a class="reference internal" href="exceptions.html">ORM 异常</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="extensions/index.html">ORM 扩展</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of ORM 扩展</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="extensions/asyncio.html">异步 I/O (asyncio)</a></li>
<li class="toctree-l3"><a class="reference internal" href="extensions/associationproxy.html">关联代理</a></li>
<li class="toctree-l3"><a class="reference internal" href="extensions/automap.html">自动映射</a></li>
<li class="toctree-l3"><a class="reference internal" href="extensions/baked.html">烘焙查询</a></li>
<li class="toctree-l3"><a class="reference internal" href="extensions/declarative/index.html">声明式扩展</a></li>
<li class="toctree-l3"><a class="reference internal" href="extensions/mutable.html">突变追踪</a></li>
<li class="toctree-l3"><a class="reference internal" href="extensions/orderinglist.html">排序列表</a></li>
<li class="toctree-l3"><a class="reference internal" href="extensions/horizontal_shard.html">水平分片</a></li>
<li class="toctree-l3"><a class="reference internal" href="extensions/hybrid.html">混合属性</a></li>
<li class="toctree-l3"><a class="reference internal" href="extensions/indexable.html">Indexable</a></li>
<li class="toctree-l3"><a class="reference internal" href="extensions/instrumentation.html">替代类检测</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="examples.html">核心和 ORM 示例</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../core/index.html">SQLAlchemy Core</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of SQLAlchemy Core</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../core/expression_api.html">SQL 语句和表达式 API</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of SQL 语句和表达式 API</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../core/sqlelement.html">列元素和表达式</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/operators.html">操作符参考</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/selectable.html">SELECT 和相关构造</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/dml.html">插入,更新,删除</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/functions.html">SQL 和 范型函数</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/compiler.html">自定义 SQL 构造和编译扩展</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/serializer.html">表达式序列化器扩展</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/foundation.html">SQL 表达式语言基础构造</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/visitors.html">访问者和遍历实用程序</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../core/schema.html">Schema 定义语言</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of Schema 定义语言</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../core/metadata.html">使用元数据描述数据库</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/reflection.html">反映数据库对象</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/defaults.html">列 INSERT/UPDATE 默认值</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/constraints.html">定义约束和索引</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/ddl.html">自定义 DDL</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../core/types.html">SQL 数据类型对象</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of SQL 数据类型对象</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../core/type_basics.html">类型层次结构</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/custom_types.html">自定义类型</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/type_api.html">基本类型 API</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../core/engines_connections.html">Engine和Connection的使用</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle navigation of Engine和Connection的使用</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../core/engines.html">Engine 配置</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/connections.html">使用Engines和Connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/pooling.html">连接池</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/events.html">核心事件</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../core/api_basics.html">Core API 基础</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle navigation of Core API 基础</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../core/event.html">事件</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/inspection.html">运行时审查 API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/exceptions.html">Core 异常</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/internals.html">Core 内部</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../dialects/index.html">Dialects</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle navigation of Dialects</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../dialects/postgresql.html">PostgreSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dialects/mysql.html">MySQL 和 MariaDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dialects/sqlite.html">SQLite</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dialects/oracle.html">Oracle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dialects/mssql.html">Microsoft SQL Server</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../faq/index.html">常见问题</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle navigation of 常见问题</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../faq/installation.html">安装</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/connections.html">连接 / 引擎</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/metadata_schema.html">元数据 / Schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/sqlexpressions.html">SQL 表达式</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/ormconfiguration.html">ORM 配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/performance.html">性能</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/sessions.html">会话 / 查询</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/thirdparty.html">第三方包集成问题</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../errors.html">错误消息</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../changelog/index.html">变更和迁移</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle navigation of 变更和迁移</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_21.html">SQLAlchemy 2.1 有什么新功能？</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_21.html">2.1 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_20.html">2.0 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_14.html">1.4 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_13.html">1.3 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_12.html">1.2 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_11.html">1.1 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_10.html">1.0 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_09.html">0.9 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_08.html">0.8 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_07.html">0.7 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_06.html">0.6 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_05.html">0.5 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_04.html">0.4 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_03.html">0.3 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_02.html">0.2 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog_01.html">0.1 Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_20.html">SQLAlchemy 2.0 - Major Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/whatsnew_20.html">What’s New in SQLAlchemy 2.0?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_14.html">What’s New in SQLAlchemy 1.4?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_13.html">What’s New in SQLAlchemy 1.3?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_12.html">What’s New in SQLAlchemy 1.2?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_11.html">What’s New in SQLAlchemy 1.1?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_10.html">What’s New in SQLAlchemy 1.0?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_09.html">What’s New in SQLAlchemy 0.9?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_08.html">What’s New in SQLAlchemy 0.8?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_07.html">What’s New in SQLAlchemy 0.7?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_06.html">What’s New in SQLAlchemy 0.6?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_05.html">What’s new in SQLAlchemy 0.5?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/migration_04.html">What’s new in SQLAlchemy 0.4?</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          

<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="api">
<h1>类映射 API<a class="headerlink" href="#api" title="Link to this heading">¶</a></h1>
<p>Class Mapping API</p>
<div class="table-wrapper longtable docutils container">
<table class="longtable docutils align-default">
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.add_mapped_attribute"><span class="sig-name descname">add_mapped_attribute</span></a>(target, key, attr)</p></td>
<td><p>Add a new mapped attribute to an ORM mapped class.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.as_declarative"><span class="sig-name descname">as_declarative</span></a>(**kw)</p></td>
<td><p>Class decorator which will adapt a given class into a
<a class="reference internal" href="#sqlalchemy.orm.declarative_base" title="sqlalchemy.orm.declarative_base"><code class="xref py py-func docutils literal notranslate"><span class="pre">declarative_base()</span></code></a>.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.class_mapper"><span class="sig-name descname">class_mapper</span></a>(class_[, configure])</p></td>
<td><p>Given a class, return the primary <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> associated
with the key.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.clear_mappers"><span class="sig-name descname">clear_mappers</span></a>()</p></td>
<td><p>Remove all mappers from all classes.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.column_property"><span class="sig-name descname">column_property</span></a>(column, *additional_columns, [group, deferred, raiseload, comparator_factory, init, repr, default, default_factory, compare, kw_only, hash, active_history, expire_on_flush, info, doc])</p></td>
<td><p>Provide a column-level property for use with a mapping.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.configure_mappers"><span class="sig-name descname">configure_mappers</span></a>()</p></td>
<td><p>Initialize the inter-mapper relationships of all mappers that
have been constructed thus far across all <a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a>
collections.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.declarative_base"><span class="sig-name descname">declarative_base</span></a>(*, [metadata, mapper, cls, name, class_registry, type_annotation_map, constructor, metaclass])</p></td>
<td><p>Construct a base class for declarative class definitions.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.declarative_mixin"><span class="sig-name descname">declarative_mixin</span></a>(cls)</p></td>
<td><p>Mark a class as providing the feature of “declarative mixin”.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase"><span class="sig-name descname">DeclarativeBase</span></a></p></td>
<td><p>Base class used for declarative class definitions.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBaseNoMeta"><span class="sig-name descname">DeclarativeBaseNoMeta</span></a></p></td>
<td><p>Same as <a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase" title="sqlalchemy.orm.DeclarativeBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeclarativeBase</span></code></a>, but does not use a metaclass
to intercept new attributes.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.declared_attr"><span class="sig-name descname">declared_attr</span></a></p></td>
<td><p>Mark a class-level method as representing the definition of
a mapped property or Declarative directive.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.has_inherited_table"><span class="sig-name descname">has_inherited_table</span></a>(cls)</p></td>
<td><p>Given a class, return True if any of the classes it inherits from has a
mapped table, otherwise return False.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.util.identity_key"><span class="sig-name descname">identity_key</span></a>([class_, ident], *, [instance, row, identity_token])</p></td>
<td><p>Generate “identity key” tuples, as are used as keys in the
<a class="reference internal" href="session_api.html#sqlalchemy.orm.Session.identity_map" title="sqlalchemy.orm.Session.identity_map"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.identity_map</span></code></a> dictionary.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.mapped_column"><span class="sig-name descname">mapped_column</span></a>([__name_pos, __type_pos], *args, [init, repr, default, default_factory, compare, kw_only, hash, nullable, primary_key, deferred, deferred_group, deferred_raiseload, use_existing_column, name, type_, autoincrement, doc, key, index, unique, info, onupdate, insert_default, server_default, server_onupdate, active_history, quote, system, comment, sort_order], **kw)</p></td>
<td><p>declare a new ORM-mapped <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> construct
for use within <a class="reference internal" href="declarative_tables.html#orm-declarative-table"><span class="std std-ref">Declarative Table</span></a>
configuration.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.MappedAsDataclass"><span class="sig-name descname">MappedAsDataclass</span></a></p></td>
<td><p>Mixin class to indicate when mapping this class, also convert it to be
a dataclass.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.MappedClassProtocol"><span class="sig-name descname">MappedClassProtocol</span></a></p></td>
<td><p>A protocol representing a SQLAlchemy mapped class.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.Mapper"><span class="sig-name descname">Mapper</span></a></p></td>
<td><p>Defines an association between a Python class and a database table or
other relational structure, so that ORM operations against the class may
proceed.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.object_mapper"><span class="sig-name descname">object_mapper</span></a>(instance)</p></td>
<td><p>Given an object, return the primary Mapper associated with the object
instance.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.orm_insert_sentinel"><span class="sig-name descname">orm_insert_sentinel</span></a>([name, type_], *, [default, omit_from_statements])</p></td>
<td><p>Provides a surrogate <a class="reference internal" href="#sqlalchemy.orm.mapped_column" title="sqlalchemy.orm.mapped_column"><code class="xref py py-func docutils literal notranslate"><span class="pre">mapped_column()</span></code></a> that generates
a so-called <a class="reference internal" href="../glossary.html#term-sentinel"><span class="xref std std-term">sentinel</span></a> column, allowing efficient bulk
inserts with deterministic RETURNING sorting for tables that don’t
otherwise have qualifying primary key configurations.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.polymorphic_union"><span class="sig-name descname">polymorphic_union</span></a>(table_map, typecolname[, aliasname, cast_nulls])</p></td>
<td><p>Create a <code class="docutils literal notranslate"><span class="pre">UNION</span></code> statement used by a polymorphic mapper.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.reconstructor"><span class="sig-name descname">reconstructor</span></a>(fn)</p></td>
<td><p>Decorate a method as the ‘reconstructor’ hook.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.registry"><span class="sig-name descname">registry</span></a></p></td>
<td><p>Generalized registry for mapping classes.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.orm.synonym_for"><span class="sig-name descname">synonym_for</span></a>(name[, map_column])</p></td>
<td><p>Decorator that produces an <a class="reference internal" href="mapped_attributes.html#sqlalchemy.orm.synonym" title="sqlalchemy.orm.synonym"><code class="xref py py-func docutils literal notranslate"><span class="pre">synonym()</span></code></a>
attribute in conjunction with a Python descriptor.</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.orm.registry">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">registry</span></span><a class="headerlink" href="#sqlalchemy.orm.registry" title="Link to this definition">¶</a></dt>
<dd><p>Generalized registry for mapping classes.</p>
<p>The <a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a> serves as the basis for maintaining a collection
of mappings, and provides configurational hooks used to map classes.</p>
<p>The three general kinds of mappings supported are Declarative Base,
Declarative Decorator, and Imperative Mapping.   All of these mapping
styles may be used interchangeably:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#sqlalchemy.orm.registry.generate_base" title="sqlalchemy.orm.registry.generate_base"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.generate_base()</span></code></a> returns a new declarative base
class, and is the underlying implementation of the
<a class="reference internal" href="#sqlalchemy.orm.declarative_base" title="sqlalchemy.orm.declarative_base"><code class="xref py py-func docutils literal notranslate"><span class="pre">declarative_base()</span></code></a> function.</p></li>
<li><p><a class="reference internal" href="#sqlalchemy.orm.registry.mapped" title="sqlalchemy.orm.registry.mapped"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.mapped()</span></code></a> provides a class decorator that will
apply declarative mapping to a class without the use of a declarative
base class.</p></li>
<li><p><a class="reference internal" href="#sqlalchemy.orm.registry.map_imperatively" title="sqlalchemy.orm.registry.map_imperatively"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.map_imperatively()</span></code></a> will produce a
<a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> for a class without scanning the class for
declarative class attributes. This method suits the use case historically
provided by the <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.mapper()</span></code> classical mapping function,
which is removed as of SQLAlchemy 2.0.</p></li>
</ul>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入.</span></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.orm.registry.__init__"><span class="sig-name descname">__init__()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.registry.as_declarative_base"><span class="sig-name descname">as_declarative_base()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.registry.configure"><span class="sig-name descname">configure()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.registry.dispose"><span class="sig-name descname">dispose()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.registry.generate_base"><span class="sig-name descname">generate_base()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.registry.map_declaratively"><span class="sig-name descname">map_declaratively()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.registry.map_imperatively"><span class="sig-name descname">map_imperatively()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.registry.mapped"><span class="sig-name descname">mapped()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.registry.mapped_as_dataclass"><span class="sig-name descname">mapped_as_dataclass()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.registry.mappers"><span class="sig-name descname">mappers</span></a>, <a class="reference internal" href="#sqlalchemy.orm.registry.update_type_annotation_map"><span class="sig-name descname">update_type_annotation_map()</span></a></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="mapping_styles.html#orm-mapping-classes-toplevel"><span class="std std-ref">ORM 映射类概述</span></a> - overview of class mapping
styles.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.registry.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.registry"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.registry.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata:</span> <span class="pre">Optional[MetaData]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">class_registry:</span> <span class="pre">Optional[clsregistry._ClsRegistryType]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type_annotation_map:</span> <span class="pre">Optional[_TypeAnnotationMapType]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">constructor:</span> <span class="pre">Callable[...</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">None]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">_declarative_constructor&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.registry.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Construct a new <a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.registry.params.metadata"></span><strong>metadata</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.registry.params.metadata">¶</a> – An optional <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> instance.  All
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects generated using declarative
table mapping will make use of this <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>
collection.  If this argument is left at its default of <code class="docutils literal notranslate"><span class="pre">None</span></code>,
a blank <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> collection is created.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.registry.params.constructor"></span><strong>constructor</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.registry.params.constructor">¶</a> – Specify the implementation for the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> function on a mapped
class that has no <code class="docutils literal notranslate"><span class="pre">__init__</span></code> of its own.  Defaults to an
implementation that assigns **kwargs for declared
fields and relationships to an instance.  If <code class="docutils literal notranslate"><span class="pre">None</span></code> is supplied,
no __init__ will be provided and construction will fall back to
cls.__init__ by way of the normal Python semantics.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.registry.params.class_registry"></span><strong>class_registry</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.registry.params.class_registry">¶</a> – optional dictionary that will serve as the
registry of class names-&gt; mapped classes when string names
are used to identify classes inside of <a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a>
and others.  Allows two or more declarative base classes
to share the same registry of class names for simplified
inter-base relationships.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.registry.params.type_annotation_map"></span><strong>type_annotation_map</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.registry.params.type_annotation_map">¶</a> – <p>optional dictionary of Python types to
SQLAlchemy <a class="reference internal" href="../core/type_api.html#sqlalchemy.types.TypeEngine" title="sqlalchemy.types.TypeEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeEngine</span></code></a> classes or instances.
The provided dict will update the default type mapping.  This
is used exclusively by the <a class="reference internal" href="internals.html#sqlalchemy.orm.MappedColumn" title="sqlalchemy.orm.MappedColumn"><code class="xref py py-class docutils literal notranslate"><span class="pre">MappedColumn</span></code></a> construct
to produce column types based on annotations within the
<a class="reference internal" href="internals.html#sqlalchemy.orm.Mapped" title="sqlalchemy.orm.Mapped"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapped</span></code></a> type.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="declarative_tables.html#orm-declarative-mapped-column-type-map"><span class="std std-ref">自定义类型映射</span></a></p>
</div>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.registry.as_declarative_base">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.registry"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.registry.</span></code></a><span class="sig-name descname"><span class="pre">as_declarative_base</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.registry.as_declarative_base" title="Link to this definition">¶</a></dt>
<dd><p>Class decorator which will invoke
<a class="reference internal" href="#sqlalchemy.orm.registry.generate_base" title="sqlalchemy.orm.registry.generate_base"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.generate_base()</span></code></a>
for a given base class.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">registry</span>

<span class="n">mapper_registry</span> <span class="o">=</span> <span class="n">registry</span><span class="p">()</span>


<span class="nd">@mapper_registry</span><span class="o">.</span><span class="n">as_declarative_base</span><span class="p">()</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Base</span><span class="p">:</span>
    <span class="nd">@declared_attr</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">__tablename__</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="n">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MyMappedClass</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span> <span class="o">...</span></pre><div class="code-non-annotations-key"></div></div>
</div>
<p>All keyword arguments passed to
<a class="reference internal" href="#sqlalchemy.orm.registry.as_declarative_base" title="sqlalchemy.orm.registry.as_declarative_base"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.as_declarative_base()</span></code></a> are passed
along to <a class="reference internal" href="#sqlalchemy.orm.registry.generate_base" title="sqlalchemy.orm.registry.generate_base"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.generate_base()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.registry.configure">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.registry"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.registry.</span></code></a><span class="sig-name descname"><span class="pre">configure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cascade</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.registry.configure" title="Link to this definition">¶</a></dt>
<dd><p>Configure all as-yet unconfigured mappers in this
<a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a>.</p>
<p>The configure step is used to reconcile and initialize the
<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> linkages between mapped classes, as well as
to invoke configuration events such as the
<a class="reference internal" href="events.html#sqlalchemy.orm.MapperEvents.before_configured" title="sqlalchemy.orm.MapperEvents.before_configured"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MapperEvents.before_configured()</span></code></a> and
<a class="reference internal" href="events.html#sqlalchemy.orm.MapperEvents.after_configured" title="sqlalchemy.orm.MapperEvents.after_configured"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MapperEvents.after_configured()</span></code></a>, which may be used by ORM
extensions or user-defined extension hooks.</p>
<p>If one or more mappers in this registry contain
<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> constructs that refer to mapped classes in
other registries, this registry is said to be <em>dependent</em> on those
registries. In order to configure those dependent registries
automatically, the <a class="reference internal" href="#sqlalchemy.orm.registry.configure.params.cascade" title="sqlalchemy.orm.registry.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">configure.cascade</span></code></a> flag
should be set to <code class="docutils literal notranslate"><span class="pre">True</span></code>. Otherwise, if they are not configured, an
exception will be raised.  The rationale behind this behavior is to
allow an application to programmatically invoke configuration of
registries while controlling whether or not the process implicitly
reaches other registries.</p>
<p>As an alternative to invoking <a class="reference internal" href="#sqlalchemy.orm.registry.configure" title="sqlalchemy.orm.registry.configure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.configure()</span></code></a>, the ORM
function <a class="reference internal" href="#sqlalchemy.orm.configure_mappers" title="sqlalchemy.orm.configure_mappers"><code class="xref py py-func docutils literal notranslate"><span class="pre">configure_mappers()</span></code></a> function may be used to ensure
configuration is complete for all <a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a> objects in
memory. This is generally simpler to use and also predates the usage of
<a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a> objects overall. However, this function will
impact all mappings throughout the running Python process and may be
more memory/time consuming for an application that has many registries
in use for different purposes that may not be needed immediately.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.configure_mappers" title="sqlalchemy.orm.configure_mappers"><code class="xref py py-func docutils literal notranslate"><span class="pre">configure_mappers()</span></code></a></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4.0b2 版本加入.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.registry.dispose">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.registry"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.registry.</span></code></a><span class="sig-name descname"><span class="pre">dispose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cascade</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.registry.dispose" title="Link to this definition">¶</a></dt>
<dd><p>Dispose of all mappers in this <a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a>.</p>
<p>After invocation, all the classes that were mapped within this registry
will no longer have class instrumentation associated with them. This
method is the per-<a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a> analogue to the
application-wide <a class="reference internal" href="#sqlalchemy.orm.clear_mappers" title="sqlalchemy.orm.clear_mappers"><code class="xref py py-func docutils literal notranslate"><span class="pre">clear_mappers()</span></code></a> function.</p>
<p>If this registry contains mappers that are dependencies of other
registries, typically via <a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> links, then those
registries must be disposed as well. When such registries exist in
relation to this one, their <a class="reference internal" href="#sqlalchemy.orm.registry.dispose" title="sqlalchemy.orm.registry.dispose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.dispose()</span></code></a> method will
also be called, if the <a class="reference internal" href="#sqlalchemy.orm.registry.dispose.params.cascade" title="sqlalchemy.orm.registry.dispose"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">dispose.cascade</span></code></a> flag
is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>; otherwise, an error is raised if those registries
were not already disposed.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4.0b2 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.clear_mappers" title="sqlalchemy.orm.clear_mappers"><code class="xref py py-func docutils literal notranslate"><span class="pre">clear_mappers()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.registry.generate_base">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.registry"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.registry.</span></code></a><span class="sig-name descname"><span class="pre">generate_base</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">mapper:</span> <span class="pre">~typing.Callable[[...],</span> <span class="pre">~sqlalchemy.orm.mapper.Mapper[~typing.Any]]</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">cls:</span> <span class="pre">~typing.Type[~typing.Any]</span> <span class="pre">=</span> <span class="pre">&lt;class</span> <span class="pre">'object'&gt;,</span> <span class="pre">name:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'Base',</span> <span class="pre">metaclass:</span> <span class="pre">~typing.Type[~typing.Any]</span> <span class="pre">=</span> <span class="pre">&lt;class</span> <span class="pre">'sqlalchemy.orm.decl_api.DeclarativeMeta'&gt;</span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#sqlalchemy.orm.registry.generate_base" title="Link to this definition">¶</a></dt>
<dd><p>Generate a declarative base class.</p>
<p>Classes that inherit from the returned class object will be
automatically mapped using declarative mapping.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">registry</span>

<span class="n">mapper_registry</span> <span class="o">=</span> <span class="n">registry</span><span class="p">()</span>

<span class="n">Base</span> <span class="o">=</span> <span class="n">mapper_registry</span><span class="o">.</span><span class="n">generate_base</span><span class="p">()</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;my_table&quot;</span>
    <span class="n">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></pre><div class="code-non-annotations-key"></div></div>
</div>
<p>The above dynamically generated class is equivalent to the
non-dynamic example below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">registry</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm.decl_api</span><span class="w"> </span><span class="kn">import</span> <span class="n">DeclarativeMeta</span>

<span class="n">mapper_registry</span> <span class="o">=</span> <span class="n">registry</span><span class="p">()</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Base</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">DeclarativeMeta</span><span class="p">):</span>
    <span class="n">__abstract__</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">registry</span> <span class="o">=</span> <span class="n">mapper_registry</span>
    <span class="n">metadata</span> <span class="o">=</span> <span class="n">mapper_registry</span><span class="o">.</span><span class="n">metadata</span>

    <span class="fm">__init__</span> <span class="o">=</span> <span class="n">mapper_registry</span><span class="o">.</span><span class="n">constructor</span></pre><div class="code-non-annotations-key"></div></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 2.0 版本发生变更: </span>Note that the
<a class="reference internal" href="#sqlalchemy.orm.registry.generate_base" title="sqlalchemy.orm.registry.generate_base"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.generate_base()</span></code></a> method is superseded by the new
<a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase" title="sqlalchemy.orm.DeclarativeBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeclarativeBase</span></code></a> class, which generates a new “base”
class using subclassing, rather than return value of a function.
This allows an approach that is compatible with <span class="target" id="index-0"></span><a class="pep reference external" href="https://peps.python.org/pep-0484/"><strong>PEP 484</strong></a> typing
tools.</p>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.orm.registry.generate_base" title="sqlalchemy.orm.registry.generate_base"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.generate_base()</span></code></a> method provides the
implementation for the <a class="reference internal" href="#sqlalchemy.orm.declarative_base" title="sqlalchemy.orm.declarative_base"><code class="xref py py-func docutils literal notranslate"><span class="pre">declarative_base()</span></code></a> function, which
creates the <a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a> and base class all at once.</p>
<p>See the section <a class="reference internal" href="mapping_styles.html#orm-declarative-mapping"><span class="std std-ref">声明式映射</span></a> for background and
examples.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.registry.generate_base.params.mapper"></span><strong>mapper</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.registry.generate_base.params.mapper">¶</a> – An optional callable, defaults to <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a>.
This function is used to generate new <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> objects.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.registry.generate_base.params.cls"></span><strong>cls</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.registry.generate_base.params.cls">¶</a> – Defaults to <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code>. A type to use as the base for the
generated declarative base class. May be a class or tuple of classes.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.registry.generate_base.params.name"></span><strong>name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.registry.generate_base.params.name">¶</a> – Defaults to <code class="docutils literal notranslate"><span class="pre">Base</span></code>.  The display name for the generated
class.  Customizing this is not required, but can improve clarity in
tracebacks and debugging.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.registry.generate_base.params.metaclass"></span><strong>metaclass</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.registry.generate_base.params.metaclass">¶</a> – Defaults to <code class="xref py py-class docutils literal notranslate"><span class="pre">DeclarativeMeta</span></code>.  A metaclass or __metaclass__
compatible callable to use as the meta type of the generated
declarative base class.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="mapping_styles.html#orm-declarative-mapping"><span class="std std-ref">声明式映射</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.declarative_base" title="sqlalchemy.orm.declarative_base"><code class="xref py py-func docutils literal notranslate"><span class="pre">declarative_base()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.registry.map_declaratively">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.registry"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.registry.</span></code></a><span class="sig-name descname"><span class="pre">map_declaratively</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><span class="pre">Mapper</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.registry.map_declaratively" title="Link to this definition">¶</a></dt>
<dd><p>Map a class declaratively.</p>
<p>In this form of mapping, the class is scanned for mapping information,
including for columns to be associated with a table, and/or an
actual table object.</p>
<p>Returns the <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> object.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">registry</span>

<span class="n">mapper_registry</span> <span class="o">=</span> <span class="n">registry</span><span class="p">()</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Foo</span><span class="p">:</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;some_table&quot;</span>

    <span class="n">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">)</span>


<span class="n">mapper</span> <span class="o">=</span> <span class="n">mapper_registry</span><span class="o">.</span><span class="n">map_declaratively</span><span class="p">(</span><span class="n">Foo</span><span class="p">)</span></pre><div class="code-non-annotations-key"></div></div>
</div>
<p>This function is more conveniently invoked indirectly via either the
<a class="reference internal" href="#sqlalchemy.orm.registry.mapped" title="sqlalchemy.orm.registry.mapped"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.mapped()</span></code></a> class decorator or by subclassing a
declarative metaclass generated from
<a class="reference internal" href="#sqlalchemy.orm.registry.generate_base" title="sqlalchemy.orm.registry.generate_base"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.generate_base()</span></code></a>.</p>
<p>See the section <a class="reference internal" href="mapping_styles.html#orm-declarative-mapping"><span class="std std-ref">声明式映射</span></a> for complete
details and examples.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.orm.registry.map_declaratively.params.cls"></span><strong>cls</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.registry.map_declaratively.params.cls">¶</a> – class to be mapped.</p>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>a <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> object.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="mapping_styles.html#orm-declarative-mapping"><span class="std std-ref">声明式映射</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.registry.mapped" title="sqlalchemy.orm.registry.mapped"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.mapped()</span></code></a> - more common decorator interface
to this function.</p>
<p><a class="reference internal" href="#sqlalchemy.orm.registry.map_imperatively" title="sqlalchemy.orm.registry.map_imperatively"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.map_imperatively()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.registry.map_imperatively">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.registry"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.registry.</span></code></a><span class="sig-name descname"><span class="pre">map_imperatively</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">class_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local_table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.FromClause" title="sqlalchemy.sql.expression.FromClause"><span class="pre">FromClause</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><span class="pre">Mapper</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.registry.map_imperatively" title="Link to this definition">¶</a></dt>
<dd><p>Map a class imperatively.</p>
<p>In this form of mapping, the class is not scanned for any mapping
information.  Instead, all mapping constructs are passed as
arguments.</p>
<p>This method is intended to be fully equivalent to the now-removed
SQLAlchemy <code class="docutils literal notranslate"><span class="pre">mapper()</span></code> function, except that it’s in terms of
a particular registry.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">registry</span>

<span class="n">mapper_registry</span> <span class="o">=</span> <span class="n">registry</span><span class="p">()</span>

<span class="n">my_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;my_table&quot;</span><span class="p">,</span>
    <span class="n">mapper_registry</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">:</span>
    <span class="k">pass</span>


<span class="n">mapper_registry</span><span class="o">.</span><span class="n">map_imperatively</span><span class="p">(</span><span class="n">MyClass</span><span class="p">,</span> <span class="n">my_table</span><span class="p">)</span></pre><div class="code-non-annotations-key"></div></div>
</div>
<p>See the section <a class="reference internal" href="mapping_styles.html#orm-imperative-mapping"><span class="std std-ref">命令式映射</span></a> for complete background
and usage examples.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.registry.map_imperatively.params.class_"></span><strong>class_</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.registry.map_imperatively.params.class_">¶</a> – The class to be mapped.  Corresponds to the
<a class="reference internal" href="#sqlalchemy.orm.Mapper.params.class_" title="sqlalchemy.orm.Mapper"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Mapper.class_</span></code></a> parameter.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.registry.map_imperatively.params.local_table"></span><strong>local_table</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.registry.map_imperatively.params.local_table">¶</a> – the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> or other
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.FromClause" title="sqlalchemy.sql.expression.FromClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">FromClause</span></code></a> object that is the subject of the mapping.
Corresponds to the
<a class="reference internal" href="#sqlalchemy.orm.Mapper.params.local_table" title="sqlalchemy.orm.Mapper"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Mapper.local_table</span></code></a> parameter.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.registry.map_imperatively.params.**kw"></span><strong>**kw</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.registry.map_imperatively.params.**kw">¶</a> – all other keyword arguments are passed to the
<a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> constructor directly.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="mapping_styles.html#orm-imperative-mapping"><span class="std std-ref">命令式映射</span></a></p>
<p><a class="reference internal" href="mapping_styles.html#orm-declarative-mapping"><span class="std std-ref">声明式映射</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.registry.mapped">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.registry"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.registry.</span></code></a><span class="sig-name descname"><span class="pre">mapped</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.registry.mapped" title="Link to this definition">¶</a></dt>
<dd><p>Class decorator that will apply the Declarative mapping process
to a given class.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">registry</span>

<span class="n">mapper_registry</span> <span class="o">=</span> <span class="n">registry</span><span class="p">()</span>


<span class="nd">@mapper_registry</span><span class="o">.</span><span class="n">mapped</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Foo</span><span class="p">:</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;some_table&quot;</span>

    <span class="n">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">)</span></pre><div class="code-non-annotations-key"></div></div>
</div>
<p>See the section <a class="reference internal" href="mapping_styles.html#orm-declarative-mapping"><span class="std std-ref">声明式映射</span></a> for complete
details and examples.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.orm.registry.mapped.params.cls"></span><strong>cls</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.registry.mapped.params.cls">¶</a> – class to be mapped.</p>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>the class that was passed.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="mapping_styles.html#orm-declarative-mapping"><span class="std std-ref">声明式映射</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.registry.generate_base" title="sqlalchemy.orm.registry.generate_base"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.generate_base()</span></code></a> - generates a base class
that will apply Declarative mapping to subclasses automatically
using a Python metaclass.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.registry.mapped_as_dataclass" title="sqlalchemy.orm.registry.mapped_as_dataclass"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.mapped_as_dataclass()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.registry.mapped_as_dataclass">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.registry"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.registry.</span></code></a><span class="sig-name descname"><span class="pre">mapped_as_dataclass</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_registry__cls</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NoArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">repr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NoArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eq</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NoArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NoArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unsafe_hash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NoArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">match_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NoArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kw_only</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NoArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataclass_callable</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NoArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.registry.mapped_as_dataclass" title="Link to this definition">¶</a></dt>
<dd><p>Class decorator that will apply the Declarative mapping process
to a given class, and additionally convert the class to be a
Python dataclass.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="dataclasses.html#orm-declarative-native-dataclasses"><span class="std std-ref">声明式Dataclass映射</span></a> - complete background
on SQLAlchemy native dataclass mapping</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.registry.mappers">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.registry"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.registry.</span></code></a><span class="sig-name descname"><span class="pre">mappers</span></span><a class="headerlink" href="#sqlalchemy.orm.registry.mappers" title="Link to this definition">¶</a></dt>
<dd><p>read only collection of all <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> objects.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.registry.update_type_annotation_map">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.registry"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.registry.</span></code></a><span class="sig-name descname"><span class="pre">update_type_annotation_map</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">type_annotation_map</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_TypeAnnotationMapType</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.registry.update_type_annotation_map" title="Link to this definition">¶</a></dt>
<dd><p>update the <a class="reference internal" href="#sqlalchemy.orm.registry.params.type_annotation_map" title="sqlalchemy.orm.registry"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">registry.type_annotation_map</span></code></a> with new
values.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.add_mapped_attribute">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">add_mapped_attribute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="internals.html#sqlalchemy.orm.MapperProperty" title="sqlalchemy.orm.MapperProperty"><span class="pre">MapperProperty</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.add_mapped_attribute" title="Link to this definition">¶</a></dt>
<dd><p>Add a new mapped attribute to an ORM mapped class.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">add_mapped_attribute</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="s2">&quot;addresses&quot;</span><span class="p">,</span> <span class="n">relationship</span><span class="p">(</span><span class="n">Address</span><span class="p">))</span></pre></div>
</div>
<p>This may be used for ORM mappings that aren’t using a declarative
metaclass that intercepts attribute set operations.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.column_property">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">column_property</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_ORMColumnExprArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">additional_columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_ORMColumnExprArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deferred</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raiseload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comparator_factory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="internals.html#sqlalchemy.orm.PropComparator" title="sqlalchemy.orm.PropComparator"><span class="pre">PropComparator</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NoArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">repr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NoArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_factory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NoArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compare</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NoArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kw_only</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NoArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NoArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">active_history</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expire_on_flush</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_InfoType</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">doc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="internals.html#sqlalchemy.orm.MappedSQLExpression" title="sqlalchemy.orm.MappedSQLExpression"><span class="pre">MappedSQLExpression</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.column_property" title="Link to this definition">¶</a></dt>
<dd><p>Provide a column-level property for use with a mapping.</p>
<p>With Declarative mappings, <a class="reference internal" href="#sqlalchemy.orm.column_property" title="sqlalchemy.orm.column_property"><code class="xref py py-func docutils literal notranslate"><span class="pre">column_property()</span></code></a> is used to
map read-only SQL expressions to a mapped class.</p>
<p>When using Imperative mappings, <a class="reference internal" href="#sqlalchemy.orm.column_property" title="sqlalchemy.orm.column_property"><code class="xref py py-func docutils literal notranslate"><span class="pre">column_property()</span></code></a> also
takes on the role of mapping table columns with additional features.
When using fully Declarative mappings, the <a class="reference internal" href="#sqlalchemy.orm.mapped_column" title="sqlalchemy.orm.mapped_column"><code class="xref py py-func docutils literal notranslate"><span class="pre">mapped_column()</span></code></a>
construct should be used for this purpose.</p>
<p>With Declarative Dataclass mappings, <a class="reference internal" href="#sqlalchemy.orm.column_property" title="sqlalchemy.orm.column_property"><code class="xref py py-func docutils literal notranslate"><span class="pre">column_property()</span></code></a>
is considered to be <strong>read only</strong>, and will not be included in the
Dataclass <code class="docutils literal notranslate"><span class="pre">__init__()</span></code> constructor.</p>
<p>The <a class="reference internal" href="#sqlalchemy.orm.column_property" title="sqlalchemy.orm.column_property"><code class="xref py py-func docutils literal notranslate"><span class="pre">column_property()</span></code></a> function returns an instance of
<a class="reference internal" href="internals.html#sqlalchemy.orm.ColumnProperty" title="sqlalchemy.orm.ColumnProperty"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnProperty</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="mapped_sql_expr.html#mapper-column-property-sql-expressions"><span class="std std-ref">使用 column_property</span></a> - general use of
<a class="reference internal" href="#sqlalchemy.orm.column_property" title="sqlalchemy.orm.column_property"><code class="xref py py-func docutils literal notranslate"><span class="pre">column_property()</span></code></a> to map SQL expressions</p>
<p><a class="reference internal" href="declarative_tables.html#orm-imperative-table-column-options"><span class="std std-ref">为命令式表应用加载、持久性和映射选项列</span></a> - usage of
<a class="reference internal" href="#sqlalchemy.orm.column_property" title="sqlalchemy.orm.column_property"><code class="xref py py-func docutils literal notranslate"><span class="pre">column_property()</span></code></a> with Imperative Table mappings to apply
additional options to a plain <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> object</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.column_property.params.*cols"></span><strong>*cols</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.column_property.params.*cols">¶</a> – list of Column objects to be mapped.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.column_property.params.active_history"></span><strong>active_history=False</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.column_property.params.active_history">¶</a> – Used only for Imperative Table mappings, or legacy-style Declarative
mappings (i.e. which have not been upgraded to
<a class="reference internal" href="#sqlalchemy.orm.mapped_column" title="sqlalchemy.orm.mapped_column"><code class="xref py py-func docutils literal notranslate"><span class="pre">mapped_column()</span></code></a>), for column-based attributes that are
expected to be writeable; use <a class="reference internal" href="#sqlalchemy.orm.mapped_column" title="sqlalchemy.orm.mapped_column"><code class="xref py py-func docutils literal notranslate"><span class="pre">mapped_column()</span></code></a> with
<a class="reference internal" href="#sqlalchemy.orm.mapped_column.params.active_history" title="sqlalchemy.orm.mapped_column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">mapped_column.active_history</span></code></a> for Declarative mappings.
See that parameter for functional details.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.column_property.params.comparator_factory"></span><strong>comparator_factory</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.column_property.params.comparator_factory">¶</a> – a class which extends
<a class="reference internal" href="internals.html#sqlalchemy.orm.ColumnProperty.Comparator" title="sqlalchemy.orm.ColumnProperty.Comparator"><code class="xref py py-class docutils literal notranslate"><span class="pre">Comparator</span></code></a> which provides custom SQL
clause generation for comparison operations.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.column_property.params.group"></span><strong>group</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.column_property.params.group">¶</a> – a group name for this property when marked as deferred.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.column_property.params.deferred"></span><strong>deferred</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.column_property.params.deferred">¶</a> – when True, the column property is “deferred”, meaning that
it does not load immediately, and is instead loaded when the
attribute is first accessed on an instance.  See also
<a class="reference internal" href="queryguide/columns.html#sqlalchemy.orm.deferred" title="sqlalchemy.orm.deferred"><code class="xref py py-func docutils literal notranslate"><span class="pre">deferred()</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.column_property.params.doc"></span><strong>doc</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.column_property.params.doc">¶</a> – optional string that will be applied as the doc on the
class-bound descriptor.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.column_property.params.expire_on_flush"></span><strong>expire_on_flush=True</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.column_property.params.expire_on_flush">¶</a> – Disable expiry on flush.   A column_property() which refers
to a SQL expression (and not a single table-bound column)
is considered to be a “read only” property; populating it
has no effect on the state of data, and it can only return
database state.   For this reason a column_property()’s value
is expired whenever the parent object is involved in a
flush, that is, has any kind of “dirty” state within a flush.
Setting this parameter to <code class="docutils literal notranslate"><span class="pre">False</span></code> will have the effect of
leaving any existing value present after the flush proceeds.
Note that the <a class="reference internal" href="session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> with default expiration
settings still expires
all attributes after a <a class="reference internal" href="session_api.html#sqlalchemy.orm.Session.commit" title="sqlalchemy.orm.Session.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.commit()</span></code></a> call, however.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.column_property.params.info"></span><strong>info</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.column_property.params.info">¶</a> – Optional data dictionary which will be populated into the
<a class="reference internal" href="internals.html#sqlalchemy.orm.MapperProperty.info" title="sqlalchemy.orm.MapperProperty.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">MapperProperty.info</span></code></a> attribute of this object.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.column_property.params.raiseload"></span><strong>raiseload</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.column_property.params.raiseload">¶</a> – <p>if True, indicates the column should raise an error
when undeferred, rather than loading the value.  This can be
altered at query time by using the <a class="reference internal" href="queryguide/columns.html#sqlalchemy.orm.deferred" title="sqlalchemy.orm.deferred"><code class="xref py py-func docutils literal notranslate"><span class="pre">deferred()</span></code></a> option with
raiseload=False.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="queryguide/columns.html#orm-queryguide-deferred-raiseload"><span class="std std-ref">使用 raiseload 防止延迟列加载</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.column_property.params.init"></span><strong>init</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.column_property.params.init">¶</a> – <p>Specific to <a class="reference internal" href="dataclasses.html#orm-declarative-native-dataclasses"><span class="std std-ref">声明式Dataclass映射</span></a>,
specifies if the mapped attribute should be part of the <code class="docutils literal notranslate"><span class="pre">__init__()</span></code>
method as generated by the dataclass process.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">自 1.4 版本弃用: </span>The <a class="reference internal" href="#sqlalchemy.orm.column_property.params.init" title="sqlalchemy.orm.column_property"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">column_property.init</span></code></a> parameter is deprecated for <a class="reference internal" href="#sqlalchemy.orm.column_property" title="sqlalchemy.orm.column_property"><code class="xref py py-func docutils literal notranslate"><span class="pre">column_property()</span></code></a>.  This parameter applies to a writeable-attribute in a Declarative Dataclasses configuration only, and <a class="reference internal" href="#sqlalchemy.orm.column_property" title="sqlalchemy.orm.column_property"><code class="xref py py-func docutils literal notranslate"><span class="pre">column_property()</span></code></a> is treated as a read-only attribute in this context.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.column_property.params.repr"></span><strong>repr</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.column_property.params.repr">¶</a> – Specific to <a class="reference internal" href="dataclasses.html#orm-declarative-native-dataclasses"><span class="std std-ref">声明式Dataclass映射</span></a>,
specifies if the mapped attribute should be part of the <code class="docutils literal notranslate"><span class="pre">__repr__()</span></code>
method as generated by the dataclass process.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.column_property.params.default_factory"></span><strong>default_factory</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.column_property.params.default_factory">¶</a> – <p>Specific to
<a class="reference internal" href="dataclasses.html#orm-declarative-native-dataclasses"><span class="std std-ref">声明式Dataclass映射</span></a>,
specifies a default-value generation function that will take place
as part of the <code class="docutils literal notranslate"><span class="pre">__init__()</span></code>
method as generated by the dataclass process.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">自 1.4 版本弃用: </span>The <a class="reference internal" href="#sqlalchemy.orm.column_property.params.default_factory" title="sqlalchemy.orm.column_property"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">column_property.default_factory</span></code></a> parameter is deprecated for <a class="reference internal" href="#sqlalchemy.orm.column_property" title="sqlalchemy.orm.column_property"><code class="xref py py-func docutils literal notranslate"><span class="pre">column_property()</span></code></a>.  This parameter applies to a writeable-attribute in a Declarative Dataclasses configuration only, and <a class="reference internal" href="#sqlalchemy.orm.column_property" title="sqlalchemy.orm.column_property"><code class="xref py py-func docutils literal notranslate"><span class="pre">column_property()</span></code></a> is treated as a read-only attribute in this context.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="../faq/ormconfiguration.html#defaults-default-factory-insert-default"><span class="std std-ref">什么是 default、default_factory 和 insert_default，我应该使用哪个？</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.mapped_column.params.default" title="sqlalchemy.orm.mapped_column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">mapped_column.default</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.mapped_column.params.insert_default" title="sqlalchemy.orm.mapped_column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">mapped_column.insert_default</span></code></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.column_property.params.compare"></span><strong>compare</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.column_property.params.compare">¶</a> – <p>Specific to
<a class="reference internal" href="dataclasses.html#orm-declarative-native-dataclasses"><span class="std std-ref">声明式Dataclass映射</span></a>, indicates if this field
should be included in comparison operations when generating the
<code class="docutils literal notranslate"><span class="pre">__eq__()</span></code> and <code class="docutils literal notranslate"><span class="pre">__ne__()</span></code> methods for the mapped class.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0.0b4 版本加入.</span></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.column_property.params.kw_only"></span><strong>kw_only</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.column_property.params.kw_only">¶</a> – <p>Specific to
<a class="reference internal" href="dataclasses.html#orm-declarative-native-dataclasses"><span class="std std-ref">声明式Dataclass映射</span></a>, indicates if this field
should be marked as keyword-only when generating the <code class="docutils literal notranslate"><span class="pre">__init__()</span></code>.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">自 1.4 版本弃用: </span>The <a class="reference internal" href="#sqlalchemy.orm.column_property.params.kw_only" title="sqlalchemy.orm.column_property"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">column_property.kw_only</span></code></a> parameter is deprecated for <a class="reference internal" href="#sqlalchemy.orm.column_property" title="sqlalchemy.orm.column_property"><code class="xref py py-func docutils literal notranslate"><span class="pre">column_property()</span></code></a>.  This parameter applies to a writeable-attribute in a Declarative Dataclasses configuration only, and <a class="reference internal" href="#sqlalchemy.orm.column_property" title="sqlalchemy.orm.column_property"><code class="xref py py-func docutils literal notranslate"><span class="pre">column_property()</span></code></a> is treated as a read-only attribute in this context.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.column_property.params.hash"></span><strong>hash</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.column_property.params.hash">¶</a> – <p>Specific to
<a class="reference internal" href="dataclasses.html#orm-declarative-native-dataclasses"><span class="std std-ref">声明式Dataclass映射</span></a>, controls if this field
is included when generating the <code class="docutils literal notranslate"><span class="pre">__hash__()</span></code> method for the mapped
class.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0.36 版本加入.</span></p>
</div>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.declarative_base">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">declarative_base</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata:</span> <span class="pre">Optional[MetaData]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mapper:</span> <span class="pre">Optional[Callable[...</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Mapper[Any]]]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cls:</span> <span class="pre">Type[Any]</span> <span class="pre">=</span> <span class="pre">&lt;class</span> <span class="pre">'object'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'Base'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">class_registry:</span> <span class="pre">Optional[clsregistry._ClsRegistryType]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type_annotation_map:</span> <span class="pre">Optional[_TypeAnnotationMapType]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">constructor:</span> <span class="pre">Callable[...</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">None]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">_declarative_constructor&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metaclass:</span> <span class="pre">Type[Any]</span> <span class="pre">=</span> <span class="pre">&lt;class</span> <span class="pre">'sqlalchemy.orm.decl_api.DeclarativeMeta'&gt;</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#sqlalchemy.orm.declarative_base" title="Link to this definition">¶</a></dt>
<dd><p>Construct a base class for declarative class definitions.</p>
<p>The new base class will be given a metaclass that produces
appropriate <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects and makes
the appropriate <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> calls based on the
information provided declaratively in the class and any subclasses
of the class.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 2.0 版本发生变更: </span>Note that the <a class="reference internal" href="#sqlalchemy.orm.declarative_base" title="sqlalchemy.orm.declarative_base"><code class="xref py py-func docutils literal notranslate"><span class="pre">declarative_base()</span></code></a>
function is superseded by the new <a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase" title="sqlalchemy.orm.DeclarativeBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeclarativeBase</span></code></a> class,
which generates a new “base” class using subclassing, rather than
return value of a function.  This allows an approach that is compatible
with <span class="target" id="index-1"></span><a class="pep reference external" href="https://peps.python.org/pep-0484/"><strong>PEP 484</strong></a> typing tools.</p>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.orm.declarative_base" title="sqlalchemy.orm.declarative_base"><code class="xref py py-func docutils literal notranslate"><span class="pre">declarative_base()</span></code></a> function is a shorthand version
of using the <a class="reference internal" href="#sqlalchemy.orm.registry.generate_base" title="sqlalchemy.orm.registry.generate_base"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.generate_base()</span></code></a>
method.  That is, the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">declarative_base</span>

<span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span></pre></div>
</div>
<p>Is equivalent to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">registry</span>

<span class="n">mapper_registry</span> <span class="o">=</span> <span class="n">registry</span><span class="p">()</span>
<span class="n">Base</span> <span class="o">=</span> <span class="n">mapper_registry</span><span class="o">.</span><span class="n">generate_base</span><span class="p">()</span></pre></div>
</div>
<p>See the docstring for <a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a>
and <a class="reference internal" href="#sqlalchemy.orm.registry.generate_base" title="sqlalchemy.orm.registry.generate_base"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.generate_base()</span></code></a>
for more details.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.4 版本发生变更: </span>The <a class="reference internal" href="#sqlalchemy.orm.declarative_base" title="sqlalchemy.orm.declarative_base"><code class="xref py py-func docutils literal notranslate"><span class="pre">declarative_base()</span></code></a>
function is now a specialization of the more generic
<a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a> class.  The function also moves to the
<code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm</span></code> package from the <code class="docutils literal notranslate"><span class="pre">declarative.ext</span></code> package.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.declarative_base.params.metadata"></span><strong>metadata</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.declarative_base.params.metadata">¶</a> – An optional <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> instance.  All
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects implicitly declared by
subclasses of the base will share this MetaData.  A MetaData instance
will be created if none is provided.  The
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> instance will be available via the
<code class="docutils literal notranslate"><span class="pre">metadata</span></code> attribute of the generated declarative base class.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.declarative_base.params.mapper"></span><strong>mapper</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.declarative_base.params.mapper">¶</a> – An optional callable, defaults to <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a>. Will
be used to map subclasses to their Tables.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.declarative_base.params.cls"></span><strong>cls</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.declarative_base.params.cls">¶</a> – Defaults to <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code>. A type to use as the base for the generated
declarative base class. May be a class or tuple of classes.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.declarative_base.params.name"></span><strong>name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.declarative_base.params.name">¶</a> – Defaults to <code class="docutils literal notranslate"><span class="pre">Base</span></code>.  The display name for the generated
class.  Customizing this is not required, but can improve clarity in
tracebacks and debugging.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.declarative_base.params.constructor"></span><strong>constructor</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.declarative_base.params.constructor">¶</a> – Specify the implementation for the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> function on a mapped
class that has no <code class="docutils literal notranslate"><span class="pre">__init__</span></code> of its own.  Defaults to an
implementation that assigns **kwargs for declared
fields and relationships to an instance.  If <code class="docutils literal notranslate"><span class="pre">None</span></code> is supplied,
no __init__ will be provided and construction will fall back to
cls.__init__ by way of the normal Python semantics.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.declarative_base.params.class_registry"></span><strong>class_registry</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.declarative_base.params.class_registry">¶</a> – optional dictionary that will serve as the
registry of class names-&gt; mapped classes when string names
are used to identify classes inside of <a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a>
and others.  Allows two or more declarative base classes
to share the same registry of class names for simplified
inter-base relationships.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.declarative_base.params.type_annotation_map"></span><strong>type_annotation_map</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.declarative_base.params.type_annotation_map">¶</a> – <p>optional dictionary of Python types to
SQLAlchemy <a class="reference internal" href="../core/type_api.html#sqlalchemy.types.TypeEngine" title="sqlalchemy.types.TypeEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeEngine</span></code></a> classes or instances.  This
is used exclusively by the <a class="reference internal" href="internals.html#sqlalchemy.orm.MappedColumn" title="sqlalchemy.orm.MappedColumn"><code class="xref py py-class docutils literal notranslate"><span class="pre">MappedColumn</span></code></a> construct
to produce column types based on annotations within the
<a class="reference internal" href="internals.html#sqlalchemy.orm.Mapped" title="sqlalchemy.orm.Mapped"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapped</span></code></a> type.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="declarative_tables.html#orm-declarative-mapped-column-type-map"><span class="std std-ref">自定义类型映射</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.declarative_base.params.metaclass"></span><strong>metaclass</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.declarative_base.params.metaclass">¶</a> – Defaults to <code class="xref py py-class docutils literal notranslate"><span class="pre">DeclarativeMeta</span></code>.  A metaclass or __metaclass__
compatible callable to use as the meta type of the generated
declarative base class.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.declarative_mixin">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">declarative_mixin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.declarative_mixin" title="Link to this definition">¶</a></dt>
<dd><p>Mark a class as providing the feature of “declarative mixin”.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">declared_attr</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">declarative_mixin</span>


<span class="nd">@declarative_mixin</span>
<span class="k">class</span><span class="w"> </span><span class="nc">MyMixin</span><span class="p">:</span>

    <span class="nd">@declared_attr</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">__tablename__</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="n">__table_args__</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;mysql_engine&quot;</span><span class="p">:</span> <span class="s2">&quot;InnoDB&quot;</span><span class="p">}</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;always_refresh&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>

    <span class="n">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MyModel</span><span class="p">(</span><span class="n">MyMixin</span><span class="p">,</span> <span class="n">Base</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">1000</span><span class="p">))</span></pre><div class="code-non-annotations-key"></div></div>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.orm.declarative_mixin" title="sqlalchemy.orm.declarative_mixin"><code class="xref py py-func docutils literal notranslate"><span class="pre">declarative_mixin()</span></code></a> decorator currently does not modify
the given class in any way; it’s current purpose is strictly to assist
the Mypy plugin in being able to identify
SQLAlchemy declarative mixin classes when no other context is present.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 1.4.6 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="declarative_mixins.html#orm-mixins-toplevel"><span class="std std-ref">使用 Mixins 组合映射层次结构</span></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.as_declarative">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">as_declarative</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.as_declarative" title="Link to this definition">¶</a></dt>
<dd><p>Class decorator which will adapt a given class into a
<a class="reference internal" href="#sqlalchemy.orm.declarative_base" title="sqlalchemy.orm.declarative_base"><code class="xref py py-func docutils literal notranslate"><span class="pre">declarative_base()</span></code></a>.</p>
<p>This function makes use of the <a class="reference internal" href="#sqlalchemy.orm.registry.as_declarative_base" title="sqlalchemy.orm.registry.as_declarative_base"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.as_declarative_base()</span></code></a>
method, by first creating a <a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a> automatically
and then invoking the decorator.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">as_declarative</span>


<span class="nd">@as_declarative</span><span class="p">()</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Base</span><span class="p">:</span>
    <span class="nd">@declared_attr</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">__tablename__</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="n">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MyMappedClass</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span> <span class="o">...</span></pre><div class="code-non-annotations-key"></div></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.registry.as_declarative_base" title="sqlalchemy.orm.registry.as_declarative_base"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.as_declarative_base()</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.mapped_column">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">mapped_column</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">__name_pos</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">_TypeEngineArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../core/events.html#sqlalchemy.events.SchemaEventTarget" title="sqlalchemy.events.SchemaEventTarget"><span class="pre">SchemaEventTarget</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__type_pos</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_TypeEngineArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../core/events.html#sqlalchemy.events.SchemaEventTarget" title="sqlalchemy.events.SchemaEventTarget"><span class="pre">SchemaEventTarget</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../core/events.html#sqlalchemy.events.SchemaEventTarget" title="sqlalchemy.events.SchemaEventTarget"><span class="pre">SchemaEventTarget</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">init</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NoArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">repr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NoArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_factory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NoArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compare</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NoArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kw_only</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NoArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NoArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nullable</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">SchemaConst.NULL_UNSPECIFIED</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">SchemaConst.NULL_UNSPECIFIED</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">primary_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deferred</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NoArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deferred_group</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deferred_raiseload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_existing_column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_TypeEngineArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autoincrement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_AutoIncrementType</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">doc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unique</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_InfoType</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onupdate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">insert_default</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">server_default</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_ServerDefaultArgument</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">server_onupdate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_ServerOnUpdateArgument</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">active_history</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quote</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">system</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comment</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_NoArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="internals.html#sqlalchemy.orm.MappedColumn" title="sqlalchemy.orm.MappedColumn"><span class="pre">MappedColumn</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.mapped_column" title="Link to this definition">¶</a></dt>
<dd><p>declare a new ORM-mapped <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> construct
for use within <a class="reference internal" href="declarative_tables.html#orm-declarative-table"><span class="std std-ref">Declarative Table</span></a>
configuration.</p>
<p>The <a class="reference internal" href="#sqlalchemy.orm.mapped_column" title="sqlalchemy.orm.mapped_column"><code class="xref py py-func docutils literal notranslate"><span class="pre">mapped_column()</span></code></a> function provides an ORM-aware and
Python-typing-compatible construct which is used with
<a class="reference internal" href="mapping_styles.html#orm-declarative-mapping"><span class="std std-ref">declarative</span></a> mappings to indicate an
attribute that’s mapped to a Core <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> object.  It
provides the equivalent feature as mapping an attribute to a
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> object directly when using Declarative,
specifically when using <a class="reference internal" href="declarative_tables.html#orm-declarative-table"><span class="std std-ref">Declarative Table</span></a>
configuration.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
<p><a class="reference internal" href="#sqlalchemy.orm.mapped_column" title="sqlalchemy.orm.mapped_column"><code class="xref py py-func docutils literal notranslate"><span class="pre">mapped_column()</span></code></a> is normally used with explicit typing along with
the <a class="reference internal" href="internals.html#sqlalchemy.orm.Mapped" title="sqlalchemy.orm.Mapped"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapped</span></code></a> annotation type, where it can derive the SQL
type and nullability for the column based on what’s present within the
<a class="reference internal" href="internals.html#sqlalchemy.orm.Mapped" title="sqlalchemy.orm.Mapped"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapped</span></code></a> annotation.   It also may be used without annotations
as a drop-in replacement for how <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> is used in
Declarative mappings in SQLAlchemy 1.x style.</p>
<p>For usage examples of <a class="reference internal" href="#sqlalchemy.orm.mapped_column" title="sqlalchemy.orm.mapped_column"><code class="xref py py-func docutils literal notranslate"><span class="pre">mapped_column()</span></code></a>, see the documentation
at <a class="reference internal" href="declarative_tables.html#orm-declarative-table"><span class="std std-ref">带有 mapped_column() 的声明表</span></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="declarative_tables.html#orm-declarative-table"><span class="std std-ref">带有 mapped_column() 的声明表</span></a> - complete documentation</p>
<p><a class="reference internal" href="../changelog/whatsnew_20.html#whatsnew-20-orm-declarative-typing"><span class="std std-ref">ORM Declarative Models</span></a> - migration notes for
Declarative mappings using 1.x style mappings</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.mapped_column.params.__name"></span><strong>__name</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.mapped_column.params.__name">¶</a> – String name to give to the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>.  This
is an optional, positional only argument that if present must be the
first positional argument passed.  If omitted, the attribute name to
which the <a class="reference internal" href="#sqlalchemy.orm.mapped_column" title="sqlalchemy.orm.mapped_column"><code class="xref py py-func docutils literal notranslate"><span class="pre">mapped_column()</span></code></a>  is mapped will be used as the SQL
column name.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.mapped_column.params.__type"></span><strong>__type</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.mapped_column.params.__type">¶</a> – <a class="reference internal" href="../core/type_api.html#sqlalchemy.types.TypeEngine" title="sqlalchemy.types.TypeEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeEngine</span></code></a> type or instance which will
indicate the datatype to be associated with the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>.
This is an optional, positional-only argument that if present must
immediately follow the <code class="docutils literal notranslate"><span class="pre">__name</span></code> parameter if present also, or otherwise
be the first positional parameter.  If omitted, the ultimate type for
the column may be derived either from the annotated type, or if a
<a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> is present, from the datatype of the
referenced column.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.mapped_column.params.*args"></span><strong>*args</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.mapped_column.params.*args">¶</a> – Additional positional arguments include constructs such
as <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a>, <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.CheckConstraint" title="sqlalchemy.schema.CheckConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckConstraint</span></code></a>,
and <a class="reference internal" href="../core/defaults.html#sqlalchemy.schema.Identity" title="sqlalchemy.schema.Identity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Identity</span></code></a>, which are passed through to the constructed
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.mapped_column.params.nullable"></span><strong>nullable</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.mapped_column.params.nullable">¶</a> – Optional bool, whether the column should be “NULL” or
“NOT NULL”. If omitted, the nullability is derived from the type
annotation based on whether or not <code class="docutils literal notranslate"><span class="pre">typing.Optional</span></code> is present.
<code class="docutils literal notranslate"><span class="pre">nullable</span></code> defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code> otherwise for non-primary key columns,
and <code class="docutils literal notranslate"><span class="pre">False</span></code> for primary key columns.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.mapped_column.params.primary_key"></span><strong>primary_key</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.mapped_column.params.primary_key">¶</a> – optional bool, indicates the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
would be part of the table’s primary key or not.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.mapped_column.params.deferred"></span><strong>deferred</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.mapped_column.params.deferred">¶</a> – <p>Optional bool - this keyword argument is consumed by the
ORM declarative process, and is not part of the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
itself; instead, it indicates that this column should be “deferred” for
loading as though mapped by <a class="reference internal" href="queryguide/columns.html#sqlalchemy.orm.deferred" title="sqlalchemy.orm.deferred"><code class="xref py py-func docutils literal notranslate"><span class="pre">deferred()</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="queryguide/columns.html#orm-queryguide-deferred-declarative"><span class="std std-ref">在映射上配置列延迟</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.mapped_column.params.deferred_group"></span><strong>deferred_group</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.mapped_column.params.deferred_group">¶</a> – <p>Implies <a class="reference internal" href="#sqlalchemy.orm.mapped_column.params.deferred" title="sqlalchemy.orm.mapped_column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">mapped_column.deferred</span></code></a>
to <code class="docutils literal notranslate"><span class="pre">True</span></code>, and set the <a class="reference internal" href="queryguide/columns.html#sqlalchemy.orm.deferred.params.group" title="sqlalchemy.orm.deferred"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">deferred.group</span></code></a> parameter.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="queryguide/columns.html#orm-queryguide-deferred-group"><span class="std std-ref">按组加载延迟列</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.mapped_column.params.deferred_raiseload"></span><strong>deferred_raiseload</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.mapped_column.params.deferred_raiseload">¶</a> – <p>Implies <a class="reference internal" href="#sqlalchemy.orm.mapped_column.params.deferred" title="sqlalchemy.orm.mapped_column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">mapped_column.deferred</span></code></a>
to <code class="docutils literal notranslate"><span class="pre">True</span></code>, and set the <a class="reference internal" href="queryguide/columns.html#sqlalchemy.orm.deferred.params.raiseload" title="sqlalchemy.orm.deferred"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">deferred.raiseload</span></code></a> parameter.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="queryguide/columns.html#orm-queryguide-deferred-raiseload"><span class="std std-ref">使用 raiseload 防止延迟列加载</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.mapped_column.params.use_existing_column"></span><strong>use_existing_column</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.mapped_column.params.use_existing_column">¶</a> – <p>if True, will attempt to locate the given
column name on an inherited superclass (typically single inheriting
superclass), and if present, will not produce a new column, mapping
to the superclass column as though it were omitted from this class.
This is used for mixins that add new columns to an inherited superclass.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="inheritance.html#orm-inheritance-column-conflicts"><span class="std std-ref">使用 use_existing_column 解决列冲突</span></a></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0.0b4 版本加入.</span></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.mapped_column.params.default"></span><strong>default</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.mapped_column.params.default">¶</a> – <p>Passed directly to the
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column.params.default" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.default</span></code></a> parameter if the
<a class="reference internal" href="#sqlalchemy.orm.mapped_column.params.insert_default" title="sqlalchemy.orm.mapped_column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">mapped_column.insert_default</span></code></a> parameter is not present.
Additionally, when used with <a class="reference internal" href="dataclasses.html#orm-declarative-native-dataclasses"><span class="std std-ref">声明式Dataclass映射</span></a>,
indicates a default Python value that should be applied to the keyword
constructor within the generated <code class="docutils literal notranslate"><span class="pre">__init__()</span></code> method.</p>
<p>Note that in the case of dataclass generation when
<a class="reference internal" href="#sqlalchemy.orm.mapped_column.params.insert_default" title="sqlalchemy.orm.mapped_column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">mapped_column.insert_default</span></code></a> is not present, this means
the <a class="reference internal" href="#sqlalchemy.orm.mapped_column.params.default" title="sqlalchemy.orm.mapped_column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">mapped_column.default</span></code></a> value is used in <strong>two</strong>
places, both the <code class="docutils literal notranslate"><span class="pre">__init__()</span></code> method as well as the
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column.params.default" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.default</span></code></a> parameter. While this behavior may
change in a future release, for the moment this tends to “work out”; a
default of <code class="docutils literal notranslate"><span class="pre">None</span></code> will mean that the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> gets no
default generator, whereas a default that refers to a non-<code class="docutils literal notranslate"><span class="pre">None</span></code> Python
or SQL expression value will be assigned up front on the object when
<code class="docutils literal notranslate"><span class="pre">__init__()</span></code> is called, which is the same value that the Core
<a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> construct would use in any case, leading to the same
end result.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>When using Core level column defaults that are callables to
be interpreted by the underlying <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> in conjunction
with <a class="reference internal" href="dataclasses.html#orm-declarative-native-dataclasses"><span class="std std-ref">ORM-mapped dataclasses</span></a>, especially those that are
<a class="reference internal" href="../core/defaults.html#context-default-functions"><span class="std std-ref">context-aware default functions</span></a>,
<strong>the</strong> <a class="reference internal" href="#sqlalchemy.orm.mapped_column.params.insert_default" title="sqlalchemy.orm.mapped_column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">mapped_column.insert_default</span></code></a> <strong>parameter must
be used instead</strong>.  This is necessary to disambiguate the callable from
being interpreted as a dataclass level default.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="../faq/ormconfiguration.html#defaults-default-factory-insert-default"><span class="std std-ref">什么是 default、default_factory 和 insert_default，我应该使用哪个？</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.mapped_column.params.insert_default" title="sqlalchemy.orm.mapped_column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">mapped_column.insert_default</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.mapped_column.params.default_factory" title="sqlalchemy.orm.mapped_column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">mapped_column.default_factory</span></code></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.mapped_column.params.insert_default"></span><strong>insert_default</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.mapped_column.params.insert_default">¶</a> – <p>Passed directly to the
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column.params.default" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.default</span></code></a> parameter; will supersede the value
of <a class="reference internal" href="#sqlalchemy.orm.mapped_column.params.default" title="sqlalchemy.orm.mapped_column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">mapped_column.default</span></code></a> when present, however
<a class="reference internal" href="#sqlalchemy.orm.mapped_column.params.default" title="sqlalchemy.orm.mapped_column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">mapped_column.default</span></code></a> will always apply to the
constructor default for a dataclasses mapping.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="../faq/ormconfiguration.html#defaults-default-factory-insert-default"><span class="std std-ref">什么是 default、default_factory 和 insert_default，我应该使用哪个？</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.mapped_column.params.default" title="sqlalchemy.orm.mapped_column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">mapped_column.default</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.mapped_column.params.default_factory" title="sqlalchemy.orm.mapped_column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">mapped_column.default_factory</span></code></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.mapped_column.params.sort_order"></span><strong>sort_order</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.mapped_column.params.sort_order">¶</a> – <p>An integer that indicates how this mapped column
should be sorted compared to the others when the ORM is creating a
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>. Among mapped columns that have the same
value the default ordering is used, placing first the mapped columns
defined in the main class, then the ones in the super classes.
Defaults to 0. The sort is ascending.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0.4 版本加入.</span></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.mapped_column.params.active_history"></span><strong>active_history=False</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.mapped_column.params.active_history">¶</a> – <p>When <code class="docutils literal notranslate"><span class="pre">True</span></code>, indicates that the “previous” value for a
scalar attribute should be loaded when replaced, if not
already loaded. Normally, history tracking logic for
simple non-primary-key scalar values only needs to be
aware of the “new” value in order to perform a flush. This
flag is available for applications that make use of
<a class="reference internal" href="session_api.html#sqlalchemy.orm.attributes.get_history" title="sqlalchemy.orm.attributes.get_history"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_history()</span></code></a> or <a class="reference internal" href="session_api.html#sqlalchemy.orm.Session.is_modified" title="sqlalchemy.orm.Session.is_modified"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.is_modified()</span></code></a>
which also need to know the “previous” value of the attribute.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0.10 版本加入.</span></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.mapped_column.params.init"></span><strong>init</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.mapped_column.params.init">¶</a> – Specific to <a class="reference internal" href="dataclasses.html#orm-declarative-native-dataclasses"><span class="std std-ref">声明式Dataclass映射</span></a>,
specifies if the mapped attribute should be part of the <code class="docutils literal notranslate"><span class="pre">__init__()</span></code>
method as generated by the dataclass process.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.mapped_column.params.repr"></span><strong>repr</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.mapped_column.params.repr">¶</a> – Specific to <a class="reference internal" href="dataclasses.html#orm-declarative-native-dataclasses"><span class="std std-ref">声明式Dataclass映射</span></a>,
specifies if the mapped attribute should be part of the <code class="docutils literal notranslate"><span class="pre">__repr__()</span></code>
method as generated by the dataclass process.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.mapped_column.params.default_factory"></span><strong>default_factory</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.mapped_column.params.default_factory">¶</a> – <p>Specific to
<a class="reference internal" href="dataclasses.html#orm-declarative-native-dataclasses"><span class="std std-ref">声明式Dataclass映射</span></a>,
specifies a default-value generation function that will take place
as part of the <code class="docutils literal notranslate"><span class="pre">__init__()</span></code>
method as generated by the dataclass process.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="../faq/ormconfiguration.html#defaults-default-factory-insert-default"><span class="std std-ref">什么是 default、default_factory 和 insert_default，我应该使用哪个？</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.mapped_column.params.default" title="sqlalchemy.orm.mapped_column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">mapped_column.default</span></code></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.mapped_column.params.insert_default" title="sqlalchemy.orm.mapped_column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">mapped_column.insert_default</span></code></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.mapped_column.params.compare"></span><strong>compare</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.mapped_column.params.compare">¶</a> – <p>Specific to
<a class="reference internal" href="dataclasses.html#orm-declarative-native-dataclasses"><span class="std std-ref">声明式Dataclass映射</span></a>, indicates if this field
should be included in comparison operations when generating the
<code class="docutils literal notranslate"><span class="pre">__eq__()</span></code> and <code class="docutils literal notranslate"><span class="pre">__ne__()</span></code> methods for the mapped class.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0.0b4 版本加入.</span></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.mapped_column.params.kw_only"></span><strong>kw_only</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.mapped_column.params.kw_only">¶</a> – Specific to
<a class="reference internal" href="dataclasses.html#orm-declarative-native-dataclasses"><span class="std std-ref">声明式Dataclass映射</span></a>, indicates if this field
should be marked as keyword-only when generating the <code class="docutils literal notranslate"><span class="pre">__init__()</span></code>.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.mapped_column.params.hash"></span><strong>hash</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.mapped_column.params.hash">¶</a> – <p>Specific to
<a class="reference internal" href="dataclasses.html#orm-declarative-native-dataclasses"><span class="std std-ref">声明式Dataclass映射</span></a>, controls if this field
is included when generating the <code class="docutils literal notranslate"><span class="pre">__hash__()</span></code> method for the mapped
class.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0.36 版本加入.</span></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.mapped_column.params.**kw"></span><strong>**kw</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.mapped_column.params.**kw">¶</a> – All remaining keyword arguments are passed through to the
constructor for the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.orm.declared_attr">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">declared_attr</span></span><a class="headerlink" href="#sqlalchemy.orm.declared_attr" title="Link to this definition">¶</a></dt>
<dd><p>Mark a class-level method as representing the definition of
a mapped property or Declarative directive.</p>
<p><a class="reference internal" href="#sqlalchemy.orm.declared_attr" title="sqlalchemy.orm.declared_attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">declared_attr</span></code></a> is typically applied as a decorator to a class
level method, turning the attribute into a scalar-like property that can be
invoked from the uninstantiated class. The Declarative mapping process
looks for these <a class="reference internal" href="#sqlalchemy.orm.declared_attr" title="sqlalchemy.orm.declared_attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">declared_attr</span></code></a> callables as it scans classes,
and assumes any attribute marked with <a class="reference internal" href="#sqlalchemy.orm.declared_attr" title="sqlalchemy.orm.declared_attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">declared_attr</span></code></a> will be a
callable that will produce an object specific to the Declarative mapping or
table configuration.</p>
<p><a class="reference internal" href="#sqlalchemy.orm.declared_attr" title="sqlalchemy.orm.declared_attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">declared_attr</span></code></a> is usually applicable to
<a class="reference internal" href="declarative_mixins.html#orm-mixins-toplevel"><span class="std std-ref">mixins</span></a>, to define relationships that are to be
applied to different implementors of the class. It may also be used to
define dynamically generated column expressions and other Declarative
attributes.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">ProvidesUserMixin</span><span class="p">:</span>
    <span class="s2">&quot;A mixin that adds a &#39;user&#39; relationship to classes.&quot;</span>

    <span class="n">user_id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;user_table.id&quot;</span><span class="p">))</span>

    <span class="nd">@declared_attr</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">user</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Mapped</span><span class="p">[</span><span class="s2">&quot;User&quot;</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;User&quot;</span><span class="p">)</span></pre><div class="code-annotations-key"></div></div>
</div>
<p>When used with Declarative directives such as <code class="docutils literal notranslate"><span class="pre">__tablename__</span></code>, the
<a class="reference internal" href="#sqlalchemy.orm.declared_attr.directive" title="sqlalchemy.orm.declared_attr.directive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">declared_attr.directive()</span></code></a> modifier may be used which indicates
to <span class="target" id="index-2"></span><a class="pep reference external" href="https://peps.python.org/pep-0484/"><strong>PEP 484</strong></a> typing tools that the given method is not dealing with
<a class="reference internal" href="internals.html#sqlalchemy.orm.Mapped" title="sqlalchemy.orm.Mapped"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapped</span></code></a> attributes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">CreateTableName</span><span class="p">:</span>
    <span class="nd">@declared_attr</span><span class="o">.</span><span class="n">directive</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">__tablename__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span></pre><div class="code-annotations-key"></div></div>
</div>
<p><a class="reference internal" href="#sqlalchemy.orm.declared_attr" title="sqlalchemy.orm.declared_attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">declared_attr</span></code></a> can also be applied directly to mapped
classes, to allow for attributes that dynamically configure themselves
on subclasses when using mapped inheritance schemes.   Below
illustrates <a class="reference internal" href="#sqlalchemy.orm.declared_attr" title="sqlalchemy.orm.declared_attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">declared_attr</span></code></a> to create a dynamic scheme
for generating the <a class="reference internal" href="#sqlalchemy.orm.Mapper.params.polymorphic_identity" title="sqlalchemy.orm.Mapper"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Mapper.polymorphic_identity</span></code></a> parameter
for subclasses:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Employee</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;employee&quot;</span>

    <span class="n">id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">type</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>

    <span class="nd">@declared_attr</span><span class="o">.</span><span class="n">directive</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">__mapper_args__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="n">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;Employee&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s2">&quot;polymorphic_on&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
                <span class="s2">&quot;polymorphic_identity&quot;</span><span class="p">:</span> <span class="s2">&quot;Employee&quot;</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;polymorphic_identity&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="p">}</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Engineer</span><span class="p">(</span><span class="n">Employee</span><span class="p">):</span>
    <span class="k">pass</span></pre><div class="code-annotations-key"></div></div>
</div>
<p><a class="reference internal" href="#sqlalchemy.orm.declared_attr" title="sqlalchemy.orm.declared_attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">declared_attr</span></code></a> supports decorating functions that are
explicitly decorated with <code class="docutils literal notranslate"><span class="pre">&#64;classmethod</span></code>. This is never necessary from a
runtime perspective, however may be needed in order to support <span class="target" id="index-3"></span><a class="pep reference external" href="https://peps.python.org/pep-0484/"><strong>PEP 484</strong></a>
typing tools that don’t otherwise recognize the decorated function as
having class-level behaviors for the <code class="docutils literal notranslate"><span class="pre">cls</span></code> parameter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">SomethingMixin</span><span class="p">:</span>
    <span class="n">x</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]</span>
    <span class="n">y</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]</span>

    <span class="nd">@declared_attr</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">x_plus_y</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">column_property</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="bp">cls</span><span class="o">.</span><span class="n">y</span><span class="p">)</span></pre><div class="code-annotations-key"></div></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入: </span>- <a class="reference internal" href="#sqlalchemy.orm.declared_attr" title="sqlalchemy.orm.declared_attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">declared_attr</span></code></a> can accommodate a
function decorated with <code class="docutils literal notranslate"><span class="pre">&#64;classmethod</span></code> to help with <span class="target" id="index-4"></span><a class="pep reference external" href="https://peps.python.org/pep-0484/"><strong>PEP 484</strong></a>
integration where needed.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="declarative_mixins.html#orm-mixins-toplevel"><span class="std std-ref">使用 Mixins 组合映射层次结构</span></a> - Declarative Mixin documentation with
background on use patterns for <a class="reference internal" href="#sqlalchemy.orm.declared_attr" title="sqlalchemy.orm.declared_attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">declared_attr</span></code></a>.</p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.orm.declared_attr.cascading"><span class="sig-name descname">cascading</span></a>, <a class="reference internal" href="#sqlalchemy.orm.declared_attr.directive"><span class="sig-name descname">directive</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.orm.declared_attr" title="sqlalchemy.orm.declared_attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.orm.declared_attr</span></code></a> (<code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.base._MappedAttribute</span></code>, <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.decl_api._declared_attr_common</span></code>)</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.declared_attr.cascading">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.declared_attr"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.declared_attr.</span></code></a><span class="sig-name descname"><span class="pre">cascading</span></span><a class="headerlink" href="#sqlalchemy.orm.declared_attr.cascading" title="Link to this definition">¶</a></dt>
<dd><div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--1">中文</label><div class="tab-content docutils container">
<p>将 <a class="reference internal" href="#sqlalchemy.orm.declared_attr" title="sqlalchemy.orm.declared_attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">declared_attr</span></code></a> 标记为级联。</p>
<p>这是一个特殊用途的修饰符，表示在映射继承方案中，基于列或 MapperProperty 的声明属性应在每个映射子类中分别配置。</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p><a class="reference internal" href="#sqlalchemy.orm.declared_attr.cascading" title="sqlalchemy.orm.declared_attr.cascading"><code class="xref py py-attr docutils literal notranslate"><span class="pre">declared_attr.cascading</span></code></a> 修饰符有几个限制：</p>
<ul class="simple">
<li><p>该标志 <strong>仅</strong> 适用于在声明式混入类和 <code class="docutils literal notranslate"><span class="pre">__abstract__</span></code> 类中使用 <a class="reference internal" href="#sqlalchemy.orm.declared_attr" title="sqlalchemy.orm.declared_attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">declared_attr</span></code></a>；目前直接在映射类上使用时无效。</p></li>
<li><p>该标志 <strong>仅</strong> 适用于正常命名的属性，例如，不适用于任何特殊的下划线属性，如 <code class="docutils literal notranslate"><span class="pre">__tablename__</span></code>。在这些属性上无效。</p></li>
<li><p>该标志当前 <strong>不允许</strong> 在类层次结构中进一步覆盖；如果子类尝试覆盖该属性，将发出警告并跳过覆盖的属性。这是一个希望在某个时候解决的限制。</p></li>
</ul>
</div>
<p>如下所示，MyClass 和 MySubClass 都会建立一个独特的 <code class="docutils literal notranslate"><span class="pre">id</span></code> 列对象:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">HasIdMixin</span><span class="p">:</span>
    <span class="nd">@declared_attr</span><span class="o">.</span><span class="n">cascading</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">has_inherited_table</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;myclass.id&quot;</span><span class="p">),</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">HasIdMixin</span><span class="p">,</span> <span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;myclass&quot;</span>
    <span class="c1"># ...</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MySubClass</span><span class="p">(</span><span class="n">MyClass</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; &quot;&quot;&quot;</span>

    <span class="c1"># ...</span></pre><div class="code-annotations-key"></div></div>
</div>
<p>上述配置的行为是 <code class="docutils literal notranslate"><span class="pre">MySubClass</span></code> 将引用其自身的 <code class="docutils literal notranslate"><span class="pre">id</span></code> 列以及 <code class="docutils literal notranslate"><span class="pre">MyClass</span></code> 下的同名属性 <code class="docutils literal notranslate"><span class="pre">some_id</span></code>。</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="extensions/declarative/inheritance.html#declarative-inheritance"><span class="std std-ref">Declarative Inheritance</span></a></p>
<p><a class="reference internal" href="declarative_mixins.html#mixin-inheritance-columns"><span class="std std-ref">使用 _orm.declared_attr() 生成特定于表的继承列</span></a></p>
</div>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--2">英文</label><div class="tab-content docutils container">
<p>Mark a <a class="reference internal" href="#sqlalchemy.orm.declared_attr" title="sqlalchemy.orm.declared_attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">declared_attr</span></code></a> as cascading.</p>
<p>This is a special-use modifier which indicates that a column
or MapperProperty-based declared attribute should be configured
distinctly per mapped subclass, within a mapped-inheritance scenario.</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>The <a class="reference internal" href="#sqlalchemy.orm.declared_attr.cascading" title="sqlalchemy.orm.declared_attr.cascading"><code class="xref py py-attr docutils literal notranslate"><span class="pre">declared_attr.cascading</span></code></a> modifier has several
limitations:</p>
<ul class="simple">
<li><p>The flag <strong>only</strong> applies to the use of <a class="reference internal" href="#sqlalchemy.orm.declared_attr" title="sqlalchemy.orm.declared_attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">declared_attr</span></code></a>
on declarative mixin classes and <code class="docutils literal notranslate"><span class="pre">__abstract__</span></code> classes; it
currently has no effect when used on a mapped class directly.</p></li>
<li><p>The flag <strong>only</strong> applies to normally-named attributes, e.g.
not any special underscore attributes such as <code class="docutils literal notranslate"><span class="pre">__tablename__</span></code>.
On these attributes it has <strong>no</strong> effect.</p></li>
<li><p>The flag currently <strong>does not allow further overrides</strong> down
the class hierarchy; if a subclass tries to override the
attribute, a warning is emitted and the overridden attribute
is skipped.  This is a limitation that it is hoped will be
resolved at some point.</p></li>
</ul>
</div>
<p>Below, both MyClass as well as MySubClass will have a distinct
<code class="docutils literal notranslate"><span class="pre">id</span></code> Column object established:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">HasIdMixin</span><span class="p">:</span>
    <span class="nd">@declared_attr</span><span class="o">.</span><span class="n">cascading</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">has_inherited_table</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;myclass.id&quot;</span><span class="p">),</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">HasIdMixin</span><span class="p">,</span> <span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;myclass&quot;</span>
    <span class="c1"># ...</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MySubClass</span><span class="p">(</span><span class="n">MyClass</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; &quot;&quot;&quot;</span>

    <span class="c1"># ...</span></pre><div class="code-annotations-key"></div></div>
</div>
<p>The behavior of the above configuration is that <code class="docutils literal notranslate"><span class="pre">MySubClass</span></code>
will refer to both its own <code class="docutils literal notranslate"><span class="pre">id</span></code> column as well as that of
<code class="docutils literal notranslate"><span class="pre">MyClass</span></code> underneath the attribute named <code class="docutils literal notranslate"><span class="pre">some_id</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="extensions/declarative/inheritance.html#declarative-inheritance"><span class="std std-ref">Declarative Inheritance</span></a></p>
<p><a class="reference internal" href="declarative_mixins.html#mixin-inheritance-columns"><span class="std std-ref">使用 _orm.declared_attr() 生成特定于表的继承列</span></a></p>
</div>
</div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.declared_attr.directive">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.declared_attr"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.declared_attr.</span></code></a><span class="sig-name descname"><span class="pre">directive</span></span><a class="headerlink" href="#sqlalchemy.orm.declared_attr.directive" title="Link to this definition">¶</a></dt>
<dd><div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--1-input--1" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--1">中文</label><div class="tab-content docutils container">
<p>将 <a class="reference internal" href="#sqlalchemy.orm.declared_attr" title="sqlalchemy.orm.declared_attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">declared_attr</span></code></a> 标记为装饰声明式指令，如 <code class="docutils literal notranslate"><span class="pre">__tablename__</span></code> 或 <code class="docutils literal notranslate"><span class="pre">__mapper_args__</span></code>。</p>
<p><a class="reference internal" href="#sqlalchemy.orm.declared_attr.directive" title="sqlalchemy.orm.declared_attr.directive"><code class="xref py py-attr docutils literal notranslate"><span class="pre">declared_attr.directive</span></code></a> 的目的是严格支持 <span class="target" id="index-5"></span><a class="pep reference external" href="https://peps.python.org/pep-0484/"><strong>PEP 484</strong></a> 类型工具，允许装饰的函数具有 <strong>不</strong> 使用 <a class="reference internal" href="internals.html#sqlalchemy.orm.Mapped" title="sqlalchemy.orm.Mapped"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapped</span></code></a> 泛型类的返回类型，这通常在 <a class="reference internal" href="#sqlalchemy.orm.declared_attr" title="sqlalchemy.orm.declared_attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">declared_attr</span></code></a> 用于列和映射属性时是这样的。在运行时，<a class="reference internal" href="#sqlalchemy.orm.declared_attr.directive" title="sqlalchemy.orm.declared_attr.directive"><code class="xref py py-attr docutils literal notranslate"><span class="pre">declared_attr.directive</span></code></a> 返回未修改的 <a class="reference internal" href="#sqlalchemy.orm.declared_attr" title="sqlalchemy.orm.declared_attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">declared_attr</span></code></a> 类。</p>
<p>例如:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">CreateTableName</span><span class="p">:</span>
    <span class="nd">@declared_attr</span><span class="o">.</span><span class="n">directive</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">__tablename__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span></pre><div class="code-annotations-key"></div></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="declarative_mixins.html#orm-mixins-toplevel"><span class="std std-ref">使用 Mixins 组合映射层次结构</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.declared_attr" title="sqlalchemy.orm.declared_attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">declared_attr</span></code></a></p>
</div>
</div>
<input class="tab-input" id="tab-set--1-input--2" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--2">英文</label><div class="tab-content docutils container">
<p>Mark a <a class="reference internal" href="#sqlalchemy.orm.declared_attr" title="sqlalchemy.orm.declared_attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">declared_attr</span></code></a> as decorating a Declarative
directive such as <code class="docutils literal notranslate"><span class="pre">__tablename__</span></code> or <code class="docutils literal notranslate"><span class="pre">__mapper_args__</span></code>.</p>
<p>The purpose of <a class="reference internal" href="#sqlalchemy.orm.declared_attr.directive" title="sqlalchemy.orm.declared_attr.directive"><code class="xref py py-attr docutils literal notranslate"><span class="pre">declared_attr.directive</span></code></a> is strictly to
support <span class="target" id="index-6"></span><a class="pep reference external" href="https://peps.python.org/pep-0484/"><strong>PEP 484</strong></a> typing tools, by allowing the decorated function
to have a return type that is <strong>not</strong> using the <a class="reference internal" href="internals.html#sqlalchemy.orm.Mapped" title="sqlalchemy.orm.Mapped"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapped</span></code></a>
generic class, as would normally be the case when <a class="reference internal" href="#sqlalchemy.orm.declared_attr" title="sqlalchemy.orm.declared_attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">declared_attr</span></code></a>
is used for columns and mapped properties.  At
runtime, the <a class="reference internal" href="#sqlalchemy.orm.declared_attr.directive" title="sqlalchemy.orm.declared_attr.directive"><code class="xref py py-attr docutils literal notranslate"><span class="pre">declared_attr.directive</span></code></a> returns the
<a class="reference internal" href="#sqlalchemy.orm.declared_attr" title="sqlalchemy.orm.declared_attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">declared_attr</span></code></a> class unmodified.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">CreateTableName</span><span class="p">:</span>
    <span class="nd">@declared_attr</span><span class="o">.</span><span class="n">directive</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">__tablename__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span></pre><div class="code-annotations-key"></div></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="declarative_mixins.html#orm-mixins-toplevel"><span class="std std-ref">使用 Mixins 组合映射层次结构</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.declared_attr" title="sqlalchemy.orm.declared_attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">declared_attr</span></code></a></p>
</div>
</div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.orm.DeclarativeBase">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">DeclarativeBase</span></span><a class="headerlink" href="#sqlalchemy.orm.DeclarativeBase" title="Link to this definition">¶</a></dt>
<dd><p>Base class used for declarative class definitions.</p>
<p>The <a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase" title="sqlalchemy.orm.DeclarativeBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeclarativeBase</span></code></a> allows for the creation of new
declarative bases in such a way that is compatible with type checkers:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">DeclarativeBase</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Base</span><span class="p">(</span><span class="n">DeclarativeBase</span><span class="p">):</span>
    <span class="k">pass</span></pre><div class="code-non-annotations-key"></div></div>
</div>
<p>The above <code class="docutils literal notranslate"><span class="pre">Base</span></code> class is now usable as the base for new declarative
mappings.  The superclass makes use of the <code class="docutils literal notranslate"><span class="pre">__init_subclass__()</span></code>
method to set up new classes and metaclasses aren’t used.</p>
<p>When first used, the <a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase" title="sqlalchemy.orm.DeclarativeBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeclarativeBase</span></code></a> class instantiates a new
<a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a> to be used with the base, assuming one was not
provided explicitly. The <a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase" title="sqlalchemy.orm.DeclarativeBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeclarativeBase</span></code></a> class supports
class-level attributes which act as parameters for the construction of this
registry; such as to indicate a specific <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>
collection as well as a specific value for
<a class="reference internal" href="#sqlalchemy.orm.registry.params.type_annotation_map" title="sqlalchemy.orm.registry"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">registry.type_annotation_map</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Annotated</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">BigInteger</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">MetaData</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">String</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">DeclarativeBase</span>

<span class="n">bigint</span> <span class="o">=</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">int</span><span class="p">,</span> <span class="s2">&quot;bigint&quot;</span><span class="p">]</span>
<span class="n">my_metadata</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Base</span><span class="p">(</span><span class="n">DeclarativeBase</span><span class="p">):</span>
    <span class="n">metadata</span> <span class="o">=</span> <span class="n">my_metadata</span>
    <span class="n">type_annotation_map</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">str</span><span class="p">:</span> <span class="n">String</span><span class="p">()</span><span class="o">.</span><span class="n">with_variant</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="s2">&quot;mysql&quot;</span><span class="p">,</span> <span class="s2">&quot;mariadb&quot;</span><span class="p">),</span>
        <span class="n">bigint</span><span class="p">:</span> <span class="n">BigInteger</span><span class="p">(),</span>
    <span class="p">}</span></pre><div class="code-annotations-key"></div></div>
</div>
<p>Class-level attributes which may be specified include:</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.DeclarativeBase.params.metadata"></span><strong>metadata</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.DeclarativeBase.params.metadata">¶</a> – optional <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> collection.
If a <a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a> is constructed automatically, this
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> collection will be used to construct it.
Otherwise, the local <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> collection will supercede
that used by an existing <a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a> passed using the
<a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase.params.registry" title="sqlalchemy.orm.DeclarativeBase"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">DeclarativeBase.registry</span></code></a> parameter.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.DeclarativeBase.params.type_annotation_map"></span><strong>type_annotation_map</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.DeclarativeBase.params.type_annotation_map">¶</a> – optional type annotation map that will be
passed to the <a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a> as
<a class="reference internal" href="#sqlalchemy.orm.registry.params.type_annotation_map" title="sqlalchemy.orm.registry"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">registry.type_annotation_map</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.DeclarativeBase.params.registry"></span><strong>registry</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.DeclarativeBase.params.registry">¶</a> – supply a pre-existing <a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a> directly.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入: </span>Added <a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase" title="sqlalchemy.orm.DeclarativeBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeclarativeBase</span></code></a>, so that declarative
base classes may be constructed in such a way that is also recognized
by <span class="target" id="index-7"></span><a class="pep reference external" href="https://peps.python.org/pep-0484/"><strong>PEP 484</strong></a> type checkers.   As a result, <a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase" title="sqlalchemy.orm.DeclarativeBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeclarativeBase</span></code></a>
and other subclassing-oriented APIs should be seen as
superseding previous “class returned by a function” APIs, namely
<a class="reference internal" href="#sqlalchemy.orm.declarative_base" title="sqlalchemy.orm.declarative_base"><code class="xref py py-func docutils literal notranslate"><span class="pre">declarative_base()</span></code></a> and <a class="reference internal" href="#sqlalchemy.orm.registry.generate_base" title="sqlalchemy.orm.registry.generate_base"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.generate_base()</span></code></a>,
where the base class returned cannot be recognized by type checkers
without using plugins.</p>
</div>
<p><strong>__init__ behavior</strong></p>
<p>In a plain Python class, the base-most <code class="docutils literal notranslate"><span class="pre">__init__()</span></code> method in the class
hierarchy is <code class="docutils literal notranslate"><span class="pre">object.__init__()</span></code>, which accepts no arguments. However,
when the <a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase" title="sqlalchemy.orm.DeclarativeBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeclarativeBase</span></code></a> subclass is first declared, the
class is given an <code class="docutils literal notranslate"><span class="pre">__init__()</span></code> method that links to the
<a class="reference internal" href="#sqlalchemy.orm.registry.params.constructor" title="sqlalchemy.orm.registry"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">registry.constructor</span></code></a> constructor function, if no
<code class="docutils literal notranslate"><span class="pre">__init__()</span></code> method is already present; this is the usual declarative
constructor that will assign keyword arguments as attributes on the
instance, assuming those attributes are established at the class level
(i.e. are mapped, or are linked to a descriptor). This constructor is
<strong>never accessed by a mapped class without being called explicitly via
super()</strong>, as mapped classes are themselves given an <code class="docutils literal notranslate"><span class="pre">__init__()</span></code> method
directly which calls <a class="reference internal" href="#sqlalchemy.orm.registry.params.constructor" title="sqlalchemy.orm.registry"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">registry.constructor</span></code></a>, so in the
default case works independently of what the base-most <code class="docutils literal notranslate"><span class="pre">__init__()</span></code>
method does.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 2.0.1 版本发生变更: </span><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase" title="sqlalchemy.orm.DeclarativeBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeclarativeBase</span></code></a> has a default
constructor that links to <a class="reference internal" href="#sqlalchemy.orm.registry.params.constructor" title="sqlalchemy.orm.registry"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">registry.constructor</span></code></a> by
default, so that calls to <code class="docutils literal notranslate"><span class="pre">super().__init__()</span></code> can access this
constructor. Previously, due to an implementation mistake, this default
constructor was missing, and calling <code class="docutils literal notranslate"><span class="pre">super().__init__()</span></code> would invoke
<code class="docutils literal notranslate"><span class="pre">object.__init__()</span></code>.</p>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase" title="sqlalchemy.orm.DeclarativeBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeclarativeBase</span></code></a> subclass may also declare an explicit
<code class="docutils literal notranslate"><span class="pre">__init__()</span></code> method which will replace the use of the
<a class="reference internal" href="#sqlalchemy.orm.registry.params.constructor" title="sqlalchemy.orm.registry"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">registry.constructor</span></code></a> function at this level:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Base</span><span class="p">(</span><span class="n">DeclarativeBase</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">id</span></pre><div class="code-non-annotations-key"></div></div>
</div>
<p>Mapped classes still will not invoke this constructor implicitly; it
remains only accessible by calling <code class="docutils literal notranslate"><span class="pre">super().__init__()</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="n">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">id</span><span class="o">=</span><span class="n">id</span><span class="p">)</span></pre><div class="code-non-annotations-key"></div></div>
</div>
<p>Note that this is a different behavior from what functions like the legacy
<a class="reference internal" href="#sqlalchemy.orm.declarative_base" title="sqlalchemy.orm.declarative_base"><code class="xref py py-func docutils literal notranslate"><span class="pre">declarative_base()</span></code></a> would do; the base created by those functions
would always install <a class="reference internal" href="#sqlalchemy.orm.registry.params.constructor" title="sqlalchemy.orm.registry"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">registry.constructor</span></code></a> for
<code class="docutils literal notranslate"><span class="pre">__init__()</span></code>.</p>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase.__mapper__"><span class="sig-name descname">__mapper__</span></a>, <a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase.__mapper_args__"><span class="sig-name descname">__mapper_args__</span></a>, <a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase.__table__"><span class="sig-name descname">__table__</span></a>, <a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase.__table_args__"><span class="sig-name descname">__table_args__</span></a>, <a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase.__tablename__"><span class="sig-name descname">__tablename__</span></a>, <a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase.metadata"><span class="sig-name descname">metadata</span></a>, <a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase.registry"><span class="sig-name descname">registry</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase" title="sqlalchemy.orm.DeclarativeBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.orm.DeclarativeBase</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.inspection.Inspectable</span></code>)</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.DeclarativeBase.__mapper__">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.DeclarativeBase.</span></code></a><span class="sig-name descname"><span class="pre">__mapper__</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.mapper.Mapper"><span class="pre">Mapper</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.orm.DeclarativeBase.__mapper__" title="Link to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> object to which a particular class is
mapped.</p>
<p>May also be acquired using <a class="reference internal" href="../core/inspection.html#sqlalchemy.inspect" title="sqlalchemy.inspect"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect()</span></code></a>, e.g.
<code class="docutils literal notranslate"><span class="pre">inspect(klass)</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.DeclarativeBase.__mapper_args__">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.DeclarativeBase.</span></code></a><span class="sig-name descname"><span class="pre">__mapper_args__</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Any</span></em><a class="headerlink" href="#sqlalchemy.orm.DeclarativeBase.__mapper_args__" title="Link to this definition">¶</a></dt>
<dd><p>Dictionary of arguments which will be passed to the
<a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> constructor.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="declarative_config.html#orm-declarative-mapper-options"><span class="std std-ref">使用声明式映射器配置选项</span></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.DeclarativeBase.__table__">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.DeclarativeBase.</span></code></a><span class="sig-name descname"><span class="pre">__table__</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.FromClause" title="sqlalchemy.sql.selectable.FromClause"><span class="pre">FromClause</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.orm.DeclarativeBase.__table__" title="Link to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.FromClause" title="sqlalchemy.sql.expression.FromClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">FromClause</span></code></a> to which a particular subclass is
mapped.</p>
<p>This is usually an instance of <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> but may also
refer to other kinds of <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.FromClause" title="sqlalchemy.sql.expression.FromClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">FromClause</span></code></a> such as
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Subquery" title="sqlalchemy.sql.expression.Subquery"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subquery</span></code></a>, depending on how the class is mapped.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="declarative_tables.html#orm-declarative-metadata"><span class="std std-ref">访问表和元数据</span></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.DeclarativeBase.__table_args__">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.DeclarativeBase.</span></code></a><span class="sig-name descname"><span class="pre">__table_args__</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Any</span></em><a class="headerlink" href="#sqlalchemy.orm.DeclarativeBase.__table_args__" title="Link to this definition">¶</a></dt>
<dd><p>A dictionary or tuple of arguments that will be passed to the
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> constructor.  See
<a class="reference internal" href="declarative_tables.html#orm-declarative-table-configuration"><span class="std std-ref">声明性表配置</span></a>
for background on the specific structure of this collection.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="declarative_tables.html#orm-declarative-table-configuration"><span class="std std-ref">声明性表配置</span></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.DeclarativeBase.__tablename__">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.DeclarativeBase.</span></code></a><span class="sig-name descname"><span class="pre">__tablename__</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Any</span></em><a class="headerlink" href="#sqlalchemy.orm.DeclarativeBase.__tablename__" title="Link to this definition">¶</a></dt>
<dd><p>String name to assign to the generated
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> object, if not specified directly via
<a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase.__table__" title="sqlalchemy.orm.DeclarativeBase.__table__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DeclarativeBase.__table__</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="declarative_tables.html#orm-declarative-table"><span class="std std-ref">带有 mapped_column() 的声明表</span></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.DeclarativeBase.metadata">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.DeclarativeBase.</span></code></a><span class="sig-name descname"><span class="pre">metadata</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.sql.schema.MetaData"><span class="pre">MetaData</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.orm.DeclarativeBase.metadata" title="Link to this definition">¶</a></dt>
<dd><p>Refers to the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> collection that will be used
for new <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="declarative_tables.html#orm-declarative-metadata"><span class="std std-ref">访问表和元数据</span></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.DeclarativeBase.registry">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.DeclarativeBase.</span></code></a><span class="sig-name descname"><span class="pre">registry</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.decl_api.registry"><span class="pre">registry</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.orm.DeclarativeBase.registry" title="Link to this definition">¶</a></dt>
<dd><p>Refers to the <a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a> in use where new
<a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> objects will be associated.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.orm.DeclarativeBaseNoMeta">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">DeclarativeBaseNoMeta</span></span><a class="headerlink" href="#sqlalchemy.orm.DeclarativeBaseNoMeta" title="Link to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase" title="sqlalchemy.orm.DeclarativeBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeclarativeBase</span></code></a>, but does not use a metaclass
to intercept new attributes.</p>
<p>The <a class="reference internal" href="#sqlalchemy.orm.DeclarativeBaseNoMeta" title="sqlalchemy.orm.DeclarativeBaseNoMeta"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeclarativeBaseNoMeta</span></code></a> base may be used when use of
custom metaclasses is desirable.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBaseNoMeta.__mapper__"><span class="sig-name descname">__mapper__</span></a>, <a class="reference internal" href="#sqlalchemy.orm.DeclarativeBaseNoMeta.__mapper_args__"><span class="sig-name descname">__mapper_args__</span></a>, <a class="reference internal" href="#sqlalchemy.orm.DeclarativeBaseNoMeta.__table__"><span class="sig-name descname">__table__</span></a>, <a class="reference internal" href="#sqlalchemy.orm.DeclarativeBaseNoMeta.__table_args__"><span class="sig-name descname">__table_args__</span></a>, <a class="reference internal" href="#sqlalchemy.orm.DeclarativeBaseNoMeta.__tablename__"><span class="sig-name descname">__tablename__</span></a>, <a class="reference internal" href="#sqlalchemy.orm.DeclarativeBaseNoMeta.metadata"><span class="sig-name descname">metadata</span></a>, <a class="reference internal" href="#sqlalchemy.orm.DeclarativeBaseNoMeta.registry"><span class="sig-name descname">registry</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.orm.DeclarativeBaseNoMeta" title="sqlalchemy.orm.DeclarativeBaseNoMeta"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.orm.DeclarativeBaseNoMeta</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.inspection.Inspectable</span></code>)</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.DeclarativeBaseNoMeta.__mapper__">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBaseNoMeta"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.DeclarativeBaseNoMeta.</span></code></a><span class="sig-name descname"><span class="pre">__mapper__</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.mapper.Mapper"><span class="pre">Mapper</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.orm.DeclarativeBaseNoMeta.__mapper__" title="Link to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> object to which a particular class is
mapped.</p>
<p>May also be acquired using <a class="reference internal" href="../core/inspection.html#sqlalchemy.inspect" title="sqlalchemy.inspect"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect()</span></code></a>, e.g.
<code class="docutils literal notranslate"><span class="pre">inspect(klass)</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.DeclarativeBaseNoMeta.__mapper_args__">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBaseNoMeta"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.DeclarativeBaseNoMeta.</span></code></a><span class="sig-name descname"><span class="pre">__mapper_args__</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Any</span></em><a class="headerlink" href="#sqlalchemy.orm.DeclarativeBaseNoMeta.__mapper_args__" title="Link to this definition">¶</a></dt>
<dd><p>Dictionary of arguments which will be passed to the
<a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> constructor.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="declarative_config.html#orm-declarative-mapper-options"><span class="std std-ref">使用声明式映射器配置选项</span></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.DeclarativeBaseNoMeta.__table__">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBaseNoMeta"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.DeclarativeBaseNoMeta.</span></code></a><span class="sig-name descname"><span class="pre">__table__</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.FromClause" title="sqlalchemy.sql.selectable.FromClause"><span class="pre">FromClause</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.orm.DeclarativeBaseNoMeta.__table__" title="Link to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.FromClause" title="sqlalchemy.sql.expression.FromClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">FromClause</span></code></a> to which a particular subclass is
mapped.</p>
<p>This is usually an instance of <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> but may also
refer to other kinds of <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.FromClause" title="sqlalchemy.sql.expression.FromClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">FromClause</span></code></a> such as
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Subquery" title="sqlalchemy.sql.expression.Subquery"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subquery</span></code></a>, depending on how the class is mapped.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="declarative_tables.html#orm-declarative-metadata"><span class="std std-ref">访问表和元数据</span></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.DeclarativeBaseNoMeta.__table_args__">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBaseNoMeta"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.DeclarativeBaseNoMeta.</span></code></a><span class="sig-name descname"><span class="pre">__table_args__</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Any</span></em><a class="headerlink" href="#sqlalchemy.orm.DeclarativeBaseNoMeta.__table_args__" title="Link to this definition">¶</a></dt>
<dd><p>A dictionary or tuple of arguments that will be passed to the
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> constructor.  See
<a class="reference internal" href="declarative_tables.html#orm-declarative-table-configuration"><span class="std std-ref">声明性表配置</span></a>
for background on the specific structure of this collection.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="declarative_tables.html#orm-declarative-table-configuration"><span class="std std-ref">声明性表配置</span></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.DeclarativeBaseNoMeta.__tablename__">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBaseNoMeta"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.DeclarativeBaseNoMeta.</span></code></a><span class="sig-name descname"><span class="pre">__tablename__</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Any</span></em><a class="headerlink" href="#sqlalchemy.orm.DeclarativeBaseNoMeta.__tablename__" title="Link to this definition">¶</a></dt>
<dd><p>String name to assign to the generated
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> object, if not specified directly via
<a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase.__table__" title="sqlalchemy.orm.DeclarativeBase.__table__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DeclarativeBase.__table__</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="declarative_tables.html#orm-declarative-table"><span class="std std-ref">带有 mapped_column() 的声明表</span></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.DeclarativeBaseNoMeta.metadata">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBaseNoMeta"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.DeclarativeBaseNoMeta.</span></code></a><span class="sig-name descname"><span class="pre">metadata</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.sql.schema.MetaData"><span class="pre">MetaData</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.orm.DeclarativeBaseNoMeta.metadata" title="Link to this definition">¶</a></dt>
<dd><p>Refers to the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> collection that will be used
for new <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="declarative_tables.html#orm-declarative-metadata"><span class="std std-ref">访问表和元数据</span></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.DeclarativeBaseNoMeta.registry">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBaseNoMeta"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.DeclarativeBaseNoMeta.</span></code></a><span class="sig-name descname"><span class="pre">registry</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.decl_api.registry"><span class="pre">registry</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.orm.DeclarativeBaseNoMeta.registry" title="Link to this definition">¶</a></dt>
<dd><p>Refers to the <a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a> in use where new
<a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> objects will be associated.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.has_inherited_table">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">has_inherited_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.orm.has_inherited_table" title="Link to this definition">¶</a></dt>
<dd><p>Given a class, return True if any of the classes it inherits from has a
mapped table, otherwise return False.</p>
<p>This is used in declarative mixins to build attributes that behave
differently for the base class vs. a subclass in an inheritance
hierarchy.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="declarative_mixins.html#decl-mixin-inheritance"><span class="std std-ref">使用 Mixins 和基类以及映射继承模式</span></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.synonym_for">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">synonym_for</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">map_column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="internals.html#sqlalchemy.orm.Synonym" title="sqlalchemy.orm.descriptor_props.Synonym"><span class="pre">Synonym</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.synonym_for" title="Link to this definition">¶</a></dt>
<dd><p>Decorator that produces an <a class="reference internal" href="mapped_attributes.html#sqlalchemy.orm.synonym" title="sqlalchemy.orm.synonym"><code class="xref py py-func docutils literal notranslate"><span class="pre">synonym()</span></code></a>
attribute in conjunction with a Python descriptor.</p>
<p>The function being decorated is passed to <a class="reference internal" href="mapped_attributes.html#sqlalchemy.orm.synonym" title="sqlalchemy.orm.synonym"><code class="xref py py-func docutils literal notranslate"><span class="pre">synonym()</span></code></a> as the
<a class="reference internal" href="mapped_attributes.html#sqlalchemy.orm.synonym.params.descriptor" title="sqlalchemy.orm.synonym"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">synonym.descriptor</span></code></a> parameter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;my_table&quot;</span>

    <span class="n">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">_job_status</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;job_status&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>

    <span class="nd">@synonym_for</span><span class="p">(</span><span class="s2">&quot;job_status&quot;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">job_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Status: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_status</span></pre><div class="code-non-annotations-key"></div></div>
</div>
<p>The <a class="reference internal" href="mapped_attributes.html#mapper-hybrids"><span class="std std-ref">hybrid properties</span></a> feature of SQLAlchemy
is typically preferred instead of synonyms, which is a more legacy
feature.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="mapped_attributes.html#synonyms"><span class="std std-ref">同义词</span></a> - Overview of synonyms</p>
<p><a class="reference internal" href="mapped_attributes.html#sqlalchemy.orm.synonym" title="sqlalchemy.orm.synonym"><code class="xref py py-func docutils literal notranslate"><span class="pre">synonym()</span></code></a> - the mapper-level function</p>
<p><a class="reference internal" href="mapped_attributes.html#mapper-hybrids"><span class="std std-ref">使用描述符和混合</span></a> - The Hybrid Attribute extension provides an
updated approach to augmenting attribute behavior more flexibly than
can be achieved with synonyms.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.object_mapper">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">object_mapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_T</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><span class="pre">Mapper</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.object_mapper" title="Link to this definition">¶</a></dt>
<dd><p>Given an object, return the primary Mapper associated with the object
instance.</p>
<p>Raises <a class="reference internal" href="exceptions.html#sqlalchemy.orm.exc.UnmappedInstanceError" title="sqlalchemy.orm.exc.UnmappedInstanceError"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.orm.exc.UnmappedInstanceError</span></code></a>
if no mapping is configured.</p>
<p>This function is available via the inspection system as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inspect</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span><span class="o">.</span><span class="n">mapper</span></pre></div>
</div>
<p>Using the inspection system will raise
<a class="reference internal" href="../core/exceptions.html#sqlalchemy.exc.NoInspectionAvailable" title="sqlalchemy.exc.NoInspectionAvailable"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.exc.NoInspectionAvailable</span></code></a> if the instance is
not part of a mapping.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.class_mapper">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">class_mapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">class_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">configure</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><span class="pre">Mapper</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.class_mapper" title="Link to this definition">¶</a></dt>
<dd><p>Given a class, return the primary <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> associated
with the key.</p>
<p>Raises <a class="reference internal" href="exceptions.html#sqlalchemy.orm.exc.UnmappedClassError" title="sqlalchemy.orm.exc.UnmappedClassError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UnmappedClassError</span></code></a> if no mapping is configured
on the given class, or <a class="reference internal" href="../core/exceptions.html#sqlalchemy.exc.ArgumentError" title="sqlalchemy.exc.ArgumentError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ArgumentError</span></code></a> if a non-class
object is passed.</p>
<p>Equivalent functionality is available via the <a class="reference internal" href="../core/inspection.html#sqlalchemy.inspect" title="sqlalchemy.inspect"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect()</span></code></a>
function as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inspect</span><span class="p">(</span><span class="n">some_mapped_class</span><span class="p">)</span></pre></div>
</div>
<p>Using the inspection system will raise
<a class="reference internal" href="../core/exceptions.html#sqlalchemy.exc.NoInspectionAvailable" title="sqlalchemy.exc.NoInspectionAvailable"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.exc.NoInspectionAvailable</span></code></a> if the class is not mapped.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.configure_mappers">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">configure_mappers</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.configure_mappers" title="Link to this definition">¶</a></dt>
<dd><p>Initialize the inter-mapper relationships of all mappers that
have been constructed thus far across all <a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a>
collections.</p>
<p>The configure step is used to reconcile and initialize the
<a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> linkages between mapped classes, as well as to
invoke configuration events such as the
<a class="reference internal" href="events.html#sqlalchemy.orm.MapperEvents.before_configured" title="sqlalchemy.orm.MapperEvents.before_configured"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MapperEvents.before_configured()</span></code></a> and
<a class="reference internal" href="events.html#sqlalchemy.orm.MapperEvents.after_configured" title="sqlalchemy.orm.MapperEvents.after_configured"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MapperEvents.after_configured()</span></code></a>, which may be used by ORM
extensions or user-defined extension hooks.</p>
<p>Mapper configuration is normally invoked automatically, the first time
mappings from a particular <a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a> are used, as well as
whenever mappings are used and additional not-yet-configured mappers have
been constructed. The automatic configuration process however is local only
to the <a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a> involving the target mapper and any related
<a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a> objects which it may depend on; this is
equivalent to invoking the <a class="reference internal" href="#sqlalchemy.orm.registry.configure" title="sqlalchemy.orm.registry.configure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.configure()</span></code></a> method
on a particular <a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a>.</p>
<p>By contrast, the <a class="reference internal" href="#sqlalchemy.orm.configure_mappers" title="sqlalchemy.orm.configure_mappers"><code class="xref py py-func docutils literal notranslate"><span class="pre">configure_mappers()</span></code></a> function will invoke the
configuration process on all <a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a> objects that
exist in memory, and may be useful for scenarios where many individual
<a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a> objects that are nonetheless interrelated are
in use.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.4 版本发生变更: </span>As of SQLAlchemy 1.4.0b2, this function works on a
per-<a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a> basis, locating all <a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a>
objects present and invoking the <a class="reference internal" href="#sqlalchemy.orm.registry.configure" title="sqlalchemy.orm.registry.configure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.configure()</span></code></a> method
on each. The <a class="reference internal" href="#sqlalchemy.orm.registry.configure" title="sqlalchemy.orm.registry.configure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.configure()</span></code></a> method may be preferred to
limit the configuration of mappers to those local to a particular
<a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a> and/or declarative base class.</p>
</div>
<p>Points at which automatic configuration is invoked include when a mapped
class is instantiated into an instance, as well as when ORM queries
are emitted using <a class="reference internal" href="session_api.html#sqlalchemy.orm.Session.query" title="sqlalchemy.orm.Session.query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.query()</span></code></a> or <a class="reference internal" href="session_api.html#sqlalchemy.orm.Session.execute" title="sqlalchemy.orm.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a>
with an ORM-enabled statement.</p>
<p>The mapper configure process, whether invoked by
<a class="reference internal" href="#sqlalchemy.orm.configure_mappers" title="sqlalchemy.orm.configure_mappers"><code class="xref py py-func docutils literal notranslate"><span class="pre">configure_mappers()</span></code></a> or from <a class="reference internal" href="#sqlalchemy.orm.registry.configure" title="sqlalchemy.orm.registry.configure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.configure()</span></code></a>,
provides several event hooks that can be used to augment the mapper
configuration step. These hooks include:</p>
<ul class="simple">
<li><p><a class="reference internal" href="events.html#sqlalchemy.orm.MapperEvents.before_configured" title="sqlalchemy.orm.MapperEvents.before_configured"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MapperEvents.before_configured()</span></code></a> - called once before
<a class="reference internal" href="#sqlalchemy.orm.configure_mappers" title="sqlalchemy.orm.configure_mappers"><code class="xref py py-func docutils literal notranslate"><span class="pre">configure_mappers()</span></code></a> or <a class="reference internal" href="#sqlalchemy.orm.registry.configure" title="sqlalchemy.orm.registry.configure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.configure()</span></code></a> does any
work; this can be used to establish additional options, properties, or
related mappings before the operation proceeds.</p></li>
<li><p><a class="reference internal" href="events.html#sqlalchemy.orm.MapperEvents.mapper_configured" title="sqlalchemy.orm.MapperEvents.mapper_configured"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MapperEvents.mapper_configured()</span></code></a> - called as each individual
<a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> is configured within the process; will include all
mapper state except for backrefs set up by other mappers that are still
to be configured.</p></li>
<li><p><a class="reference internal" href="events.html#sqlalchemy.orm.MapperEvents.after_configured" title="sqlalchemy.orm.MapperEvents.after_configured"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MapperEvents.after_configured()</span></code></a> - called once after
<a class="reference internal" href="#sqlalchemy.orm.configure_mappers" title="sqlalchemy.orm.configure_mappers"><code class="xref py py-func docutils literal notranslate"><span class="pre">configure_mappers()</span></code></a> or <a class="reference internal" href="#sqlalchemy.orm.registry.configure" title="sqlalchemy.orm.registry.configure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.configure()</span></code></a> is
complete; at this stage, all <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> objects that fall
within the scope of the configuration operation will be fully configured.
Note that the calling application may still have other mappings that
haven’t been produced yet, such as if they are in modules as yet
unimported, and may also have mappings that are still to be configured,
if they are in other <a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a> collections not part of the
current scope of configuration.</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.clear_mappers">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">clear_mappers</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.clear_mappers" title="Link to this definition">¶</a></dt>
<dd><p>Remove all mappers from all classes.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.4 版本发生变更: </span>This function now locates all
<a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a> objects and calls upon the
<a class="reference internal" href="#sqlalchemy.orm.registry.dispose" title="sqlalchemy.orm.registry.dispose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.dispose()</span></code></a> method of each.</p>
</div>
<p>This function removes all instrumentation from classes and disposes
of their associated mappers.  Once called, the classes are unmapped
and can be later re-mapped with new mappers.</p>
<p><a class="reference internal" href="#sqlalchemy.orm.clear_mappers" title="sqlalchemy.orm.clear_mappers"><code class="xref py py-func docutils literal notranslate"><span class="pre">clear_mappers()</span></code></a> is <em>not</em> for normal use, as there is literally no
valid usage for it outside of very specific testing scenarios. Normally,
mappers are permanent structural components of user-defined classes, and
are never discarded independently of their class.  If a mapped class
itself is garbage collected, its mapper is automatically disposed of as
well. As such, <a class="reference internal" href="#sqlalchemy.orm.clear_mappers" title="sqlalchemy.orm.clear_mappers"><code class="xref py py-func docutils literal notranslate"><span class="pre">clear_mappers()</span></code></a> is only for usage in test suites
that re-use the same classes with different mappings, which is itself an
extremely rare use case - the only such use case is in fact SQLAlchemy’s
own test suite, and possibly the test suites of other ORM extension
libraries which intend to test various combinations of mapper construction
upon a fixed set of classes.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.util.identity_key">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.util.</span></span><span class="sig-name descname"><span class="pre">identity_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">class_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ident</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.Tuple" title="sqlalchemy.sql.expression.Tuple"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_T</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Unpack</span><span class="p"><span class="pre">[</span></span><span class="pre">TupleAny</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../core/connections.html#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><span class="pre">RowMapping</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identity_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_IdentityKeyType</span><span class="p"><span class="pre">[</span></span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.util.identity_key" title="Link to this definition">¶</a></dt>
<dd><p>Generate “identity key” tuples, as are used as keys in the
<a class="reference internal" href="session_api.html#sqlalchemy.orm.Session.identity_map" title="sqlalchemy.orm.Session.identity_map"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.identity_map</span></code></a> dictionary.</p>
<p>This function has several call styles:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">identity_key(class,</span> <span class="pre">ident,</span> <span class="pre">identity_token=token)</span></code></p>
<p>This form receives a mapped class and a primary key scalar or
tuple as an argument.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">identity_key</span><span class="p">(</span><span class="n">MyClass</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="go">(&lt;class &#39;__main__.MyClass&#39;&gt;, (1, 2), None)</span></pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">param class<span class="colon">:</span></dt>
<dd class="field-odd"><p>mapped class (must be a positional argument)</p>
</dd>
<dt class="field-even">param ident<span class="colon">:</span></dt>
<dd class="field-even"><p>primary key, may be a scalar or tuple argument.</p>
</dd>
<dt class="field-odd">param identity_token<span class="colon">:</span></dt>
<dd class="field-odd"><p>optional identity token</p>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">identity_key(instance=instance)</span></code></p>
<p>This form will produce the identity key for a given instance.  The
instance need not be persistent, only that its primary key attributes
are populated (else the key will contain <code class="docutils literal notranslate"><span class="pre">None</span></code> for those missing
values).</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">identity_key</span><span class="p">(</span><span class="n">instance</span><span class="o">=</span><span class="n">instance</span><span class="p">)</span>
<span class="go">(&lt;class &#39;__main__.MyClass&#39;&gt;, (1, 2), None)</span></pre></div>
</div>
<p>In this form, the given instance is ultimately run though
<a class="reference internal" href="#sqlalchemy.orm.Mapper.identity_key_from_instance" title="sqlalchemy.orm.Mapper.identity_key_from_instance"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Mapper.identity_key_from_instance()</span></code></a>, which will have the
effect of performing a database check for the corresponding row
if the object is expired.</p>
<dl class="field-list simple">
<dt class="field-odd">param instance<span class="colon">:</span></dt>
<dd class="field-odd"><p>object instance (must be given as a keyword arg)</p>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">identity_key(class,</span> <span class="pre">row=row,</span> <span class="pre">identity_token=token)</span></code></p>
<p>This form is similar to the class/tuple form, except is passed a
database result row as a <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> or <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> object.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">row</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;select * from table where a=1 and b=2&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">identity_key</span><span class="p">(</span><span class="n">MyClass</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="p">)</span>
<span class="go">(&lt;class &#39;__main__.MyClass&#39;&gt;, (1, 2), None)</span></pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">param class<span class="colon">:</span></dt>
<dd class="field-odd"><p>mapped class (must be a positional argument)</p>
</dd>
<dt class="field-even">param row<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> row returned by a <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.CursorResult" title="sqlalchemy.engine.CursorResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CursorResult</span></code></a>
(must be given as a keyword arg)</p>
</dd>
<dt class="field-odd">param identity_token<span class="colon">:</span></dt>
<dd class="field-odd"><p>optional identity token</p>
</dd>
</dl>
</li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.polymorphic_union">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">polymorphic_union</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_map</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">typecolname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aliasname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'p_union'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cast_nulls</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.polymorphic_union" title="Link to this definition">¶</a></dt>
<dd><p>Create a <code class="docutils literal notranslate"><span class="pre">UNION</span></code> statement used by a polymorphic mapper.</p>
<p>See  <a class="reference internal" href="inheritance.html#concrete-inheritance"><span class="std std-ref">具体表继承</span></a> for an example of how
this is used.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.polymorphic_union.params.table_map"></span><strong>table_map</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.polymorphic_union.params.table_map">¶</a> – mapping of polymorphic identities to
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.polymorphic_union.params.typecolname"></span><strong>typecolname</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.polymorphic_union.params.typecolname">¶</a> – string name of a “discriminator” column, which will be
derived from the query, producing the polymorphic identity for
each row.  If <code class="docutils literal notranslate"><span class="pre">None</span></code>, no polymorphic discriminator is generated.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.polymorphic_union.params.aliasname"></span><strong>aliasname</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.polymorphic_union.params.aliasname">¶</a> – name of the <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.alias" title="sqlalchemy.sql.expression.alias"><code class="xref py py-func docutils literal notranslate"><span class="pre">alias()</span></code></a>
construct generated.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.polymorphic_union.params.cast_nulls"></span><strong>cast_nulls</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.polymorphic_union.params.cast_nulls">¶</a> – if True, non-existent columns, which are represented
as labeled NULLs, will be passed into CAST.   This is a legacy behavior
that is problematic on some backends such as Oracle - in which case it
can be set to False.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.orm_insert_sentinel">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">orm_insert_sentinel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_TypeEngineArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">omit_from_statements</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="internals.html#sqlalchemy.orm.MappedColumn" title="sqlalchemy.orm.MappedColumn"><span class="pre">MappedColumn</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.orm_insert_sentinel" title="Link to this definition">¶</a></dt>
<dd><p>Provides a surrogate <a class="reference internal" href="#sqlalchemy.orm.mapped_column" title="sqlalchemy.orm.mapped_column"><code class="xref py py-func docutils literal notranslate"><span class="pre">mapped_column()</span></code></a> that generates
a so-called <a class="reference internal" href="../glossary.html#term-sentinel"><span class="xref std std-term">sentinel</span></a> column, allowing efficient bulk
inserts with deterministic RETURNING sorting for tables that don’t
otherwise have qualifying primary key configurations.</p>
<p>Use of <a class="reference internal" href="#sqlalchemy.orm.orm_insert_sentinel" title="sqlalchemy.orm.orm_insert_sentinel"><code class="xref py py-func docutils literal notranslate"><span class="pre">orm_insert_sentinel()</span></code></a> is analogous to the use of the
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.insert_sentinel" title="sqlalchemy.schema.insert_sentinel"><code class="xref py py-func docutils literal notranslate"><span class="pre">insert_sentinel()</span></code></a> construct within a Core
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> construct.</p>
<p>Guidelines for adding this construct to a Declarative mapped class
are the same as that of the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.insert_sentinel" title="sqlalchemy.schema.insert_sentinel"><code class="xref py py-func docutils literal notranslate"><span class="pre">insert_sentinel()</span></code></a> construct;
the database table itself also needs to have a column with this name
present.</p>
<p>For background on how this object is used, see the section
<a class="reference internal" href="../core/connections.html#engine-insertmanyvalues-sentinel-columns"><span class="std std-ref">配置 Sentinel 列</span></a> as part of the
section <a class="reference internal" href="../core/connections.html#engine-insertmanyvalues"><span class="std std-ref">INSERT 语句的“插入多个值”行为</span></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.insert_sentinel" title="sqlalchemy.schema.insert_sentinel"><code class="xref py py-func docutils literal notranslate"><span class="pre">insert_sentinel()</span></code></a></p>
<p><a class="reference internal" href="../core/connections.html#engine-insertmanyvalues"><span class="std std-ref">INSERT 语句的“插入多个值”行为</span></a></p>
<p><a class="reference internal" href="../core/connections.html#engine-insertmanyvalues-sentinel-columns"><span class="std std-ref">配置 Sentinel 列</span></a></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0.10 版本加入.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.orm.reconstructor">
<em class="property"><span class="pre">function</span> </em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">reconstructor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.reconstructor" title="Link to this definition">¶</a></dt>
<dd><p>Decorate a method as the ‘reconstructor’ hook.</p>
<p>Designates a single method as the “reconstructor”, an <code class="docutils literal notranslate"><span class="pre">__init__</span></code>-like
method that will be called by the ORM after the instance has been
loaded from the database or otherwise reconstituted.</p>
<div class="admonition tip">
<p class="admonition-title">小技巧</p>
<p>The <a class="reference internal" href="#sqlalchemy.orm.reconstructor" title="sqlalchemy.orm.reconstructor"><code class="xref py py-func docutils literal notranslate"><span class="pre">reconstructor()</span></code></a> decorator makes use of the
<a class="reference internal" href="events.html#sqlalchemy.orm.InstanceEvents.load" title="sqlalchemy.orm.InstanceEvents.load"><code class="xref py py-meth docutils literal notranslate"><span class="pre">InstanceEvents.load()</span></code></a> event hook, which can be
used directly.</p>
</div>
<p>The reconstructor will be invoked with no arguments.  Scalar
(non-collection) database-mapped attributes of the instance will
be available for use within the function.  Eagerly-loaded
collections are generally not yet available and will usually only
contain the first element.  ORM state changes made to objects at
this stage will not be recorded for the next flush() operation, so
the activity within a reconstructor should be conservative.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="events.html#sqlalchemy.orm.InstanceEvents.load" title="sqlalchemy.orm.InstanceEvents.load"><code class="xref py py-meth docutils literal notranslate"><span class="pre">InstanceEvents.load()</span></code></a></p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">Mapper</span></span><a class="headerlink" href="#sqlalchemy.orm.Mapper" title="Link to this definition">¶</a></dt>
<dd><p>Defines an association between a Python class and a database table or
other relational structure, so that ORM operations against the class may
proceed.</p>
<p>The <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> object is instantiated using mapping methods
present on the <a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a> object.  For information
about instantiating new <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> objects, see
<a class="reference internal" href="mapping_styles.html#orm-mapping-classes-toplevel"><span class="std std-ref">ORM 映射类概述</span></a>.</p>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.orm.Mapper.__init__"><span class="sig-name descname">__init__()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.add_properties"><span class="sig-name descname">add_properties()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.add_property"><span class="sig-name descname">add_property()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.all_orm_descriptors"><span class="sig-name descname">all_orm_descriptors</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.attrs"><span class="sig-name descname">attrs</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.base_mapper"><span class="sig-name descname">base_mapper</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.c"><span class="sig-name descname">c</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.cascade_iterator"><span class="sig-name descname">cascade_iterator()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.class_"><span class="sig-name descname">class_</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.class_manager"><span class="sig-name descname">class_manager</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.column_attrs"><span class="sig-name descname">column_attrs</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.columns"><span class="sig-name descname">columns</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.common_parent"><span class="sig-name descname">common_parent()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.composites"><span class="sig-name descname">composites</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.concrete"><span class="sig-name descname">concrete</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.configured"><span class="sig-name descname">configured</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.entity"><span class="sig-name descname">entity</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.get_property"><span class="sig-name descname">get_property()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.get_property_by_column"><span class="sig-name descname">get_property_by_column()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.identity_key_from_instance"><span class="sig-name descname">identity_key_from_instance()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.identity_key_from_primary_key"><span class="sig-name descname">identity_key_from_primary_key()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.identity_key_from_row"><span class="sig-name descname">identity_key_from_row()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.inherits"><span class="sig-name descname">inherits</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.is_mapper"><span class="sig-name descname">is_mapper</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.is_sibling"><span class="sig-name descname">is_sibling()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.isa"><span class="sig-name descname">isa()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.iterate_properties"><span class="sig-name descname">iterate_properties</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.local_table"><span class="sig-name descname">local_table</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.mapper"><span class="sig-name descname">mapper</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.persist_selectable"><span class="sig-name descname">persist_selectable</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.polymorphic_identity"><span class="sig-name descname">polymorphic_identity</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.polymorphic_iterator"><span class="sig-name descname">polymorphic_iterator()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.polymorphic_map"><span class="sig-name descname">polymorphic_map</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.polymorphic_on"><span class="sig-name descname">polymorphic_on</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.primary_key"><span class="sig-name descname">primary_key</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.primary_key_from_instance"><span class="sig-name descname">primary_key_from_instance()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.primary_mapper"><span class="sig-name descname">primary_mapper()</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.relationships"><span class="sig-name descname">relationships</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.selectable"><span class="sig-name descname">selectable</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.self_and_descendants"><span class="sig-name descname">self_and_descendants</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.single"><span class="sig-name descname">single</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.synonyms"><span class="sig-name descname">synonyms</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.tables"><span class="sig-name descname">tables</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.validators"><span class="sig-name descname">validators</span></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.with_polymorphic_mappers"><span class="sig-name descname">with_polymorphic_mappers</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMFromClauseRole</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.orm.ORMEntityColumnsClauseRole</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.cache_key.MemoizedHasCacheKey</span></code>, <a class="reference internal" href="internals.html#sqlalchemy.orm.InspectionAttr" title="sqlalchemy.orm.base.InspectionAttr"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.orm.base.InspectionAttr</span></code></a>, <a class="reference internal" href="../core/internals.html#sqlalchemy.log.Identified" title="sqlalchemy.log.Identified"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.log.Identified</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.inspection.Inspectable</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.event.registry.EventTarget</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Generic</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">class_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local_table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.FromClause" title="sqlalchemy.sql.expression.FromClause"><span class="pre">FromClause</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">properties</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="internals.html#sqlalchemy.orm.MapperProperty" title="sqlalchemy.orm.MapperProperty"><span class="pre">MapperProperty</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">primary_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">_ORMColumnExprArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inherits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><span class="pre">Mapper</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inherit_condition</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_ColumnExpressionArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inherit_foreign_keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../core/defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_ORMColumnExprArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">always_refresh</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version_id_col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_ORMColumnExprArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version_id_generator</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">False</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">polymorphic_on</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_ORMColumnExprArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="internals.html#sqlalchemy.orm.MapperProperty" title="sqlalchemy.orm.MapperProperty"><span class="pre">MapperProperty</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_polymorphic_map</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><span class="pre">Mapper</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">polymorphic_identity</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">concrete</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_polymorphic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_WithPolymorphicArg</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">polymorphic_abstract</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">polymorphic_load</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'selectin'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'inline'</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_partial_pks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column_prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_properties</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../core/defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_properties</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../core/defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">passive_updates</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">passive_deletes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">confirm_deleted_rows</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eager_defaults</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">True</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">False</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'auto'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legacy_is_orphan</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_compiled_cache_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">100</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.Mapper.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Direct constructor for a new <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> object.</p>
<p>The <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> constructor is not called directly, and
is normally invoked through the
use of the <a class="reference internal" href="#sqlalchemy.orm.registry" title="sqlalchemy.orm.registry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a> object through either the
<a class="reference internal" href="mapping_styles.html#orm-declarative-mapping"><span class="std std-ref">Declarative</span></a> or
<a class="reference internal" href="mapping_styles.html#orm-imperative-mapping"><span class="std std-ref">Imperative</span></a> mapping styles.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 2.0 版本发生变更: </span>The public facing <code class="docutils literal notranslate"><span class="pre">mapper()</span></code> function is
removed; for a classical mapping configuration, use the
<a class="reference internal" href="#sqlalchemy.orm.registry.map_imperatively" title="sqlalchemy.orm.registry.map_imperatively"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.map_imperatively()</span></code></a> method.</p>
</div>
<p>Parameters documented below may be passed to either the
<a class="reference internal" href="#sqlalchemy.orm.registry.map_imperatively" title="sqlalchemy.orm.registry.map_imperatively"><code class="xref py py-meth docutils literal notranslate"><span class="pre">registry.map_imperatively()</span></code></a> method, or may be passed in the
<code class="docutils literal notranslate"><span class="pre">__mapper_args__</span></code> declarative class attribute described at
<a class="reference internal" href="declarative_config.html#orm-declarative-mapper-options"><span class="std std-ref">使用声明式映射器配置选项</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.Mapper.params.class_"></span><strong>class_</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.params.class_">¶</a> – The class to be mapped.  When using Declarative,
this argument is automatically passed as the declared class
itself.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Mapper.params.local_table"></span><strong>local_table</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.params.local_table">¶</a> – The <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> or other
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.FromClause" title="sqlalchemy.sql.expression.FromClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">FromClause</span></code></a> (i.e. selectable) to which the class is
mapped. May be <code class="docutils literal notranslate"><span class="pre">None</span></code> if this mapper inherits from another mapper
using single-table inheritance. When using Declarative, this
argument is automatically passed by the extension, based on what is
configured via the <a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase.__table__" title="sqlalchemy.orm.DeclarativeBase.__table__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DeclarativeBase.__table__</span></code></a> attribute
or via the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> produced as a result of
the <a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase.__tablename__" title="sqlalchemy.orm.DeclarativeBase.__tablename__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DeclarativeBase.__tablename__</span></code></a> attribute being
present.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Mapper.params.polymorphic_abstract"></span><strong>polymorphic_abstract</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.params.polymorphic_abstract">¶</a> – <p>Indicates this class will be mapped in a
polymorphic hierarchy, but not directly instantiated. The class is
mapped normally, except that it has no requirement for a
<a class="reference internal" href="#sqlalchemy.orm.Mapper.params.polymorphic_identity" title="sqlalchemy.orm.Mapper"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Mapper.polymorphic_identity</span></code></a> within an inheritance
hierarchy. The class however must be part of a polymorphic
inheritance scheme which uses
<a class="reference internal" href="#sqlalchemy.orm.Mapper.params.polymorphic_on" title="sqlalchemy.orm.Mapper"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Mapper.polymorphic_on</span></code></a> at the base.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="inheritance.html#orm-inheritance-abstract-poly"><span class="std std-ref">使用 polymorphic_abstract 构建更深层次的层次结构</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Mapper.params.always_refresh"></span><strong>always_refresh</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.params.always_refresh">¶</a> – If True, all query operations for this mapped
class will overwrite all data within object instances that already
exist within the session, erasing any in-memory changes with
whatever information was loaded from the database. Usage of this
flag is highly discouraged; as an alternative, see the method
<a class="reference internal" href="queryguide/query.html#sqlalchemy.orm.Query.populate_existing" title="sqlalchemy.orm.Query.populate_existing"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.populate_existing()</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Mapper.params.allow_partial_pks"></span><strong>allow_partial_pks</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.params.allow_partial_pks">¶</a> – <p>Defaults to True.  Indicates that a
composite primary key with some NULL values should be considered as
possibly existing within the database. This affects whether a
mapper will assign an incoming row to an existing identity, as well
as if <a class="reference internal" href="session_api.html#sqlalchemy.orm.Session.merge" title="sqlalchemy.orm.Session.merge"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.merge()</span></code></a> will check the database first for a
particular primary key value. A “partial primary key” can occur if
one has mapped to an OUTER JOIN, for example.</p>
<p>The <a class="reference internal" href="#sqlalchemy.orm.Mapper.params.allow_partial_pks" title="sqlalchemy.orm.Mapper"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Mapper.allow_partial_pks</span></code></a> parameter also
indicates to the ORM relationship lazy loader, when loading a
many-to-one related object, if a composite primary key that has
partial NULL values should result in an attempt to load from the
database, or if a load attempt is not necessary.</p>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0.36 版本加入: </span><a class="reference internal" href="#sqlalchemy.orm.Mapper.params.allow_partial_pks" title="sqlalchemy.orm.Mapper"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Mapper.allow_partial_pks</span></code></a>
is consulted by the relationship lazy loader strategy, such that
when set to False, a SELECT for a composite primary key that
has partial NULL values will not be emitted.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Mapper.params.batch"></span><strong>batch</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.params.batch">¶</a> – Defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>, indicating that save operations
of multiple entities can be batched together for efficiency.
Setting to False indicates
that an instance will be fully saved before saving the next
instance.  This is used in the extremely rare case that a
<a class="reference internal" href="events.html#sqlalchemy.orm.MapperEvents" title="sqlalchemy.orm.MapperEvents"><code class="xref py py-class docutils literal notranslate"><span class="pre">MapperEvents</span></code></a> listener requires being called
in between individual row persistence operations.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Mapper.params.column_prefix"></span><strong>column_prefix</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.params.column_prefix">¶</a> – <p>A string which will be prepended
to the mapped attribute name when <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
objects are automatically assigned as attributes to the
mapped class.  Does not affect <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects that
are mapped explicitly in the <a class="reference internal" href="#sqlalchemy.orm.Mapper.params.properties" title="sqlalchemy.orm.Mapper"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Mapper.properties</span></code></a>
dictionary.</p>
<p>This parameter is typically useful with imperative mappings
that keep the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> object separate.  Below, assuming
the <code class="docutils literal notranslate"><span class="pre">user_table</span></code> <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> object has columns named
<code class="docutils literal notranslate"><span class="pre">user_id</span></code>, <code class="docutils literal notranslate"><span class="pre">user_name</span></code>, and <code class="docutils literal notranslate"><span class="pre">password</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__table__</span> <span class="o">=</span> <span class="n">user_table</span>
    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;column_prefix&quot;</span><span class="p">:</span> <span class="s2">&quot;_&quot;</span><span class="p">}</span></pre><div class="code-non-annotations-key"></div></div>
</div>
<p>The above mapping will assign the <code class="docutils literal notranslate"><span class="pre">user_id</span></code>, <code class="docutils literal notranslate"><span class="pre">user_name</span></code>, and
<code class="docutils literal notranslate"><span class="pre">password</span></code> columns to attributes named <code class="docutils literal notranslate"><span class="pre">_user_id</span></code>,
<code class="docutils literal notranslate"><span class="pre">_user_name</span></code>, and <code class="docutils literal notranslate"><span class="pre">_password</span></code> on the mapped <code class="docutils literal notranslate"><span class="pre">User</span></code> class.</p>
<p>The <a class="reference internal" href="#sqlalchemy.orm.Mapper.params.column_prefix" title="sqlalchemy.orm.Mapper"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Mapper.column_prefix</span></code></a> parameter is uncommon in
modern use. For dealing with reflected tables, a more flexible
approach to automating a naming scheme is to intercept the
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects as they are reflected; see the section
<a class="reference internal" href="declarative_tables.html#mapper-automated-reflection-schemes"><span class="std std-ref">从反射表自动执行列命名方案</span></a> for notes on this usage
pattern.</p>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Mapper.params.concrete"></span><strong>concrete</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.params.concrete">¶</a> – <p>If True, indicates this mapper should use concrete
table inheritance with its parent mapper.</p>
<p>See the section <a class="reference internal" href="inheritance.html#concrete-inheritance"><span class="std std-ref">具体表继承</span></a> for an example.</p>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Mapper.params.confirm_deleted_rows"></span><strong>confirm_deleted_rows</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.params.confirm_deleted_rows">¶</a> – defaults to True; when a DELETE occurs
of one more rows based on specific primary keys, a warning is
emitted when the number of rows matched does not equal the number
of rows expected.  This parameter may be set to False to handle the
case where database ON DELETE CASCADE rules may be deleting some of
those rows automatically.  The warning may be changed to an
exception in a future release.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Mapper.params.eager_defaults"></span><strong>eager_defaults</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.params.eager_defaults">¶</a> – <p>if True, the ORM will immediately fetch the
value of server-generated default values after an INSERT or UPDATE,
rather than leaving them as expired to be fetched on next access.
This can be used for event schemes where the server-generated values
are needed immediately before the flush completes.</p>
<p>The fetch of values occurs either by using <code class="docutils literal notranslate"><span class="pre">RETURNING</span></code> inline
with the <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> or <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code> statement, or by adding an
additional <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> statement subsequent to the <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> or
<code class="docutils literal notranslate"><span class="pre">UPDATE</span></code>, if the backend does not support <code class="docutils literal notranslate"><span class="pre">RETURNING</span></code>.</p>
<p>The use of <code class="docutils literal notranslate"><span class="pre">RETURNING</span></code> is extremely performant in particular for
<code class="docutils literal notranslate"><span class="pre">INSERT</span></code> statements where SQLAlchemy can take advantage of
<a class="reference internal" href="../core/connections.html#engine-insertmanyvalues"><span class="std std-ref">insertmanyvalues</span></a>, whereas the use of
an additional <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> is relatively poor performing, adding
additional SQL round trips which would be unnecessary if these new
attributes are not to be accessed in any case.</p>
<p>For this reason, <a class="reference internal" href="#sqlalchemy.orm.Mapper.params.eager_defaults" title="sqlalchemy.orm.Mapper"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Mapper.eager_defaults</span></code></a> defaults to the
string value <code class="docutils literal notranslate"><span class="pre">&quot;auto&quot;</span></code>, which indicates that server defaults for
INSERT should be fetched using <code class="docutils literal notranslate"><span class="pre">RETURNING</span></code> if the backing database
supports it and if the dialect in use supports “insertmanyreturning”
for an INSERT statement. If the backing database does not support
<code class="docutils literal notranslate"><span class="pre">RETURNING</span></code> or “insertmanyreturning” is not available, server
defaults will not be fetched.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 2.0.0rc1 版本发生变更: </span>added the “auto” option for
<a class="reference internal" href="#sqlalchemy.orm.Mapper.params.eager_defaults" title="sqlalchemy.orm.Mapper"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Mapper.eager_defaults</span></code></a></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="persistence_techniques.html#orm-server-defaults"><span class="std std-ref">获取服务器生成的默认值</span></a></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 2.0.0 版本发生变更: </span>RETURNING now works with multiple rows
INSERTed at once using the
<a class="reference internal" href="../core/connections.html#engine-insertmanyvalues"><span class="std std-ref">insertmanyvalues</span></a> feature, which
among other things allows the <a class="reference internal" href="#sqlalchemy.orm.Mapper.params.eager_defaults" title="sqlalchemy.orm.Mapper"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Mapper.eager_defaults</span></code></a>
feature to be very performant on supporting backends.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Mapper.params.exclude_properties"></span><strong>exclude_properties</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.params.exclude_properties">¶</a> – <p>A list or set of string column names to
be excluded from mapping.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="declarative_tables.html#include-exclude-cols"><span class="std std-ref">映射表列的子集</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Mapper.params.include_properties"></span><strong>include_properties</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.params.include_properties">¶</a> – <p>An inclusive list or set of string column
names to map.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="declarative_tables.html#include-exclude-cols"><span class="std std-ref">映射表列的子集</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Mapper.params.inherits"></span><strong>inherits</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.params.inherits">¶</a> – <p>A mapped class or the corresponding
<a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a>
of one indicating a superclass to which this <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a>
should <em>inherit</em> from.   The mapped class here must be a subclass
of the other mapper’s class.   When using Declarative, this argument
is passed automatically as a result of the natural class
hierarchy of the declared classes.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="inheritance.html#inheritance-toplevel"><span class="std std-ref">映射类继承层次结构</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Mapper.params.inherit_condition"></span><strong>inherit_condition</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.params.inherit_condition">¶</a> – For joined table inheritance, a SQL
expression which will
define how the two tables are joined; defaults to a natural join
between the two tables.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Mapper.params.inherit_foreign_keys"></span><strong>inherit_foreign_keys</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.params.inherit_foreign_keys">¶</a> – When <code class="docutils literal notranslate"><span class="pre">inherit_condition</span></code> is used and
the columns present are missing a <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a>
configuration, this parameter can be used to specify which columns
are “foreign”.  In most cases can be left as <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Mapper.params.legacy_is_orphan"></span><strong>legacy_is_orphan</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.params.legacy_is_orphan">¶</a> – <p>Boolean, defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>.
When <code class="docutils literal notranslate"><span class="pre">True</span></code>, specifies that “legacy” orphan consideration
is to be applied to objects mapped by this mapper, which means
that a pending (that is, not persistent) object is auto-expunged
from an owning <a class="reference internal" href="session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> only when it is de-associated
from <em>all</em> parents that specify a <code class="docutils literal notranslate"><span class="pre">delete-orphan</span></code> cascade towards
this mapper.  The new default behavior is that the object is
auto-expunged when it is de-associated with <em>any</em> of its parents
that specify <code class="docutils literal notranslate"><span class="pre">delete-orphan</span></code> cascade.  This behavior is more
consistent with that of a persistent object, and allows behavior to
be consistent in more scenarios independently of whether or not an
orphan object has been flushed yet or not.</p>
<p>See the change note and example at <a class="reference internal" href="../changelog/migration_08.html#legacy-is-orphan-addition"><span class="std std-ref">The consideration of a “pending” object as an “orphan” has been made more aggressive</span></a>
for more detail on this change.</p>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Mapper.params.passive_deletes"></span><strong>passive_deletes</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.params.passive_deletes">¶</a> – <p>Indicates DELETE behavior of foreign key
columns when a joined-table inheritance entity is being deleted.
Defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code> for a base mapper; for an inheriting mapper,
defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code> unless the value is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>
on the superclass mapper.</p>
<p>When <code class="docutils literal notranslate"><span class="pre">True</span></code>, it is assumed that ON DELETE CASCADE is configured
on the foreign key relationships that link this mapper’s table
to its superclass table, so that when the unit of work attempts
to delete the entity, it need only emit a DELETE statement for the
superclass table, and not this table.</p>
<p>When <code class="docutils literal notranslate"><span class="pre">False</span></code>, a DELETE statement is emitted for this mapper’s
table individually.  If the primary key attributes local to this
table are unloaded, then a SELECT must be emitted in order to
validate these attributes; note that the primary key columns
of a joined-table subclass are not part of the “primary key” of
the object as a whole.</p>
<p>Note that a value of <code class="docutils literal notranslate"><span class="pre">True</span></code> is <strong>always</strong> forced onto the
subclass mappers; that is, it’s not possible for a superclass
to specify passive_deletes without this taking effect for
all subclass mappers.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="cascades.html#passive-deletes"><span class="std std-ref">使用具有 ORM 关系的外键 ON DELETE 级联</span></a> - description of similar feature as
used with <a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a></p>
<p><code class="xref py py-paramref docutils literal notranslate"><span class="pre">mapper.passive_updates</span></code> - supporting ON UPDATE
CASCADE for joined-table inheritance mappers</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Mapper.params.passive_updates"></span><strong>passive_updates</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.params.passive_updates">¶</a> – <p>Indicates UPDATE behavior of foreign key
columns when a primary key column changes on a joined-table
inheritance mapping.   Defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>When True, it is assumed that ON UPDATE CASCADE is configured on
the foreign key in the database, and that the database will handle
propagation of an UPDATE from a source column to dependent columns
on joined-table rows.</p>
<p>When False, it is assumed that the database does not enforce
referential integrity and will not be issuing its own CASCADE
operation for an update.  The unit of work process will
emit an UPDATE statement for the dependent columns during a
primary key change.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="relationship_persistence.html#passive-updates"><span class="std std-ref">可变主键/更新级联</span></a> - description of a similar feature as
used with <a class="reference internal" href="relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a></p>
<p><code class="xref py py-paramref docutils literal notranslate"><span class="pre">mapper.passive_deletes</span></code> - supporting ON DELETE
CASCADE for joined-table inheritance mappers</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Mapper.params.polymorphic_load"></span><strong>polymorphic_load</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.params.polymorphic_load">¶</a> – <p>Specifies “polymorphic loading” behavior
for a subclass in an inheritance hierarchy (joined and single
table inheritance only).   Valid values are:</p>
<blockquote>
<div><ul>
<li><p>“‘inline’” - specifies this class should be part of
the “with_polymorphic” mappers, e.g. its columns will be included
in a SELECT query against the base.</p></li>
<li><p>“‘selectin’” - specifies that when instances of this class
are loaded, an additional SELECT will be emitted to retrieve
the columns specific to this subclass.  The SELECT uses
IN to fetch multiple subclasses at once.</p></li>
</ul>
</div></blockquote>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="queryguide/inheritance.html#with-polymorphic-mapper-config"><span class="std std-ref">在映射器上配置 with_polymorphic()</span></a></p>
<p><a class="reference internal" href="queryguide/inheritance.html#polymorphic-selectin"><span class="std std-ref">使用 selectin_polymorphic()</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Mapper.params.polymorphic_on"></span><strong>polymorphic_on</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.params.polymorphic_on">¶</a> – <p>Specifies the column, attribute, or
SQL expression used to determine the target class for an
incoming row, when inheriting classes are present.</p>
<p>May be specified as a string attribute name, or as a SQL
expression such as a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> or in a Declarative
mapping a <a class="reference internal" href="#sqlalchemy.orm.mapped_column" title="sqlalchemy.orm.mapped_column"><code class="xref py py-func docutils literal notranslate"><span class="pre">mapped_column()</span></code></a> object.  It is typically
expected that the SQL expression corresponds to a column in the
base-most mapped <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Employee</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;employee&quot;</span>

    <span class="n">id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">discriminator</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>

    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;polymorphic_on&quot;</span><span class="p">:</span> <span class="n">discriminator</span><span class="p">,</span>
        <span class="s2">&quot;polymorphic_identity&quot;</span><span class="p">:</span> <span class="s2">&quot;employee&quot;</span><span class="p">,</span>
    <span class="p">}</span></pre><div class="code-annotations-key"></div></div>
</div>
<p>It may also be specified
as a SQL expression, as in this example where we
use the <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.case" title="sqlalchemy.sql.expression.case"><code class="xref py py-func docutils literal notranslate"><span class="pre">case()</span></code></a> construct to provide a conditional
approach:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Employee</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;employee&quot;</span>

    <span class="n">id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">discriminator</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>

    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;polymorphic_on&quot;</span><span class="p">:</span> <span class="n">case</span><span class="p">(</span>
            <span class="p">(</span><span class="n">discriminator</span> <span class="o">==</span> <span class="s2">&quot;EN&quot;</span><span class="p">,</span> <span class="s2">&quot;engineer&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="n">discriminator</span> <span class="o">==</span> <span class="s2">&quot;MA&quot;</span><span class="p">,</span> <span class="s2">&quot;manager&quot;</span><span class="p">),</span>
            <span class="n">else_</span><span class="o">=</span><span class="s2">&quot;employee&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="s2">&quot;polymorphic_identity&quot;</span><span class="p">:</span> <span class="s2">&quot;employee&quot;</span><span class="p">,</span>
    <span class="p">}</span></pre><div class="code-annotations-key"></div></div>
</div>
<p>It may also refer to any attribute using its string name,
which is of particular use when using annotated column
configurations:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Employee</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;employee&quot;</span>

    <span class="n">id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">discriminator</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">str</span><span class="p">]</span>

    <span class="n">__mapper_args__</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;polymorphic_on&quot;</span><span class="p">:</span> <span class="s2">&quot;discriminator&quot;</span><span class="p">,</span>
        <span class="s2">&quot;polymorphic_identity&quot;</span><span class="p">:</span> <span class="s2">&quot;employee&quot;</span><span class="p">,</span>
    <span class="p">}</span></pre><div class="code-annotations-key"></div></div>
</div>
<p>When setting <code class="docutils literal notranslate"><span class="pre">polymorphic_on</span></code> to reference an
attribute or expression that’s not present in the
locally mapped <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>, yet the value
of the discriminator should be persisted to the database,
the value of the
discriminator is not automatically set on new
instances; this must be handled by the user,
either through manual means or via event listeners.
A typical approach to establishing such a listener
looks like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">event</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">object_mapper</span>


<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">Employee</span><span class="p">,</span> <span class="s2">&quot;init&quot;</span><span class="p">,</span> <span class="n">propagate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">set_identity</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="o">*</span><span class="n">arg</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="n">mapper</span> <span class="o">=</span> <span class="n">object_mapper</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span>
    <span class="n">instance</span><span class="o">.</span><span class="n">discriminator</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">.</span><span class="n">polymorphic_identity</span></pre></div>
</div>
<p>Where above, we assign the value of <code class="docutils literal notranslate"><span class="pre">polymorphic_identity</span></code>
for the mapped class to the <code class="docutils literal notranslate"><span class="pre">discriminator</span></code> attribute,
thus persisting the value to the <code class="docutils literal notranslate"><span class="pre">discriminator</span></code> column
in the database.</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>Currently, <strong>only one discriminator column may be set</strong>, typically
on the base-most class in the hierarchy. “Cascading” polymorphic
columns are not yet supported.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="inheritance.html#inheritance-toplevel"><span class="std std-ref">映射类继承层次结构</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Mapper.params.polymorphic_identity"></span><strong>polymorphic_identity</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.params.polymorphic_identity">¶</a> – <p>Specifies the value which
identifies this particular class as returned by the column expression
referred to by the <a class="reference internal" href="#sqlalchemy.orm.Mapper.params.polymorphic_on" title="sqlalchemy.orm.Mapper"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Mapper.polymorphic_on</span></code></a> setting. As
rows are received, the value corresponding to the
<a class="reference internal" href="#sqlalchemy.orm.Mapper.params.polymorphic_on" title="sqlalchemy.orm.Mapper"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Mapper.polymorphic_on</span></code></a> column expression is compared
to this value, indicating which subclass should be used for the newly
reconstructed object.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="inheritance.html#inheritance-toplevel"><span class="std std-ref">映射类继承层次结构</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Mapper.params.properties"></span><strong>properties</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.params.properties">¶</a> – <p>A dictionary mapping the string names of object
attributes to <a class="reference internal" href="internals.html#sqlalchemy.orm.MapperProperty" title="sqlalchemy.orm.MapperProperty"><code class="xref py py-class docutils literal notranslate"><span class="pre">MapperProperty</span></code></a> instances, which define the
persistence behavior of that attribute.  Note that
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
objects present in
the mapped <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> are automatically placed into
<code class="docutils literal notranslate"><span class="pre">ColumnProperty</span></code> instances upon mapping, unless overridden.
When using Declarative, this argument is passed automatically,
based on all those <a class="reference internal" href="internals.html#sqlalchemy.orm.MapperProperty" title="sqlalchemy.orm.MapperProperty"><code class="xref py py-class docutils literal notranslate"><span class="pre">MapperProperty</span></code></a> instances declared
in the declared class body.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="mapping_styles.html#orm-mapping-properties"><span class="std std-ref">属性字典</span></a> - in the
<a class="reference internal" href="mapping_styles.html#orm-mapping-classes-toplevel"><span class="std std-ref">ORM 映射类概述</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Mapper.params.primary_key"></span><strong>primary_key</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.params.primary_key">¶</a> – <p>A list of <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
objects, or alternatively string names of attribute names which
refer to <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>, which define
the primary key to be used against this mapper’s selectable unit.
This is normally simply the primary key of the <code class="docutils literal notranslate"><span class="pre">local_table</span></code>, but
can be overridden here.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 2.0.2 版本发生变更: </span><a class="reference internal" href="#sqlalchemy.orm.Mapper.params.primary_key" title="sqlalchemy.orm.Mapper"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Mapper.primary_key</span></code></a>
arguments may be indicated as string attribute names as well.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="declarative_tables.html#mapper-primary-key"><span class="std std-ref">映射到一组显式主键列</span></a> - background and example use</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Mapper.params.version_id_col"></span><strong>version_id_col</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.params.version_id_col">¶</a> – <p>A <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
that will be used to keep a running version id of rows
in the table.  This is used to detect concurrent updates or
the presence of stale data in a flush.  The methodology is to
detect if an UPDATE statement does not match the last known
version id, a
<a class="reference internal" href="exceptions.html#sqlalchemy.orm.exc.StaleDataError" title="sqlalchemy.orm.exc.StaleDataError"><code class="xref py py-class docutils literal notranslate"><span class="pre">StaleDataError</span></code></a> exception is
thrown.
By default, the column must be of <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Integer" title="sqlalchemy.types.Integer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Integer</span></code></a> type,
unless <code class="docutils literal notranslate"><span class="pre">version_id_generator</span></code> specifies an alternative version
generator.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="versioning.html#mapper-version-counter"><span class="std std-ref">配置版本计数器</span></a> - discussion of version counting
and rationale.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Mapper.params.version_id_generator"></span><strong>version_id_generator</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.params.version_id_generator">¶</a> – <p>Define how new version ids should
be generated.  Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>, which indicates that
a simple integer counting scheme be employed.  To provide a custom
versioning scheme, provide a callable function of the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">generate_version</span><span class="p">(</span><span class="n">version</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">next_version</span></pre></div>
</div>
<p>Alternatively, server-side versioning functions such as triggers,
or programmatic versioning schemes outside of the version id
generator may be used, by specifying the value <code class="docutils literal notranslate"><span class="pre">False</span></code>.
Please see <a class="reference internal" href="versioning.html#server-side-version-counter"><span class="std std-ref">服务器端版本计数器</span></a> for a discussion
of important points when using this option.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="versioning.html#custom-version-counter"><span class="std std-ref">自定义版本计数器/类型</span></a></p>
<p><a class="reference internal" href="versioning.html#server-side-version-counter"><span class="std std-ref">服务器端版本计数器</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Mapper.params.with_polymorphic"></span><strong>with_polymorphic</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.params.with_polymorphic">¶</a> – <p>A tuple in the form <code class="docutils literal notranslate"><span class="pre">(&lt;classes&gt;,</span>
<span class="pre">&lt;selectable&gt;)</span></code> indicating the default style of “polymorphic”
loading, that is, which tables are queried at once. &lt;classes&gt; is
any single or list of mappers and/or classes indicating the
inherited classes that should be loaded at once. The special value
<code class="docutils literal notranslate"><span class="pre">'*'</span></code> may be used to indicate all descending classes should be
loaded immediately. The second tuple argument &lt;selectable&gt;
indicates a selectable that will be used to query for multiple
classes.</p>
<p>The <a class="reference internal" href="#sqlalchemy.orm.Mapper.params.polymorphic_load" title="sqlalchemy.orm.Mapper"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Mapper.polymorphic_load</span></code></a> parameter may be
preferable over the use of <a class="reference internal" href="#sqlalchemy.orm.Mapper.params.with_polymorphic" title="sqlalchemy.orm.Mapper"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Mapper.with_polymorphic</span></code></a>
in modern mappings to indicate a per-subclass technique of
indicating polymorphic loading styles.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="queryguide/inheritance.html#with-polymorphic-mapper-config"><span class="std std-ref">在映射器上配置 with_polymorphic()</span></a></p>
</div>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.add_properties">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">add_properties</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dict_of_properties</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.Mapper.add_properties" title="Link to this definition">¶</a></dt>
<dd><p>Add the given dictionary of properties to this mapper,
using <cite>add_property</cite>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.add_property">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">add_property</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prop</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.sql.schema.Column"><span class="pre">Column</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="internals.html#sqlalchemy.orm.MapperProperty" title="sqlalchemy.orm.interfaces.MapperProperty"><span class="pre">MapperProperty</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Mapper.add_property" title="Link to this definition">¶</a></dt>
<dd><p>Add an individual MapperProperty to this mapper.</p>
<p>If the mapper has not been configured yet, just adds the
property to the initial properties dictionary sent to the
constructor.  If this Mapper has already been configured, then
the given MapperProperty is configured immediately.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.all_orm_descriptors">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">all_orm_descriptors</span></span><a class="headerlink" href="#sqlalchemy.orm.Mapper.all_orm_descriptors" title="Link to this definition">¶</a></dt>
<dd><p>A namespace of all <a class="reference internal" href="internals.html#sqlalchemy.orm.InspectionAttr" title="sqlalchemy.orm.InspectionAttr"><code class="xref py py-class docutils literal notranslate"><span class="pre">InspectionAttr</span></code></a> attributes associated
with the mapped class.</p>
<p>These attributes are in all cases Python <a class="reference internal" href="../glossary.html#term-descriptors"><span class="xref std std-term">descriptors</span></a>
associated with the mapped class or its superclasses.</p>
<p>This namespace includes attributes that are mapped to the class
as well as attributes declared by extension modules.
It includes any Python descriptor type that inherits from
<a class="reference internal" href="internals.html#sqlalchemy.orm.InspectionAttr" title="sqlalchemy.orm.InspectionAttr"><code class="xref py py-class docutils literal notranslate"><span class="pre">InspectionAttr</span></code></a>.  This includes
<a class="reference internal" href="internals.html#sqlalchemy.orm.QueryableAttribute" title="sqlalchemy.orm.QueryableAttribute"><code class="xref py py-class docutils literal notranslate"><span class="pre">QueryableAttribute</span></code></a>, as well as extension types such as
<a class="reference internal" href="extensions/hybrid.html#sqlalchemy.ext.hybrid.hybrid_property" title="sqlalchemy.ext.hybrid.hybrid_property"><code class="xref py py-class docutils literal notranslate"><span class="pre">hybrid_property</span></code></a>, <a class="reference internal" href="extensions/hybrid.html#sqlalchemy.ext.hybrid.hybrid_method" title="sqlalchemy.ext.hybrid.hybrid_method"><code class="xref py py-class docutils literal notranslate"><span class="pre">hybrid_method</span></code></a> and
<a class="reference internal" href="extensions/associationproxy.html#sqlalchemy.ext.associationproxy.AssociationProxy" title="sqlalchemy.ext.associationproxy.AssociationProxy"><code class="xref py py-class docutils literal notranslate"><span class="pre">AssociationProxy</span></code></a>.</p>
<p>To distinguish between mapped attributes and extension attributes,
the attribute <a class="reference internal" href="internals.html#sqlalchemy.orm.InspectionAttr.extension_type" title="sqlalchemy.orm.InspectionAttr.extension_type"><code class="xref py py-attr docutils literal notranslate"><span class="pre">InspectionAttr.extension_type</span></code></a> will refer
to a constant that distinguishes between different extension types.</p>
<p>The sorting of the attributes is based on the following rules:</p>
<ol class="arabic simple">
<li><p>Iterate through the class and its superclasses in order from
subclass to superclass (i.e. iterate through <code class="docutils literal notranslate"><span class="pre">cls.__mro__</span></code>)</p></li>
<li><p>For each class, yield the attributes in the order in which they
appear in <code class="docutils literal notranslate"><span class="pre">__dict__</span></code>, with the exception of those in step
3 below.  The order will be the
same as that of the class’ construction, with the exception
of attributes that were added after the fact by the application
or the mapper.</p></li>
<li><p>If a certain attribute key is also in the superclass <code class="docutils literal notranslate"><span class="pre">__dict__</span></code>,
then it’s included in the iteration for that class, and not the
class in which it first appeared.</p></li>
</ol>
<p>The above process produces an ordering that is deterministic in terms
of the order in which attributes were assigned to the class.</p>
<p>When dealing with a <a class="reference internal" href="internals.html#sqlalchemy.orm.QueryableAttribute" title="sqlalchemy.orm.QueryableAttribute"><code class="xref py py-class docutils literal notranslate"><span class="pre">QueryableAttribute</span></code></a>, the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">QueryableAttribute.property</span></code> attribute refers to the
<a class="reference internal" href="internals.html#sqlalchemy.orm.MapperProperty" title="sqlalchemy.orm.MapperProperty"><code class="xref py py-class docutils literal notranslate"><span class="pre">MapperProperty</span></code></a> property, which is what you get when
referring to the collection of mapped properties via
<a class="reference internal" href="#sqlalchemy.orm.Mapper.attrs" title="sqlalchemy.orm.Mapper.attrs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.attrs</span></code></a>.</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>The <a class="reference internal" href="#sqlalchemy.orm.Mapper.all_orm_descriptors" title="sqlalchemy.orm.Mapper.all_orm_descriptors"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.all_orm_descriptors</span></code></a>
accessor namespace is an
instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">OrderedProperties</span></code>.  This is
a dictionary-like object which includes a small number of
named methods such as <code class="xref py py-meth docutils literal notranslate"><span class="pre">OrderedProperties.items()</span></code>
and <code class="xref py py-meth docutils literal notranslate"><span class="pre">OrderedProperties.values()</span></code>.  When
accessing attributes dynamically, favor using the dict-access
scheme, e.g. <code class="docutils literal notranslate"><span class="pre">mapper.all_orm_descriptors[somename]</span></code> over
<code class="docutils literal notranslate"><span class="pre">getattr(mapper.all_orm_descriptors,</span> <span class="pre">somename)</span></code> to avoid name
collisions.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.Mapper.attrs" title="sqlalchemy.orm.Mapper.attrs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.attrs</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.attrs">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">attrs</span></span><a class="headerlink" href="#sqlalchemy.orm.Mapper.attrs" title="Link to this definition">¶</a></dt>
<dd><p>A namespace of all <a class="reference internal" href="internals.html#sqlalchemy.orm.MapperProperty" title="sqlalchemy.orm.MapperProperty"><code class="xref py py-class docutils literal notranslate"><span class="pre">MapperProperty</span></code></a> objects
associated this mapper.</p>
<p>This is an object that provides each property based on
its key name.  For instance, the mapper for a
<code class="docutils literal notranslate"><span class="pre">User</span></code> class which has <code class="docutils literal notranslate"><span class="pre">User.name</span></code> attribute would
provide <code class="docutils literal notranslate"><span class="pre">mapper.attrs.name</span></code>, which would be the
<a class="reference internal" href="internals.html#sqlalchemy.orm.ColumnProperty" title="sqlalchemy.orm.ColumnProperty"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnProperty</span></code></a> representing the <code class="docutils literal notranslate"><span class="pre">name</span></code>
column.   The namespace object can also be iterated,
which would yield each <a class="reference internal" href="internals.html#sqlalchemy.orm.MapperProperty" title="sqlalchemy.orm.MapperProperty"><code class="xref py py-class docutils literal notranslate"><span class="pre">MapperProperty</span></code></a>.</p>
<p><a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> has several pre-filtered views
of this attribute which limit the types of properties
returned, including <a class="reference internal" href="#sqlalchemy.orm.Mapper.synonyms" title="sqlalchemy.orm.Mapper.synonyms"><code class="xref py py-attr docutils literal notranslate"><span class="pre">synonyms</span></code></a>, <a class="reference internal" href="#sqlalchemy.orm.Mapper.column_attrs" title="sqlalchemy.orm.Mapper.column_attrs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">column_attrs</span></code></a>,
<a class="reference internal" href="#sqlalchemy.orm.Mapper.relationships" title="sqlalchemy.orm.Mapper.relationships"><code class="xref py py-attr docutils literal notranslate"><span class="pre">relationships</span></code></a>, and <a class="reference internal" href="#sqlalchemy.orm.Mapper.composites" title="sqlalchemy.orm.Mapper.composites"><code class="xref py py-attr docutils literal notranslate"><span class="pre">composites</span></code></a>.</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>The <a class="reference internal" href="#sqlalchemy.orm.Mapper.attrs" title="sqlalchemy.orm.Mapper.attrs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.attrs</span></code></a> accessor namespace is an
instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">OrderedProperties</span></code>.  This is
a dictionary-like object which includes a small number of
named methods such as <code class="xref py py-meth docutils literal notranslate"><span class="pre">OrderedProperties.items()</span></code>
and <code class="xref py py-meth docutils literal notranslate"><span class="pre">OrderedProperties.values()</span></code>.  When
accessing attributes dynamically, favor using the dict-access
scheme, e.g. <code class="docutils literal notranslate"><span class="pre">mapper.attrs[somename]</span></code> over
<code class="docutils literal notranslate"><span class="pre">getattr(mapper.attrs,</span> <span class="pre">somename)</span></code> to avoid name collisions.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.Mapper.all_orm_descriptors" title="sqlalchemy.orm.Mapper.all_orm_descriptors"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.all_orm_descriptors</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.base_mapper">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">base_mapper</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><span class="pre">Mapper</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.orm.Mapper.base_mapper" title="Link to this definition">¶</a></dt>
<dd><p>The base-most <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> in an inheritance chain.</p>
<p>In a non-inheriting scenario, this attribute will always be this
<a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a>.   In an inheritance scenario, it references
the <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> which is parent to all other <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a>
objects in the inheritance chain.</p>
<p>This is a <em>read only</em> attribute determined during mapper construction.
Behavior is undefined if directly modified.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.c">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">c</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ReadOnlyColumnCollection</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><span class="pre">Column</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.orm.Mapper.c" title="Link to this definition">¶</a></dt>
<dd><p>A synonym for <a class="reference internal" href="#sqlalchemy.orm.Mapper.columns" title="sqlalchemy.orm.Mapper.columns"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.columns</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.cascade_iterator">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">cascade_iterator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">type_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="internals.html#sqlalchemy.orm.InstanceState" title="sqlalchemy.orm.InstanceState"><span class="pre">InstanceState</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">halt_on</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="internals.html#sqlalchemy.orm.InstanceState" title="sqlalchemy.orm.InstanceState"><span class="pre">InstanceState</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.Tuple" title="sqlalchemy.sql.expression.Tuple"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">object</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><span class="pre">Mapper</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="internals.html#sqlalchemy.orm.InstanceState" title="sqlalchemy.orm.InstanceState"><span class="pre">InstanceState</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_InstanceDict</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.Mapper.cascade_iterator" title="Link to this definition">¶</a></dt>
<dd><p>Iterate each element and its mapper in an object graph,
for all relationships that meet the given cascade rule.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.Mapper.cascade_iterator.params.type_"></span><strong>type_</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.cascade_iterator.params.type_">¶</a> – <p>The name of the cascade rule (i.e. <code class="docutils literal notranslate"><span class="pre">&quot;save-update&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;delete&quot;</span></code>,
etc.).</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>the <code class="docutils literal notranslate"><span class="pre">&quot;all&quot;</span></code> cascade is not accepted here.  For a generic
object traversal function, see <a class="reference internal" href="../faq/sessions.html#faq-walk-objects"><span class="std std-ref">如何遍历与给定对象相关的所有对象？</span></a>.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.Mapper.cascade_iterator.params.state"></span><strong>state</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.cascade_iterator.params.state">¶</a> – The lead InstanceState.  child items will be processed per
the relationships defined for this object’s mapper.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>the method yields individual object instances.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="cascades.html#unitofwork-cascades"><span class="std std-ref">级联</span></a></p>
<p><a class="reference internal" href="../faq/sessions.html#faq-walk-objects"><span class="std std-ref">如何遍历与给定对象相关的所有对象？</span></a> - illustrates a generic function to
traverse all objects without relying on cascades.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.class_">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">class_</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.orm.Mapper.class_" title="Link to this definition">¶</a></dt>
<dd><p>The class to which this <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> is mapped.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.class_manager">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">class_manager</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="internals.html#sqlalchemy.orm.ClassManager" title="sqlalchemy.orm.ClassManager"><span class="pre">ClassManager</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.orm.Mapper.class_manager" title="Link to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="internals.html#sqlalchemy.orm.ClassManager" title="sqlalchemy.orm.ClassManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClassManager</span></code></a> which maintains event listeners
and class-bound descriptors for this <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a>.</p>
<p>This is a <em>read only</em> attribute determined during mapper construction.
Behavior is undefined if directly modified.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.column_attrs">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">column_attrs</span></span><a class="headerlink" href="#sqlalchemy.orm.Mapper.column_attrs" title="Link to this definition">¶</a></dt>
<dd><p>Return a namespace of all <a class="reference internal" href="internals.html#sqlalchemy.orm.ColumnProperty" title="sqlalchemy.orm.ColumnProperty"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnProperty</span></code></a>
properties maintained by this <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.Mapper.attrs" title="sqlalchemy.orm.Mapper.attrs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.attrs</span></code></a> - namespace of all
<a class="reference internal" href="internals.html#sqlalchemy.orm.MapperProperty" title="sqlalchemy.orm.MapperProperty"><code class="xref py py-class docutils literal notranslate"><span class="pre">MapperProperty</span></code></a>
objects.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.columns">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">columns</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ReadOnlyColumnCollection</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><span class="pre">Column</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.orm.Mapper.columns" title="Link to this definition">¶</a></dt>
<dd><p>A collection of <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> or other scalar expression
objects maintained by this <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a>.</p>
<p>The collection behaves the same as that of the <code class="docutils literal notranslate"><span class="pre">c</span></code> attribute on
any <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> object,
except that only those columns included in
this mapping are present, and are keyed based on the attribute name
defined in the mapping, not necessarily the <code class="docutils literal notranslate"><span class="pre">key</span></code> attribute of the
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> itself.   Additionally, scalar expressions mapped
by <a class="reference internal" href="#sqlalchemy.orm.column_property" title="sqlalchemy.orm.column_property"><code class="xref py py-func docutils literal notranslate"><span class="pre">column_property()</span></code></a> are also present here.</p>
<p>This is a <em>read only</em> attribute determined during mapper construction.
Behavior is undefined if directly modified.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.common_parent">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">common_parent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.mapper.Mapper"><span class="pre">Mapper</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Mapper.common_parent" title="Link to this definition">¶</a></dt>
<dd><p>Return true if the given mapper shares a
common inherited parent as this mapper.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.composites">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">composites</span></span><a class="headerlink" href="#sqlalchemy.orm.Mapper.composites" title="Link to this definition">¶</a></dt>
<dd><p>Return a namespace of all <a class="reference internal" href="internals.html#sqlalchemy.orm.Composite" title="sqlalchemy.orm.Composite"><code class="xref py py-class docutils literal notranslate"><span class="pre">Composite</span></code></a>
properties maintained by this <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.Mapper.attrs" title="sqlalchemy.orm.Mapper.attrs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.attrs</span></code></a> - namespace of all
<a class="reference internal" href="internals.html#sqlalchemy.orm.MapperProperty" title="sqlalchemy.orm.MapperProperty"><code class="xref py py-class docutils literal notranslate"><span class="pre">MapperProperty</span></code></a>
objects.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.concrete">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">concrete</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#sqlalchemy.orm.Mapper.concrete" title="Link to this definition">¶</a></dt>
<dd><p>Represent <code class="docutils literal notranslate"><span class="pre">True</span></code> if this <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> is a concrete
inheritance mapper.</p>
<p>This is a <em>read only</em> attribute determined during mapper construction.
Behavior is undefined if directly modified.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.configured">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">configured</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#sqlalchemy.orm.Mapper.configured" title="Link to this definition">¶</a></dt>
<dd><p>Represent <code class="docutils literal notranslate"><span class="pre">True</span></code> if this <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> has been configured.</p>
<p>This is a <em>read only</em> attribute determined during mapper construction.
Behavior is undefined if directly modified.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.configure_mappers" title="sqlalchemy.orm.configure_mappers"><code class="xref py py-func docutils literal notranslate"><span class="pre">configure_mappers()</span></code></a>.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.entity">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">entity</span></span><a class="headerlink" href="#sqlalchemy.orm.Mapper.entity" title="Link to this definition">¶</a></dt>
<dd><p>Part of the inspection API.</p>
<p>Returns self.class_.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.get_property">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">get_property</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_configure_mappers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="internals.html#sqlalchemy.orm.MapperProperty" title="sqlalchemy.orm.interfaces.MapperProperty"><span class="pre">MapperProperty</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.Mapper.get_property" title="Link to this definition">¶</a></dt>
<dd><p>return a MapperProperty associated with the given key.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.get_property_by_column">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">get_property_by_column</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.ColumnElement" title="sqlalchemy.sql.expression.ColumnElement"><span class="pre">ColumnElement</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="internals.html#sqlalchemy.orm.MapperProperty" title="sqlalchemy.orm.MapperProperty"><span class="pre">MapperProperty</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.Mapper.get_property_by_column" title="Link to this definition">¶</a></dt>
<dd><p>Given a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> object, return the
<a class="reference internal" href="internals.html#sqlalchemy.orm.MapperProperty" title="sqlalchemy.orm.MapperProperty"><code class="xref py py-class docutils literal notranslate"><span class="pre">MapperProperty</span></code></a> which maps this column.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.identity_key_from_instance">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">identity_key_from_instance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_O</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_IdentityKeyType</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.Mapper.identity_key_from_instance" title="Link to this definition">¶</a></dt>
<dd><p>Return the identity key for the given instance, based on
its primary key attributes.</p>
<p>If the instance’s state is expired, calling this method
will result in a database check to see if the object has been deleted.
If the row no longer exists,
<a class="reference internal" href="exceptions.html#sqlalchemy.orm.exc.ObjectDeletedError" title="sqlalchemy.orm.exc.ObjectDeletedError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ObjectDeletedError</span></code></a> is raised.</p>
<p>This value is typically also found on the instance state under the
attribute name <cite>key</cite>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.identity_key_from_primary_key">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">identity_key_from_primary_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">primary_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.Tuple" title="sqlalchemy.sql.expression.Tuple"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identity_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_IdentityKeyType</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.Mapper.identity_key_from_primary_key" title="Link to this definition">¶</a></dt>
<dd><p>Return an identity-map key for use in storing/retrieving an
item from an identity map.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.orm.Mapper.identity_key_from_primary_key.params.primary_key"></span><strong>primary_key</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.identity_key_from_primary_key.params.primary_key">¶</a> – A list of values indicating the identifier.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.identity_key_from_row">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">identity_key_from_row</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">row</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><span class="pre">Row</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Unpack</span><span class="p"><span class="pre">[</span></span><span class="pre">TupleAny</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../core/connections.html#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><span class="pre">RowMapping</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">identity_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adapter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ORMAdapter</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_IdentityKeyType</span><span class="p"><span class="pre">[</span></span><span class="pre">_O</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.Mapper.identity_key_from_row" title="Link to this definition">¶</a></dt>
<dd><p>Return an identity-map key for use in storing/retrieving an
item from the identity map.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.orm.Mapper.identity_key_from_row.params.row"></span><strong>row</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.Mapper.identity_key_from_row.params.row">¶</a> – <p>A <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> or <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> produced from a
result set that selected from the ORM mapped primary key columns.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 2.0 版本发生变更: </span><a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Row" title="sqlalchemy.engine.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> or <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.RowMapping" title="sqlalchemy.engine.RowMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowMapping</span></code></a> are accepted
for the “row” argument</p>
</div>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.inherits">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">inherits</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><span class="pre">Mapper</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.orm.Mapper.inherits" title="Link to this definition">¶</a></dt>
<dd><p>References the <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> which this <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a>
inherits from, if any.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.is_mapper">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">is_mapper</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#sqlalchemy.orm.Mapper.is_mapper" title="Link to this definition">¶</a></dt>
<dd><p>Part of the inspection API.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.is_sibling">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">is_sibling</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.mapper.Mapper"><span class="pre">Mapper</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Mapper.is_sibling" title="Link to this definition">¶</a></dt>
<dd><p>return true if the other mapper is an inheriting sibling to this
one.  common parent but different branch</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.isa">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">isa</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.mapper.Mapper"><span class="pre">Mapper</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sqlalchemy.orm.Mapper.isa" title="Link to this definition">¶</a></dt>
<dd><p>Return True if the this mapper inherits from the given mapper.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.iterate_properties">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">iterate_properties</span></span><a class="headerlink" href="#sqlalchemy.orm.Mapper.iterate_properties" title="Link to this definition">¶</a></dt>
<dd><p>return an iterator of all MapperProperty objects.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.local_table">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">local_table</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.FromClause" title="sqlalchemy.sql.expression.FromClause"><span class="pre">FromClause</span></a></em><a class="headerlink" href="#sqlalchemy.orm.Mapper.local_table" title="Link to this definition">¶</a></dt>
<dd><p>The immediate <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.FromClause" title="sqlalchemy.sql.expression.FromClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">FromClause</span></code></a> to which this
<a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> refers.</p>
<p>Typically is an instance of <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>, may be any
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.FromClause" title="sqlalchemy.sql.expression.FromClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">FromClause</span></code></a>.</p>
<p>The “local” table is the
selectable that the <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> is directly responsible for
managing from an attribute access and flush perspective.   For
non-inheriting mappers, <a class="reference internal" href="#sqlalchemy.orm.Mapper.local_table" title="sqlalchemy.orm.Mapper.local_table"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.local_table</span></code></a> will be the same
as <a class="reference internal" href="#sqlalchemy.orm.Mapper.persist_selectable" title="sqlalchemy.orm.Mapper.persist_selectable"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.persist_selectable</span></code></a>.  For inheriting mappers,
<a class="reference internal" href="#sqlalchemy.orm.Mapper.local_table" title="sqlalchemy.orm.Mapper.local_table"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.local_table</span></code></a> refers to the specific portion of
<a class="reference internal" href="#sqlalchemy.orm.Mapper.persist_selectable" title="sqlalchemy.orm.Mapper.persist_selectable"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.persist_selectable</span></code></a> that includes the columns to which
this <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> is loading/persisting, such as a particular
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> within a join.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.Mapper.persist_selectable" title="sqlalchemy.orm.Mapper.persist_selectable"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.persist_selectable</span></code></a>.</p>
<p><a class="reference internal" href="#sqlalchemy.orm.Mapper.selectable" title="sqlalchemy.orm.Mapper.selectable"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.selectable</span></code></a>.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.mapper">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">mapper</span></span><a class="headerlink" href="#sqlalchemy.orm.Mapper.mapper" title="Link to this definition">¶</a></dt>
<dd><p>Part of the inspection API.</p>
<p>Returns self.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.persist_selectable">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">persist_selectable</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.FromClause" title="sqlalchemy.sql.expression.FromClause"><span class="pre">FromClause</span></a></em><a class="headerlink" href="#sqlalchemy.orm.Mapper.persist_selectable" title="Link to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.FromClause" title="sqlalchemy.sql.expression.FromClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">FromClause</span></code></a> to which this <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a>
is mapped.</p>
<p>Typically is an instance of <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>, may be any
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.FromClause" title="sqlalchemy.sql.expression.FromClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">FromClause</span></code></a>.</p>
<p>The <a class="reference internal" href="#sqlalchemy.orm.Mapper.persist_selectable" title="sqlalchemy.orm.Mapper.persist_selectable"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.persist_selectable</span></code></a> is similar to
<a class="reference internal" href="#sqlalchemy.orm.Mapper.local_table" title="sqlalchemy.orm.Mapper.local_table"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.local_table</span></code></a>, but represents the <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.FromClause" title="sqlalchemy.sql.expression.FromClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">FromClause</span></code></a> that
represents the inheriting class hierarchy overall in an inheritance
scenario.</p>
<p>:attr.`.Mapper.persist_selectable` is also separate from the
<a class="reference internal" href="#sqlalchemy.orm.Mapper.selectable" title="sqlalchemy.orm.Mapper.selectable"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.selectable</span></code></a> attribute, the latter of which may be an
alternate subquery used for selecting columns.
:attr.`.Mapper.persist_selectable` is oriented towards columns that
will be written on a persist operation.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.Mapper.selectable" title="sqlalchemy.orm.Mapper.selectable"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.selectable</span></code></a>.</p>
<p><a class="reference internal" href="#sqlalchemy.orm.Mapper.local_table" title="sqlalchemy.orm.Mapper.local_table"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.local_table</span></code></a>.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.polymorphic_identity">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">polymorphic_identity</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.orm.Mapper.polymorphic_identity" title="Link to this definition">¶</a></dt>
<dd><p>Represent an identifier which is matched against the
<a class="reference internal" href="#sqlalchemy.orm.Mapper.polymorphic_on" title="sqlalchemy.orm.Mapper.polymorphic_on"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.polymorphic_on</span></code></a> column during result row loading.</p>
<p>Used only with inheritance, this object can be of any type which is
comparable to the type of column represented by
<a class="reference internal" href="#sqlalchemy.orm.Mapper.polymorphic_on" title="sqlalchemy.orm.Mapper.polymorphic_on"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.polymorphic_on</span></code></a>.</p>
<p>This is a <em>read only</em> attribute determined during mapper construction.
Behavior is undefined if directly modified.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.polymorphic_iterator">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">polymorphic_iterator</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.mapper.Mapper"><span class="pre">Mapper</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.Mapper.polymorphic_iterator" title="Link to this definition">¶</a></dt>
<dd><p>Iterate through the collection including this mapper and
all descendant mappers.</p>
<p>This includes not just the immediately inheriting mappers but
all their inheriting mappers as well.</p>
<p>To iterate through an entire hierarchy, use
<code class="docutils literal notranslate"><span class="pre">mapper.base_mapper.polymorphic_iterator()</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.polymorphic_map">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">polymorphic_map</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><span class="pre">Mapper</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.orm.Mapper.polymorphic_map" title="Link to this definition">¶</a></dt>
<dd><p>A mapping of “polymorphic identity” identifiers mapped to
<a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> instances, within an inheritance scenario.</p>
<p>The identifiers can be of any type which is comparable to the
type of column represented by <a class="reference internal" href="#sqlalchemy.orm.Mapper.polymorphic_on" title="sqlalchemy.orm.Mapper.polymorphic_on"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.polymorphic_on</span></code></a>.</p>
<p>An inheritance chain of mappers will all reference the same
polymorphic map object.  The object is used to correlate incoming
result rows to target mappers.</p>
<p>This is a <em>read only</em> attribute determined during mapper construction.
Behavior is undefined if directly modified.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.polymorphic_on">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">polymorphic_on</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">KeyedColumnElement</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sqlalchemy.orm.Mapper.polymorphic_on" title="Link to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> or SQL expression specified as the
<code class="docutils literal notranslate"><span class="pre">polymorphic_on</span></code> argument
for this <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a>, within an inheritance scenario.</p>
<p>This attribute is normally a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> instance but
may also be an expression, such as one derived from
<a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.cast" title="sqlalchemy.sql.expression.cast"><code class="xref py py-func docutils literal notranslate"><span class="pre">cast()</span></code></a>.</p>
<p>This is a <em>read only</em> attribute determined during mapper construction.
Behavior is undefined if directly modified.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.primary_key">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">primary_key</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.Tuple" title="sqlalchemy.sql.expression.Tuple"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><span class="pre">Column</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.orm.Mapper.primary_key" title="Link to this definition">¶</a></dt>
<dd><p>An iterable containing the collection of <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
objects
which comprise the ‘primary key’ of the mapped table, from the
perspective of this <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a>.</p>
<p>This list is against the selectable in
<a class="reference internal" href="#sqlalchemy.orm.Mapper.persist_selectable" title="sqlalchemy.orm.Mapper.persist_selectable"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.persist_selectable</span></code></a>.
In the case of inheriting mappers, some columns may be managed by a
superclass mapper.  For example, in the case of a
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Join" title="sqlalchemy.sql.expression.Join"><code class="xref py py-class docutils literal notranslate"><span class="pre">Join</span></code></a>, the
primary key is determined by all of the primary key columns across all
tables referenced by the <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Join" title="sqlalchemy.sql.expression.Join"><code class="xref py py-class docutils literal notranslate"><span class="pre">Join</span></code></a>.</p>
<p>The list is also not necessarily the same as the primary key column
collection associated with the underlying tables; the <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a>
features a <code class="docutils literal notranslate"><span class="pre">primary_key</span></code> argument that can override what the
<a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> considers as primary key columns.</p>
<p>This is a <em>read only</em> attribute determined during mapper construction.
Behavior is undefined if directly modified.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.primary_key_from_instance">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">primary_key_from_instance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_O</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.Mapper.primary_key_from_instance" title="Link to this definition">¶</a></dt>
<dd><p>Return the list of primary key values for the given
instance.</p>
<p>If the instance’s state is expired, calling this method
will result in a database check to see if the object has been deleted.
If the row no longer exists,
<a class="reference internal" href="exceptions.html#sqlalchemy.orm.exc.ObjectDeletedError" title="sqlalchemy.orm.exc.ObjectDeletedError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ObjectDeletedError</span></code></a> is raised.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.primary_mapper">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">primary_mapper</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.mapper.Mapper"><span class="pre">Mapper</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.orm.Mapper.primary_mapper" title="Link to this definition">¶</a></dt>
<dd><p>Return the primary mapper corresponding to this mapper’s class key
(class).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.relationships">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">relationships</span></span><a class="headerlink" href="#sqlalchemy.orm.Mapper.relationships" title="Link to this definition">¶</a></dt>
<dd><p>A namespace of all <a class="reference internal" href="internals.html#sqlalchemy.orm.Relationship" title="sqlalchemy.orm.Relationship"><code class="xref py py-class docutils literal notranslate"><span class="pre">Relationship</span></code></a> properties
maintained by this <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a>.</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>the <a class="reference internal" href="#sqlalchemy.orm.Mapper.relationships" title="sqlalchemy.orm.Mapper.relationships"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.relationships</span></code></a> accessor namespace is an
instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">OrderedProperties</span></code>.  This is
a dictionary-like object which includes a small number of
named methods such as <code class="xref py py-meth docutils literal notranslate"><span class="pre">OrderedProperties.items()</span></code>
and <code class="xref py py-meth docutils literal notranslate"><span class="pre">OrderedProperties.values()</span></code>.  When
accessing attributes dynamically, favor using the dict-access
scheme, e.g. <code class="docutils literal notranslate"><span class="pre">mapper.relationships[somename]</span></code> over
<code class="docutils literal notranslate"><span class="pre">getattr(mapper.relationships,</span> <span class="pre">somename)</span></code> to avoid name
collisions.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.Mapper.attrs" title="sqlalchemy.orm.Mapper.attrs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.attrs</span></code></a> - namespace of all
<a class="reference internal" href="internals.html#sqlalchemy.orm.MapperProperty" title="sqlalchemy.orm.MapperProperty"><code class="xref py py-class docutils literal notranslate"><span class="pre">MapperProperty</span></code></a>
objects.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.selectable">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">selectable</span></span><a class="headerlink" href="#sqlalchemy.orm.Mapper.selectable" title="Link to this definition">¶</a></dt>
<dd><p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">FromClause</span></code> construct this
<a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> selects from by default.</p>
<p>Normally, this is equivalent to <a class="reference internal" href="#sqlalchemy.orm.Mapper.persist_selectable" title="sqlalchemy.orm.Mapper.persist_selectable"><code class="xref py py-attr docutils literal notranslate"><span class="pre">persist_selectable</span></code></a>, unless
the <code class="docutils literal notranslate"><span class="pre">with_polymorphic</span></code> feature is in use, in which case the
full “polymorphic” selectable is returned.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.self_and_descendants">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">self_and_descendants</span></span><a class="headerlink" href="#sqlalchemy.orm.Mapper.self_and_descendants" title="Link to this definition">¶</a></dt>
<dd><p>The collection including this mapper and all descendant mappers.</p>
<p>This includes not just the immediately inheriting mappers but
all their inheriting mappers as well.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.single">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">single</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#sqlalchemy.orm.Mapper.single" title="Link to this definition">¶</a></dt>
<dd><p>Represent <code class="docutils literal notranslate"><span class="pre">True</span></code> if this <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> is a single table
inheritance mapper.</p>
<p><a class="reference internal" href="#sqlalchemy.orm.Mapper.local_table" title="sqlalchemy.orm.Mapper.local_table"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.local_table</span></code></a> will be <code class="docutils literal notranslate"><span class="pre">None</span></code> if this flag is set.</p>
<p>This is a <em>read only</em> attribute determined during mapper construction.
Behavior is undefined if directly modified.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.synonyms">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">synonyms</span></span><a class="headerlink" href="#sqlalchemy.orm.Mapper.synonyms" title="Link to this definition">¶</a></dt>
<dd><p>Return a namespace of all <a class="reference internal" href="internals.html#sqlalchemy.orm.Synonym" title="sqlalchemy.orm.Synonym"><code class="xref py py-class docutils literal notranslate"><span class="pre">Synonym</span></code></a>
properties maintained by this <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#sqlalchemy.orm.Mapper.attrs" title="sqlalchemy.orm.Mapper.attrs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapper.attrs</span></code></a> - namespace of all
<a class="reference internal" href="internals.html#sqlalchemy.orm.MapperProperty" title="sqlalchemy.orm.MapperProperty"><code class="xref py py-class docutils literal notranslate"><span class="pre">MapperProperty</span></code></a>
objects.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.tables">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">tables</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../core/defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.TableClause" title="sqlalchemy.sql.expression.TableClause"><span class="pre">TableClause</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.orm.Mapper.tables" title="Link to this definition">¶</a></dt>
<dd><p>A sequence containing the collection of <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
or <code class="xref py py-class docutils literal notranslate"><span class="pre">TableClause</span></code> objects which this <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a>
is aware of.</p>
<p>If the mapper is mapped to a <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Join" title="sqlalchemy.sql.expression.Join"><code class="xref py py-class docutils literal notranslate"><span class="pre">Join</span></code></a>, or an
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Alias" title="sqlalchemy.sql.expression.Alias"><code class="xref py py-class docutils literal notranslate"><span class="pre">Alias</span></code></a>
representing a <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal notranslate"><span class="pre">Select</span></code></a>, the individual
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
objects that comprise the full construct will be represented here.</p>
<p>This is a <em>read only</em> attribute determined during mapper construction.
Behavior is undefined if directly modified.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.validators">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">validators</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">util.immutabledict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.Tuple" title="sqlalchemy.sql.expression.Tuple"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sqlalchemy.orm.Mapper.validators" title="Link to this definition">¶</a></dt>
<dd><p>An immutable dictionary of attributes which have been decorated
using the <a class="reference internal" href="mapped_attributes.html#sqlalchemy.orm.validates" title="sqlalchemy.orm.validates"><code class="xref py py-func docutils literal notranslate"><span class="pre">validates()</span></code></a> decorator.</p>
<p>The dictionary contains string attribute names as keys
mapped to the actual validation method.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.orm.Mapper.with_polymorphic_mappers">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.Mapper.</span></code></a><span class="sig-name descname"><span class="pre">with_polymorphic_mappers</span></span><a class="headerlink" href="#sqlalchemy.orm.Mapper.with_polymorphic_mappers" title="Link to this definition">¶</a></dt>
<dd><p>The list of <a class="reference internal" href="#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> objects included in the
default “polymorphic” query.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.orm.MappedAsDataclass">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">MappedAsDataclass</span></span><a class="headerlink" href="#sqlalchemy.orm.MappedAsDataclass" title="Link to this definition">¶</a></dt>
<dd><p>Mixin class to indicate when mapping this class, also convert it to be
a dataclass.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="dataclasses.html#orm-declarative-native-dataclasses"><span class="std std-ref">声明式Dataclass映射</span></a> - complete background
on SQLAlchemy native dataclass mapping</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">在 2.0 版本加入.</span></p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.orm.MappedClassProtocol">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.orm.</span></span><span class="sig-name descname"><span class="pre">MappedClassProtocol</span></span><a class="headerlink" href="#sqlalchemy.orm.MappedClassProtocol" title="Link to this definition">¶</a></dt>
<dd><p>A protocol representing a SQLAlchemy mapped class.</p>
<p>The protocol is generic on the type of class, use
<code class="docutils literal notranslate"><span class="pre">MappedClassProtocol[Any]</span></code> to allow any mapped class.</p>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.orm.MappedClassProtocol" title="sqlalchemy.orm.MappedClassProtocol"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.orm.MappedClassProtocol</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Protocol</span></code>)</p>
</div>
</dd></dl>

</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="scalar_mapping.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">映射 SQL 表达式</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="versioning.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">配置版本计数器</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                <a href="../copyright.html">Copyright</a> &#169; 2007-2025, the SQLAlchemy authors and contributors
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on 04/05/2025 04:00:26</div>
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">类映射 API</a><ul>
<li><a class="reference internal" href="#sqlalchemy.orm.registry"><code class="docutils literal notranslate"><span class="pre">registry</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.orm.registry.__init__"><code class="docutils literal notranslate"><span class="pre">registry.__init__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.registry.as_declarative_base"><code class="docutils literal notranslate"><span class="pre">registry.as_declarative_base()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.registry.configure"><code class="docutils literal notranslate"><span class="pre">registry.configure()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.registry.dispose"><code class="docutils literal notranslate"><span class="pre">registry.dispose()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.registry.generate_base"><code class="docutils literal notranslate"><span class="pre">registry.generate_base()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.registry.map_declaratively"><code class="docutils literal notranslate"><span class="pre">registry.map_declaratively()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.registry.map_imperatively"><code class="docutils literal notranslate"><span class="pre">registry.map_imperatively()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.registry.mapped"><code class="docutils literal notranslate"><span class="pre">registry.mapped()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.registry.mapped_as_dataclass"><code class="docutils literal notranslate"><span class="pre">registry.mapped_as_dataclass()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.registry.mappers"><code class="docutils literal notranslate"><span class="pre">registry.mappers</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.registry.update_type_annotation_map"><code class="docutils literal notranslate"><span class="pre">registry.update_type_annotation_map()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.orm.add_mapped_attribute"><code class="docutils literal notranslate"><span class="pre">add_mapped_attribute()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.column_property"><code class="docutils literal notranslate"><span class="pre">column_property()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.declarative_base"><code class="docutils literal notranslate"><span class="pre">declarative_base()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.declarative_mixin"><code class="docutils literal notranslate"><span class="pre">declarative_mixin()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.as_declarative"><code class="docutils literal notranslate"><span class="pre">as_declarative()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.mapped_column"><code class="docutils literal notranslate"><span class="pre">mapped_column()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.declared_attr"><code class="docutils literal notranslate"><span class="pre">declared_attr</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.orm.declared_attr.cascading"><code class="docutils literal notranslate"><span class="pre">declared_attr.cascading</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.declared_attr.directive"><code class="docutils literal notranslate"><span class="pre">declared_attr.directive</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase"><code class="docutils literal notranslate"><span class="pre">DeclarativeBase</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase.__mapper__"><code class="docutils literal notranslate"><span class="pre">DeclarativeBase.__mapper__</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase.__mapper_args__"><code class="docutils literal notranslate"><span class="pre">DeclarativeBase.__mapper_args__</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase.__table__"><code class="docutils literal notranslate"><span class="pre">DeclarativeBase.__table__</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase.__table_args__"><code class="docutils literal notranslate"><span class="pre">DeclarativeBase.__table_args__</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase.__tablename__"><code class="docutils literal notranslate"><span class="pre">DeclarativeBase.__tablename__</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase.metadata"><code class="docutils literal notranslate"><span class="pre">DeclarativeBase.metadata</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBase.registry"><code class="docutils literal notranslate"><span class="pre">DeclarativeBase.registry</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBaseNoMeta"><code class="docutils literal notranslate"><span class="pre">DeclarativeBaseNoMeta</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBaseNoMeta.__mapper__"><code class="docutils literal notranslate"><span class="pre">DeclarativeBaseNoMeta.__mapper__</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBaseNoMeta.__mapper_args__"><code class="docutils literal notranslate"><span class="pre">DeclarativeBaseNoMeta.__mapper_args__</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBaseNoMeta.__table__"><code class="docutils literal notranslate"><span class="pre">DeclarativeBaseNoMeta.__table__</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBaseNoMeta.__table_args__"><code class="docutils literal notranslate"><span class="pre">DeclarativeBaseNoMeta.__table_args__</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBaseNoMeta.__tablename__"><code class="docutils literal notranslate"><span class="pre">DeclarativeBaseNoMeta.__tablename__</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBaseNoMeta.metadata"><code class="docutils literal notranslate"><span class="pre">DeclarativeBaseNoMeta.metadata</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.DeclarativeBaseNoMeta.registry"><code class="docutils literal notranslate"><span class="pre">DeclarativeBaseNoMeta.registry</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.orm.has_inherited_table"><code class="docutils literal notranslate"><span class="pre">has_inherited_table()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.synonym_for"><code class="docutils literal notranslate"><span class="pre">synonym_for()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.object_mapper"><code class="docutils literal notranslate"><span class="pre">object_mapper()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.class_mapper"><code class="docutils literal notranslate"><span class="pre">class_mapper()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.configure_mappers"><code class="docutils literal notranslate"><span class="pre">configure_mappers()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.clear_mappers"><code class="docutils literal notranslate"><span class="pre">clear_mappers()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.util.identity_key"><code class="docutils literal notranslate"><span class="pre">identity_key()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.polymorphic_union"><code class="docutils literal notranslate"><span class="pre">polymorphic_union()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.orm_insert_sentinel"><code class="docutils literal notranslate"><span class="pre">orm_insert_sentinel()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.reconstructor"><code class="docutils literal notranslate"><span class="pre">reconstructor()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper"><code class="docutils literal notranslate"><span class="pre">Mapper</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.__init__"><code class="docutils literal notranslate"><span class="pre">Mapper.__init__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.add_properties"><code class="docutils literal notranslate"><span class="pre">Mapper.add_properties()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.add_property"><code class="docutils literal notranslate"><span class="pre">Mapper.add_property()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.all_orm_descriptors"><code class="docutils literal notranslate"><span class="pre">Mapper.all_orm_descriptors</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.attrs"><code class="docutils literal notranslate"><span class="pre">Mapper.attrs</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.base_mapper"><code class="docutils literal notranslate"><span class="pre">Mapper.base_mapper</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.c"><code class="docutils literal notranslate"><span class="pre">Mapper.c</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.cascade_iterator"><code class="docutils literal notranslate"><span class="pre">Mapper.cascade_iterator()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.class_"><code class="docutils literal notranslate"><span class="pre">Mapper.class_</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.class_manager"><code class="docutils literal notranslate"><span class="pre">Mapper.class_manager</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.column_attrs"><code class="docutils literal notranslate"><span class="pre">Mapper.column_attrs</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.columns"><code class="docutils literal notranslate"><span class="pre">Mapper.columns</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.common_parent"><code class="docutils literal notranslate"><span class="pre">Mapper.common_parent()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.composites"><code class="docutils literal notranslate"><span class="pre">Mapper.composites</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.concrete"><code class="docutils literal notranslate"><span class="pre">Mapper.concrete</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.configured"><code class="docutils literal notranslate"><span class="pre">Mapper.configured</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.entity"><code class="docutils literal notranslate"><span class="pre">Mapper.entity</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.get_property"><code class="docutils literal notranslate"><span class="pre">Mapper.get_property()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.get_property_by_column"><code class="docutils literal notranslate"><span class="pre">Mapper.get_property_by_column()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.identity_key_from_instance"><code class="docutils literal notranslate"><span class="pre">Mapper.identity_key_from_instance()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.identity_key_from_primary_key"><code class="docutils literal notranslate"><span class="pre">Mapper.identity_key_from_primary_key()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.identity_key_from_row"><code class="docutils literal notranslate"><span class="pre">Mapper.identity_key_from_row()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.inherits"><code class="docutils literal notranslate"><span class="pre">Mapper.inherits</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.is_mapper"><code class="docutils literal notranslate"><span class="pre">Mapper.is_mapper</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.is_sibling"><code class="docutils literal notranslate"><span class="pre">Mapper.is_sibling()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.isa"><code class="docutils literal notranslate"><span class="pre">Mapper.isa()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.iterate_properties"><code class="docutils literal notranslate"><span class="pre">Mapper.iterate_properties</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.local_table"><code class="docutils literal notranslate"><span class="pre">Mapper.local_table</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.mapper"><code class="docutils literal notranslate"><span class="pre">Mapper.mapper</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.persist_selectable"><code class="docutils literal notranslate"><span class="pre">Mapper.persist_selectable</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.polymorphic_identity"><code class="docutils literal notranslate"><span class="pre">Mapper.polymorphic_identity</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.polymorphic_iterator"><code class="docutils literal notranslate"><span class="pre">Mapper.polymorphic_iterator()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.polymorphic_map"><code class="docutils literal notranslate"><span class="pre">Mapper.polymorphic_map</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.polymorphic_on"><code class="docutils literal notranslate"><span class="pre">Mapper.polymorphic_on</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.primary_key"><code class="docutils literal notranslate"><span class="pre">Mapper.primary_key</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.primary_key_from_instance"><code class="docutils literal notranslate"><span class="pre">Mapper.primary_key_from_instance()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.primary_mapper"><code class="docutils literal notranslate"><span class="pre">Mapper.primary_mapper()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.relationships"><code class="docutils literal notranslate"><span class="pre">Mapper.relationships</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.selectable"><code class="docutils literal notranslate"><span class="pre">Mapper.selectable</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.self_and_descendants"><code class="docutils literal notranslate"><span class="pre">Mapper.self_and_descendants</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.single"><code class="docutils literal notranslate"><span class="pre">Mapper.single</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.synonyms"><code class="docutils literal notranslate"><span class="pre">Mapper.synonyms</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.tables"><code class="docutils literal notranslate"><span class="pre">Mapper.tables</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.validators"><code class="docutils literal notranslate"><span class="pre">Mapper.validators</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.Mapper.with_polymorphic_mappers"><code class="docutils literal notranslate"><span class="pre">Mapper.with_polymorphic_mappers</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.orm.MappedAsDataclass"><code class="docutils literal notranslate"><span class="pre">MappedAsDataclass</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.orm.MappedClassProtocol"><code class="docutils literal notranslate"><span class="pre">MappedClassProtocol</span></code></a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=2d0eb83f"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../_static/tabs.js?v=3ee01567"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=2f3e6152"></script>
    <script src="../_static/translations.js?v=beaddf03"></script>
    </body>
</html>